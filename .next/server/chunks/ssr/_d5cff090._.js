module.exports=[13592,a=>{"use strict";var b,c,d=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,e=(b=function(a){return d.test(a)||111===a.charCodeAt(0)&&110===a.charCodeAt(1)&&91>a.charCodeAt(2)},c=Object.create(null),function(a){return void 0===c[a]&&(c[a]=b(a)),c[a]});a.s(["default",()=>e],13592)},14875,a=>{"use strict";var b=function(a,c){return(b=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,c)};function c(a,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=a}b(a,c),a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}var d=function(){return(d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function e(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function f(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}function g(a,b){return function(c,d){b(c,d,a)}}function h(a,b,c,d,e,f){function g(a){if(void 0!==a&&"function"!=typeof a)throw TypeError("Function expected");return a}for(var h,i=d.kind,j="getter"===i?"get":"setter"===i?"set":"value",k=!b&&a?d.static?a:a.prototype:null,l=b||(k?Object.getOwnPropertyDescriptor(k,d.name):{}),m=!1,n=c.length-1;n>=0;n--){var o={};for(var p in d)o[p]="access"===p?{}:d[p];for(var p in d.access)o.access[p]=d.access[p];o.addInitializer=function(a){if(m)throw TypeError("Cannot add initializers after decoration has completed");f.push(g(a||null))};var q=(0,c[n])("accessor"===i?{get:l.get,set:l.set}:l[j],o);if("accessor"===i){if(void 0===q)continue;if(null===q||"object"!=typeof q)throw TypeError("Object expected");(h=g(q.get))&&(l.get=h),(h=g(q.set))&&(l.set=h),(h=g(q.init))&&e.unshift(h)}else(h=g(q))&&("field"===i?e.unshift(h):l[j]=h)}k&&Object.defineProperty(k,d.name,l),m=!0}function i(a,b,c){for(var d=arguments.length>2,e=0;e<b.length;e++)c=d?b[e].call(a,c):b[e].call(a);return d?c:void 0}function j(a){return"symbol"==typeof a?a:"".concat(a)}function k(a,b,c){return"symbol"==typeof b&&(b=b.description?"[".concat(b.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:c?"".concat(c," ",b):b})}function l(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)}function m(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function n(a,b){var c,d,e,f={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=h(0),g.throw=h(1),g.return=h(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;g&&(g=0,j[0]&&(f=0)),f;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return f.label++,{value:j[1],done:!1};case 5:f.label++,d=j[1],j=[0];continue;case 7:j=f.ops.pop(),f.trys.pop();continue;default:if(!(e=(e=f.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){f=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){f.label=j[1];break}if(6===j[0]&&f.label<e[1]){f.label=e[1],e=j;break}if(e&&f.label<e[2]){f.label=e[2],f.ops.push(j);break}e[2]&&f.ops.pop(),f.trys.pop();continue}j=b.call(a,f)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}}var o=Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]};function p(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||o(b,a,c)}function q(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g}function s(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(r(arguments[b]));return a}function t(){for(var a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(var d=Array(a),e=0,b=0;b<c;b++)for(var f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d}function u(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}function v(a){return this instanceof v?(this.v=a,this):new v(a)}function w(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",function(a){return function(b){return Promise.resolve(b).then(a,j)}}),d[Symbol.asyncIterator]=function(){return this},d;function g(a,b){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})},b&&(d[a]=b(d[a])))}function h(a,b){try{var c;(c=e[a](b)).value instanceof v?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}function x(a){var b,c;return b={},d("next"),d("throw",function(a){throw a}),d("return"),b[Symbol.iterator]=function(){return this},b;function d(d,e){b[d]=a[d]?function(b){return(c=!c)?{value:v(a[d](b)),done:!1}:e?e(b):b}:e}}function y(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a=q(a),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}}function z(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a}var A=Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b},B=function(a){return(B=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)};function C(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=B(a),d=0;d<c.length;d++)"default"!==c[d]&&o(b,a,c[d]);return A(b,a),b}function D(a){return a&&a.__esModule?a:{default:a}}function E(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)}function F(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c}function G(a,b){if(null===b||"object"!=typeof b&&"function"!=typeof b)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof a?b===a:a.has(b)}function H(a,b,c){if(null!=b){var d,e;if("object"!=typeof b&&"function"!=typeof b)throw TypeError("Object expected.");if(c){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");d=b[Symbol.asyncDispose]}if(void 0===d){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");d=b[Symbol.dispose],c&&(e=d)}if("function"!=typeof d)throw TypeError("Object not disposable.");e&&(d=function(){try{e.call(this)}catch(a){return Promise.reject(a)}}),a.stack.push({value:b,dispose:d,async:c})}else c&&a.stack.push({async:!0});return b}var I="function"==typeof SuppressedError?SuppressedError:function(a,b,c){var d=Error(c);return d.name="SuppressedError",d.error=a,d.suppressed=b,d};function J(a){function b(b){a.error=a.hasError?new I(b,a.error,"An error was suppressed during disposal."):b,a.hasError=!0}var c,d=0;return function e(){for(;c=a.stack.pop();)try{if(!c.async&&1===d)return d=0,a.stack.push(c),Promise.resolve().then(e);if(c.dispose){var f=c.dispose.call(c.value);if(c.async)return d|=2,Promise.resolve(f).then(e,function(a){return b(a),e()})}else d|=1}catch(a){b(a)}if(1===d)return a.hasError?Promise.reject(a.error):Promise.resolve();if(a.hasError)throw a.error}()}function K(a,b){return"string"==typeof a&&/^\.\.?\//.test(a)?a.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,c,d,e,f){return c?b?".jsx":".js":!d||e&&f?d+e+"."+f.toLowerCase()+"js":a}):a}let L={__extends:c,__assign:d,__rest:e,__decorate:f,__param:g,__esDecorate:h,__runInitializers:i,__propKey:j,__setFunctionName:k,__metadata:l,__awaiter:m,__generator:n,__createBinding:o,__exportStar:p,__values:q,__read:r,__spread:s,__spreadArrays:t,__spreadArray:u,__await:v,__asyncGenerator:w,__asyncDelegator:x,__asyncValues:y,__makeTemplateObject:z,__importStar:C,__importDefault:D,__classPrivateFieldGet:E,__classPrivateFieldSet:F,__classPrivateFieldIn:G,__addDisposableResource:H,__disposeResources:J,__rewriteRelativeImportExtension:K};a.s(["__addDisposableResource",()=>H,"__assign",()=>d,"__asyncDelegator",()=>x,"__asyncGenerator",()=>w,"__asyncValues",()=>y,"__await",()=>v,"__awaiter",()=>m,"__classPrivateFieldGet",()=>E,"__classPrivateFieldIn",()=>G,"__classPrivateFieldSet",()=>F,"__createBinding",()=>o,"__decorate",()=>f,"__disposeResources",()=>J,"__esDecorate",()=>h,"__exportStar",()=>p,"__extends",()=>c,"__generator",()=>n,"__importDefault",()=>D,"__importStar",()=>C,"__makeTemplateObject",()=>z,"__metadata",()=>l,"__param",()=>g,"__propKey",()=>j,"__read",()=>r,"__rest",()=>e,"__rewriteRelativeImportExtension",()=>K,"__runInitializers",()=>i,"__setFunctionName",()=>k,"__spread",()=>s,"__spreadArray",()=>u,"__spreadArrays",()=>t,"__values",()=>q,"default",0,L])},8983,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}},54229,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(14875).__importDefault(a.r(8983));c.default=class{constructor(a){var b,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=null!=(b=a.shouldThrowOnError)&&b,this.signal=a.signal,this.isMaybeSingle=null!=(c=a.isMaybeSingle)&&c,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,b){return this.headers=new Headers(this.headers),this.headers.set(a,b),this}then(a,b){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let c=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var b,c,e,f;let g=null,h=null,i=null,j=a.status,k=a.statusText;if(a.ok){if("HEAD"!==this.method){let c=await a.text();""===c||(h="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null==(b=this.headers.get("Accept"))?void 0:b.includes("application/vnd.pgrst.plan+text"))?c:JSON.parse(c))}let d=null==(c=this.headers.get("Prefer"))?void 0:c.match(/count=(exact|planned|estimated)/),f=null==(e=a.headers.get("content-range"))?void 0:e.split("/");d&&f&&f.length>1&&(i=parseInt(f[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(h)&&(h.length>1?(g={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,i=null,j=406,k="Not Acceptable"):h=1===h.length?h[0]:null)}else{let b=await a.text();try{g=JSON.parse(b),Array.isArray(g)&&404===a.status&&(h=[],g=null,j=200,k="OK")}catch(c){404===a.status&&""===b?(j=204,k="No Content"):g={message:b}}if(g&&this.isMaybeSingle&&(null==(f=null==g?void 0:g.details)?void 0:f.includes("0 rows"))&&(g=null,j=200,k="OK"),g&&this.shouldThrowOnError)throw new d.default(g)}return{error:g,data:h,count:i,status:j,statusText:k}});return this.shouldThrowOnError||(c=c.catch(a=>{var b,c,d,e,f,g;let h="",i=null==a?void 0:a.cause;if(i){let f=null!=(b=null==i?void 0:i.message)?b:"",g=null!=(c=null==i?void 0:i.code)?c:"";h=`${null!=(d=null==a?void 0:a.name)?d:"FetchError"}: ${null==a?void 0:a.message}

Caused by: ${null!=(e=null==i?void 0:i.name)?e:"Error"}: ${f}`,g&&(h+=` (${g})`),(null==i?void 0:i.stack)&&(h+=`
${i.stack}`)}else h=null!=(f=null==a?void 0:a.stack)?f:"";return{error:{message:`${null!=(g=null==a?void 0:a.name)?g:"FetchError"}: ${null==a?void 0:a.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(a,b)}returns(){return this}overrideTypes(){return this}}},13810,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(14875).__importDefault(a.r(54229));class e extends d.default{select(a){let b=!1,c=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!b?"":('"'===a&&(b=!b),a)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:b=!0,nullsFirst:c,foreignTable:d,referencedTable:e=d}={}){let f=e?`${e}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${a}.${b?"asc":"desc"}${void 0===c?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:b,referencedTable:c=b}={}){let d=void 0===c?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,b,{foreignTable:c,referencedTable:d=c}={}){let e=void 0===d?"offset":`${d}.offset`,f=void 0===d?"limit":`${d}.limit`;return this.url.searchParams.set(e,`${a}`),this.url.searchParams.set(f,`${b-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:b=!1,settings:c=!1,buffers:d=!1,wal:e=!1,format:f="text"}={}){var g;let h=[a?"analyze":null,b?"verbose":null,c?"settings":null,d?"buffers":null,e?"wal":null].filter(Boolean).join("|"),i=null!=(g=this.headers.get("Accept"))?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${i}"; options=${h};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}c.default=e},16359,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(14875).__importDefault(a.r(13810)),e=RegExp("[,()]");class f extends d.default{eq(a,b){return this.url.searchParams.append(a,`eq.${b}`),this}neq(a,b){return this.url.searchParams.append(a,`neq.${b}`),this}gt(a,b){return this.url.searchParams.append(a,`gt.${b}`),this}gte(a,b){return this.url.searchParams.append(a,`gte.${b}`),this}lt(a,b){return this.url.searchParams.append(a,`lt.${b}`),this}lte(a,b){return this.url.searchParams.append(a,`lte.${b}`),this}like(a,b){return this.url.searchParams.append(a,`like.${b}`),this}likeAllOf(a,b){return this.url.searchParams.append(a,`like(all).{${b.join(",")}}`),this}likeAnyOf(a,b){return this.url.searchParams.append(a,`like(any).{${b.join(",")}}`),this}ilike(a,b){return this.url.searchParams.append(a,`ilike.${b}`),this}ilikeAllOf(a,b){return this.url.searchParams.append(a,`ilike(all).{${b.join(",")}}`),this}ilikeAnyOf(a,b){return this.url.searchParams.append(a,`ilike(any).{${b.join(",")}}`),this}regexMatch(a,b){return this.url.searchParams.append(a,`match.${b}`),this}regexIMatch(a,b){return this.url.searchParams.append(a,`imatch.${b}`),this}is(a,b){return this.url.searchParams.append(a,`is.${b}`),this}isDistinct(a,b){return this.url.searchParams.append(a,`isdistinct.${b}`),this}in(a,b){let c=Array.from(new Set(b)).map(a=>"string"==typeof a&&e.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cs.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cs.{${b.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(b)}`),this}containedBy(a,b){return"string"==typeof b?this.url.searchParams.append(a,`cd.${b}`):Array.isArray(b)?this.url.searchParams.append(a,`cd.{${b.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(b)}`),this}rangeGt(a,b){return this.url.searchParams.append(a,`sr.${b}`),this}rangeGte(a,b){return this.url.searchParams.append(a,`nxl.${b}`),this}rangeLt(a,b){return this.url.searchParams.append(a,`sl.${b}`),this}rangeLte(a,b){return this.url.searchParams.append(a,`nxr.${b}`),this}rangeAdjacent(a,b){return this.url.searchParams.append(a,`adj.${b}`),this}overlaps(a,b){return"string"==typeof b?this.url.searchParams.append(a,`ov.${b}`):this.url.searchParams.append(a,`ov.{${b.join(",")}}`),this}textSearch(a,b,{config:c,type:d}={}){let e="";"plain"===d?e="pl":"phrase"===d?e="ph":"websearch"===d&&(e="w");let f=void 0===c?"":`(${c})`;return this.url.searchParams.append(a,`${e}fts${f}.${b}`),this}match(a){return Object.entries(a).forEach(([a,b])=>{this.url.searchParams.append(a,`eq.${b}`)}),this}not(a,b,c){return this.url.searchParams.append(a,`not.${b}.${c}`),this}or(a,{foreignTable:b,referencedTable:c=b}={}){let d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,b,c){return this.url.searchParams.append(a,`${b}.${c}`),this}}c.default=f},81486,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(14875).__importDefault(a.r(16359));c.default=class{constructor(a,{headers:b={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(b),this.schema=c,this.fetch=d}select(a,b){let{head:c=!1,count:e}=null!=b?b:{},f=!1,g=(null!=a?a:"*").split("").map(a=>/\s/.test(a)&&!f?"":('"'===a&&(f=!f),a)).join("");return this.url.searchParams.set("select",g),e&&this.headers.append("Prefer",`count=${e}`),new d.default({method:c?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:b,defaultToNull:c=!0}={}){var e;if(b&&this.headers.append("Prefer",`count=${b}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);this.url.searchParams.set("columns",a.join(","))}}return new d.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:null!=(e=this.fetch)?e:fetch})}upsert(a,{onConflict:b,ignoreDuplicates:c=!1,count:e,defaultToNull:f=!0}={}){var g;if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),void 0!==b&&this.url.searchParams.set("on_conflict",b),e&&this.headers.append("Prefer",`count=${e}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(a)){let b=a.reduce((a,b)=>a.concat(Object.keys(b)),[]);if(b.length>0){let a=[...new Set(b)].map(a=>`"${a}"`);this.url.searchParams.set("columns",a.join(","))}}return new d.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:null!=(g=this.fetch)?g:fetch})}update(a,{count:b}={}){var c;return b&&this.headers.append("Prefer",`count=${b}`),new d.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:null!=(c=this.fetch)?c:fetch})}delete({count:a}={}){var b;return a&&this.headers.append("Prefer",`count=${a}`),new d.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!=(b=this.fetch)?b:fetch})}}},82399,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(14875),e=d.__importDefault(a.r(81486)),f=d.__importDefault(a.r(16359));class g{constructor(a,{headers:b={},schema:c,fetch:d}={}){this.url=a,this.headers=new Headers(b),this.schemaName=c,this.fetch=d}from(a){if(!a||"string"!=typeof a||""===a.trim())throw Error("Invalid relation name: relation must be a non-empty string.");let b=new URL(`${this.url}/${a}`);return new e.default(b,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new g(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,b={},{head:c=!1,get:d=!1,count:e}={}){var g;let h,i,j=new URL(`${this.url}/rpc/${a}`);c||d?(h=c?"HEAD":"GET",Object.entries(b).filter(([a,b])=>void 0!==b).map(([a,b])=>[a,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([a,b])=>{j.searchParams.append(a,b)})):(h="POST",i=b);let k=new Headers(this.headers);return e&&k.set("Prefer",`count=${e}`),new f.default({method:h,url:j,headers:k,schema:this.schemaName,body:i,fetch:null!=(g=this.fetch)?g:fetch})}}c.default=g},56753,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.PostgrestError=c.PostgrestBuilder=c.PostgrestTransformBuilder=c.PostgrestFilterBuilder=c.PostgrestQueryBuilder=c.PostgrestClient=void 0;let d=a.r(14875),e=d.__importDefault(a.r(82399));c.PostgrestClient=e.default;let f=d.__importDefault(a.r(81486));c.PostgrestQueryBuilder=f.default;let g=d.__importDefault(a.r(16359));c.PostgrestFilterBuilder=g.default;let h=d.__importDefault(a.r(13810));c.PostgrestTransformBuilder=h.default;let i=d.__importDefault(a.r(54229));c.PostgrestBuilder=i.default;let j=d.__importDefault(a.r(8983));c.PostgrestError=j.default,c.default={PostgrestClient:e.default,PostgrestQueryBuilder:f.default,PostgrestFilterBuilder:g.default,PostgrestTransformBuilder:h.default,PostgrestBuilder:i.default,PostgrestError:j.default}},30695,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),c.parseCookie=l,c.parse=l,c.stringifyCookie=function(a,b){let c=b?.encode||encodeURIComponent,d=[];for(let b of Object.keys(a)){let g=a[b];if(void 0===g)continue;if(!e.test(b))throw TypeError(`cookie name is invalid: ${b}`);let h=c(g);if(!f.test(h))throw TypeError(`cookie val is invalid: ${g}`);d.push(`${b}=${h}`)}return d.join("; ")},c.stringifySetCookie=m,c.serialize=m,c.parseSetCookie=function(a,b){let c=b?.decode||q,d=a.length,e=n(a,0,d),f=o(a,0,e),g=-1===f?{name:"",value:c(p(a,0,e))}:{name:p(a,0,f),value:c(p(a,f+1,e))},h=e+1;for(;h<d;){let b=n(a,h,d),c=o(a,h,b),e=-1===c?p(a,h,b):p(a,h,c),f=-1===c?void 0:p(a,c+1,b);switch(e.toLowerCase()){case"httponly":g.httpOnly=!0;break;case"secure":g.secure=!0;break;case"partitioned":g.partitioned=!0;break;case"domain":g.domain=f;break;case"path":g.path=f;break;case"max-age":f&&i.test(f)&&(g.maxAge=Number(f));break;case"expires":if(!f)break;let j=new Date(f);Number.isFinite(j.valueOf())&&(g.expires=j);break;case"priority":if(!f)break;let k=f.toLowerCase();("low"===k||"medium"===k||"high"===k)&&(g.priority=k);break;case"samesite":if(!f)break;let l=f.toLowerCase();("lax"===l||"strict"===l||"none"===l)&&(g.sameSite=l)}h=b+1}return g},c.stringifySetCookie=m,c.serialize=m;let e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,f=/^[\u0021-\u003A\u003C-\u007E]*$/,g=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,h=/^[\u0020-\u003A\u003D-\u007E]*$/,i=/^-?\d+$/,j=Object.prototype.toString,k=((d=function(){}).prototype=Object.create(null),d);function l(a,b){let c=new k,d=a.length;if(d<2)return c;let e=b?.decode||q,f=0;do{let b=o(a,f,d);if(-1===b)break;let g=n(a,f,d);if(b>g){f=a.lastIndexOf(";",b-1)+1;continue}let h=p(a,f,b);void 0===c[h]&&(c[h]=e(p(a,b+1,g))),f=g+1}while(f<d)return c}function m(a,b,c){let d="object"==typeof a?a:{...c,name:a,value:String(b)},i=("object"==typeof b?b:c)?.encode||encodeURIComponent;if(!e.test(d.name))throw TypeError(`argument name is invalid: ${d.name}`);let k=d.value?i(d.value):"";if(!f.test(k))throw TypeError(`argument val is invalid: ${d.value}`);let l=d.name+"="+k;if(void 0!==d.maxAge){if(!Number.isInteger(d.maxAge))throw TypeError(`option maxAge is invalid: ${d.maxAge}`);l+="; Max-Age="+d.maxAge}if(d.domain){if(!g.test(d.domain))throw TypeError(`option domain is invalid: ${d.domain}`);l+="; Domain="+d.domain}if(d.path){if(!h.test(d.path))throw TypeError(`option path is invalid: ${d.path}`);l+="; Path="+d.path}if(d.expires){var m;if(m=d.expires,"[object Date]"!==j.call(m)||!Number.isFinite(d.expires.valueOf()))throw TypeError(`option expires is invalid: ${d.expires}`);l+="; Expires="+d.expires.toUTCString()}if(d.httpOnly&&(l+="; HttpOnly"),d.secure&&(l+="; Secure"),d.partitioned&&(l+="; Partitioned"),d.priority)switch("string"==typeof d.priority?d.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${d.priority}`)}if(d.sameSite)switch("string"==typeof d.sameSite?d.sameSite.toLowerCase():d.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${d.sameSite}`)}return l}function n(a,b,c){let d=a.indexOf(";",b);return -1===d?c:d}function o(a,b,c){let d=a.indexOf("=",b);return d<c?d:-1}function p(a,b,c){let d=b,e=c;do{let b=a.charCodeAt(d);if(32!==b&&9!==b)break}while(++d<e)for(;e>d;){let b=a.charCodeAt(e-1);if(32!==b&&9!==b)break;e--}return a.slice(d,e)}function q(a){if(-1===a.indexOf("%"))return a;try{return decodeURIComponent(a)}catch(b){return a}}},59439,(a,b,c)=>{},60350,a=>{"use strict";let b,c,d,e,f,g,h,i,j;var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S=a.i(46447),T=a.i(30564);let U=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],V=new Set(U),W=a=>180*a/Math.PI,X=a=>Z(W(Math.atan2(a[1],a[0]))),Y={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:a=>(Math.abs(a[0])+Math.abs(a[3]))/2,rotate:X,rotateZ:X,skewX:a=>W(Math.atan(a[1])),skewY:a=>W(Math.atan(a[2])),skew:a=>(Math.abs(a[1])+Math.abs(a[2]))/2},Z=a=>((a%=360)<0&&(a+=360),a),$=a=>Math.sqrt(a[0]*a[0]+a[1]*a[1]),_=a=>Math.sqrt(a[4]*a[4]+a[5]*a[5]),aa={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$,scaleY:_,scale:a=>($(a)+_(a))/2,rotateX:a=>Z(W(Math.atan2(a[6],a[5]))),rotateY:a=>Z(W(Math.atan2(-a[2],a[0]))),rotateZ:X,rotate:X,skewX:a=>W(Math.atan(a[4])),skewY:a=>W(Math.atan(a[1])),skew:a=>(Math.abs(a[1])+Math.abs(a[4]))/2};function ab(a){return+!!a.includes("scale")}function ac(a,b){let c,d;if(!a||"none"===a)return ab(b);let e=a.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(e)c=aa,d=e;else{let b=a.match(/^matrix\(([-\d.e\s,]+)\)$/u);c=Y,d=b}if(!d)return ab(b);let f=c[b],g=d[1].split(",").map(ad);return"function"==typeof f?f(g):g[f]}function ad(a){return parseFloat(a.trim())}let ae=a=>b=>"string"==typeof b&&b.startsWith(a),af=ae("--"),ag=ae("var(--"),ah=a=>!!ag(a)&&ai.test(a.split("/*")[0].trim()),ai=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function aj({top:a,left:b,right:c,bottom:d}){return{x:{min:b,max:c},y:{min:a,max:d}}}let ak=(a,b,c)=>a+(b-a)*c;function al(a){return void 0===a||1===a}function am({scale:a,scaleX:b,scaleY:c}){return!al(a)||!al(b)||!al(c)}function an(a){return am(a)||ao(a)||a.z||a.rotate||a.rotateX||a.rotateY||a.skewX||a.skewY}function ao(a){var b,c;return(b=a.x)&&"0%"!==b||(c=a.y)&&"0%"!==c}function ap(a,b,c,d,e){return void 0!==e&&(a=d+e*(a-d)),d+c*(a-d)+b}function aq(a,b=0,c=1,d,e){a.min=ap(a.min,b,c,d,e),a.max=ap(a.max,b,c,d,e)}function ar(a,{x:b,y:c}){aq(a.x,b.translate,b.scale,b.originPoint),aq(a.y,c.translate,c.scale,c.originPoint)}function as(a,b){a.min=a.min+b,a.max=a.max+b}function at(a,b,c,d,e=.5){let f=ak(a.min,a.max,e);aq(a,b,c,f,d)}function au(a,b){at(a.x,b.x,b.scaleX,b.scale,b.originX),at(a.y,b.y,b.scaleY,b.scale,b.originY)}function av(a,b){return aj(function(a,b){if(!b)return a;let c=b({x:a.left,y:a.top}),d=b({x:a.right,y:a.bottom});return{top:c.y,left:c.x,bottom:d.y,right:d.x}}(a.getBoundingClientRect(),b))}let aw=new Set(["width","height","top","left","right","bottom",...U]),ax=(a,b,c)=>c>b?b:c<a?a:c,ay={test:a=>"number"==typeof a,parse:parseFloat,transform:a=>a},az={...ay,transform:a=>ax(0,1,a)},aA={...ay,default:1},aB=a=>({test:b=>"string"==typeof b&&b.endsWith(a)&&1===b.split(" ").length,parse:parseFloat,transform:b=>`${b}${a}`}),aC=aB("deg"),aD=aB("%"),aE=aB("px"),aF=aB("vh"),aG=aB("vw"),aH={...aD,parse:a=>aD.parse(a)/100,transform:a=>aD.transform(100*a)},aI=a=>b=>b.test(a),aJ=[ay,aE,aD,aC,aG,aF,{test:a=>"auto"===a,parse:a=>a}],aK=a=>aJ.find(aI(a)),aL=()=>{},aM=()=>{},aN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,aO=a=>a===ay||a===aE,aP=new Set(["x","y","z"]),aQ=U.filter(a=>!aP.has(a)),aR={width:({x:a},{paddingLeft:b="0",paddingRight:c="0"})=>a.max-a.min-parseFloat(b)-parseFloat(c),height:({y:a},{paddingTop:b="0",paddingBottom:c="0"})=>a.max-a.min-parseFloat(b)-parseFloat(c),top:(a,{top:b})=>parseFloat(b),left:(a,{left:b})=>parseFloat(b),bottom:({y:a},{top:b})=>parseFloat(b)+(a.max-a.min),right:({x:a},{left:b})=>parseFloat(b)+(a.max-a.min),x:(a,{transform:b})=>ac(b,"x"),y:(a,{transform:b})=>ac(b,"y")};aR.translateX=aR.x,aR.translateY=aR.y;let aS=a=>a,aT={},aU=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function aV(a,b){let c=!1,d=!0,e={delta:0,timestamp:0,isProcessing:!1},f=()=>c=!0,g=aU.reduce((a,c)=>(a[c]=function(a,b){let c=new Set,d=new Set,e=!1,f=!1,g=new WeakSet,h={delta:0,timestamp:0,isProcessing:!1},i=0;function j(b){g.has(b)&&(k.schedule(b),a()),i++,b(h)}let k={schedule:(a,b=!1,f=!1)=>{let h=f&&e?c:d;return b&&g.add(a),h.has(a)||h.add(a),a},cancel:a=>{d.delete(a),g.delete(a)},process:a=>{if(h=a,e){f=!0;return}e=!0,[c,d]=[d,c],c.forEach(j),b,i=0,c.clear(),e=!1,f&&(f=!1,k.process(a))}};return k}(f,b?c:void 0),a),{}),{setup:h,read:i,resolveKeyframes:j,preUpdate:k,update:l,preRender:m,render:n,postRender:o}=g,p=()=>{let f=aT.useManualTiming?e.timestamp:performance.now();c=!1,aT.useManualTiming||(e.delta=d?1e3/60:Math.max(Math.min(f-e.timestamp,40),1)),e.timestamp=f,e.isProcessing=!0,h.process(e),i.process(e),j.process(e),k.process(e),l.process(e),m.process(e),n.process(e),o.process(e),e.isProcessing=!1,c&&b&&(d=!1,a(p))};return{schedule:aU.reduce((b,f)=>{let h=g[f];return b[f]=(b,f=!1,g=!1)=>(!c&&(c=!0,d=!0,e.isProcessing||a(p)),h.schedule(b,f,g)),b},{}),cancel:a=>{for(let b=0;b<aU.length;b++)g[aU[b]].cancel(a)},state:e,steps:g}}let{schedule:aW,cancel:aX,state:aY,steps:aZ}=aV("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:aS,!0),a$=new Set,a_=!1,a0=!1,a1=!1;function a2(){if(a0){let a=Array.from(a$).filter(a=>a.needsMeasurement),b=new Set(a.map(a=>a.element)),c=new Map;b.forEach(a=>{let b,d=(b=[],aQ.forEach(c=>{let d=a.getValue(c);void 0!==d&&(b.push([c,d.get()]),d.set(+!!c.startsWith("scale")))}),b);d.length&&(c.set(a,d),a.render())}),a.forEach(a=>a.measureInitialState()),b.forEach(a=>{a.render();let b=c.get(a);b&&b.forEach(([b,c])=>{a.getValue(b)?.set(c)})}),a.forEach(a=>a.measureEndState()),a.forEach(a=>{void 0!==a.suspendedScrollY&&window.scrollTo(0,a.suspendedScrollY)})}a0=!1,a_=!1,a$.forEach(a=>a.complete(a1)),a$.clear()}function a3(){a$.forEach(a=>{a.readKeyframes(),a.needsMeasurement&&(a0=!0)})}class a4{constructor(a,b,c,d,e,f=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...a],this.onComplete=b,this.name=c,this.motionValue=d,this.element=e,this.isAsync=f}scheduleResolve(){this.state="scheduled",this.isAsync?(a$.add(this),a_||(a_=!0,aW.read(a3),aW.resolveKeyframes(a2))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:a,name:b,element:c,motionValue:d}=this;if(null===a[0]){let e=d?.get(),f=a[a.length-1];if(void 0!==e)a[0]=e;else if(c&&b){let d=c.readValue(b,f);null!=d&&(a[0]=d)}void 0===a[0]&&(a[0]=f),d&&void 0===e&&d.set(a[0])}for(let b=1;b<a.length;b++)a[b]??(a[b]=a[b-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(a=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,a),a$.delete(this)}cancel(){"scheduled"===this.state&&(a$.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}let a5=a=>Math.round(1e5*a)/1e5,a6=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,a7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,a8=(a,b)=>c=>!!("string"==typeof c&&a7.test(c)&&c.startsWith(a)||b&&null!=c&&Object.prototype.hasOwnProperty.call(c,b)),a9=(a,b,c)=>d=>{if("string"!=typeof d)return d;let[e,f,g,h]=d.match(a6);return{[a]:parseFloat(e),[b]:parseFloat(f),[c]:parseFloat(g),alpha:void 0!==h?parseFloat(h):1}},ba={...ay,transform:a=>Math.round(ax(0,255,a))},bb={test:a8("rgb","red"),parse:a9("red","green","blue"),transform:({red:a,green:b,blue:c,alpha:d=1})=>"rgba("+ba.transform(a)+", "+ba.transform(b)+", "+ba.transform(c)+", "+a5(az.transform(d))+")"},bc={test:a8("#"),parse:function(a){let b="",c="",d="",e="";return a.length>5?(b=a.substring(1,3),c=a.substring(3,5),d=a.substring(5,7),e=a.substring(7,9)):(b=a.substring(1,2),c=a.substring(2,3),d=a.substring(3,4),e=a.substring(4,5),b+=b,c+=c,d+=d,e+=e),{red:parseInt(b,16),green:parseInt(c,16),blue:parseInt(d,16),alpha:e?parseInt(e,16)/255:1}},transform:bb.transform},bd={test:a8("hsl","hue"),parse:a9("hue","saturation","lightness"),transform:({hue:a,saturation:b,lightness:c,alpha:d=1})=>"hsla("+Math.round(a)+", "+aD.transform(a5(b))+", "+aD.transform(a5(c))+", "+a5(az.transform(d))+")"},be={test:a=>bb.test(a)||bc.test(a)||bd.test(a),parse:a=>bb.test(a)?bb.parse(a):bd.test(a)?bd.parse(a):bc.parse(a),transform:a=>"string"==typeof a?a:a.hasOwnProperty("red")?bb.transform(a):bd.transform(a),getAnimatableNone:a=>{let b=be.parse(a);return b.alpha=0,be.transform(b)}},bf=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,bg="number",bh="color",bi=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bj(a){let b=a.toString(),c=[],d={color:[],number:[],var:[]},e=[],f=0,g=b.replace(bi,a=>(be.test(a)?(d.color.push(f),e.push(bh),c.push(be.parse(a))):a.startsWith("var(")?(d.var.push(f),e.push("var"),c.push(a)):(d.number.push(f),e.push(bg),c.push(parseFloat(a))),++f,"${}")).split("${}");return{values:c,split:g,indexes:d,types:e}}function bk(a){return bj(a).values}function bl(a){let{split:b,types:c}=bj(a),d=b.length;return a=>{let e="";for(let f=0;f<d;f++)if(e+=b[f],void 0!==a[f]){let b=c[f];b===bg?e+=a5(a[f]):b===bh?e+=be.transform(a[f]):e+=a[f]}return e}}let bm=a=>"number"==typeof a?0:be.test(a)?be.getAnimatableNone(a):a,bn={test:function(a){return isNaN(a)&&"string"==typeof a&&(a.match(a6)?.length||0)+(a.match(bf)?.length||0)>0},parse:bk,createTransformer:bl,getAnimatableNone:function(a){let b=bk(a);return bl(a)(b.map(bm))}},bo=new Set(["brightness","contrast","saturate","opacity"]);function bp(a){let[b,c]=a.slice(0,-1).split("(");if("drop-shadow"===b)return a;let[d]=c.match(a6)||[];if(!d)return a;let e=c.replace(d,""),f=+!!bo.has(b);return d!==c&&(f*=100),b+"("+f+e+")"}let bq=/\b([a-z-]*)\(.*?\)/gu,br={...bn,getAnimatableNone:a=>{let b=a.match(bq);return b?b.map(bp).join(" "):a}},bs={...ay,transform:Math.round},bt={borderWidth:aE,borderTopWidth:aE,borderRightWidth:aE,borderBottomWidth:aE,borderLeftWidth:aE,borderRadius:aE,radius:aE,borderTopLeftRadius:aE,borderTopRightRadius:aE,borderBottomRightRadius:aE,borderBottomLeftRadius:aE,width:aE,maxWidth:aE,height:aE,maxHeight:aE,top:aE,right:aE,bottom:aE,left:aE,padding:aE,paddingTop:aE,paddingRight:aE,paddingBottom:aE,paddingLeft:aE,margin:aE,marginTop:aE,marginRight:aE,marginBottom:aE,marginLeft:aE,backgroundPositionX:aE,backgroundPositionY:aE,rotate:aC,rotateX:aC,rotateY:aC,rotateZ:aC,scale:aA,scaleX:aA,scaleY:aA,scaleZ:aA,skew:aC,skewX:aC,skewY:aC,distance:aE,translateX:aE,translateY:aE,translateZ:aE,x:aE,y:aE,z:aE,perspective:aE,transformPerspective:aE,opacity:az,originX:aH,originY:aH,originZ:aE,zIndex:bs,fillOpacity:az,strokeOpacity:az,numOctaves:bs},bu={...bt,color:be,backgroundColor:be,outlineColor:be,fill:be,stroke:be,borderColor:be,borderTopColor:be,borderRightColor:be,borderBottomColor:be,borderLeftColor:be,filter:br,WebkitFilter:br},bv=a=>bu[a];function bw(a,b){let c=bv(a);return c!==br&&(c=bn),c.getAnimatableNone?c.getAnimatableNone(b):void 0}let bx=new Set(["auto","none","0"]);class by extends a4{constructor(a,b,c,d,e){super(a,b,c,d,e,!0)}readKeyframes(){let{unresolvedKeyframes:a,element:b,name:c}=this;if(!b||!b.current)return;super.readKeyframes();for(let c=0;c<a.length;c++){let d=a[c];if("string"==typeof d&&ah(d=d.trim())){let e=function a(b,c,d=1){aM(d<=4,`Max CSS variable fallback depth detected in property "${b}". This may indicate a circular fallback dependency.`,"max-css-var-depth");let[e,f]=function(a){let b=aN.exec(a);if(!b)return[,];let[,c,d,e]=b;return[`--${c??d}`,e]}(b);if(!e)return;let g=window.getComputedStyle(c).getPropertyValue(e);if(g){let a=g.trim();return/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(a)?parseFloat(a):a}return ah(f)?a(f,c,d+1):f}(d,b.current);void 0!==e&&(a[c]=e),c===a.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!aw.has(c)||2!==a.length)return;let[d,e]=a,f=aK(d),g=aK(e);if(f!==g)if(aO(f)&&aO(g))for(let b=0;b<a.length;b++){let c=a[b];"string"==typeof c&&(a[b]=parseFloat(c))}else aR[c]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:a,name:b}=this,c=[];for(let b=0;b<a.length;b++)(null===a[b]||function(a){if("number"==typeof a)return 0===a;if(null===a)return!0;return"none"===a||"0"===a||/^0[^.\s]+$/u.test(a)}(a[b]))&&c.push(b);c.length&&function(a,b,c){let d,e=0;for(;e<a.length&&!d;){let b=a[e];"string"==typeof b&&!bx.has(b)&&bj(b).values.length&&(d=a[e]),e++}if(d&&c)for(let e of b)a[e]=bw(c,d)}(a,c,b)}measureInitialState(){let{element:a,unresolvedKeyframes:b,name:c}=this;if(!a||!a.current)return;"height"===c&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=aR[c](a.measureViewportBox(),window.getComputedStyle(a.current)),b[0]=this.measuredOrigin;let d=b[b.length-1];void 0!==d&&a.getValue(c,d).jump(d,!1)}measureEndState(){let{element:a,name:b,unresolvedKeyframes:c}=this;if(!a||!a.current)return;let d=a.getValue(b);d&&d.jump(this.measuredOrigin,!1);let e=c.length-1,f=c[e];c[e]=aR[b](a.measureViewportBox(),window.getComputedStyle(a.current)),null!==f&&void 0===this.finalKeyframe&&(this.finalKeyframe=f),this.removedTransforms?.length&&this.removedTransforms.forEach(([b,c])=>{a.getValue(b).set(c)}),this.resolveNoneKeyframes()}}let bz=a=>!!(a&&a.getVelocity);function bA(){b=void 0}let bB={now:()=>(void 0===b&&bB.set(aY.isProcessing||aT.useManualTiming?aY.timestamp:performance.now()),b),set:a=>{b=a,queueMicrotask(bA)}};function bC(a,b){-1===a.indexOf(b)&&a.push(b)}function bD(a,b){let c=a.indexOf(b);c>-1&&a.splice(c,1)}class bE{constructor(){this.subscriptions=[]}add(a){return bC(this.subscriptions,a),()=>bD(this.subscriptions,a)}notify(a,b,c){let d=this.subscriptions.length;if(d)if(1===d)this.subscriptions[0](a,b,c);else for(let e=0;e<d;e++){let d=this.subscriptions[e];d&&d(a,b,c)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}class bF{constructor(a,b={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{let b=bB.now();if(this.updatedAt!==b&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(a),this.owner=b.owner}setCurrent(a){this.current=a,this.updatedAt=bB.now(),null===this.canTrackVelocity&&void 0!==a&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(a=this.current){this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt}onChange(a){return this.on("change",a)}on(a,b){this.events[a]||(this.events[a]=new bE);let c=this.events[a].add(b);return"change"===a?()=>{c(),aW.read(()=>{this.events.change.getSize()||this.stop()})}:c}clearListeners(){for(let a in this.events)this.events[a].clear()}attach(a,b){this.passiveEffect=a,this.stopPassiveEffect=b}set(a){this.passiveEffect?this.passiveEffect(a,this.updateAndNotify):this.updateAndNotify(a)}setWithVelocity(a,b,c){this.set(b),this.prev=void 0,this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt-c}jump(a,b=!0){this.updateAndNotify(a),this.prev=a,this.prevUpdatedAt=this.prevFrameValue=void 0,b&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(a){this.dependents||(this.dependents=new Set),this.dependents.add(a)}removeDependent(a){this.dependents&&this.dependents.delete(a)}get(){return i&&i.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var a;let b=bB.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||b-this.updatedAt>30)return 0;let c=Math.min(this.updatedAt-this.prevUpdatedAt,30);return a=parseFloat(this.current)-parseFloat(this.prevFrameValue),c?1e3/c*a:0}start(a){return this.stop(),new Promise(b=>{this.hasAnimated=!0,this.animation=a(b),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bG(a,b){return new bF(a,b)}let bH=[...aJ,be,bn],{schedule:bI}=aV(queueMicrotask,!1),bJ={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bK={};for(let a in bJ)bK[a]={isEnabled:b=>bJ[a].some(a=>!!b[a])};let bL=()=>({translate:0,scale:1,origin:0,originPoint:0}),bM=()=>({x:bL(),y:bL()}),bN=()=>({min:0,max:0}),bO=()=>({x:bN(),y:bN()}),bP=null,bQ={current:!1},bR=new WeakMap;function bS(a){return null!==a&&"object"==typeof a&&"function"==typeof a.start}function bT(a){return"string"==typeof a||Array.isArray(a)}let bU=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bV=["initial",...bU];function bW(a){return bS(a.animate)||bV.some(b=>bT(a[b]))}function bX(a){return!!(bW(a)||a.variants)}function bY(a){let b=[{},{}];return a?.values.forEach((a,c)=>{b[0][c]=a.get(),b[1][c]=a.getVelocity()}),b}function bZ(a,b,c,d){if("function"==typeof b){let[e,f]=bY(d);b=b(void 0!==c?c:a.custom,e,f)}if("string"==typeof b&&(b=a.variants&&a.variants[b]),"function"==typeof b){let[e,f]=bY(d);b=b(void 0!==c?c:a.custom,e,f)}return b}let b$=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class b_{scrapeMotionValuesFromProps(a,b,c){return{}}constructor({parent:a,props:b,presenceContext:c,reducedMotionConfig:d,blockInitialAnimation:e,visualState:f},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=a4,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let a=bB.now();this.renderScheduledAt<a&&(this.renderScheduledAt=a,aW.render(this.render,!1,!0))};const{latestValues:h,renderState:i}=f;this.latestValues=h,this.baseTarget={...h},this.initialValues=b.initial?{...h}:{},this.renderState=i,this.parent=a,this.props=b,this.presenceContext=c,this.depth=a?a.depth+1:0,this.reducedMotionConfig=d,this.options=g,this.blockInitialAnimation=!!e,this.isControllingVariants=bW(b),this.isVariantNode=bX(b),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(a&&a.current);const{willChange:j,...k}=this.scrapeMotionValuesFromProps(b,{},this);for(const a in k){const b=k[a];void 0!==h[a]&&bz(b)&&b.set(h[a])}}mount(a){this.current=a,bR.set(a,this),this.projection&&!this.projection.instance&&this.projection.mount(a),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,b)=>this.bindToMotionValue(b,a)),bQ.current||(bQ.current=!0),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||bP),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let a in this.projection&&this.projection.unmount(),aX(this.notifyUpdate),aX(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[a].clear();for(let a in this.features){let b=this.features[a];b&&(b.unmount(),b.isMounted=!1)}this.current=null}addChild(a){this.children.add(a),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(a)}removeChild(a){this.children.delete(a),this.enteringChildren&&this.enteringChildren.delete(a)}bindToMotionValue(a,b){let c;this.valueSubscriptions.has(a)&&this.valueSubscriptions.get(a)();let d=V.has(a);d&&this.onBindTransform&&this.onBindTransform();let e=b.on("change",b=>{this.latestValues[a]=b,this.props.onUpdate&&aW.preRender(this.notifyUpdate),d&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,a,b)),this.valueSubscriptions.set(a,()=>{e(),c&&c(),b.owner&&b.stop()})}sortNodePosition(a){return this.current&&this.sortInstanceNodePosition&&this.type===a.type?this.sortInstanceNodePosition(this.current,a.current):0}updateFeatures(){let a="animation";for(a in bK){let b=bK[a];if(!b)continue;let{isEnabled:c,Feature:d}=b;if(!this.features[a]&&d&&c(this.props)&&(this.features[a]=new d(this)),this.features[a]){let b=this.features[a];b.isMounted?b.update():(b.mount(),b.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bO()}getStaticValue(a){return this.latestValues[a]}setStaticValue(a,b){this.latestValues[a]=b}update(a,b){(a.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=a,this.prevPresenceContext=this.presenceContext,this.presenceContext=b;for(let b=0;b<b$.length;b++){let c=b$[b];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);let d=a["on"+c];d&&(this.propEventSubscriptions[c]=this.on(c,d))}this.prevMotionValues=function(a,b,c){for(let d in b){let e=b[d],f=c[d];if(bz(e))a.addValue(d,e);else if(bz(f))a.addValue(d,bG(e,{owner:a}));else if(f!==e)if(a.hasValue(d)){let b=a.getValue(d);!0===b.liveStyle?b.jump(e):b.hasAnimated||b.set(e)}else{let b=a.getStaticValue(d);a.addValue(d,bG(void 0!==b?b:e,{owner:a}))}}for(let d in c)void 0===b[d]&&a.removeValue(d);return b}(this,this.scrapeMotionValuesFromProps(a,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(a){return this.props.variants?this.props.variants[a]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(a){let b=this.getClosestVariantNode();if(b)return b.variantChildren&&b.variantChildren.add(a),()=>b.variantChildren.delete(a)}addValue(a,b){let c=this.values.get(a);b!==c&&(c&&this.removeValue(a),this.bindToMotionValue(a,b),this.values.set(a,b),this.latestValues[a]=b.get())}removeValue(a){this.values.delete(a);let b=this.valueSubscriptions.get(a);b&&(b(),this.valueSubscriptions.delete(a)),delete this.latestValues[a],this.removeValueFromRenderState(a,this.renderState)}hasValue(a){return this.values.has(a)}getValue(a,b){if(this.props.values&&this.props.values[a])return this.props.values[a];let c=this.values.get(a);return void 0===c&&void 0!==b&&(c=bG(null===b?void 0:b,{owner:this}),this.addValue(a,c)),c}readValue(a,b){let c=void 0===this.latestValues[a]&&this.current?this.getBaseTargetFromProps(this.props,a)??this.readValueFromInstance(this.current,a,this.options):this.latestValues[a];if(null!=c){let d,e;if("string"==typeof c&&(d=c,/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(d)||(e=c,/^0[^.\s]+$/u.test(e))))c=parseFloat(c);else{let d;d=c,!bH.find(aI(d))&&bn.test(b)&&(c=bw(a,b))}this.setBaseTarget(a,bz(c)?c.get():c)}return bz(c)?c.get():c}setBaseTarget(a,b){this.baseTarget[a]=b}getBaseTarget(a){let b,{initial:c}=this.props;if("string"==typeof c||"object"==typeof c){let d=bZ(this.props,c,this.presenceContext?.custom);d&&(b=d[a])}if(c&&void 0!==b)return b;let d=this.getBaseTargetFromProps(this.props,a);return void 0===d||bz(d)?void 0!==this.initialValues[a]&&void 0===b?void 0:this.baseTarget[a]:d}on(a,b){return this.events[a]||(this.events[a]=new bE),this.events[a].add(b)}notify(a,...b){this.events[a]&&this.events[a].notify(...b)}scheduleRenderMicrotask(){bI.render(this.render)}}class b0 extends b_{constructor(){super(...arguments),this.KeyframeResolver=by}sortInstanceNodePosition(a,b){return 2&a.compareDocumentPosition(b)?1:-1}getBaseTargetFromProps(a,b){return a.style?a.style[b]:void 0}removeValueFromRenderState(a,{vars:b,style:c}){delete b[a],delete c[a]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:a}=this.props;bz(a)&&(this.childSubscription=a.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}let b1=(a,b)=>b&&"number"==typeof a?b.transform(a):a,b2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},b3=U.length;function b4(a,b,c){let{style:d,vars:e,transformOrigin:f}=a,g=!1,h=!1;for(let a in b){let c=b[a];if(V.has(a)){g=!0;continue}if(af(a)){e[a]=c;continue}{let b=b1(c,bt[a]);a.startsWith("origin")?(h=!0,f[a]=b):d[a]=b}}if(!b.transform&&(g||c?d.transform=function(a,b,c){let d="",e=!0;for(let f=0;f<b3;f++){let g=U[f],h=a[g];if(void 0===h)continue;let i=!0;if(!(i="number"==typeof h?h===+!!g.startsWith("scale"):0===parseFloat(h))||c){let a=b1(h,bt[g]);if(!i){e=!1;let b=b2[g]||g;d+=`${b}(${a}) `}c&&(b[g]=a)}}return d=d.trim(),c?d=c(b,e?"":d):e&&(d="none"),d}(b,a.transform,c):d.transform&&(d.transform="none")),h){let{originX:a="50%",originY:b="50%",originZ:c=0}=f;d.transformOrigin=`${a} ${b} ${c}`}}function b5(a,{style:b,vars:c},d,e){let f,g=a.style;for(f in b)g[f]=b[f];for(f in e?.applyProjectionStyles(g,d),c)g.setProperty(f,c[f])}let b6={};function b7(a,{layout:b,layoutId:c}){return V.has(a)||a.startsWith("origin")||(b||void 0!==c)&&(!!b6[a]||"opacity"===a)}function b8(a,b,c){let{style:d}=a,e={};for(let f in d)(bz(d[f])||b.style&&bz(b.style[f])||b7(f,a)||c?.getValue(f)?.liveStyle!==void 0)&&(e[f]=d[f]);return e}class b9 extends b0{constructor(){super(...arguments),this.type="html",this.renderInstance=b5}readValueFromInstance(a,b){if(V.has(b))return this.projection?.isProjecting?ab(b):((a,b)=>{let{transform:c="none"}=getComputedStyle(a);return ac(c,b)})(a,b);{let c=window.getComputedStyle(a),d=(af(b)?c.getPropertyValue(b):c[b])||0;return"string"==typeof d?d.trim():d}}measureInstanceViewportBox(a,{transformPagePoint:b}){return av(a,b)}build(a,b,c){b4(a,b,c.transformTemplate)}scrapeMotionValuesFromProps(a,b,c){return b8(a,b,c)}}let ca=a=>a.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cb={offset:"stroke-dashoffset",array:"stroke-dasharray"},cc={offset:"strokeDashoffset",array:"strokeDasharray"};function cd(a,{attrX:b,attrY:c,attrScale:d,pathLength:e,pathSpacing:f=1,pathOffset:g=0,...h},i,j,k){if(b4(a,h,j),i){a.style.viewBox&&(a.attrs.viewBox=a.style.viewBox);return}a.attrs=a.style,a.style={};let{attrs:l,style:m}=a;l.transform&&(m.transform=l.transform,delete l.transform),(m.transform||l.transformOrigin)&&(m.transformOrigin=l.transformOrigin??"50% 50%",delete l.transformOrigin),m.transform&&(m.transformBox=k?.transformBox??"fill-box",delete l.transformBox),void 0!==b&&(l.x=b),void 0!==c&&(l.y=c),void 0!==d&&(l.scale=d),void 0!==e&&function(a,b,c=1,d=0,e=!0){a.pathLength=1;let f=e?cb:cc;a[f.offset]=aE.transform(-d);let g=aE.transform(b),h=aE.transform(c);a[f.array]=`${g} ${h}`}(l,e,f,g,!1)}let ce=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),cf=a=>"string"==typeof a&&"svg"===a.toLowerCase();function cg(a,b,c){let d=b8(a,b,c);for(let c in a)(bz(a[c])||bz(b[c]))&&(d[-1!==U.indexOf(c)?"attr"+c.charAt(0).toUpperCase()+c.substring(1):c]=a[c]);return d}class ch extends b0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bO}getBaseTargetFromProps(a,b){return a[b]}readValueFromInstance(a,b){if(V.has(b)){let a=bv(b);return a&&a.default||0}return b=ce.has(b)?b:ca(b),a.getAttribute(b)}scrapeMotionValuesFromProps(a,b,c){return cg(a,b,c)}build(a,b,c){cd(a,b,this.isSVGTag,c.transformTemplate,c.style)}renderInstance(a,b,c,d){for(let c in b5(a,b,void 0,d),b.attrs)a.setAttribute(ce.has(c)?c:ca(c),b.attrs[c])}mount(a){this.isSVGTag=cf(a.tagName),super.mount(a)}}let ci=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cj(a){if("string"!=typeof a||a.includes("-"));else if(ci.indexOf(a)>-1||/[A-Z]/u.test(a))return!0;return!1}let ck=(0,T.createContext)({}),cl=((0,T.createContext)({strict:!1}),(0,T.createContext)({transformPagePoint:a=>a,isStatic:!1,reducedMotion:"never"})),cm=(0,T.createContext)({});function cn(a){return Array.isArray(a)?a.join(" "):a}let co=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cp(a,b,c){for(let d in b)bz(b[d])||b7(d,c)||(a[d]=b[d])}let cq=()=>({...co(),attrs:{}}),cr=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function cs(a){return a.startsWith("while")||a.startsWith("drag")&&"draggable"!==a||a.startsWith("layout")||a.startsWith("onTap")||a.startsWith("onPan")||a.startsWith("onLayout")||cr.has(a)}let ct=a=>!cs(a);try{k=a.r(13592).default,"function"==typeof k&&(ct=a=>a.startsWith("on")?!cs(a):k(a))}catch{}let cu=(0,T.createContext)(null);function cv(a){let b=(0,T.useRef)(null);return null===b.current&&(b.current=a()),b.current}function cw(a){return bz(a)?a.get():a}let cx=a=>(b,c)=>{let d=(0,T.useContext)(cm),e=(0,T.useContext)(cu),f=()=>(function({scrapeMotionValuesFromProps:a,createRenderState:b},c,d,e){return{latestValues:function(a,b,c,d){let e={},f=d(a,{});for(let a in f)e[a]=cw(f[a]);let{initial:g,animate:h}=a,i=bW(a),j=bX(a);b&&j&&!i&&!1!==a.inherit&&(void 0===g&&(g=b.initial),void 0===h&&(h=b.animate));let k=!!c&&!1===c.initial,l=(k=k||!1===g)?h:g;if(l&&"boolean"!=typeof l&&!bS(l)){let b=Array.isArray(l)?l:[l];for(let c=0;c<b.length;c++){let d=bZ(a,b[c]);if(d){let{transitionEnd:a,transition:b,...c}=d;for(let a in c){let b=c[a];if(Array.isArray(b)){let a=k?b.length-1:0;b=b[a]}null!==b&&(e[a]=b)}for(let b in a)e[b]=a[b]}}}return e}(c,d,e,a),renderState:b()}})(a,b,d,e);return c?f():cv(f)},cy=cx({scrapeMotionValuesFromProps:b8,createRenderState:co}),cz=cx({scrapeMotionValuesFromProps:cg,createRenderState:cq}),cA=Symbol.for("motionComponentSymbol");function cB(a){return a&&"object"==typeof a&&Object.prototype.hasOwnProperty.call(a,"current")}let cC="data-"+ca("framerAppearId"),cD=(0,T.createContext)({}),cE=T.useEffect;function cF(a,{forwardMotionProps:b=!1}={},c,d){c&&function(a){for(let b in a)bK[b]={...bK[b],...a[b]}}(c);let e=cj(a)?cz:cy;function f(c,d){var f;let g,h={...(0,T.useContext)(cl),...c,layoutId:function({layoutId:a}){let b=(0,T.useContext)(ck).id;return b&&void 0!==a?b+"-"+a:a}(c)},{isStatic:i}=h,j=function(a){let{initial:b,animate:c}=function(a,b){if(bW(a)){let{initial:b,animate:c}=a;return{initial:!1===b||bT(b)?b:void 0,animate:bT(c)?c:void 0}}return!1!==a.inherit?b:{}}(a,(0,T.useContext)(cm));return(0,T.useMemo)(()=>({initial:b,animate:c}),[cn(b),cn(c)])}(c),k=e(c,i);return(0,S.jsxs)(cm.Provider,{value:j,children:[g&&j.visualElement?(0,S.jsx)(g,{visualElement:j.visualElement,...h}):null,function(a,b,c,{latestValues:d},e,f=!1){let g=(cj(a)?function(a,b,c,d){let e=(0,T.useMemo)(()=>{let c=cq();return cd(c,b,cf(d),a.transformTemplate,a.style),{...c.attrs,style:{...c.style}}},[b]);if(a.style){let b={};cp(b,a.style,a),e.style={...b,...e.style}}return e}:function(a,b){let c,d,e={},f=(c=a.style||{},cp(d={},c,a),Object.assign(d,function({transformTemplate:a},b){return(0,T.useMemo)(()=>{let c=co();return b4(c,b,a),Object.assign({},c.vars,c.style)},[b])}(a,b)),d);return a.drag&&!1!==a.dragListener&&(e.draggable=!1,f.userSelect=f.WebkitUserSelect=f.WebkitTouchCallout="none",f.touchAction=!0===a.drag?"none":`pan-${"x"===a.drag?"y":"x"}`),void 0===a.tabIndex&&(a.onTap||a.onTapStart||a.whileTap)&&(e.tabIndex=0),e.style=f,e})(b,d,e,a),h=function(a,b,c){let d={};for(let e in a)("values"!==e||"object"!=typeof a.values)&&(ct(e)||!0===c&&cs(e)||!b&&!cs(e)||a.draggable&&e.startsWith("onDrag"))&&(d[e]=a[e]);return d}(b,"string"==typeof a,f),i=a!==T.Fragment?{...h,...g,ref:c}:{},{children:j}=b,k=(0,T.useMemo)(()=>bz(j)?j.get():j,[j]);return(0,T.createElement)(a,{...i,children:k})}(a,c,(f=j.visualElement,(0,T.useCallback)(a=>{a&&k.onMount&&k.onMount(a),f&&(a?f.mount(a):f.unmount()),d&&("function"==typeof d?d(a):cB(d)&&(d.current=a))},[f])),k,i,b)]})}f.displayName=`motion.${"string"==typeof a?a:`create(${a.displayName??a.name??""})`}`;let g=(0,T.forwardRef)(f);return g[cA]=a,g}function cG(a,b,c){let d=a.getProps();return bZ(d,b,void 0!==c?c:d.custom,a)}function cH(a,b){return a?.[b]??a?.default??a}let cI=a=>Array.isArray(a);function cJ(a,b){let c=a.getValue("willChange");if(bz(c)&&c.add)return c.add(b);if(!c&&aT.WillChange){let c=new aT.WillChange("auto");a.addValue("willChange",c),c.add(b)}}function cK(a){a.duration=0,a.type="keyframes"}let cL=(a,b)=>c=>b(a(c)),cM=(...a)=>a.reduce(cL),cN=a=>1e3*a,cO={layout:0,mainThread:0,waapi:0};function cP(a,b,c){return(c<0&&(c+=1),c>1&&(c-=1),c<1/6)?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}function cQ(a,b){return c=>c>0?b:a}let cR=(a,b,c)=>{let d=a*a,e=c*(b*b-d)+d;return e<0?0:Math.sqrt(e)},cS=[bc,bb,bd];function cT(a){let b=cS.find(b=>b.test(a));if(aL(!!b,`'${a}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!b)return!1;let c=b.parse(a);return b===bd&&(c=function({hue:a,saturation:b,lightness:c,alpha:d}){a/=360,c/=100;let e=0,f=0,g=0;if(b/=100){let d=c<.5?c*(1+b):c+b-c*b,h=2*c-d;e=cP(h,d,a+1/3),f=cP(h,d,a),g=cP(h,d,a-1/3)}else e=f=g=c;return{red:Math.round(255*e),green:Math.round(255*f),blue:Math.round(255*g),alpha:d}}(c)),c}let cU=(a,b)=>{let c=cT(a),d=cT(b);if(!c||!d)return cQ(a,b);let e={...c};return a=>(e.red=cR(c.red,d.red,a),e.green=cR(c.green,d.green,a),e.blue=cR(c.blue,d.blue,a),e.alpha=ak(c.alpha,d.alpha,a),bb.transform(e))},cV=new Set(["none","hidden"]);function cW(a,b){return c=>ak(a,b,c)}function cX(a){return"number"==typeof a?cW:"string"==typeof a?ah(a)?cQ:be.test(a)?cU:c$:Array.isArray(a)?cY:"object"==typeof a?be.test(a)?cU:cZ:cQ}function cY(a,b){let c=[...a],d=c.length,e=a.map((a,c)=>cX(a)(a,b[c]));return a=>{for(let b=0;b<d;b++)c[b]=e[b](a);return c}}function cZ(a,b){let c={...a,...b},d={};for(let e in c)void 0!==a[e]&&void 0!==b[e]&&(d[e]=cX(a[e])(a[e],b[e]));return a=>{for(let b in d)c[b]=d[b](a);return c}}let c$=(a,b)=>{let c=bn.createTransformer(b),d=bj(a),e=bj(b);if(!(d.indexes.var.length===e.indexes.var.length&&d.indexes.color.length===e.indexes.color.length&&d.indexes.number.length>=e.indexes.number.length))return aL(!0,`Complex values '${a}' and '${b}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),cQ(a,b);if(cV.has(a)&&!e.values.length||cV.has(b)&&!d.values.length)return cV.has(a)?c=>c<=0?a:b:c=>c>=1?b:a;return cM(cY(function(a,b){let c=[],d={color:0,var:0,number:0};for(let e=0;e<b.values.length;e++){let f=b.types[e],g=a.indexes[f][d[f]],h=a.values[g]??0;c[e]=h,d[f]++}return c}(d,e),e.values),c)};function c_(a,b,c){return"number"==typeof a&&"number"==typeof b&&"number"==typeof c?ak(a,b,c):cX(a)(a,b)}let c0=a=>{let b=({timestamp:b})=>a(b);return{start:(a=!0)=>aW.update(b,a),stop:()=>aX(b),now:()=>aY.isProcessing?aY.timestamp:bB.now()}},c1=(a,b,c=10)=>{let d="",e=Math.max(Math.round(b/c),2);for(let b=0;b<e;b++)d+=Math.round(1e4*a(b/(e-1)))/1e4+", ";return`linear(${d.substring(0,d.length-2)})`};function c2(a){let b=0,c=a.next(b);for(;!c.done&&b<2e4;)b+=50,c=a.next(b);return b>=2e4?1/0:b}function c3(a,b,c){var d,e;let f=Math.max(b-5,0);return d=c-a(f),(e=b-f)?1e3/e*d:0}let c4=.01,c5=2,c6=.005,c7=.5;function c8(a,b){return a*Math.sqrt(1-b*b)}let c9=["duration","bounce"],da=["stiffness","damping","mass"];function db(a,b){return b.some(b=>void 0!==a[b])}function dc(a=.3,b=.3){let c,d="object"!=typeof a?{visualDuration:a,keyframes:[0,1],bounce:b}:a,{restSpeed:e,restDelta:f}=d,g=d.keyframes[0],h=d.keyframes[d.keyframes.length-1],i={done:!1,value:g},{stiffness:j,damping:k,mass:l,duration:m,velocity:n,isResolvedFromDuration:o}=function(a){let b={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...a};if(!db(a,da)&&db(a,c9))if(a.visualDuration){let c=2*Math.PI/(1.2*a.visualDuration),d=c*c,e=2*ax(.05,1,1-(a.bounce||0))*Math.sqrt(d);b={...b,mass:1,stiffness:d,damping:e}}else{let c=function({duration:a=800,bounce:b=.3,velocity:c=0,mass:d=1}){let e,f;aL(a<=cN(10),"Spring duration must be 10 seconds or less","spring-duration-limit");let g=1-b;g=ax(.05,1,g),a=ax(.01,10,a/1e3),g<1?(e=b=>{let d=b*g,e=d*a;return .001-(d-c)/c8(b,g)*Math.exp(-e)},f=b=>{let d=b*g*a,f=Math.pow(g,2)*Math.pow(b,2)*a,h=Math.exp(-d),i=c8(Math.pow(b,2),g);return(d*c+c-f)*h*(-e(b)+.001>0?-1:1)/i}):(e=b=>-.001+Math.exp(-b*a)*((b-c)*a+1),f=b=>a*a*(c-b)*Math.exp(-b*a));let h=function(a,b,c){let d=c;for(let c=1;c<12;c++)d-=a(d)/b(d);return d}(e,f,5/a);if(a=cN(a),isNaN(h))return{stiffness:100,damping:10,duration:a};{let b=Math.pow(h,2)*d;return{stiffness:b,damping:2*g*Math.sqrt(d*b),duration:a}}}(a);(b={...b,...c,mass:1}).isResolvedFromDuration=!0}return b}({...d,velocity:-((d.velocity||0)/1e3)}),p=n||0,q=k/(2*Math.sqrt(j*l)),r=h-g,s=Math.sqrt(j/l)/1e3,t=5>Math.abs(r);if(e||(e=t?c4:c5),f||(f=t?c6:c7),q<1){let a=c8(s,q);c=b=>h-Math.exp(-q*s*b)*((p+q*s*r)/a*Math.sin(a*b)+r*Math.cos(a*b))}else if(1===q)c=a=>h-Math.exp(-s*a)*(r+(p+s*r)*a);else{let a=s*Math.sqrt(q*q-1);c=b=>{let c=Math.exp(-q*s*b),d=Math.min(a*b,300);return h-c*((p+q*s*r)*Math.sinh(d)+a*r*Math.cosh(d))/a}}let u={calculatedDuration:o&&m||null,next:a=>{let b=c(a);if(o)i.done=a>=m;else{let d=0===a?p:0;q<1&&(d=0===a?cN(p):c3(c,a,b));let g=Math.abs(h-b)<=f;i.done=Math.abs(d)<=e&&g}return i.value=i.done?h:b,i},toString:()=>{let a=Math.min(c2(u),2e4),b=c1(b=>u.next(a*b).value,a,30);return a+"ms "+b},toTransition:()=>{}};return u}function dd({keyframes:a,velocity:b=0,power:c=.8,timeConstant:d=325,bounceDamping:e=10,bounceStiffness:f=500,modifyTarget:g,min:h,max:i,restDelta:j=.5,restSpeed:k}){let l,m,n=a[0],o={done:!1,value:n},p=c*b,q=n+p,r=void 0===g?q:g(q);r!==q&&(p=r-n);let s=a=>-p*Math.exp(-a/d),t=a=>r+s(a),u=a=>{let b=s(a),c=t(a);o.done=Math.abs(b)<=j,o.value=o.done?r:c},v=a=>{let b;if(b=o.value,void 0!==h&&b<h||void 0!==i&&b>i){var c;l=a,m=dc({keyframes:[o.value,(c=o.value,void 0===h?i:void 0===i||Math.abs(h-c)<Math.abs(i-c)?h:i)],velocity:c3(t,a,o.value),damping:e,stiffness:f,restDelta:j,restSpeed:k})}};return v(0),{calculatedDuration:null,next:a=>{let b=!1;return(m||void 0!==l||(b=!0,u(a),v(a)),void 0!==l&&a>=l)?m.next(a-l):(b||u(a),o)}}}dc.applyToOptions=a=>{let b=function(a,b=100,c){let d=c({...a,keyframes:[0,b]}),e=Math.min(c2(d),2e4);return{type:"keyframes",ease:a=>d.next(e*a).value/b,duration:e/1e3}}(a,100,dc);return a.ease=b.ease,a.duration=cN(b.duration),a.type="keyframes",a};let de=(a,b,c)=>(((1-3*c+3*b)*a+(3*c-6*b))*a+3*b)*a;function df(a,b,c,d){return a===b&&c===d?aS:e=>0===e||1===e?e:de(function(a,b,c,d,e){let f,g,h=0;do(f=de(g=b+(c-b)/2,d,e)-a)>0?c=g:b=g;while(Math.abs(f)>1e-7&&++h<12)return g}(e,0,1,a,c),b,d)}let dg=df(.42,0,1,1),dh=df(0,0,.58,1),di=df(.42,0,.58,1),dj=a=>b=>b<=.5?a(2*b)/2:(2-a(2*(1-b)))/2,dk=a=>b=>1-a(1-b),dl=df(.33,1.53,.69,.99),dm=dk(dl),dn=dj(dm),dp=a=>(a*=2)<1?.5*dm(a):.5*(2-Math.pow(2,-10*(a-1))),dq=a=>1-Math.sin(Math.acos(a)),dr=dk(dq),ds=dj(dq),dt=a=>Array.isArray(a)&&"number"==typeof a[0],du={linear:aS,easeIn:dg,easeInOut:di,easeOut:dh,circIn:dq,circInOut:ds,circOut:dr,backIn:dm,backInOut:dn,backOut:dl,anticipate:dp},dv=a=>{if(dt(a)){aM(4===a.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[b,c,d,e]=a;return df(b,c,d,e)}return"string"==typeof a?(aM(void 0!==du[a],`Invalid easing type '${a}'`,"invalid-easing-type"),du[a]):a},dw=(a,b,c)=>{let d=b-a;return 0===d?1:(c-a)/d};function dx({duration:a=300,keyframes:b,times:c,ease:d="easeInOut"}){var e;let f,g=Array.isArray(d)&&"number"!=typeof d[0]?d.map(dv):dv(d),h={done:!1,value:b[0]},i=function(a,b,{clamp:c=!0,ease:d,mixer:e}={}){let f=a.length;if(aM(f===b.length,"Both input and output ranges must be the same length","range-length"),1===f)return()=>b[0];if(2===f&&b[0]===b[1])return()=>b[1];let g=a[0]===a[1];a[0]>a[f-1]&&(a=[...a].reverse(),b=[...b].reverse());let h=function(a,b,c){let d=[],e=c||aT.mix||c_,f=a.length-1;for(let c=0;c<f;c++){let f=e(a[c],a[c+1]);b&&(f=cM(Array.isArray(b)?b[c]||aS:b,f)),d.push(f)}return d}(b,d,e),i=h.length,j=c=>{if(g&&c<a[0])return b[0];let d=0;if(i>1)for(;d<a.length-2&&!(c<a[d+1]);d++);let e=dw(a[d],a[d+1],c);return h[d](e)};return c?b=>j(ax(a[0],a[f-1],b)):j}((e=c&&c.length===b.length?c:(!function(a,b){let c=a[a.length-1];for(let d=1;d<=b;d++){let e=dw(0,b,d);a.push(ak(c,1,e))}}(f=[0],b.length-1),f),e.map(b=>b*a)),b,{ease:Array.isArray(g)?g:b.map(()=>g||di).splice(0,b.length-1)});return{calculatedDuration:a,next:b=>(h.value=i(b),h.done=b>=a,h)}}let dy=a=>null!==a;function dz(a,{repeat:b,repeatType:c="loop"},d,e=1){let f=a.filter(dy),g=e<0||b&&"loop"!==c&&b%2==1?0:f.length-1;return g&&void 0!==d?d:f[g]}let dA={decay:dd,inertia:dd,tween:dx,keyframes:dx,spring:dc};function dB(a){"string"==typeof a.type&&(a.type=dA[a.type])}class dC{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(a=>{this.resolve=a})}notifyFinished(){this.resolve()}then(a,b){return this.finished.then(a,b)}}let dD=a=>a/100;class dE extends dC{constructor(a){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:a}=this.options;a&&a.updatedAt!==bB.now()&&this.tick(bB.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},cO.mainThread++,this.options=a,this.initAnimation(),this.play(),!1===a.autoplay&&this.pause()}initAnimation(){let{options:a}=this;dB(a);let{type:b=dx,repeat:c=0,repeatDelay:d=0,repeatType:e,velocity:f=0}=a,{keyframes:g}=a,h=b||dx;h!==dx&&"number"!=typeof g[0]&&(this.mixKeyframes=cM(dD,c_(g[0],g[1])),g=[0,100]);let i=h({...a,keyframes:g});"mirror"===e&&(this.mirroredGenerator=h({...a,keyframes:[...g].reverse(),velocity:-f})),null===i.calculatedDuration&&(i.calculatedDuration=c2(i));let{calculatedDuration:j}=i;this.calculatedDuration=j,this.resolvedDuration=j+d,this.totalDuration=this.resolvedDuration*(c+1)-d,this.generator=i}updateTime(a){let b=Math.round(a-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=b}tick(a,b=!1){let{generator:c,totalDuration:d,mixKeyframes:e,mirroredGenerator:f,resolvedDuration:g,calculatedDuration:h}=this;if(null===this.startTime)return c.next(0);let{delay:i=0,keyframes:j,repeat:k,repeatType:l,repeatDelay:m,type:n,onUpdate:o,finalKeyframe:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,a):this.speed<0&&(this.startTime=Math.min(a-d/this.speed,this.startTime)),b?this.currentTime=a:this.updateTime(a);let q=this.currentTime-i*(this.playbackSpeed>=0?1:-1),r=this.playbackSpeed>=0?q<0:q>d;this.currentTime=Math.max(q,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=d);let s=this.currentTime,t=c;if(k){let a=Math.min(this.currentTime,d)/g,b=Math.floor(a),c=a%1;!c&&a>=1&&(c=1),1===c&&b--,(b=Math.min(b,k+1))%2&&("reverse"===l?(c=1-c,m&&(c-=m/g)):"mirror"===l&&(t=f)),s=ax(0,1,c)*g}let u=r?{done:!1,value:j[0]}:t.next(s);e&&(u.value=e(u.value));let{done:v}=u;r||null===h||(v=this.playbackSpeed>=0?this.currentTime>=d:this.currentTime<=0);let w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&v);return w&&n!==dd&&(u.value=dz(j,this.options,p,this.speed)),o&&o(u.value),w&&this.finish(),u}then(a,b){return this.finished.then(a,b)}get duration(){return this.calculatedDuration/1e3}get iterationDuration(){let{delay:a=0}=this.options||{};return this.duration+a/1e3}get time(){return this.currentTime/1e3}set time(a){a=cN(a),this.currentTime=a,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=a:this.driver&&(this.startTime=this.driver.now()-a/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(a){this.updateTime(bB.now());let b=this.playbackSpeed!==a;this.playbackSpeed=a,b&&(this.time=this.currentTime/1e3)}play(){if(this.isStopped)return;let{driver:a=c0,startTime:b}=this.options;this.driver||(this.driver=a(a=>this.tick(a))),this.options.onPlay?.();let c=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=c):null!==this.holdTime?this.startTime=c-this.holdTime:this.startTime||(this.startTime=b??c),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bB.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,cO.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(a){return this.startTime=0,this.tick(a,!0)}attachTimeline(a){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),a.observe(this)}}function dF(a){let b;return()=>(void 0===b&&(b=a()),b)}let dG=dF(()=>void 0!==window.ScrollTimeline),dH={},dI=(d=dF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(a){return!1}return!0}),()=>dH.linearEasing??d()),dJ=([a,b,c,d])=>`cubic-bezier(${a}, ${b}, ${c}, ${d})`,dK={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:dJ([0,.65,.55,1]),circOut:dJ([.55,0,1,.45]),backIn:dJ([.31,.01,.66,-.59]),backOut:dJ([.33,1.53,.69,.99])};function dL(a){return"function"==typeof a&&"applyToOptions"in a}class dM extends dC{constructor(a){if(super(),this.finishedTime=null,this.isStopped=!1,!a)return;const{element:b,name:c,keyframes:d,pseudoElement:e,allowFlatten:f=!1,finalKeyframe:g,onComplete:h}=a;this.isPseudoElement=!!e,this.allowFlatten=f,this.options=a,aM("string"!=typeof a.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const i=function({type:a,...b}){return dL(a)&&dI()?a.applyToOptions(b):(b.duration??(b.duration=300),b.ease??(b.ease="easeOut"),b)}(a);this.animation=function(a,b,c,{delay:d=0,duration:e=300,repeat:f=0,repeatType:g="loop",ease:h="easeOut",times:i}={},j){let k={[b]:c};i&&(k.offset=i);let l=function a(b,c){if(b)return"function"==typeof b?dI()?c1(b,c):"ease-out":dt(b)?dJ(b):Array.isArray(b)?b.map(b=>a(b,c)||dK.easeOut):dK[b]}(h,e);Array.isArray(l)&&(k.easing=l);let m={delay:d,duration:e,easing:Array.isArray(l)?"linear":l,fill:"both",iterations:f+1,direction:"reverse"===g?"alternate":"normal"};j&&(m.pseudoElement=j);let n=a.animate(k,m);return n}(b,c,d,i,e),!1===i.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!e){let a=dz(d,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(a):c.startsWith("--")?b.style.setProperty(c,a):b.style[c]=a,this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(a){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:a}=this;"idle"!==a&&"finished"!==a&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){return Number(this.animation.effect?.getComputedTiming?.().duration||0)/1e3}get iterationDuration(){let{delay:a=0}=this.options||{};return this.duration+a/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(a){this.finishedTime=null,this.animation.currentTime=cN(a)}get speed(){return this.animation.playbackRate}set speed(a){a<0&&(this.finishedTime=null),this.animation.playbackRate=a}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(a){this.animation.startTime=a}attachTimeline({timeline:a,observe:b}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,a&&dG())?(this.animation.timeline=a,aS):b(this)}}let dN={anticipate:dp,backInOut:dn,circInOut:ds};class dO extends dM{constructor(a){!function(a){"string"==typeof a.ease&&a.ease in dN&&(a.ease=dN[a.ease])}(a),dB(a),super(a),a.startTime&&(this.startTime=a.startTime),this.options=a}updateMotionValue(a){let{motionValue:b,onUpdate:c,onComplete:d,element:e,...f}=this.options;if(!b)return;if(void 0!==a)return void b.set(a);let g=new dE({...f,autoplay:!1}),h=cN(this.finishedTime??this.time);b.setWithVelocity(g.sample(h-10).value,g.sample(h).value,10),g.stop()}}let dP=(a,b)=>"zIndex"!==b&&!!("number"==typeof a||Array.isArray(a)||"string"==typeof a&&(bn.test(a)||"0"===a)&&!a.startsWith("url(")),dQ=new Set(["opacity","clipPath","filter","transform"]),dR=dF(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class dS extends dC{constructor({autoplay:a=!0,delay:b=0,type:c="keyframes",repeat:d=0,repeatDelay:e=0,repeatType:f="loop",keyframes:g,name:h,motionValue:i,element:j,...k}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=bB.now();const l={autoplay:a,delay:b,type:c,repeat:d,repeatDelay:e,repeatType:f,name:h,motionValue:i,element:j,...k},m=j?.KeyframeResolver||a4;this.keyframeResolver=new m(g,(a,b,c)=>this.onKeyframesResolved(a,b,l,!c),h,i,j),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(a,b,c,d){this.keyframeResolver=void 0;let{name:e,type:f,velocity:g,delay:h,isHandoff:i,onUpdate:j}=c;this.resolvedAt=bB.now(),!function(a,b,c,d){let e=a[0];if(null===e)return!1;if("display"===b||"visibility"===b)return!0;let f=a[a.length-1],g=dP(e,b),h=dP(f,b);return aL(g===h,`You are trying to animate ${b} from "${e}" to "${f}". "${g?f:e}" is not an animatable value.`,"value-not-animatable"),!!g&&!!h&&(function(a){let b=a[0];if(1===a.length)return!0;for(let c=0;c<a.length;c++)if(a[c]!==b)return!0}(a)||("spring"===c||dL(c))&&d)}(a,e,f,g)&&((aT.instantAnimations||!h)&&j?.(dz(a,c,b)),a[0]=a[a.length-1],cK(c),c.repeat=0);let k={startTime:d?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:b,...c,keyframes:a},l=!i&&function(a){let{motionValue:b,name:c,repeatDelay:d,repeatType:e,damping:f,type:g}=a;if(!(b?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:h,transformTemplate:i}=b.owner.getProps();return dR()&&c&&dQ.has(c)&&("transform"!==c||!i)&&!h&&!d&&"mirror"!==e&&0!==f&&"inertia"!==g}(k)?new dO({...k,element:k.motionValue.owner.current}):new dE(k);l.finished.then(()=>this.notifyFinished()).catch(aS),this.pendingTimeline&&(this.stopTimeline=l.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=l}get finished(){return this._animation?this.animation.finished:this._finished}then(a,b){return this.finished.finally(a).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),a1=!0,a3(),a2(),a1=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(a){this.animation.time=a}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(a){this.animation.speed=a}get startTime(){return this.animation.startTime}attachTimeline(a){return this._animation?this.stopTimeline=this.animation.attachTimeline(a):this.pendingTimeline=a,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let dT=a=>null!==a,dU={type:"spring",stiffness:500,damping:25,restSpeed:10},dV={type:"keyframes",duration:.8},dW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dX=(a,b,c,d={},e,f)=>g=>{let h=cH(d,a)||{},i=h.delay||d.delay||0,{elapsed:j=0}=d;j-=cN(i);let k={keyframes:Array.isArray(c)?c:[null,c],ease:"easeOut",velocity:b.getVelocity(),...h,delay:-j,onUpdate:a=>{b.set(a),h.onUpdate&&h.onUpdate(a)},onComplete:()=>{g(),h.onComplete&&h.onComplete()},name:a,motionValue:b,element:f?void 0:e};!function({when:a,delay:b,delayChildren:c,staggerChildren:d,staggerDirection:e,repeat:f,repeatType:g,repeatDelay:h,from:i,elapsed:j,...k}){return!!Object.keys(k).length}(h)&&Object.assign(k,((a,{keyframes:b})=>b.length>2?dV:V.has(a)?a.startsWith("scale")?{type:"spring",stiffness:550,damping:0===b[1]?2*Math.sqrt(550):30,restSpeed:10}:dU:dW)(a,k)),k.duration&&(k.duration=cN(k.duration)),k.repeatDelay&&(k.repeatDelay=cN(k.repeatDelay)),void 0!==k.from&&(k.keyframes[0]=k.from);let l=!1;if(!1!==k.type&&(0!==k.duration||k.repeatDelay)||(cK(k),0===k.delay&&(l=!0)),(aT.instantAnimations||aT.skipAnimations)&&(l=!0,cK(k),k.delay=0),k.allowFlatten=!h.type&&!h.ease,l&&!f&&void 0!==b.get()){let a=function(a,{repeat:b,repeatType:c="loop"},d){let e=a.filter(dT),f=b&&"loop"!==c&&b%2==1?0:e.length-1;return e[f]}(k.keyframes,h);if(void 0!==a)return void aW.update(()=>{k.onUpdate(a),k.onComplete()})}return h.isSync?new dE(k):new dS(k)};function dY(a,b,{delay:c=0,transitionOverride:d,type:e}={}){let{transition:f=a.getDefaultTransition(),transitionEnd:g,...h}=b;d&&(f=d);let i=[],j=e&&a.animationState&&a.animationState.getState()[e];for(let b in h){let d=a.getValue(b,a.latestValues[b]??null),e=h[b];if(void 0===e||j&&function({protectedKeys:a,needsAnimating:b},c){let d=a.hasOwnProperty(c)&&!0!==b[c];return b[c]=!1,d}(j,b))continue;let g={delay:c,...cH(f||{},b)},k=d.get();if(void 0!==k&&!d.isAnimating&&!Array.isArray(e)&&e===k&&!g.velocity)continue;let l=!1;if(window.MotionHandoffAnimation){let c=a.props[cC];if(c){let a=window.MotionHandoffAnimation(c,b,aW);null!==a&&(g.startTime=a,l=!0)}}cJ(a,b),d.start(dX(b,d,e,a.shouldReduceMotion&&aw.has(b)?{type:!1}:g,a,l));let m=d.animation;m&&i.push(m)}return g&&Promise.all(i).then(()=>{aW.update(()=>{g&&function(a,b){let{transitionEnd:c={},transition:d={},...e}=cG(a,b)||{};for(let b in e={...e,...c}){var f;let c=cI(f=e[b])?f[f.length-1]||0:f;a.hasValue(b)?a.getValue(b).set(c):a.addValue(b,bG(c))}}(a,g)})}),i}function dZ(a,b,c,d=0,e=1){let f=Array.from(a).sort((a,b)=>a.sortNodePosition(b)).indexOf(b),g=a.size,h=(g-1)*d;return"function"==typeof c?c(f,g):1===e?f*d:h-f*d}function d$(a,b,c={}){let d=cG(a,b,"exit"===c.type?a.presenceContext?.custom:void 0),{transition:e=a.getDefaultTransition()||{}}=d||{};c.transitionOverride&&(e=c.transitionOverride);let f=d?()=>Promise.all(dY(a,d,c)):()=>Promise.resolve(),g=a.variantChildren&&a.variantChildren.size?(d=0)=>{let{delayChildren:f=0,staggerChildren:g,staggerDirection:h}=e;return function(a,b,c=0,d=0,e=0,f=1,g){let h=[];for(let i of a.variantChildren)i.notify("AnimationStart",b),h.push(d$(i,b,{...g,delay:c+("function"==typeof d?0:d)+dZ(a.variantChildren,i,d,e,f)}).then(()=>i.notify("AnimationComplete",b)));return Promise.all(h)}(a,b,d,f,g,h,c)}:()=>Promise.resolve(),{when:h}=e;if(!h)return Promise.all([f(),g(c.delay)]);{let[a,b]="beforeChildren"===h?[f,g]:[g,f];return a().then(()=>b())}}function d_(a,b){if(!Array.isArray(b))return!1;let c=b.length;if(c!==a.length)return!1;for(let d=0;d<c;d++)if(b[d]!==a[d])return!1;return!0}let d0=bV.length,d1=[...bU].reverse(),d2=bU.length;function d3(a=!1){return{isActive:a,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function d4(){return{animate:d3(!0),whileInView:d3(),whileHover:d3(),whileTap:d3(),whileDrag:d3(),whileFocus:d3(),exit:d3()}}class d5{constructor(a){this.isMounted=!1,this.node=a}update(){}}let d6=0,d7={x:!1,y:!1};function d8(a,b,c,d={passive:!0}){return a.addEventListener(b,c,d),()=>a.removeEventListener(b,c)}let d9=a=>"mouse"===a.pointerType?"number"!=typeof a.button||a.button<=0:!1!==a.isPrimary;function ea(a){return{point:{x:a.pageX,y:a.pageY}}}function eb(a,b,c,d){return d8(a,b,a=>d9(a)&&c(a,ea(a)),d)}function ec(a){return a.max-a.min}function ed(a,b,c,d=.5){a.origin=d,a.originPoint=ak(b.min,b.max,a.origin),a.scale=ec(c)/ec(b),a.translate=ak(c.min,c.max,a.origin)-a.originPoint,(a.scale>=.9999&&a.scale<=1.0001||isNaN(a.scale))&&(a.scale=1),(a.translate>=-.01&&a.translate<=.01||isNaN(a.translate))&&(a.translate=0)}function ee(a,b,c,d){ed(a.x,b.x,c.x,d?d.originX:void 0),ed(a.y,b.y,c.y,d?d.originY:void 0)}function ef(a,b,c){a.min=c.min+b.min,a.max=a.min+ec(b)}function eg(a,b,c){a.min=b.min-c.min,a.max=a.min+ec(b)}function eh(a,b,c){eg(a.x,b.x,c.x),eg(a.y,b.y,c.y)}function ei(a){return[a("x"),a("y")]}let ej=({current:a})=>a?a.ownerDocument.defaultView:null,ek=(a,b)=>Math.abs(a-b);class el{constructor(a,b,{transformPagePoint:c,contextWindow:d=window,dragSnapToOrigin:e=!1,distanceThreshold:f=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{var a,b;if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let c=eo(this.lastMoveEventInfo,this.history),d=null!==this.startEvent,e=(a=c.offset,b={x:0,y:0},Math.sqrt(ek(a.x,b.x)**2+ek(a.y,b.y)**2)>=this.distanceThreshold);if(!d&&!e)return;let{point:f}=c,{timestamp:g}=aY;this.history.push({...f,timestamp:g});let{onStart:h,onMove:i}=this.handlers;d||(h&&h(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,c)},this.handlePointerMove=(a,b)=>{this.lastMoveEvent=a,this.lastMoveEventInfo=em(b,this.transformPagePoint),aW.update(this.updatePoint,!0)},this.handlePointerUp=(a,b)=>{this.end();let{onEnd:c,onSessionEnd:d,resumeAnimation:e}=this.handlers;if(this.dragSnapToOrigin&&e&&e(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let f=eo("pointercancel"===a.type?this.lastMoveEventInfo:em(b,this.transformPagePoint),this.history);this.startEvent&&c&&c(a,f),d&&d(a,f)},!d9(a))return;this.dragSnapToOrigin=e,this.handlers=b,this.transformPagePoint=c,this.distanceThreshold=f,this.contextWindow=d||window;const g=em(ea(a),this.transformPagePoint),{point:h}=g,{timestamp:i}=aY;this.history=[{...h,timestamp:i}];const{onSessionStart:j}=b;j&&j(a,eo(g,this.history)),this.removeListeners=cM(eb(this.contextWindow,"pointermove",this.handlePointerMove),eb(this.contextWindow,"pointerup",this.handlePointerUp),eb(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(a){this.handlers=a}end(){this.removeListeners&&this.removeListeners(),aX(this.updatePoint)}}function em(a,b){return b?{point:b(a.point)}:a}function en(a,b){return{x:a.x-b.x,y:a.y-b.y}}function eo({point:a},b){return{point:a,delta:en(a,ep(b)),offset:en(a,b[0]),velocity:function(a,b){if(a.length<2)return{x:0,y:0};let c=a.length-1,d=null,e=ep(a);for(;c>=0&&(d=a[c],!(e.timestamp-d.timestamp>cN(.1)));)c--;if(!d)return{x:0,y:0};let f=(e.timestamp-d.timestamp)/1e3;if(0===f)return{x:0,y:0};let g={x:(e.x-d.x)/f,y:(e.y-d.y)/f};return g.x===1/0&&(g.x=0),g.y===1/0&&(g.y=0),g}(b,.1)}}function ep(a){return a[a.length-1]}function eq(a,b,c){return{min:void 0!==b?a.min+b:void 0,max:void 0!==c?a.max+c-(a.max-a.min):void 0}}function er(a,b){let c=b.min-a.min,d=b.max-a.max;return b.max-b.min<a.max-a.min&&([c,d]=[d,c]),{min:c,max:d}}function es(a,b,c){return{min:et(a,b),max:et(a,c)}}function et(a,b){return"number"==typeof a?a:a[b]||0}let eu=new WeakMap;class ev{constructor(a){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bO(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=a}start(a,{snapToCursor:b=!1,distanceThreshold:c}={}){let{presenceContext:d}=this.visualElement;if(d&&!1===d.isPresent)return;let e=a=>{let{dragSnapToOrigin:c}=this.getProps();c?this.pauseAnimation():this.stopAnimation(),b&&this.snapToCursor(ea(a).point)},f=(a,b)=>{let{drag:c,dragPropagation:d,onDragStart:e}=this.getProps();if(c&&!d&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(a){if("x"===a||"y"===a)if(d7[a])return null;else return d7[a]=!0,()=>{d7[a]=!1};return d7.x||d7.y?null:(d7.x=d7.y=!0,()=>{d7.x=d7.y=!1})}(c),!this.openDragLock))return;this.latestPointerEvent=a,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ei(a=>{let b=this.getAxisMotionValue(a).get()||0;if(aD.test(b)){let{projection:c}=this.visualElement;if(c&&c.layout){let d=c.layout.layoutBox[a];d&&(b=ec(d)*(parseFloat(b)/100))}}this.originPoint[a]=b}),e&&aW.postRender(()=>e(a,b)),cJ(this.visualElement,"transform");let{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},g=(a,b)=>{this.latestPointerEvent=a,this.latestPanInfo=b;let{dragPropagation:c,dragDirectionLock:d,onDirectionLock:e,onDrag:f}=this.getProps();if(!c&&!this.openDragLock)return;let{offset:g}=b;if(d&&null===this.currentDirection){this.currentDirection=function(a,b=10){let c=null;return Math.abs(a.y)>b?c="y":Math.abs(a.x)>b&&(c="x"),c}(g),null!==this.currentDirection&&e&&e(this.currentDirection);return}this.updateAxis("x",b.point,g),this.updateAxis("y",b.point,g),this.visualElement.render(),f&&f(a,b)},h=(a,b)=>{this.latestPointerEvent=a,this.latestPanInfo=b,this.stop(a,b),this.latestPointerEvent=null,this.latestPanInfo=null},i=()=>ei(a=>"paused"===this.getAnimationState(a)&&this.getAxisMotionValue(a).animation?.play()),{dragSnapToOrigin:j}=this.getProps();this.panSession=new el(a,{onSessionStart:e,onStart:f,onMove:g,onSessionEnd:h,resumeAnimation:i},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:j,distanceThreshold:c,contextWindow:ej(this.visualElement)})}stop(a,b){let c=a||this.latestPointerEvent,d=b||this.latestPanInfo,e=this.isDragging;if(this.cancel(),!e||!d||!c)return;let{velocity:f}=d;this.startAnimation(f);let{onDragEnd:g}=this.getProps();g&&aW.postRender(()=>g(c,d))}cancel(){this.isDragging=!1;let{projection:a,animationState:b}=this.visualElement;a&&(a.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:c}=this.getProps();!c&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),b&&b.setActive("whileDrag",!1)}updateAxis(a,b,c){let{drag:d}=this.getProps();if(!c||!ew(a,d,this.currentDirection))return;let e=this.getAxisMotionValue(a),f=this.originPoint[a]+c[a];this.constraints&&this.constraints[a]&&(f=function(a,{min:b,max:c},d){return void 0!==b&&a<b?a=d?ak(b,a,d.min):Math.max(a,b):void 0!==c&&a>c&&(a=d?ak(c,a,d.max):Math.min(a,c)),a}(f,this.constraints[a],this.elastic[a])),e.set(f)}resolveConstraints(){let{dragConstraints:a,dragElastic:b}=this.getProps(),c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,d=this.constraints;a&&cB(a)?this.constraints||(this.constraints=this.resolveRefConstraints()):a&&c?this.constraints=function(a,{top:b,left:c,bottom:d,right:e}){return{x:eq(a.x,c,e),y:eq(a.y,b,d)}}(c.layoutBox,a):this.constraints=!1,this.elastic=function(a=.35){return!1===a?a=0:!0===a&&(a=.35),{x:es(a,"left","right"),y:es(a,"top","bottom")}}(b),d!==this.constraints&&c&&this.constraints&&!this.hasMutatedConstraints&&ei(a=>{var b,d;let e;!1!==this.constraints&&this.getAxisMotionValue(a)&&(this.constraints[a]=(b=c.layoutBox[a],d=this.constraints[a],e={},void 0!==d.min&&(e.min=d.min-b.min),void 0!==d.max&&(e.max=d.max-b.min),e))})}resolveRefConstraints(){var a;let{dragConstraints:b,onMeasureDragConstraints:c}=this.getProps();if(!b||!cB(b))return!1;let d=b.current;aM(null!==d,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:e}=this.visualElement;if(!e||!e.layout)return!1;let f=function(a,b,c){let d=av(a,c),{scroll:e}=b;return e&&(as(d.x,e.offset.x),as(d.y,e.offset.y)),d}(d,e.root,this.visualElement.getTransformPagePoint()),g=(a=e.layout.layoutBox,{x:er(a.x,f.x),y:er(a.y,f.y)});if(c){let a=c(function({x:a,y:b}){return{top:b.min,right:a.max,bottom:b.max,left:a.min}}(g));this.hasMutatedConstraints=!!a,a&&(g=aj(a))}return g}startAnimation(a){let{drag:b,dragMomentum:c,dragElastic:d,dragTransition:e,dragSnapToOrigin:f,onDragTransitionEnd:g}=this.getProps(),h=this.constraints||{};return Promise.all(ei(g=>{if(!ew(g,b,this.currentDirection))return;let i=h&&h[g]||{};f&&(i={min:0,max:0});let j={type:"inertia",velocity:c?a[g]:0,bounceStiffness:d?200:1e6,bounceDamping:d?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...e,...i};return this.startAxisValueAnimation(g,j)})).then(g)}startAxisValueAnimation(a,b){let c=this.getAxisMotionValue(a);return cJ(this.visualElement,a),c.start(dX(a,c,0,b,this.visualElement,!1))}stopAnimation(){ei(a=>this.getAxisMotionValue(a).stop())}pauseAnimation(){ei(a=>this.getAxisMotionValue(a).animation?.pause())}getAnimationState(a){return this.getAxisMotionValue(a).animation?.state}getAxisMotionValue(a){let b=`_drag${a.toUpperCase()}`,c=this.visualElement.getProps();return c[b]||this.visualElement.getValue(a,(c.initial?c.initial[a]:void 0)||0)}snapToCursor(a){ei(b=>{let{drag:c}=this.getProps();if(!ew(b,c,this.currentDirection))return;let{projection:d}=this.visualElement,e=this.getAxisMotionValue(b);if(d&&d.layout){let{min:c,max:f}=d.layout.layoutBox[b];e.set(a[b]-ak(c,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:a,dragConstraints:b}=this.getProps(),{projection:c}=this.visualElement;if(!cB(b)||!c||!this.constraints)return;this.stopAnimation();let d={x:0,y:0};ei(a=>{let b=this.getAxisMotionValue(a);if(b&&!1!==this.constraints){var c,e;let f,g,h,i=b.get();d[a]=(c={min:i,max:i},e=this.constraints[a],f=.5,g=ec(c),(h=ec(e))>g?f=dw(e.min,e.max-g,c.min):g>h&&(f=dw(c.min,c.max-h,e.min)),ax(0,1,f))}});let{transformTemplate:e}=this.visualElement.getProps();this.visualElement.current.style.transform=e?e({},""):"none",c.root&&c.root.updateScroll(),c.updateLayout(),this.resolveConstraints(),ei(b=>{if(!ew(b,a,null))return;let c=this.getAxisMotionValue(b),{min:e,max:f}=this.constraints[b];c.set(ak(e,f,d[b]))})}addListeners(){if(!this.visualElement.current)return;eu.set(this.visualElement,this);let a=eb(this.visualElement.current,"pointerdown",a=>{let{drag:b,dragListener:c=!0}=this.getProps();b&&c&&this.start(a)}),b=()=>{let{dragConstraints:a}=this.getProps();cB(a)&&a.current&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,d=c.addEventListener("measure",b);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),aW.read(b);let e=d8(window,"resize",()=>this.scalePositionWithinConstraints()),f=c.addEventListener("didUpdate",({delta:a,hasLayoutChanged:b})=>{this.isDragging&&b&&(ei(b=>{let c=this.getAxisMotionValue(b);c&&(this.originPoint[b]+=a[b].translate,c.set(c.get()+a[b].translate))}),this.visualElement.render())});return()=>{e(),a(),d(),f&&f()}}getProps(){let a=this.visualElement.getProps(),{drag:b=!1,dragDirectionLock:c=!1,dragPropagation:d=!1,dragConstraints:e=!1,dragElastic:f=.35,dragMomentum:g=!0}=a;return{...a,drag:b,dragDirectionLock:c,dragPropagation:d,dragConstraints:e,dragElastic:f,dragMomentum:g}}}function ew(a,b,c){return(!0===b||b===a)&&(null===c||c===a)}let ex=a=>(b,c)=>{a&&aW.postRender(()=>a(b,c))};var ey=T;function ez(a=!0){let b=(0,T.useContext)(cu);if(null===b)return[!0,null];let{isPresent:c,onExitComplete:d,register:e}=b,f=(0,T.useId)();(0,T.useEffect)(()=>{if(a)return e(f)},[a]);let g=(0,T.useCallback)(()=>a&&d&&d(f),[f,d,a]);return!c&&d?[!1,g]:[!0]}let eA={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function eB(a,b){return b.max===b.min?0:a/(b.max-b.min)*100}let eC={correct:(a,b)=>{if(!b.target)return a;if("string"==typeof a)if(!aE.test(a))return a;else a=parseFloat(a);let c=eB(a,b.target.x),d=eB(a,b.target.y);return`${c}% ${d}%`}},eD=!1;class eE extends ey.Component{componentDidMount(){let{visualElement:a,layoutGroup:b,switchLayoutGroup:c,layoutId:d}=this.props,{projection:e}=a;for(let a in eG)b6[a]=eG[a],af(a)&&(b6[a].isCSSVariable=!0);e&&(b.group&&b.group.add(e),c&&c.register&&d&&c.register(e),eD&&e.root.didUpdate(),e.addEventListener("animationComplete",()=>{this.safeToRemove()}),e.setOptions({...e.options,onExitComplete:()=>this.safeToRemove()})),eA.hasEverUpdated=!0}getSnapshotBeforeUpdate(a){let{layoutDependency:b,visualElement:c,drag:d,isPresent:e}=this.props,{projection:f}=c;return f&&(f.isPresent=e,eD=!0,d||a.layoutDependency!==b||void 0===b||a.isPresent!==e?f.willUpdate():this.safeToRemove(),a.isPresent!==e&&(e?f.promote():f.relegate()||aW.postRender(()=>{let a=f.getStack();a&&a.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:a}=this.props.visualElement;a&&(a.root.didUpdate(),bI.postRender(()=>{!a.currentAnimation&&a.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:a,layoutGroup:b,switchLayoutGroup:c}=this.props,{projection:d}=a;eD=!0,d&&(d.scheduleCheckAfterUnmount(),b&&b.group&&b.group.remove(d),c&&c.deregister&&c.deregister(d))}safeToRemove(){let{safeToRemove:a}=this.props;a&&a()}render(){return null}}function eF(a){let[b,c]=ez(),d=(0,ey.useContext)(ck);return(0,S.jsx)(eE,{...a,layoutGroup:d,switchLayoutGroup:(0,ey.useContext)(cD),isPresent:b,safeToRemove:c})}let eG={borderRadius:{...eC,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:eC,borderTopRightRadius:eC,borderBottomLeftRadius:eC,borderBottomRightRadius:eC,boxShadow:{correct:(a,{treeScale:b,projectionDelta:c})=>{let d=bn.parse(a);if(d.length>5)return a;let e=bn.createTransformer(a),f=+("number"!=typeof d[0]),g=c.x.scale*b.x,h=c.y.scale*b.y;d[0+f]/=g,d[1+f]/=h;let i=ak(g,h,.5);return"number"==typeof d[2+f]&&(d[2+f]/=i),"number"==typeof d[3+f]&&(d[3+f]/=i),e(d)}}};function eH(a){return"object"==typeof a&&null!==a}function eI(a){return eH(a)&&"ownerSVGElement"in a}let eJ=(a,b)=>a.depth-b.depth;class eK{constructor(){this.children=[],this.isDirty=!1}add(a){bC(this.children,a),this.isDirty=!0}remove(a){bD(this.children,a),this.isDirty=!0}forEach(a){this.isDirty&&this.children.sort(eJ),this.isDirty=!1,this.children.forEach(a)}}let eL=["TopLeft","TopRight","BottomLeft","BottomRight"],eM=eL.length,eN=a=>"string"==typeof a?parseFloat(a):a,eO=a=>"number"==typeof a||aE.test(a);function eP(a,b){return void 0!==a[b]?a[b]:a.borderRadius}let eQ=eS(0,.5,dr),eR=eS(.5,.95,aS);function eS(a,b,c){return d=>d<a?0:d>b?1:c(dw(a,b,d))}function eT(a,b){a.min=b.min,a.max=b.max}function eU(a,b){eT(a.x,b.x),eT(a.y,b.y)}function eV(a,b){a.translate=b.translate,a.scale=b.scale,a.originPoint=b.originPoint,a.origin=b.origin}function eW(a,b,c,d,e){return a-=b,a=d+1/c*(a-d),void 0!==e&&(a=d+1/e*(a-d)),a}function eX(a,b,[c,d,e],f,g){!function(a,b=0,c=1,d=.5,e,f=a,g=a){if(aD.test(b)&&(b=parseFloat(b),b=ak(g.min,g.max,b/100)-g.min),"number"!=typeof b)return;let h=ak(f.min,f.max,d);a===f&&(h-=b),a.min=eW(a.min,b,c,h,e),a.max=eW(a.max,b,c,h,e)}(a,b[c],b[d],b[e],b.scale,f,g)}let eY=["x","scaleX","originX"],eZ=["y","scaleY","originY"];function e$(a,b,c,d){eX(a.x,b,eY,c?c.x:void 0,d?d.x:void 0),eX(a.y,b,eZ,c?c.y:void 0,d?d.y:void 0)}function e_(a){return 0===a.translate&&1===a.scale}function e0(a){return e_(a.x)&&e_(a.y)}function e1(a,b){return a.min===b.min&&a.max===b.max}function e2(a,b){return Math.round(a.min)===Math.round(b.min)&&Math.round(a.max)===Math.round(b.max)}function e3(a,b){return e2(a.x,b.x)&&e2(a.y,b.y)}function e4(a){return ec(a.x)/ec(a.y)}function e5(a,b){return a.translate===b.translate&&a.scale===b.scale&&a.originPoint===b.originPoint}class e6{constructor(){this.members=[]}add(a){bC(this.members,a),a.scheduleRender()}remove(a){if(bD(this.members,a),a===this.prevLead&&(this.prevLead=void 0),a===this.lead){let a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(a){let b,c=this.members.findIndex(b=>a===b);if(0===c)return!1;for(let a=c;a>=0;a--){let c=this.members[a];if(!1!==c.isPresent){b=c;break}}return!!b&&(this.promote(b),!0)}promote(a,b){let c=this.lead;if(a!==c&&(this.prevLead=c,this.lead=a,a.show(),c)){c.instance&&c.scheduleRender(),a.scheduleRender(),a.resumeFrom=c,b&&(a.resumeFrom.preserveOpacity=!0),c.snapshot&&(a.snapshot=c.snapshot,a.snapshot.latestValues=c.animationValues||c.latestValues),a.root&&a.root.isUpdating&&(a.isLayoutDirty=!0);let{crossfade:d}=a.options;!1===d&&c.hide()}}exitAnimationComplete(){this.members.forEach(a=>{let{options:b,resumingFrom:c}=a;b.onExitComplete&&b.onExitComplete(),c&&c.options.onExitComplete&&c.options.onExitComplete()})}scheduleRender(){this.members.forEach(a=>{a.instance&&a.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let e7=["","X","Y","Z"],e8=0;function e9(a,b,c,d){let{latestValues:e}=b;e[a]&&(c[a]=e[a],b.setStaticValue(a,0),d&&(d[a]=0))}function fa({attachResizeListener:a,defaultParent:b,measureScroll:c,checkIsScrollRoot:d,resetTransform:e}){return class{constructor(a={},c=b?.()){this.id=e8++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fd),this.nodes.forEach(fk),this.nodes.forEach(fl),this.nodes.forEach(fe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new eK)}addEventListener(a,b){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new bE),this.eventHandlers.get(a).add(b)}notifyListeners(a,...b){let c=this.eventHandlers.get(a);c&&c.notify(...b)}hasListeners(a){return this.eventHandlers.has(a)}mount(b){if(this.instance)return;this.isSVG=eI(b)&&!(eI(b)&&"svg"===b.tagName),this.instance=b;let{layoutId:c,layout:d,visualElement:e}=this.options;if(e&&!e.current&&e.mount(b),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),a){let c,d=0,e=()=>this.root.updateBlockedByResize=!1;aW.read(()=>{d=window.innerWidth}),a(b,()=>{let a=window.innerWidth;if(a!==d){let b,f;d=a,this.root.updateBlockedByResize=!0,c&&c(),b=bB.now(),f=({timestamp:a})=>{let c=a-b;c>=250&&(aX(f),e(c-250))},aW.setup(f,!0),c=()=>aX(f),eA.hasAnimatedSinceResize&&(eA.hasAnimatedSinceResize=!1,this.nodes.forEach(fj))}})}c&&this.root.registerSharedNode(c,this),!1!==this.options.animate&&e&&(c||d)&&this.addEventListener("didUpdate",({delta:a,hasLayoutChanged:b,hasRelativeLayoutChanged:c,layout:d})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let f=this.options.transition||e.getDefaultTransition()||fr,{onLayoutAnimationStart:g,onLayoutAnimationComplete:h}=e.getProps(),i=!this.targetLayout||!e3(this.targetLayout,d),j=!b&&c;if(this.options.layoutRoot||this.resumeFrom||j||b&&(i||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let b={...cH(f,"layout"),onPlay:g,onComplete:h};(e.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(a,j)}else b||fj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=d})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),aX(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fm),this.animationId++)}getTransformTemplate(){let{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function a(b){if(b.hasCheckedOptimisedAppear=!0,b.root===b)return;let{visualElement:c}=b.options;if(!c)return;let d=c.props[cC];if(window.MotionHasOptimisedAnimation(d,"transform")){let{layout:a,layoutId:c}=b.options;window.MotionCancelOptimisedAnimation(d,"transform",aW,!(a||c))}let{parent:e}=b;e&&!e.hasCheckedOptimisedAppear&&a(e)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let a=0;a<this.path.length;a++){let b=this.path[a];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}let{layoutId:b,layout:c}=this.options;if(void 0===b&&!c)return;let d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(fg);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(fh);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(fi),this.nodes.forEach(fb),this.nodes.forEach(fc)):this.nodes.forEach(fh),this.clearAllSnapshots();let a=bB.now();aY.delta=ax(0,1e3/60,a-aY.timestamp),aY.timestamp=a,aY.isProcessing=!0,aZ.update.process(aY),aZ.preRender.process(aY),aZ.render.process(aY),aY.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bI.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ff),this.sharedNodes.forEach(fn)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,aW.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){aW.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||ec(this.snapshot.measuredBox.x)||ec(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();let a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=bO(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:b}=this.options;b&&b.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let b=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(b=!1),b&&this.instance){let b=d(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:b,offset:c(this.instance),wasRoot:this.scroll?this.scroll.isRoot:b}}}resetTransform(){if(!e)return;let a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,b=this.projectionDelta&&!e0(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;a&&this.instance&&(b||an(this.latestValues)||f)&&(e(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){var b;let c=this.measurePageBox(),d=this.removeElementScroll(c);return a&&(d=this.removeTransform(d)),fu((b=d).x),fu(b.y),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:a}=this.options;if(!a)return bO();let b=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(fw))){let{scroll:a}=this.root;a&&(as(b.x,a.offset.x),as(b.y,a.offset.y))}return b}removeElementScroll(a){let b=bO();if(eU(b,a),this.scroll?.wasRoot)return b;for(let c=0;c<this.path.length;c++){let d=this.path[c],{scroll:e,options:f}=d;d!==this.root&&e&&f.layoutScroll&&(e.wasRoot&&eU(b,a),as(b.x,e.offset.x),as(b.y,e.offset.y))}return b}applyTransform(a,b=!1){let c=bO();eU(c,a);for(let a=0;a<this.path.length;a++){let d=this.path[a];!b&&d.options.layoutScroll&&d.scroll&&d!==d.root&&au(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),an(d.latestValues)&&au(c,d.latestValues)}return an(this.latestValues)&&au(c,this.latestValues),c}removeTransform(a){let b=bO();eU(b,a);for(let a=0;a<this.path.length;a++){let c=this.path[a];if(!c.instance||!an(c.latestValues))continue;am(c.latestValues)&&c.updateSnapshot();let d=bO();eU(d,c.measurePageBox()),e$(b,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return an(this.latestValues)&&e$(b,this.latestValues),b}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:void 0===a.crossfade||a.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==aY.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){let b=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=b.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=b.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=b.isSharedProjectionDirty);let c=!!this.resumingFrom||this!==b;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:d,layoutId:e}=this.options;if(!this.layout||!(d||e))return;this.resolvedRelativeTargetAt=aY.timestamp;let f=this.getClosestProjectingParent();if(f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta){if(this.target||(this.target=bO(),this.targetWithTransforms=bO()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var g,h,i;this.forceRelativeParentToResolveTarget(),g=this.target,h=this.relativeTarget,i=this.relativeParent.target,ef(g.x,h.x,i.x),ef(g.y,h.y,i.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):eU(this.target,this.layout.layoutBox),ar(this.target,this.targetDelta)):eU(this.target,this.layout.layoutBox);this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&1!==this.animationProgress?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0)}}getClosestProjectingParent(){if(!(!this.parent||am(this.parent.latestValues)||ao(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,b,c){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bO(),this.relativeTargetOrigin=bO(),eh(this.relativeTargetOrigin,b,c),eU(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let a=this.getLead(),b=!!this.resumingFrom||this!==a,c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),b&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===aY.timestamp&&(c=!1),c)return;let{layout:d,layoutId:e}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||e))return;eU(this.layoutCorrected,this.layout.layoutBox);let f=this.treeScale.x,g=this.treeScale.y;!function(a,b,c,d=!1){let e,f,g=c.length;if(g){b.x=b.y=1;for(let h=0;h<g;h++){f=(e=c[h]).projectionDelta;let{visualElement:g}=e.options;(!g||!g.props.style||"contents"!==g.props.style.display)&&(d&&e.options.layoutScroll&&e.scroll&&e!==e.root&&au(a,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),f&&(b.x*=f.x.scale,b.y*=f.y.scale,ar(a,f)),d&&an(e.latestValues)&&au(a,e.latestValues))}b.x<1.0000000000001&&b.x>.999999999999&&(b.x=1),b.y<1.0000000000001&&b.y>.999999999999&&(b.y=1)}}(this.layoutCorrected,this.treeScale,this.path,b),a.layout&&!a.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=bO());let{target:h}=a;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(eV(this.prevProjectionDelta.x,this.projectionDelta.x),eV(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),ee(this.projectionDelta,this.layoutCorrected,h,this.latestValues),this.treeScale.x===f&&this.treeScale.y===g&&e5(this.projectionDelta.x,this.prevProjectionDelta.x)&&e5(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){let a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=bM(),this.projectionDelta=bM(),this.projectionDeltaWithTransform=bM()}setAnimationOrigin(a,b=!1){let c,d=this.snapshot,e=d?d.latestValues:{},f={...this.latestValues},g=bM();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!b;let h=bO(),i=(d?d.source:void 0)!==(this.layout?this.layout.source:void 0),j=this.getStack(),k=!j||j.members.length<=1,l=!!(i&&!k&&!0===this.options.crossfade&&!this.path.some(fq));this.animationProgress=0,this.mixTargetDelta=b=>{let d=b/1e3;if(fo(g.x,a.x,d),fo(g.y,a.y,d),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var j,m,n,o,p,q;eh(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),n=this.relativeTarget,o=this.relativeTargetOrigin,p=h,q=d,fp(n.x,o.x,p.x,q),fp(n.y,o.y,p.y,q),c&&(j=this.relativeTarget,m=c,e1(j.x,m.x)&&e1(j.y,m.y))&&(this.isProjectionDirty=!1),c||(c=bO()),eU(c,this.relativeTarget)}i&&(this.animationValues=f,function(a,b,c,d,e,f){e?(a.opacity=ak(0,c.opacity??1,eQ(d)),a.opacityExit=ak(b.opacity??1,0,eR(d))):f&&(a.opacity=ak(b.opacity??1,c.opacity??1,d));for(let e=0;e<eM;e++){let f=`border${eL[e]}Radius`,g=eP(b,f),h=eP(c,f);(void 0!==g||void 0!==h)&&(g||(g=0),h||(h=0),0===g||0===h||eO(g)===eO(h)?(a[f]=Math.max(ak(eN(g),eN(h),d),0),(aD.test(h)||aD.test(g))&&(a[f]+="%")):a[f]=h)}(b.rotate||c.rotate)&&(a.rotate=ak(b.rotate||0,c.rotate||0,d))}(f,e,this.latestValues,d,l,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=d},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(aX(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=aW.update(()=>{var b,c,d;let e;eA.hasAnimatedSinceResize=!0,cO.layout++,this.motionValue||(this.motionValue=bG(0)),this.currentAnimation=(b=this.motionValue,c=[0,1e3],d={...a,velocity:0,isSync:!0,onUpdate:b=>{this.mixTargetDelta(b),a.onUpdate&&a.onUpdate(b)},onStop:()=>{cO.layout--},onComplete:()=>{cO.layout--,a.onComplete&&a.onComplete(),this.completeAnimation()}},(e=bz(b)?b:bG(b)).start(dX("",e,c,d)),e.animation),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let a=this.getLead(),{targetWithTransforms:b,target:c,layout:d,latestValues:e}=a;if(b&&c&&d){if(this!==a&&this.layout&&d&&fv(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||bO();let b=ec(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+b;let d=ec(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+d}eU(b,c),au(b,e),ee(this.projectionDeltaWithTransform,this.layoutCorrected,b,e)}}registerSharedNode(a,b){this.sharedNodes.has(a)||this.sharedNodes.set(a,new e6),this.sharedNodes.get(a).add(b);let c=b.options.initialPromotionConfig;b.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(b):void 0})}isLead(){let a=this.getStack();return!a||a.lead===this}getLead(){let{layoutId:a}=this.options;return a&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:b,preserveFollowOpacity:c}={}){let d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),b&&this.setOptions({transition:b})}relegate(){let a=this.getStack();return!!a&&a.relegate(this)}resetSkewAndRotation(){let{visualElement:a}=this.options;if(!a)return;let b=!1,{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(b=!0),!b)return;let d={};c.z&&e9("z",a,d,this.animationValues);for(let b=0;b<e7.length;b++)e9(`rotate${e7[b]}`,a,d,this.animationValues),e9(`skew${e7[b]}`,a,d,this.animationValues);for(let b in a.render(),d)a.setStaticValue(b,d[b]),this.animationValues&&(this.animationValues[b]=d[b]);a.scheduleRender()}applyProjectionStyles(a,b){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}let c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=cw(b?.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}let d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(a.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,a.pointerEvents=cw(b?.pointerEvents)||""),this.hasProjected&&!an(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";let e=d.animationValues||d.latestValues;this.applyTransformsToTarget();let f=function(a,b,c){let d="",e=a.x.translate/b.x,f=a.y.translate/b.y,g=c?.z||0;if((e||f||g)&&(d=`translate3d(${e}px, ${f}px, ${g}px) `),(1!==b.x||1!==b.y)&&(d+=`scale(${1/b.x}, ${1/b.y}) `),c){let{transformPerspective:a,rotate:b,rotateX:e,rotateY:f,skewX:g,skewY:h}=c;a&&(d=`perspective(${a}px) ${d}`),b&&(d+=`rotate(${b}deg) `),e&&(d+=`rotateX(${e}deg) `),f&&(d+=`rotateY(${f}deg) `),g&&(d+=`skewX(${g}deg) `),h&&(d+=`skewY(${h}deg) `)}let h=a.x.scale*b.x,i=a.y.scale*b.y;return(1!==h||1!==i)&&(d+=`scale(${h}, ${i})`),d||"none"}(this.projectionDeltaWithTransform,this.treeScale,e);c&&(f=c(e,f)),a.transform=f;let{x:g,y:h}=this.projectionDelta;for(let b in a.transformOrigin=`${100*g.origin}% ${100*h.origin}% 0`,d.animationValues?a.opacity=d===this?e.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:e.opacityExit:a.opacity=d===this?void 0!==e.opacity?e.opacity:"":void 0!==e.opacityExit?e.opacityExit:0,b6){if(void 0===e[b])continue;let{correct:c,applyTo:g,isCSSVariable:h}=b6[b],i="none"===f?e[b]:c(e[b],d);if(g){let b=g.length;for(let c=0;c<b;c++)a[g[c]]=i}else h?this.options.visualElement.renderState.vars[b]=i:a[b]=i}this.options.layoutId&&(a.pointerEvents=d===this?cw(b?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(fg),this.root.sharedNodes.clear()}}}function fb(a){a.updateLayout()}function fc(a){let b=a.resumeFrom?.snapshot||a.snapshot;if(a.isLead()&&a.layout&&b&&a.hasListeners("didUpdate")){let{layoutBox:c,measuredBox:d}=a.layout,{animationType:e}=a.options,f=b.source!==a.layout.source;"size"===e?ei(a=>{let d=f?b.measuredBox[a]:b.layoutBox[a],e=ec(d);d.min=c[a].min,d.max=d.min+e}):fv(e,b.layoutBox,c)&&ei(d=>{let e=f?b.measuredBox[d]:b.layoutBox[d],g=ec(c[d]);e.max=e.min+g,a.relativeTarget&&!a.currentAnimation&&(a.isProjectionDirty=!0,a.relativeTarget[d].max=a.relativeTarget[d].min+g)});let g=bM();ee(g,c,b.layoutBox);let h=bM();f?ee(h,a.applyTransform(d,!0),b.measuredBox):ee(h,c,b.layoutBox);let i=!e0(g),j=!1;if(!a.resumeFrom){let d=a.getClosestProjectingParent();if(d&&!d.resumeFrom){let{snapshot:e,layout:f}=d;if(e&&f){let g=bO();eh(g,b.layoutBox,e.layoutBox);let h=bO();eh(h,c,f.layoutBox),e3(g,h)||(j=!0),d.options.layoutRoot&&(a.relativeTarget=h,a.relativeTargetOrigin=g,a.relativeParent=d)}}}a.notifyListeners("didUpdate",{layout:c,snapshot:b,delta:h,layoutDelta:g,hasLayoutChanged:i,hasRelativeLayoutChanged:j})}else if(a.isLead()){let{onExitComplete:b}=a.options;b&&b()}a.options.transition=void 0}function fd(a){a.parent&&(a.isProjecting()||(a.isProjectionDirty=a.parent.isProjectionDirty),a.isSharedProjectionDirty||(a.isSharedProjectionDirty=!!(a.isProjectionDirty||a.parent.isProjectionDirty||a.parent.isSharedProjectionDirty)),a.isTransformDirty||(a.isTransformDirty=a.parent.isTransformDirty))}function fe(a){a.isProjectionDirty=a.isSharedProjectionDirty=a.isTransformDirty=!1}function ff(a){a.clearSnapshot()}function fg(a){a.clearMeasurements()}function fh(a){a.isLayoutDirty=!1}function fi(a){let{visualElement:b}=a.options;b&&b.getProps().onBeforeLayoutMeasure&&b.notify("BeforeLayoutMeasure"),a.resetTransform()}function fj(a){a.finishAnimation(),a.targetDelta=a.relativeTarget=a.target=void 0,a.isProjectionDirty=!0}function fk(a){a.resolveTargetDelta()}function fl(a){a.calcProjection()}function fm(a){a.resetSkewAndRotation()}function fn(a){a.removeLeadSnapshot()}function fo(a,b,c){a.translate=ak(b.translate,0,c),a.scale=ak(b.scale,1,c),a.origin=b.origin,a.originPoint=b.originPoint}function fp(a,b,c,d){a.min=ak(b.min,c.min,d),a.max=ak(b.max,c.max,d)}function fq(a){return a.animationValues&&void 0!==a.animationValues.opacityExit}let fr={duration:.45,ease:[.4,0,.1,1]},fs=a=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(a),ft=fs("applewebkit/")&&!fs("chrome/")?Math.round:aS;function fu(a){a.min=ft(a.min),a.max=ft(a.max)}function fv(a,b,c){return"position"===a||"preserve-aspect"===a&&!(.2>=Math.abs(e4(b)-e4(c)))}function fw(a){return a!==a.root&&a.scroll?.wasRoot}let fx=fa({attachResizeListener:(a,b)=>d8(a,"resize",b),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fy={current:void 0},fz=fa({measureScroll:a=>({x:a.scrollLeft,y:a.scrollTop}),defaultParent:()=>{if(!fy.current){let a=new fx({});a.mount(window),a.setOptions({layoutScroll:!0}),fy.current=a}return fy.current},resetTransform:(a,b)=>{a.style.transform=void 0!==b?b:"none"},checkIsScrollRoot:a=>"fixed"===window.getComputedStyle(a).position});function fA(a,b){let c=function(a,b,c){if(a instanceof EventTarget)return[a];if("string"==typeof a){let b=document,c=(void 0)??b.querySelectorAll(a);return c?Array.from(c):[]}return Array.from(a)}(a),d=new AbortController;return[c,{passive:!0,...b,signal:d.signal},()=>d.abort()]}function fB(a){return!("touch"===a.pointerType||d7.x||d7.y)}function fC(a,b,c){let{props:d}=a;a.animationState&&d.whileHover&&a.animationState.setActive("whileHover","Start"===c);let e=d["onHover"+c];e&&aW.postRender(()=>e(b,ea(b)))}function fD(a){return eH(a)&&"offsetHeight"in a}let fE=(a,b)=>!!b&&(a===b||fE(a,b.parentElement)),fF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),fG=new WeakSet;function fH(a){return b=>{"Enter"===b.key&&a(b)}}function fI(a,b){a.dispatchEvent(new PointerEvent("pointer"+b,{isPrimary:!0,bubbles:!0}))}function fJ(a){return d9(a)&&!(d7.x||d7.y)}function fK(a,b,c){let{props:d}=a;if(a.current instanceof HTMLButtonElement&&a.current.disabled)return;a.animationState&&d.whileTap&&a.animationState.setActive("whileTap","Start"===c);let e=d["onTap"+("End"===c?"":c)];e&&aW.postRender(()=>e(b,ea(b)))}let fL=new WeakMap,fM=new WeakMap,fN=a=>{let b=fL.get(a.target);b&&b(a)},fO=a=>{a.forEach(fN)},fP={some:0,all:1},fQ=function(a,b){if("undefined"==typeof Proxy)return cF;let c=new Map,d=(c,d)=>cF(c,d,a,b);return new Proxy((a,b)=>d(a,b),{get:(e,f)=>"create"===f?d:(c.has(f)||c.set(f,cF(f,void 0,a,b)),c.get(f))})}({animation:{Feature:class extends d5{constructor(a){super(a),a.animationState||(a.animationState=function(a){let b=b=>Promise.all(b.map(({animation:b,options:c})=>(function(a,b,c={}){let d;if(a.notify("AnimationStart",b),Array.isArray(b))d=Promise.all(b.map(b=>d$(a,b,c)));else if("string"==typeof b)d=d$(a,b,c);else{let e="function"==typeof b?cG(a,b,c.custom):b;d=Promise.all(dY(a,e,c))}return d.then(()=>{a.notify("AnimationComplete",b)})})(a,b,c))),c=d4(),d=!0,e=b=>(c,d)=>{let e=cG(a,d,"exit"===b?a.presenceContext?.custom:void 0);if(e){let{transition:a,transitionEnd:b,...d}=e;c={...c,...d,...b}}return c};function f(f){let{props:g}=a,h=function a(b){if(!b)return;if(!b.isControllingVariants){let c=b.parent&&a(b.parent)||{};return void 0!==b.props.initial&&(c.initial=b.props.initial),c}let c={};for(let a=0;a<d0;a++){let d=bV[a],e=b.props[d];(bT(e)||!1===e)&&(c[d]=e)}return c}(a.parent)||{},i=[],j=new Set,k={},l=1/0;for(let b=0;b<d2;b++){var m,n;let o=d1[b],p=c[o],q=void 0!==g[o]?g[o]:h[o],r=bT(q),s=o===f?p.isActive:null;!1===s&&(l=b);let t=q===h[o]&&q!==g[o]&&r;if(t&&d&&a.manuallyAnimateOnMount&&(t=!1),p.protectedKeys={...k},!p.isActive&&null===s||!q&&!p.prevProp||bS(q)||"boolean"==typeof q)continue;let u=(m=p.prevProp,"string"==typeof(n=q)?n!==m:!!Array.isArray(n)&&!d_(n,m)),v=u||o===f&&p.isActive&&!t&&r||b>l&&r,w=!1,x=Array.isArray(q)?q:[q],y=x.reduce(e(o),{});!1===s&&(y={});let{prevResolvedValues:z={}}=p,A={...z,...y},B=b=>{v=!0,j.has(b)&&(w=!0,j.delete(b)),p.needsAnimating[b]=!0;let c=a.getValue(b);c&&(c.liveStyle=!1)};for(let a in A){let b=y[a],c=z[a];if(!k.hasOwnProperty(a))(cI(b)&&cI(c)?d_(b,c):b===c)?void 0!==b&&j.has(a)?B(a):p.protectedKeys[a]=!0:null!=b?B(a):j.add(a)}p.prevProp=q,p.prevResolvedValues=y,p.isActive&&(k={...k,...y}),d&&a.blockInitialAnimation&&(v=!1);let C=t&&u,D=!C||w;v&&D&&i.push(...x.map(b=>{let c={type:o};if("string"==typeof b&&d&&!C&&a.manuallyAnimateOnMount&&a.parent){let{parent:d}=a,e=cG(d,b);if(d.enteringChildren&&e){let{delayChildren:b}=e.transition||{};c.delay=dZ(d.enteringChildren,a,b)}}return{animation:b,options:c}}))}if(j.size){let b={};if("boolean"!=typeof g.initial){let c=cG(a,Array.isArray(g.initial)?g.initial[0]:g.initial);c&&c.transition&&(b.transition=c.transition)}j.forEach(c=>{let d=a.getBaseTarget(c),e=a.getValue(c);e&&(e.liveStyle=!0),b[c]=d??null}),i.push({animation:b})}let o=!!i.length;return d&&(!1===g.initial||g.initial===g.animate)&&!a.manuallyAnimateOnMount&&(o=!1),d=!1,o?b(i):Promise.resolve()}return{animateChanges:f,setActive:function(b,d){if(c[b].isActive===d)return Promise.resolve();a.variantChildren?.forEach(a=>a.animationState?.setActive(b,d)),c[b].isActive=d;let e=f(b);for(let a in c)c[a].protectedKeys={};return e},setAnimateFunction:function(c){b=c(a)},getState:()=>c,reset:()=>{c=d4()}}}(a))}updateAnimationControlsSubscription(){let{animate:a}=this.node.getProps();bS(a)&&(this.unmountControls=a.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:a}=this.node.getProps(),{animate:b}=this.node.prevProps||{};a!==b&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends d5{constructor(){super(...arguments),this.id=d6++}update(){if(!this.node.presenceContext)return;let{isPresent:a,onExitComplete:b}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||a===c)return;let d=this.node.animationState.setActive("exit",!a);b&&!a&&d.then(()=>{b(this.id)})}mount(){let{register:a,onExitComplete:b}=this.node.presenceContext||{};b&&b(this.id),a&&(this.unmount=a(this.id))}unmount(){}}},inView:{Feature:class extends d5{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){var a;let b;this.unmount();let{viewport:c={}}=this.node.getProps(),{root:d,margin:e,amount:f="some",once:g}=c,h={root:d?d.current:void 0,rootMargin:e,threshold:"number"==typeof f?f:fP[f]},i=a=>{let{isIntersecting:b}=a;if(this.isInView===b||(this.isInView=b,g&&!b&&this.hasEnteredView))return;b&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",b);let{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),e=b?c:d;e&&e(a)};return a=this.node.current,b=function({root:a,...b}){let c=a||document;fM.has(c)||fM.set(c,{});let d=fM.get(c),e=JSON.stringify(b);return d[e]||(d[e]=new IntersectionObserver(fO,{root:a,...b})),d[e]}(h),fL.set(a,i),b.observe(a),()=>{fL.delete(a),b.unobserve(a)}}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:a,prevProps:b}=this.node;["amount","margin","root"].some(function({viewport:a={}},{viewport:b={}}={}){return c=>a[c]!==b[c]}(a,b))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends d5{mount(){let{current:a}=this.node;a&&(this.unmount=function(a,b,c={}){let[d,e,f]=fA(a,c),g=a=>{let d=a.currentTarget;if(!fJ(a))return;fG.add(d);let f=b(d,a),g=(a,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",i),fG.has(d)&&fG.delete(d),fJ(a)&&"function"==typeof f&&f(a,{success:b})},h=a=>{g(a,d===window||d===document||c.useGlobalTarget||fE(d,a.target))},i=a=>{g(a,!1)};window.addEventListener("pointerup",h,e),window.addEventListener("pointercancel",i,e)};return d.forEach(a=>{((c.useGlobalTarget?window:a).addEventListener("pointerdown",g,e),fD(a))&&(a.addEventListener("focus",a=>((a,b)=>{let c=a.currentTarget;if(!c)return;let d=fH(()=>{if(fG.has(c))return;fI(c,"down");let a=fH(()=>{fI(c,"up")});c.addEventListener("keyup",a,b),c.addEventListener("blur",()=>fI(c,"cancel"),b)});c.addEventListener("keydown",d,b),c.addEventListener("blur",()=>c.removeEventListener("keydown",d),b)})(a,e)),fF.has(a.tagName)||-1!==a.tabIndex||a.hasAttribute("tabindex")||(a.tabIndex=0))}),f}(a,(a,b)=>(fK(this.node,b,"Start"),(a,{success:b})=>fK(this.node,a,b?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends d5{constructor(){super(...arguments),this.isActive=!1}onFocus(){let a=!1;try{a=this.node.current.matches(":focus-visible")}catch(b){a=!0}a&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cM(d8(this.node.current,"focus",()=>this.onFocus()),d8(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends d5{mount(){let{current:a}=this.node;a&&(this.unmount=function(a,b,c={}){let[d,e,f]=fA(a,c),g=a=>{if(!fB(a))return;let{target:c}=a,d=b(c,a);if("function"!=typeof d||!c)return;let f=a=>{fB(a)&&(d(a),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,e)};return d.forEach(a=>{a.addEventListener("pointerenter",g,e)}),f}(a,(a,b)=>(fC(this.node,b,"Start"),a=>fC(this.node,a,"End"))))}unmount(){}}},pan:{Feature:class extends d5{constructor(){super(...arguments),this.removePointerDownListener=aS}onPointerDown(a){this.session=new el(a,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ej(this.node)})}createPanHandlers(){let{onPanSessionStart:a,onPanStart:b,onPan:c,onPanEnd:d}=this.node.getProps();return{onSessionStart:ex(a),onStart:ex(b),onMove:c,onEnd:(a,b)=>{delete this.session,d&&aW.postRender(()=>d(a,b))}}}mount(){this.removePointerDownListener=eb(this.node.current,"pointerdown",a=>this.onPointerDown(a))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends d5{constructor(a){super(a),this.removeGroupControls=aS,this.removeListeners=aS,this.controls=new ev(a)}mount(){let{dragControls:a}=this.node.getProps();a&&(this.removeGroupControls=a.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||aS}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:fz,MeasureLayout:eF},layout:{ProjectionNode:fz,MeasureLayout:eF}},(a,b)=>cj(a)?new ch(b):new b9(b,{allowProjection:a!==T.Fragment}));var fR=T;function fS(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}class fT extends fR.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=b.offsetParent,c=fD(a)&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=b.offsetHeight||0,d.width=b.offsetWidth||0,d.top=b.offsetTop,d.left=b.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function fU({children:a,isPresent:b,anchorX:c,root:d}){let e=(0,fR.useId)(),f=(0,fR.useRef)(null),g=(0,fR.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,fR.useContext)(cl),i=function(...a){return T.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=fS(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():fS(a[b],null)}}}}(...a),a)}(f,a?.ref);return(0,fR.useInsertionEffect)(()=>{let{width:a,height:i,top:j,left:k,right:l}=g.current;if(b||!f.current||!a||!i)return;let m="left"===c?`left: ${k}`:`right: ${l}`;f.current.dataset.motionPopId=e;let n=document.createElement("style");h&&(n.nonce=h);let o=d??document.head;return o.appendChild(n),n.sheet&&n.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${i}px !important;
            ${m}px !important;
            top: ${j}px !important;
          }
        `),()=>{o.contains(n)&&o.removeChild(n)}},[b]),(0,S.jsx)(fT,{isPresent:b,childRef:f,sizeRef:g,children:fR.cloneElement(a,{ref:i})})}let fV=({children:a,initial:b,isPresent:c,onExitComplete:d,custom:e,presenceAffectsLayout:f,mode:g,anchorX:h,root:i})=>{let j=cv(fW),k=(0,T.useId)(),l=!0,m=(0,T.useMemo)(()=>(l=!1,{id:k,initial:b,isPresent:c,custom:e,onExitComplete:a=>{for(let b of(j.set(a,!0),j.values()))if(!b)return;d&&d()},register:a=>(j.set(a,!1),()=>j.delete(a))}),[c,j,d]);return f&&l&&(m={...m}),(0,T.useMemo)(()=>{j.forEach((a,b)=>j.set(b,!1))},[c]),T.useEffect(()=>{c||j.size||!d||d()},[c]),"popLayout"===g&&(a=(0,S.jsx)(fU,{isPresent:c,anchorX:h,root:i,children:a})),(0,S.jsx)(cu.Provider,{value:m,children:a})};function fW(){return new Map}let fX=a=>a.key||"";function fY(a){let b=[];return T.Children.forEach(a,a=>{(0,T.isValidElement)(a)&&b.push(a)}),b}let fZ=({children:a,custom:b,initial:c=!0,onExitComplete:d,presenceAffectsLayout:e=!0,mode:f="sync",propagate:g=!1,anchorX:h="left",root:i})=>{let[j,k]=ez(g),l=(0,T.useMemo)(()=>fY(a),[a]),m=g&&!j?[]:l.map(fX),n=(0,T.useRef)(!0),o=(0,T.useRef)(l),p=cv(()=>new Map),[q,r]=(0,T.useState)(l),[s,t]=(0,T.useState)(l);cE(()=>{n.current=!1,o.current=l;for(let a=0;a<s.length;a++){let b=fX(s[a]);m.includes(b)?p.delete(b):!0!==p.get(b)&&p.set(b,!1)}},[s,m.length,m.join("-")]);let u=[];if(l!==q){let a=[...l];for(let b=0;b<s.length;b++){let c=s[b],d=fX(c);m.includes(d)||(a.splice(b,0,c),u.push(c))}return"wait"===f&&u.length&&(a=u),t(fY(a)),r(l),null}let{forceRender:v}=(0,T.useContext)(ck);return(0,S.jsx)(S.Fragment,{children:s.map(a=>{let q=fX(a),r=(!g||!!j)&&(l===s||m.includes(q));return(0,S.jsx)(fV,{isPresent:r,initial:(!n.current||!!c)&&void 0,custom:b,presenceAffectsLayout:e,mode:f,root:i,onExitComplete:r?void 0:()=>{if(!p.has(q))return;p.set(q,!0);let a=!0;p.forEach(b=>{b||(a=!1)}),a&&(v?.(),t(o.current),g&&k?.(),d&&d())},anchorX:h,children:a},q)})})},f$=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var f_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f0=(0,T.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:f,iconNode:g,...h},i)=>(0,T.createElement)("svg",{ref:i,...f_,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:f$("lucide",e),...h},[...g.map(([a,b])=>(0,T.createElement)(a,b)),...Array.isArray(f)?f:[f]])),f1=(a,b)=>{let c=(0,T.forwardRef)(({className:c,...d},e)=>(0,T.createElement)(f0,{ref:e,iconNode:b,className:f$(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,c),...d}));return c.displayName=`${a}`,c},f2=f1("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),f3=f1("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),f4=f1("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),f5=f1("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),f6=f1("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),f7=f1("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),f8=f1("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),f9=f1("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ga=f1("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),gb=f1("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);function gc(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function gd(...a){return b=>{let c=!1,d=a.map(a=>{let d=gc(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():gc(a[b],null)}}}}function ge(...a){return T.useCallback(gd(...a),a)}var gf=T.forwardRef((a,b)=>{let{children:c,...d}=a,e=T.Children.toArray(c),f=e.find(gi);if(f){let a=f.props.children,c=e.map(b=>b!==f?b:T.Children.count(a)>1?T.Children.only(null):T.isValidElement(a)?a.props.children:null);return(0,S.jsx)(gg,{...d,ref:b,children:T.isValidElement(a)?T.cloneElement(a,void 0,c):null})}return(0,S.jsx)(gg,{...d,ref:b,children:c})});gf.displayName="Slot";var gg=T.forwardRef((a,b)=>{let{children:c,...d}=a;if(T.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref);return T.cloneElement(c,{...function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{f(...a),e(...a)}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props),ref:b?gd(b,g):g})}return T.Children.count(c)>1?T.Children.only(null):null});gg.displayName="SlotClone";var gh=({children:a})=>(0,S.jsx)(S.Fragment,{children:a});function gi(a){return T.isValidElement(a)&&a.type===gh}function gj(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}let gk=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,gl=(a,b)=>{if(0===a.length)return b.classGroupId;let c=a[0],d=b.nextPart.get(c),e=d?gl(a.slice(1),d):void 0;if(e)return e;if(0===b.validators.length)return;let f=a.join("-");return b.validators.find(({validator:a})=>a(f))?.classGroupId},gm=/^\[(.+)\]$/,gn=(a,b,c,d)=>{a.forEach(a=>{if("string"==typeof a){(""===a?b:go(b,a)).classGroupId=c;return}"function"==typeof a?gp(a)?gn(a(d),b,c,d):b.validators.push({validator:a,classGroupId:c}):Object.entries(a).forEach(([a,e])=>{gn(e,go(b,a),c,d)})})},go=(a,b)=>{let c=a;return b.split("-").forEach(a=>{c.nextPart.has(a)||c.nextPart.set(a,{nextPart:new Map,validators:[]}),c=c.nextPart.get(a)}),c},gp=a=>a.isThemeGetter,gq=(a,b)=>b?a.map(([a,c])=>[a,c.map(a=>"string"==typeof a?b+a:"object"==typeof a?Object.fromEntries(Object.entries(a).map(([a,c])=>[b+a,c])):a)]):a,gr=a=>{if(a.length<=1)return a;let b=[],c=[];return a.forEach(a=>{"["===a[0]?(b.push(...c.sort(),a),c=[]):c.push(a)}),b.push(...c.sort()),b},gs=/\s+/;function gt(){let a,b,c=0,d="";for(;c<arguments.length;)(a=arguments[c++])&&(b=gu(a))&&(d&&(d+=" "),d+=b);return d}let gu=a=>{let b;if("string"==typeof a)return a;let c="";for(let d=0;d<a.length;d++)a[d]&&(b=gu(a[d]))&&(c&&(c+=" "),c+=b);return c},gv=a=>{let b=b=>b[a]||[];return b.isThemeGetter=!0,b},gw=/^\[(?:([a-z-]+):)?(.+)\]$/i,gx=/^\d+\/\d+$/,gy=new Set(["px","full","screen"]),gz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,gC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gE=a=>gG(a)||gy.has(a)||gx.test(a),gF=a=>gT(a,"length",gU),gG=a=>!!a&&!Number.isNaN(Number(a)),gH=a=>gT(a,"number",gG),gI=a=>!!a&&Number.isInteger(Number(a)),gJ=a=>a.endsWith("%")&&gG(a.slice(0,-1)),gK=a=>gw.test(a),gL=a=>gz.test(a),gM=new Set(["length","size","percentage"]),gN=a=>gT(a,gM,gV),gO=a=>gT(a,"position",gV),gP=new Set(["image","url"]),gQ=a=>gT(a,gP,gX),gR=a=>gT(a,"",gW),gS=()=>!0,gT=(a,b,c)=>{let d=gw.exec(a);return!!d&&(d[1]?"string"==typeof b?d[1]===b:b.has(d[1]):c(d[2]))},gU=a=>gA.test(a)&&!gB.test(a),gV=()=>!1,gW=a=>gC.test(a),gX=a=>gD.test(a),gY=function(a,...b){let c,d,e,f=function(h){let i;return d=(c={cache:(a=>{if(a<1)return{get:()=>void 0,set:()=>{}};let b=0,c=new Map,d=new Map,e=(e,f)=>{c.set(e,f),++b>a&&(b=0,d=c,c=new Map)};return{get(a){let b=c.get(a);return void 0!==b?b:void 0!==(b=d.get(a))?(e(a,b),b):void 0},set(a,b){c.has(a)?c.set(a,b):e(a,b)}}})((i=b.reduce((a,b)=>b(a),a())).cacheSize),parseClassName:(a=>{let{separator:b,experimentalParseClassName:c}=a,d=1===b.length,e=b[0],f=b.length,g=a=>{let c,g=[],h=0,i=0;for(let j=0;j<a.length;j++){let k=a[j];if(0===h){if(k===e&&(d||a.slice(j,j+f)===b)){g.push(a.slice(i,j)),i=j+f;continue}if("/"===k){c=j;continue}}"["===k?h++:"]"===k&&h--}let j=0===g.length?a:a.substring(i),k=j.startsWith("!"),l=k?j.substring(1):j;return{modifiers:g,hasImportantModifier:k,baseClassName:l,maybePostfixModifierPosition:c&&c>i?c-i:void 0}};return c?a=>c({className:a,parseClassName:g}):g})(i),...(a=>{let b=(a=>{let{theme:b,prefix:c}=a,d={nextPart:new Map,validators:[]};return gq(Object.entries(a.classGroups),c).forEach(([a,c])=>{gn(c,d,a,b)}),d})(a),{conflictingClassGroups:c,conflictingClassGroupModifiers:d}=a;return{getClassGroupId:a=>{let c=a.split("-");return""===c[0]&&1!==c.length&&c.shift(),gl(c,b)||(a=>{if(gm.test(a)){let b=gm.exec(a)[1],c=b?.substring(0,b.indexOf(":"));if(c)return"arbitrary.."+c}})(a)},getConflictingClassGroupIds:(a,b)=>{let e=c[a]||[];return b&&d[a]?[...e,...d[a]]:e}}})(i)}).cache.get,e=c.cache.set,f=g,g(h)};function g(a){let b=d(a);if(b)return b;let f=((a,b)=>{let{parseClassName:c,getClassGroupId:d,getConflictingClassGroupIds:e}=b,f=[],g=a.trim().split(gs),h="";for(let a=g.length-1;a>=0;a-=1){let b=g[a],{modifiers:i,hasImportantModifier:j,baseClassName:k,maybePostfixModifierPosition:l}=c(b),m=!!l,n=d(m?k.substring(0,l):k);if(!n){if(!m||!(n=d(k))){h=b+(h.length>0?" "+h:h);continue}m=!1}let o=gr(i).join(":"),p=j?o+"!":o,q=p+n;if(f.includes(q))continue;f.push(q);let r=e(n,m);for(let a=0;a<r.length;++a){let b=r[a];f.push(p+b)}h=b+(h.length>0?" "+h:h)}return h})(a,c);return e(a,f),f}return function(){return f(gt.apply(null,arguments))}}(()=>{let a=gv("colors"),b=gv("spacing"),c=gv("blur"),d=gv("brightness"),e=gv("borderColor"),f=gv("borderRadius"),g=gv("borderSpacing"),h=gv("borderWidth"),i=gv("contrast"),j=gv("grayscale"),k=gv("hueRotate"),l=gv("invert"),m=gv("gap"),n=gv("gradientColorStops"),o=gv("gradientColorStopPositions"),p=gv("inset"),q=gv("margin"),r=gv("opacity"),s=gv("padding"),t=gv("saturate"),u=gv("scale"),v=gv("sepia"),w=gv("skew"),x=gv("space"),y=gv("translate"),z=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",gK,b],C=()=>[gK,b],D=()=>["",gE,gF],E=()=>["auto",gG,gK],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",gK],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[gG,gK];return{cacheSize:500,separator:":",theme:{colors:[gS],spacing:[gE,gF],blur:["none","",gL,gK],brightness:L(),borderColor:[a],borderRadius:["none","","full",gL,gK],borderSpacing:C(),borderWidth:D(),contrast:L(),grayscale:J(),hueRotate:L(),invert:J(),gap:C(),gradientColorStops:[a],gradientColorStopPositions:[gJ,gF],inset:B(),margin:B(),opacity:L(),padding:C(),saturate:L(),scale:L(),sepia:J(),skew:L(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",gK]}],container:["container"],columns:[{columns:[gL]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),gK]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gI,gK]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",gK]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",gI,gK]}],"grid-cols":[{"grid-cols":[gS]}],"col-start-end":[{col:["auto",{span:["full",gI,gK]},gK]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[gS]}],"row-start-end":[{row:["auto",{span:[gI,gK]},gK]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",gK]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",gK]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[s]}],px:[{px:[s]}],py:[{py:[s]}],ps:[{ps:[s]}],pe:[{pe:[s]}],pt:[{pt:[s]}],pr:[{pr:[s]}],pb:[{pb:[s]}],pl:[{pl:[s]}],m:[{m:[q]}],mx:[{mx:[q]}],my:[{my:[q]}],ms:[{ms:[q]}],me:[{me:[q]}],mt:[{mt:[q]}],mr:[{mr:[q]}],mb:[{mb:[q]}],ml:[{ml:[q]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",gK,b]}],"min-w":[{"min-w":[gK,b,"min","max","fit"]}],"max-w":[{"max-w":[gK,b,"none","full","min","max","fit","prose",{screen:[gL]},gL]}],h:[{h:[gK,b,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[gK,b,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[gK,b,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[gK,b,"auto","min","max","fit"]}],"font-size":[{text:["base",gL,gF]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gH]}],"font-family":[{font:[gS]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",gK]}],"line-clamp":[{"line-clamp":["none",gG,gH]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gE,gK]}],"list-image":[{"list-image":["none",gK]}],"list-style-type":[{list:["none","disc","decimal",gK]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[a]}],"placeholder-opacity":[{"placeholder-opacity":[r]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[a]}],"text-opacity":[{"text-opacity":[r]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gE,gF]}],"underline-offset":[{"underline-offset":["auto",gE,gK]}],"text-decoration-color":[{decoration:[a]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gK]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gK]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[r]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),gO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gN]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},gQ]}],"bg-color":[{bg:[a]}],"gradient-from-pos":[{from:[o]}],"gradient-via-pos":[{via:[o]}],"gradient-to-pos":[{to:[o]}],"gradient-from":[{from:[n]}],"gradient-via":[{via:[n]}],"gradient-to":[{to:[n]}],rounded:[{rounded:[f]}],"rounded-s":[{"rounded-s":[f]}],"rounded-e":[{"rounded-e":[f]}],"rounded-t":[{"rounded-t":[f]}],"rounded-r":[{"rounded-r":[f]}],"rounded-b":[{"rounded-b":[f]}],"rounded-l":[{"rounded-l":[f]}],"rounded-ss":[{"rounded-ss":[f]}],"rounded-se":[{"rounded-se":[f]}],"rounded-ee":[{"rounded-ee":[f]}],"rounded-es":[{"rounded-es":[f]}],"rounded-tl":[{"rounded-tl":[f]}],"rounded-tr":[{"rounded-tr":[f]}],"rounded-br":[{"rounded-br":[f]}],"rounded-bl":[{"rounded-bl":[f]}],"border-w":[{border:[h]}],"border-w-x":[{"border-x":[h]}],"border-w-y":[{"border-y":[h]}],"border-w-s":[{"border-s":[h]}],"border-w-e":[{"border-e":[h]}],"border-w-t":[{"border-t":[h]}],"border-w-r":[{"border-r":[h]}],"border-w-b":[{"border-b":[h]}],"border-w-l":[{"border-l":[h]}],"border-opacity":[{"border-opacity":[r]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[h]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[h]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[r]}],"divide-style":[{divide:G()}],"border-color":[{border:[e]}],"border-color-x":[{"border-x":[e]}],"border-color-y":[{"border-y":[e]}],"border-color-s":[{"border-s":[e]}],"border-color-e":[{"border-e":[e]}],"border-color-t":[{"border-t":[e]}],"border-color-r":[{"border-r":[e]}],"border-color-b":[{"border-b":[e]}],"border-color-l":[{"border-l":[e]}],"divide-color":[{divide:[e]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[gE,gK]}],"outline-w":[{outline:[gE,gF]}],"outline-color":[{outline:[a]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[a]}],"ring-opacity":[{"ring-opacity":[r]}],"ring-offset-w":[{"ring-offset":[gE,gF]}],"ring-offset-color":[{"ring-offset":[a]}],shadow:[{shadow:["","inner","none",gL,gR]}],"shadow-color":[{shadow:[gS]}],opacity:[{opacity:[r]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[c]}],brightness:[{brightness:[d]}],contrast:[{contrast:[i]}],"drop-shadow":[{"drop-shadow":["","none",gL,gK]}],grayscale:[{grayscale:[j]}],"hue-rotate":[{"hue-rotate":[k]}],invert:[{invert:[l]}],saturate:[{saturate:[t]}],sepia:[{sepia:[v]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[c]}],"backdrop-brightness":[{"backdrop-brightness":[d]}],"backdrop-contrast":[{"backdrop-contrast":[i]}],"backdrop-grayscale":[{"backdrop-grayscale":[j]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[k]}],"backdrop-invert":[{"backdrop-invert":[l]}],"backdrop-opacity":[{"backdrop-opacity":[r]}],"backdrop-saturate":[{"backdrop-saturate":[t]}],"backdrop-sepia":[{"backdrop-sepia":[v]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[g]}],"border-spacing-x":[{"border-spacing-x":[g]}],"border-spacing-y":[{"border-spacing-y":[g]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",gK]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",gK]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",gK]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[u]}],"scale-x":[{"scale-x":[u]}],"scale-y":[{"scale-y":[u]}],rotate:[{rotate:[gI,gK]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[w]}],"skew-y":[{"skew-y":[w]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",gK]}],accent:[{accent:["auto",a]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gK]}],"caret-color":[{caret:[a]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gK]}],fill:[{fill:[a,"none"]}],"stroke-w":[{stroke:[gE,gF,gH]}],stroke:[{stroke:[a,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function gZ(...a){return gY(gj(a))}let g$=(e="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",f={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}},a=>{var b;if((null==f?void 0:f.variants)==null)return gj(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:c,defaultVariants:d}=f,g=Object.keys(c).map(b=>{let e=null==a?void 0:a[b],f=null==d?void 0:d[b];if(null===e)return null;let g=gk(e)||gk(f);return c[b][g]}),h=a&&Object.entries(a).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return gj(e,g,null==f||null==(b=f.compoundVariants)?void 0:b.reduce((a,b)=>{let{class:c,className:e,...f}=b;return Object.entries(f).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...d,...h}[b]):({...d,...h})[b]===c})?[...a,c,e]:a},[]),null==a?void 0:a.class,null==a?void 0:a.className)});function g_({className:a,variant:b,size:c,asChild:d=!1,...e}){let f=d?gf:"button";return(0,S.jsx)(f,{"data-slot":"button",className:gZ(g$({variant:b,size:c,className:a})),...e})}function g0({className:a,...b}){return(0,S.jsx)("div",{"data-slot":"card",className:gZ("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...b})}function g1(a,b=[]){let c=[],d=()=>{let b=c.map(a=>T.createContext(a));return function(c){let d=c?.[a]||b;return T.useMemo(()=>({[`__scope${a}`]:{...c,[a]:d}}),[c,d])}};return d.scopeName=a,[function(b,d){let e=T.createContext(d),f=c.length;c=[...c,d];let g=b=>{let{scope:c,children:d,...g}=b,h=c?.[a]?.[f]||e,i=T.useMemo(()=>g,Object.values(g));return(0,S.jsx)(h.Provider,{value:i,children:d})};return g.displayName=b+"Provider",[g,function(c,g){let h=g?.[a]?.[f]||e,i=T.useContext(h);if(i)return i;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${b}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let d=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return T.useMemo(()=>({[`__scope${b.scopeName}`]:d}),[d])}};return c.scopeName=b.scopeName,c}(d,...b)]}var g2=a.i(50092),g3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((a,b)=>{let c=T.forwardRef((a,c)=>{let{asChild:d,...e}=a,f=d?gf:b;return(0,S.jsx)(f,{...e,ref:c})});return c.displayName=`Primitive.${b}`,{...a,[b]:c}},{}),g4="Progress",[g5,g6]=g1(g4),[g7,g8]=g5(g4),g9=T.forwardRef((a,b)=>{var c,d;let{__scopeProgress:e,value:f=null,max:g,getValueLabel:h=hc,...i}=a;(g||0===g)&&!hf(g)&&console.error((c=`${g}`,`Invalid prop \`max\` of value \`${c}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let j=hf(g)?g:100;null===f||hg(f,j)||console.error((d=`${f}`,`Invalid prop \`value\` of value \`${d}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let k=hg(f,j)?f:null,l=he(k)?h(k,j):void 0;return(0,S.jsx)(g7,{scope:e,value:k,max:j,children:(0,S.jsx)(g3.div,{"aria-valuemax":j,"aria-valuemin":0,"aria-valuenow":he(k)?k:void 0,"aria-valuetext":l,role:"progressbar","data-state":hd(k,j),"data-value":k??void 0,"data-max":j,...i,ref:b})})});g9.displayName=g4;var ha="ProgressIndicator",hb=T.forwardRef((a,b)=>{let{__scopeProgress:c,...d}=a,e=g8(ha,c);return(0,S.jsx)(g3.div,{"data-state":hd(e.value,e.max),"data-value":e.value??void 0,"data-max":e.max,...d,ref:b})});function hc(a,b){return`${Math.round(a/b*100)}%`}function hd(a,b){return null==a?"indeterminate":a===b?"complete":"loading"}function he(a){return"number"==typeof a}function hf(a){return he(a)&&!isNaN(a)&&a>0}function hg(a,b){return he(a)&&!isNaN(a)&&a<=b&&a>=0}function hh({className:a,value:b,...c}){return(0,S.jsx)(g9,{"data-slot":"progress",className:gZ("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",a),...c,children:(0,S.jsx)(hb,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(b||0)}%)`}})})}function hi({level1Progress:a,level2Progress:b,level3Progress:c,currentLevel:d}){let e=(a,b)=>0===b?"#1a1a2e":a<d||b>=100?"#00FF88":a===d?"#00FFFF":"#1a1a2e",f=a=>a>0?`0 0 ${10+.2*a}px`:"none";return(0,S.jsxs)("div",{className:"relative w-full max-w-[200px] mx-auto",children:[(0,S.jsxs)("svg",{viewBox:"0 0 200 180",className:"w-full h-auto",children:[(0,S.jsxs)("defs",{children:[(0,S.jsxs)("filter",{id:"glow1",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,S.jsx)("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),(0,S.jsxs)("feMerge",{children:[(0,S.jsx)("feMergeNode",{in:"coloredBlur"}),(0,S.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,S.jsxs)("filter",{id:"glow2",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,S.jsx)("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),(0,S.jsxs)("feMerge",{children:[(0,S.jsx)("feMergeNode",{in:"coloredBlur"}),(0,S.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,S.jsxs)("filter",{id:"glow3",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,S.jsx)("feGaussianBlur",{stdDeviation:"5",result:"coloredBlur"}),(0,S.jsxs)("feMerge",{children:[(0,S.jsx)("feMergeNode",{in:"coloredBlur"}),(0,S.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,S.jsx)("path",{d:"M100 20 C140 20 170 50 175 90 C180 130 160 160 120 165 C100 167 80 167 60 165 C20 160 0 130 5 90 C10 50 40 20 80 20 Z",fill:"none",stroke:"#2a2a4a",strokeWidth:"2",opacity:"0.5"}),(0,S.jsxs)(fQ.g,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[(0,S.jsx)(fQ.path,{d:"M40 60 Q60 30 100 35 Q85 50 75 70 Q55 80 40 60",fill:e(1,a),stroke:a>0?"#00FFFF":"#3a3a5a",strokeWidth:"2",filter:a>0?"url(#glow1)":"none",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1},style:{filter:a>0?`drop-shadow(${f(a)} ${e(1,a)})`:"none"}}),(0,S.jsx)(fQ.path,{d:"M50 55 L65 50 M55 65 L70 60 M45 70 L60 72",fill:"none",stroke:a>30?"#00FFFF":"#2a2a4a",strokeWidth:"1",opacity:a/100})]}),(0,S.jsxs)(fQ.g,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:[(0,S.jsx)(fQ.path,{d:"M100 35 Q140 30 155 60 Q145 85 120 90 Q95 85 85 65 Q85 45 100 35",fill:e(2,b),stroke:b>0?"#FF6B35":"#3a3a5a",strokeWidth:"2",filter:b>0?"url(#glow2)":"none",style:{filter:b>0?`drop-shadow(${f(b)} ${e(2,b)})`:"none"}}),(0,S.jsx)(fQ.path,{d:"M110 45 L125 50 M115 55 L130 58 M105 65 L120 70",fill:"none",stroke:b>30?"#FF6B35":"#2a2a4a",strokeWidth:"1",opacity:b/100})]}),(0,S.jsxs)(fQ.g,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[(0,S.jsx)(fQ.path,{d:"M35 85 Q25 110 40 140 Q60 155 100 155 Q140 155 160 140 Q175 110 165 85 Q140 100 100 100 Q60 100 35 85",fill:e(3,c),stroke:c>0?"#A855F7":"#3a3a5a",strokeWidth:"2",filter:c>0?"url(#glow3)":"none",style:{filter:c>0?`drop-shadow(${f(c)} ${e(3,c)})`:"none"}}),(0,S.jsx)(fQ.path,{d:"M60 120 L80 115 M70 130 L90 125 M80 140 L100 138 M120 140 L140 135 M130 125 L145 120",fill:"none",stroke:c>30?"#A855F7":"#2a2a4a",strokeWidth:"1",opacity:c/100})]}),(0,S.jsx)("path",{d:"M95 155 Q90 170 95 180 M105 155 Q110 170 105 180",fill:"none",stroke:"#3a3a5a",strokeWidth:"2"}),a>0&&(0,S.jsx)(fQ.circle,{cx:"60",cy:"55",r:"2",fill:"#00FFFF",animate:{opacity:[.3,1,.3],scale:[.8,1.2,.8]},transition:{duration:2,repeat:1/0}}),b>0&&(0,S.jsx)(fQ.circle,{cx:"120",cy:"55",r:"2",fill:"#FF6B35",animate:{opacity:[.3,1,.3],scale:[.8,1.2,.8]},transition:{duration:2,repeat:1/0,delay:.5}}),c>0&&(0,S.jsx)(fQ.circle,{cx:"100",cy:"130",r:"2",fill:"#A855F7",animate:{opacity:[.3,1,.3],scale:[.8,1.2,.8]},transition:{duration:2,repeat:1/0,delay:1}})]}),(0,S.jsxs)("div",{className:"mt-4 space-y-1 text-xs",children:[(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a>0?"#00FFFF":"#2a2a4a"}}),(0,S.jsxs)("span",{className:"text-gray-400 text-lg",children:["Novice: ",Math.round(a),"%"]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:b>0?"#FF6B35":"#2a2a4a"}}),(0,S.jsxs)("span",{className:"text-gray-400 text-lg",children:["Praticien: ",Math.round(b),"%"]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:c>0?"#A855F7":"#2a2a4a"}}),(0,S.jsxs)("span",{className:"text-gray-400 text-lg",children:["Expert: ",Math.round(c),"%"]})]})]})]})}hb.displayName=ha;let hj=f1("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function hk({isScanning:a,result:b,onComplete:c}){let[d,e]=(0,T.useState)("scanning"),[f,g]=(0,T.useState)(!1),h=(0,T.useCallback)(()=>{g(!1),e("scanning"),c()},[c]);return((0,T.useEffect)(()=>{if(a){g(!0),e("scanning");let a=setTimeout(()=>{e("result")},1500);return()=>clearTimeout(a)}},[a]),(0,T.useEffect)(()=>{if("result"===d&&f){let a=setTimeout(()=>{h()},2e3);return()=>clearTimeout(a)}},[d,f,h]),f)?(0,S.jsx)(fZ,{children:(0,S.jsxs)(fQ.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:h,children:[(0,S.jsx)("button",{onClick:a=>{a.stopPropagation(),h()},className:"absolute top-6 right-6 p-2 rounded-full bg-gray-800/80 border border-gray-700 hover:bg-gray-700 hover:border-gray-600 transition-colors z-10","aria-label":"Fermer",children:(0,S.jsx)(hj,{className:"w-6 h-6 text-gray-400 hover:text-white"})}),(0,S.jsx)("div",{className:"relative",onClick:a=>a.stopPropagation(),children:"scanning"===d?(0,S.jsxs)("div",{className:"text-center",children:[(0,S.jsxs)("div",{className:"relative w-48 h-48 mx-auto mb-6",children:[(0,S.jsxs)("svg",{viewBox:"0 0 200 200",className:"w-full h-full",children:[(0,S.jsx)(fQ.circle,{cx:"100",cy:"100",r:"80",fill:"none",stroke:"#00FFFF",strokeWidth:"2",strokeDasharray:"502",initial:{strokeDashoffset:502},animate:{strokeDashoffset:0},transition:{duration:1.5,ease:"linear"}}),(0,S.jsx)(fQ.line,{x1:"20",y1:"100",x2:"180",y2:"100",stroke:"#00FFFF",strokeWidth:"2",initial:{y1:20,y2:20},animate:{y1:180,y2:180},transition:{duration:1.5,ease:"easeInOut"}}),(0,S.jsx)("path",{d:"M100 40 C130 40 155 65 155 100 C155 135 130 160 100 160 C70 160 45 135 45 100 C45 65 70 40 100 40",fill:"none",stroke:"#00FFFF",strokeWidth:"1",opacity:"0.3"}),(0,S.jsx)(fQ.path,{d:"M70 80 Q100 60 130 80 M60 100 Q100 120 140 100 M70 120 Q100 140 130 120",fill:"none",stroke:"#00FFFF",strokeWidth:"2",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.5}})]}),[...Array(8)].map((a,b)=>(0,S.jsx)(fQ.div,{className:"absolute w-1 h-1 bg-cyan-400 rounded-full",style:{left:"50%",top:"50%"},animate:{x:60*Math.cos(b*Math.PI*2/8),y:60*Math.sin(b*Math.PI*2/8),opacity:[0,1,0],scale:[0,1,0]},transition:{duration:1.5,repeat:1/0,delay:.1*b}},b))]}),(0,S.jsx)(fQ.p,{className:"text-cyan-400 font-mono text-lg",animate:{opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0},children:"ANALYSE COGNITIVE EN COURS..."})]}):(0,S.jsx)(fQ.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},className:"text-center",children:"success"===b?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(fQ.div,{className:"w-24 h-24 mx-auto mb-4 rounded-full border-4 border-green-500 flex items-center justify-center",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},style:{boxShadow:"0 0 30px #00FF88"},children:(0,S.jsx)(fQ.svg,{className:"w-12 h-12 text-green-500",viewBox:"0 0 24 24",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.2},children:(0,S.jsx)(fQ.path,{d:"M5 13l4 4L19 7",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5}})})}),(0,S.jsx)("p",{className:"text-green-400 font-mono text-xl",children:"CONCEPT MATRIS"}),(0,S.jsx)("p",{className:"text-gray-500 text-sm mt-3 font-mono",children:"Fermeture automatique..."})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(fQ.div,{className:"w-24 h-24 mx-auto mb-4 rounded-full border-4 border-red-500 flex items-center justify-center",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},style:{boxShadow:"0 0 30px #FF4444"},children:(0,S.jsxs)(fQ.svg,{className:"w-12 h-12 text-red-500",viewBox:"0 0 24 24",children:[(0,S.jsx)(fQ.path,{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z",fill:"currentColor"}),(0,S.jsx)(fQ.path,{d:"M12 8v4M12 16h.01",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,S.jsx)("p",{className:"text-red-400 font-mono text-xl",children:"BIAIS DTECT"}),(0,S.jsx)("p",{className:"text-gray-500 text-sm mt-3 font-mono",children:"Fermeture automatique..."})]})})})]})}):null}let hl=f1("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),hm=f1("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);function hn({options:a,onSelect:b,disabled:c}){return(0,S.jsxs)("div",{className:"w-full max-w-4xl mx-auto",children:[(0,S.jsx)("p",{className:"text-primary font-mono text-sm mb-4 text-center",children:"[ EXPRIENCE DIRECTE ] Cliquez sur l'offre que le site VEUT que vous choisissiez"}),(0,S.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:a.map((a,d)=>(0,S.jsxs)(fQ.button,{onClick:()=>!c&&b(d),disabled:c,className:`relative p-6 rounded-xl border-2 transition-all duration-300 text-left ${a.highlighted?"border-primary bg-primary/10":"border-border bg-secondary/50"} ${!c?"hover:scale-105 hover:border-primary cursor-pointer":"cursor-default"}`,whileHover:c?{}:{y:-5},whileTap:c?{}:{scale:.98},children:[a.badge&&(0,S.jsxs)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-primary text-primary-foreground text-xs font-bold rounded-full flex items-center gap-1",children:[(0,S.jsx)(hm,{className:"w-3 h-3"}),a.badge.replace(" ","")]}),(0,S.jsx)("h3",{className:"text-xl font-bold text-foreground mb-2",children:a.name}),(0,S.jsx)("p",{className:"text-3xl font-bold text-primary mb-4",children:a.price}),(0,S.jsx)("ul",{className:"space-y-2",children:a.features.map((a,b)=>(0,S.jsxs)("li",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[(0,S.jsx)(hl,{className:"w-4 h-4 text-success"}),a]},b))}),(0,S.jsxs)("div",{className:`mt-6 py-2 px-4 rounded-lg text-center font-semibold ${a.highlighted?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:["Choisir ",a.name]})]},a.name))})]})}let ho=f1("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),hp=f1("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);function hq({bias:a,isUnlocked:b,onClick:c}){let d={Perception:"var(--neon-cyan)",Cognition:"var(--neon-orange)",Dcision:"var(--neon-purple)",Mmoire:"var(--neon-yellow)",Social:"var(--accent)","UX Law":"var(--neon-green)",Persuasion:"var(--neon-red)","Dark Pattern":"var(--destructive)",Organisation:"var(--primary)",Mtacognition:"var(--info)",Probabilit:"var(--accent)",Possession:"var(--success)",Pricing:"var(--warning)",Addiction:"var(--neon-orange)",Motivation:"var(--neon-green)",motion:"var(--destructive)",Attention:"var(--neon-cyan)",Technologie:"var(--neon-purple)",Communication:"var(--neon-yellow)",Projection:"var(--warning)",Mthodologie:"var(--success)",Mtriques:"var(--primary)",Risque:"var(--destructive)",Estimation:"var(--neon-green)",Jugement:"var(--neon-purple)",Analyse:"var(--muted-foreground)",Recherche:"var(--info)",Comportement:"var(--warning)"}[a.category]||"var(--muted-foreground)";return(0,S.jsxs)(fQ.div,{onClick:b?c:void 0,className:`relative p-4 rounded-xl border-2 transition-all duration-300 ${b?"border-border bg-secondary/50 hover:border-primary/50 cursor-pointer":"border-muted bg-card/50 opacity-50 cursor-not-allowed"}`,whileHover:b?{scale:1.02}:{},children:[!b&&(0,S.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-background/60 rounded-xl",children:(0,S.jsx)(f8,{className:"w-8 h-8 text-muted-foreground"})}),(0,S.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,S.jsx)("h3",{className:"font-bold text-foreground",children:a.name}),(0,S.jsx)("span",{className:"text-xs px-2 py-1 rounded-full font-mono",style:{backgroundColor:`color-mix(in oklch, ${d} 20%, transparent)`,color:d,border:`1px solid color-mix(in oklch, ${d} 40%, transparent)`},children:a.category})]}),(0,S.jsx)("p",{className:"text-muted-foreground text-sm mb-3 line-clamp-2",children:a.definition}),(0,S.jsxs)("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-card/50",children:[a.counter_tactic.startsWith("")?(0,S.jsx)(ho,{className:"w-4 h-4 text-destructive flex-shrink-0 mt-0.5"}):(0,S.jsx)(hp,{className:"w-4 h-4 text-warning flex-shrink-0 mt-0.5"}),(0,S.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:a.counter_tactic})]})]})}let hr=f1("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),hs=f1("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function ht({user:a,score:b,totalQuestions:c,onClose:d,onReset:e}){let f=Math.round(b/c*100),g=new Date().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),h=f>=90?{label:"Excellence",stars:5,colorClass:"text-neon-yellow"}:f>=80?{label:"Expert",stars:4,colorClass:"text-success"}:f>=70?{label:"Avanc",stars:3,colorClass:"text-primary"}:f>=60?{label:"Intermdiaire",stars:2,colorClass:"text-accent"}:{label:"Initi",stars:1,colorClass:"text-destructive"};return(0,S.jsx)(fQ.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-background/80 backdrop-blur-sm",onClick:d,children:(0,S.jsxs)(fQ.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200},onClick:a=>a.stopPropagation(),className:"relative w-full max-w-2xl",children:[(0,S.jsx)("button",{onClick:d,className:"absolute -top-4 -right-4 z-10 p-2 rounded-full bg-secondary text-muted-foreground hover:text-foreground hover:bg-muted transition-colors",children:(0,S.jsx)(hj,{className:"w-5 h-5"})}),(0,S.jsxs)("div",{className:"relative bg-gradient-to-br from-card via-secondary to-card rounded-2xl border-2 border-primary/50 overflow-hidden",children:[(0,S.jsx)("div",{className:"absolute top-0 left-0 w-24 h-24 border-t-4 border-l-4 border-primary rounded-tl-2xl"}),(0,S.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 border-t-4 border-r-4 border-accent rounded-tr-2xl"}),(0,S.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 border-b-4 border-l-4 border-accent rounded-bl-2xl"}),(0,S.jsx)("div",{className:"absolute bottom-0 right-0 w-24 h-24 border-b-4 border-r-4 border-primary rounded-br-2xl"}),(0,S.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-primary/10 rounded-full blur-3xl"}),(0,S.jsxs)("div",{className:"relative p-8 md:p-12 text-center",children:[(0,S.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-2",children:[(0,S.jsx)(f2,{className:"w-8 h-8 text-primary"}),(0,S.jsx)("span",{className:"text-xl font-bold text-muted-foreground tracking-widest uppercase",children:"Cognitive Labs"})]}),(0,S.jsx)("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary via-accent to-destructive bg-clip-text text-transparent mb-8",children:"Certificat de Russite"}),(0,S.jsx)(fQ.div,{initial:{rotateY:0},animate:{rotateY:360},transition:{duration:1,delay:.5},className:`inline-flex items-center justify-center w-24 h-24 rounded-full mb-6 bg-secondary/50 border-3 border-current ${h.colorClass}`,children:(0,S.jsx)(gb,{className:"w-12 h-12"})}),(0,S.jsx)("p",{className:"text-muted-foreground mb-2",children:"Ce certificat est dcern "}),(0,S.jsxs)("h2",{className:"text-3xl md:text-4xl font-bold text-foreground mb-1",children:[a.firstName," ",a.lastName]}),(0,S.jsx)("p",{className:"text-primary mb-8",children:a.job}),(0,S.jsxs)("p",{className:"text-muted-foreground mb-4",children:["Pour avoir complt avec succs la formation",(0,S.jsx)("br",{}),(0,S.jsx)("span",{className:"text-foreground font-semibold",children:'"Matrise des Biais Cognitifs en UX Design"'})]}),(0,S.jsxs)("div",{className:"inline-block p-4 rounded-xl bg-secondary/50 border border-border mb-6",children:[(0,S.jsx)("div",{className:"flex items-center justify-center gap-1 mb-2",children:Array.from({length:5}).map((a,b)=>(0,S.jsx)(hm,{className:`w-6 h-6 ${b<h.stars?h.colorClass:"text-muted"}`,fill:b<h.stars?"currentColor":"transparent"},b))}),(0,S.jsxs)("p",{className:`text-2xl font-bold ${h.colorClass}`,children:["Grade : ",h.label]}),(0,S.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Score final : ",b,"/",c," (",f,"%)"]})]}),(0,S.jsxs)("p",{className:"text-muted-foreground mb-8",children:["Dlivr le ",g]}),(0,S.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,S.jsxs)(g_,{onClick:()=>{alert("Fonctionnalit de tlchargement PDF  venir !")},className:"bg-primary hover:bg-primary/90 text-primary-foreground font-semibold",children:[(0,S.jsx)(hr,{className:"w-4 h-4 mr-2"}),"Tlcharger PDF"]}),(0,S.jsxs)(g_,{onClick:()=>{navigator.share?navigator.share({title:"Mon diplme Cognitive Labs",text:`J'ai obtenu le grade "${h.label}" sur Cognitive Labs avec ${f}% de bonnes r\xe9ponses !`,url:window.location.href}):(navigator.clipboard.writeText(`J'ai obtenu le grade "${h.label}" sur Cognitive Labs avec ${f}% de bonnes r\xe9ponses !`),alert("Lien copi dans le presse-papier !"))},variant:"outline",className:"border-accent text-accent hover:bg-accent/10 bg-transparent",children:[(0,S.jsx)(hs,{className:"w-4 h-4 mr-2"}),"Partager"]})]}),(0,S.jsx)("div",{className:"mt-4",children:(0,S.jsxs)(g_,{onClick:e,variant:"ghost",className:"text-muted-foreground hover:text-foreground",children:[(0,S.jsx)(RotateCcw,{className:"w-4 h-4 mr-2"}),"Rdmarrer le jeu"]})})]})]})]})})}let hu=a=>{},hv=[{id:1,name:"Novice",name_fr:"Novice",unlock_criteria:0,theme_color:"#00FFFF",glow_color:"0 0 20px #00FFFF",description:"Dcouvrez les fondamentaux des biais cognitifs"},{id:2,name:"Practitioner",name_fr:"Praticien",unlock_criteria:70,theme_color:"#FF6B35",glow_color:"0 0 20px #FF6B35",description:"Appliquez vos connaissances  des cas UX rels"},{id:3,name:"Expert",name_fr:"Expert",unlock_criteria:70,theme_color:"#A855F7",glow_color:"0 0 20px #A855F7",description:"Matrisez les biais avancs et leurs implications stratgiques"}],hw=[{id:"N1-01",level_id:1,scenario:"Un utilisateur trouve une app belle, donc il pense qu'elle est facile  utiliser.",options:[{text:"Effet de Halo",is_correct:!0,bias_id:"halo_effect"},{text:"Preuve Sociale",is_correct:!1,bias_id:"social_proof"},{text:"Biais de Confirmation",is_correct:!1,bias_id:"confirmation_bias"}],explanation:"L'Effet de Halo (ou Esthtique-Usabilit) : le beau est peru comme fonctionnel.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-02",level_id:1,scenario:"Un utilisateur ne lit que les avis qui confirment son envie d'acheter ce produit.",options:[{text:"Biais de Confirmation",is_correct:!0,bias_id:"confirmation_bias"},{text:"Biais d'Ancrage",is_correct:!1,bias_id:"anchoring"},{text:"Biais de Rcence",is_correct:!1,bias_id:"recency_bias"}],explanation:"Le Biais de Confirmation privilgie les infos qui valident nos croyances.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-03",level_id:1,scenario:'Le premier prix vu est de 1000, le second  800 semble alors "pas cher".',options:[{text:"Biais d'Ancrage",is_correct:!0,bias_id:"anchoring"},{text:"Effet de Leurre",is_correct:!1,bias_id:"decoy_effect"},{text:"Aversion  la perte",is_correct:!1,bias_id:"loss_aversion"}],explanation:"Le premier chiffre sert d'Ancre mentale pour toutes les comparaisons futures.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-04",level_id:1,scenario:"Trop de choix tue le choix : l'utilisateur abandonne car c'est trop compliqu.",options:[{text:"Loi de Fitts",is_correct:!1,bias_id:"fitts_law"},{text:"Loi de Hick",is_correct:!0,bias_id:"hicks_law"},{text:"Loi de Miller",is_correct:!1,bias_id:"millers_law"}],explanation:"La Loi de Hick : le temps de dcision augmente avec le nombre d'options.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-05",level_id:1,scenario:"On retient mieux le dbut et la fin d'une liste que le milieu.",options:[{text:"Effet de Position Srie",is_correct:!0,bias_id:"serial_position"},{text:"Effet Von Restorff",is_correct:!1,bias_id:"von_restorff"},{text:"Effet Zeigarnik",is_correct:!1,bias_id:"zeigarnik"}],explanation:"C'est l'Effet de Position Srie (combinaison de Primaut et Rcence).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-06",level_id:1,scenario:"La peur de perdre 10 est plus forte que la joie d'en gagner 10.",options:[{text:"Aversion  la perte",is_correct:!0,bias_id:"loss_aversion"},{text:"Biais de Ngativit",is_correct:!1,bias_id:"negativity_bias"},{text:"Effet de Dotation",is_correct:!1,bias_id:"endowment_effect"}],explanation:"L'Aversion  la perte : la douleur de perdre est psychologiquement 2x plus forte.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-07",level_id:1,scenario:'"Dj 10 000 utilisateurs inscrits !" affich sur la home page.',options:[{text:"Preuve Sociale",is_correct:!0,bias_id:"social_proof"},{text:"Effet de Cadre",is_correct:!1,bias_id:"framing"},{text:"Biais d'Autorit",is_correct:!1,bias_id:"authority_bias"}],explanation:"La Preuve Sociale (Bandwagon) : on suit le comportement du groupe.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-08",level_id:1,scenario:"Dans une liste de texte noir, le bouton rouge attire l'attention.",options:[{text:"Effet Von Restorff",is_correct:!0,bias_id:"von_restorff"},{text:"Ccit au changement",is_correct:!1,bias_id:"change_blindness"},{text:"Effet Stroop",is_correct:!1,bias_id:"stroop_effect"}],explanation:"L'Effet Von Restorff (Isolation) : l'lment qui diffre se retient mieux.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-09",level_id:1,scenario:"Une tche inacheve (barre de progression  90%) reste en tte de l'utilisateur.",options:[{text:"Effet Zeigarnik",is_correct:!0,bias_id:"zeigarnik"},{text:"Loi de Parkinson",is_correct:!1,bias_id:"parkinsons_law"},{text:"Effet de Rcence",is_correct:!1,bias_id:"recency_effect"}],explanation:"L'Effet Zeigarnik : on se souvient mieux des tches interrompues.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-10",level_id:1,scenario:"Les utilisateurs s'attendent  ce que votre site fonctionne comme Amazon/Google.",options:[{text:"Loi de Jakob",is_correct:!0,bias_id:"jakobs_law"},{text:"Loi de Moore",is_correct:!1,bias_id:"moores_law"},{text:"Loi de Postel",is_correct:!1,bias_id:"postels_law"}],explanation:"La Loi de Jakob : les utilisateurs passent leur temps sur d'autres sites, copiez les standards.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-11",level_id:1,scenario:"Si vous offrez un ebook gratuit, l'utilisateur se sent oblig de donner son email.",options:[{text:"Rciprocit",is_correct:!0,bias_id:"reciprocity"},{text:"Engagement",is_correct:!1,bias_id:"commitment"},{text:"Cohrence",is_correct:!1,bias_id:"consistency"}],explanation:"Le principe de Rciprocit : un don appelle un contre-don.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-12",level_id:1,scenario:'"Offre valable encore 10 minutes !"',options:[{text:"Raret (Scarcity)",is_correct:!1,bias_id:"scarcity"},{text:"Urgence",is_correct:!1,bias_id:"urgency"},{text:"Les deux",is_correct:!0,bias_id:"scarcity_urgency"}],explanation:"C'est le principe de Raret coupl  l'urgence temporelle.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-13",level_id:1,scenario:"Un expert en blouse blanche recommande ce dentifrice.",options:[{text:"Biais d'Autorit",is_correct:!0,bias_id:"authority_bias"},{text:"Effet de Halo",is_correct:!1,bias_id:"halo_effect"},{text:"Biais de Cadrage",is_correct:!1,bias_id:"framing"}],explanation:"Le Biais d'Autorit : on fait confiance aux figures d'autorit perues.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-14",level_id:1,scenario:'Prsenter un yaourt comme "90% sans matire grasse" plutt que "10% de gras".',options:[{text:"Effet de Cadrage",is_correct:!0,bias_id:"framing"},{text:"Ancrage",is_correct:!1,bias_id:"anchoring"},{text:"Leurre",is_correct:!1,bias_id:"decoy_effect"}],explanation:"L'Effet de Cadrage (Framing) : la formulation change la perception positive/ngative.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-15",level_id:1,scenario:"Penser qu'une personne calme est forcment bibliothcaire plutt qu'agriculteur.",options:[{text:"Reprsentativit",is_correct:!1,bias_id:"representativeness"},{text:"Strotype",is_correct:!1,bias_id:"stereotype"},{text:"Les deux",is_correct:!0,bias_id:"representativeness_stereotype"}],explanation:"L'Heuristique de Reprsentativit se base sur des strotypes pour juger.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-16",level_id:1,scenario:"Surestimer le danger des avions car on a vu un crash aux infos hier.",options:[{text:"Biais de Disponibilit",is_correct:!0,bias_id:"availability_bias"},{text:"Biais de Survivant",is_correct:!1,bias_id:"survivorship_bias"},{text:"Biais de Normalit",is_correct:!1,bias_id:"normalcy_bias"}],explanation:"Le Biais de Disponibilit : on juge sur les infos rcentes/marquantes en mmoire.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-17",level_id:1,scenario:"Un dbutant pense tout savoir sur l'UX aprs un article Medium.",options:[{text:"Dunning-Kruger",is_correct:!0,bias_id:"dunning_kruger"},{text:"Biais d'Optimisme",is_correct:!1,bias_id:"optimism_bias"},{text:"Excs de Confiance",is_correct:!1,bias_id:"overconfidence"}],explanation:"L'Effet Dunning-Kruger : les incomptents surestiment leur comptence.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-18",level_id:1,scenario:'Aprs 5 tirages "Rouge"  la roulette, on parie "Noir" car "a doit sortir".',options:[{text:"L'erreur du Parieur",is_correct:!0,bias_id:"gamblers_fallacy"},{text:"Biais de la main chaude",is_correct:!1,bias_id:"hot_hand"},{text:"Illusion de contrle",is_correct:!1,bias_id:"illusion_control"}],explanation:"L'Erreur du Parieur (Gambler's Fallacy) : croire que le hasard s'auto-corrige.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-19",level_id:1,scenario:"Accorder plus de valeur  un objet simplement parce qu'il nous appartient.",options:[{text:"Effet de Dotation",is_correct:!0,bias_id:"endowment_effect"},{text:"Aversion  la perte",is_correct:!1,bias_id:"loss_aversion"},{text:"Cot irrcuprable",is_correct:!1,bias_id:"sunk_cost"}],explanation:"L'Effet de Dotation (Endowment Effect) : possder augmente la valeur perue.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-20",level_id:1,scenario:"Le fait de remarquer partout la voiture qu'on vient d'acheter.",options:[{text:"Illusion de Frquence",is_correct:!0,bias_id:"frequency_illusion"},{text:"Biais de Confirmation",is_correct:!1,bias_id:"confirmation_bias"},{text:"Biais d'Attention",is_correct:!1,bias_id:"attention_bias"}],explanation:"L'Illusion de Frquence (Baader-Meinhof) : une info apprise semble apparatre partout.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-01",level_id:2,scenario:"Pour vendre l'offre Medium, on ajoute une offre Large trs chre et peu intressante.",options:[{text:"Effet de Leurre",is_correct:!0,bias_id:"decoy_effect"},{text:"Ancrage",is_correct:!1,bias_id:"anchoring"},{text:"Contraste",is_correct:!1,bias_id:"contrast"}],explanation:"L'Effet de Leurre (Decoy Effect) pousse vers l'option cible en crant une comparaison asymtrique.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-02",level_id:2,scenario:'La case "S\'abonner  la newsletter" est coche par dfaut.',options:[{text:"Statu Quo",is_correct:!0,bias_id:"status_quo"},{text:"Opt-in",is_correct:!1,bias_id:"opt_in"},{text:"Nudge",is_correct:!1,bias_id:"nudge"}],explanation:"Le Biais de Statu Quo : l'utilisateur a tendance  ne pas changer l'tat par dfaut.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-03",level_id:2,scenario:"Grouper les champs de formulaire (Adresse, Paiement) pour rduire la fatigue.",options:[{text:"Chunking",is_correct:!0,bias_id:"chunking"},{text:"Loi de Fitts",is_correct:!1,bias_id:"fitts_law"},{text:"Loi de Miller",is_correct:!1,bias_id:"millers_law"}],explanation:"Le Chunking (li  la Loi de Miller) aide  traiter l'info par petits paquets (7  2 lments).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-04",level_id:2,scenario:"Un design pur cache des fonctionnalits complexes, frustrant l'utilisateur expert.",options:[{text:"Aesthetic-Usability",is_correct:!0,bias_id:"aesthetic_usability"},{text:"Form over Function",is_correct:!1,bias_id:"form_function"},{text:"Biais de complexit",is_correct:!1,bias_id:"complexity_bias"}],explanation:"L'Effet Esthtique-Usabilit peut masquer des problmes d'UX graves si le UI est joli.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-05",level_id:2,scenario:'Le "Pull-to-refresh" d\'Instagram qui donne une rcompense alatoire (nouveaux posts).',options:[{text:"Rcompense Variable",is_correct:!0,bias_id:"variable_reward"},{text:"Gamification",is_correct:!1,bias_id:"gamification"},{text:"Hook Model",is_correct:!1,bias_id:"hook_model"}],explanation:"Le principe de Rcompense Variable (comme au casino) cre une addiction (Dopamine).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-06",level_id:2,scenario:"Montrer une barre de progression dj remplie  10% lors du premier login.",options:[{text:"Gradient de But",is_correct:!1,bias_id:"goal_gradient"},{text:"Effet Zeigarnik",is_correct:!1,bias_id:"zeigarnik"},{text:"Endowed Progress",is_correct:!0,bias_id:"endowed_progress"}],explanation:"L'Endowed Progress Effect : on est plus motiv  finir si on pense avoir dj commenc.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-07",level_id:2,scenario:"Un message d'erreur rouge \"VOUS AVEZ FAIT UNE FAUTE\" stresse l'utilisateur.",options:[{text:"Biais de Ngativit",is_correct:!0,bias_id:"negativity_bias"},{text:"Charge Cognitive",is_correct:!1,bias_id:"cognitive_load"},{text:"Framing",is_correct:!1,bias_id:"framing"}],explanation:"Le Biais de Ngativit fait que l'utilisateur retient plus l'agression que l'aide. Utilisez un wording positif.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-08",level_id:2,scenario:"Faire culpabiliser l'utilisateur pour qu'il ne se dsabonne pas (\"Non, je n'aime pas les promos\").",options:[{text:"Confirmshaming",is_correct:!0,bias_id:"confirmshaming"},{text:"Gaslighting",is_correct:!1,bias_id:"gaslighting"},{text:"FOMO",is_correct:!1,bias_id:"fomo"}],explanation:"Le Confirmshaming est un Dark Pattern qui exploite la honte pour manipuler.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-09",level_id:2,scenario:"Cliquez sur l'offre que le site VEUT que vous choisissiez.",options:[{text:"Basic - 9/mois",is_correct:!1,bias_id:null},{text:"Pro - 19/mois  Populaire",is_correct:!0,bias_id:"center_stage"},{text:"Enterprise - 49/mois",is_correct:!1,bias_id:null}],explanation:"L'Effet Centre-Stage : prfrence pour l'option centrale dans une disposition horizontale, renforce par le badge 'Populaire'.",ui_interaction:"PRICE_GRID",experience_data:{type:"pricing",options:[{name:"Basic",price:"9/mois",features:["1 utilisateur","5 Go stockage"],highlighted:!1},{name:"Pro",price:"19/mois",features:["5 utilisateurs","50 Go stockage","Support prioritaire"],highlighted:!0,badge:" Populaire"},{name:"Enterprise",price:"49/mois",features:["Illimit","500 Go stockage","Support 24/7"],highlighted:!1}]}},{id:"N2-10",level_id:2,scenario:"Un bouton CTA isol par beaucoup d'espace blanc.",options:[{text:"Effet Von Restorff",is_correct:!0,bias_id:"von_restorff"},{text:"Loi de la Proximit",is_correct:!1,bias_id:"proximity_law"},{text:"Loi de la Clture",is_correct:!1,bias_id:"closure_law"}],explanation:"Utilise l'Effet d'Isolation pour attirer l'attention par le vide (White Space).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-11",level_id:2,scenario:'Afficher "Sophie de Paris vient d\'acheter cet article" en popup.',options:[{text:"Preuve Sociale",is_correct:!0,bias_id:"social_proof"},{text:"Urgence",is_correct:!1,bias_id:"urgency"},{text:"Notification",is_correct:!1,bias_id:"notification"}],explanation:"C'est une application directe de la Preuve Sociale pour rassurer.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-12",level_id:2,scenario:"L'utilisateur tape \"Pourquoi l'iPhone est nul\" et ne trouve que des dfauts.",options:[{text:"Biais de Confirmation",is_correct:!0,bias_id:"confirmation_bias"},{text:"Biais de Recherche",is_correct:!1,bias_id:"search_bias"},{text:"Algorithme",is_correct:!1,bias_id:"algorithm"}],explanation:"Les moteurs de recherche renforcent le Biais de Confirmation via les mots-cls saisis.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-13",level_id:2,scenario:'Utiliser une icne "Maison" pour l\'accueil plutt qu\'un texte "Accueil".',options:[{text:"Reconnaissance vs Rappel",is_correct:!0,bias_id:"recognition_recall"},{text:"Iconicit",is_correct:!1,bias_id:"iconicity"},{text:"Affordance",is_correct:!1,bias_id:"affordance"}],explanation:"Favoriser la Reconnaissance plutt que le Rappel : l'image universelle rduit la charge mentale.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-14",level_id:2,scenario:'Afficher une animation de "calcul" factice pour montrer que l\'algo travaille dur.',options:[{text:"Illusion du Labeur",is_correct:!0,bias_id:"labor_illusion"},{text:"Attente active",is_correct:!1,bias_id:"active_waiting"},{text:"Skeuomorphisme",is_correct:!1,bias_id:"skeuomorphism"}],explanation:"L'Illusion du Labeur : on valorise plus un service si on \"voit\" l'effort (mme simul).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-15",level_id:2,scenario:"Permettre  l'utilisateur de personnaliser son dashboard.",options:[{text:"Effet Ikea",is_correct:!0,bias_id:"ikea_effect"},{text:"Customization",is_correct:!1,bias_id:"customization"},{text:"Appropriation",is_correct:!1,bias_id:"appropriation"}],explanation:"L'Effet Ikea : on aime disproportionnellement ce qu'on a co-cr ou assembl.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-16",level_id:2,scenario:'Commencer par un petit "J\'aime" avant de demander un achat.',options:[{text:"Pied-dans-la-porte",is_correct:!1,bias_id:"foot_in_door"},{text:"Cohrence",is_correct:!1,bias_id:"consistency"},{text:"Les deux",is_correct:!0,bias_id:"foot_door_consistency"}],explanation:"Technique du Pied-dans-la-porte qui joue sur le besoin de Cohrence (Consistency).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-17",level_id:2,scenario:"Mettre les infos les moins importantes au milieu d'une Long Page de vente.",options:[{text:"Serial Position Effect",is_correct:!0,bias_id:"serial_position"},{text:"Hirarchie visuelle",is_correct:!1,bias_id:"visual_hierarchy"},{text:"F pattern",is_correct:!1,bias_id:"f_pattern"}],explanation:'On cache le "mou" au milieu car on sait que l\'utilisateur scannera Dbut/Fin (Serial Position).',ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-18",level_id:2,scenario:"Agrandir la zone cliquable d'un bouton sur mobile.",options:[{text:"Loi de Fitts",is_correct:!0,bias_id:"fitts_law"},{text:"Loi de Touch",is_correct:!1,bias_id:"touch_law"},{text:"Accessibilit",is_correct:!1,bias_id:"accessibility"}],explanation:"La Loi de Fitts : le temps d'accs dpend de la distance et de la taille de la cible.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-19",level_id:2,scenario:"Une popup surgit trop vite : l'utilisateur la ferme par rflexe sans lire.",options:[{text:"Ractance",is_correct:!0,bias_id:"reactance"},{text:"Ccit bannire",is_correct:!1,bias_id:"banner_blindness"},{text:"Reflexe moteur",is_correct:!1,bias_id:"motor_reflex"}],explanation:"La Ractance Psychologique : rsistance instinctive quand on sent notre libert menace (intrusion).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-20",level_id:2,scenario:'Utiliser du gris pour un bouton "Annuler" et du bleu pour "Valider".',options:[{text:"Affordance",is_correct:!1,bias_id:"affordance"},{text:"Hirarchie visuelle",is_correct:!1,bias_id:"visual_hierarchy"},{text:"Biais de Saillance",is_correct:!0,bias_id:"salience_bias"}],explanation:"Le Biais de Saillance guide l'il vers l'lment le plus visible (attention aux Dark Patterns ici).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-01",level_id:3,scenario:'On continue un projet rat car "on a dj dpens 50k dessus".',options:[{text:"Cots Irrcuprables",is_correct:!0,bias_id:"sunk_cost"},{text:"Aversion  la perte",is_correct:!1,bias_id:"loss_aversion"},{text:"Enttement",is_correct:!1,bias_id:"stubbornness"}],explanation:"Le biais des Cots Irrcuprables (Sunk Cost Fallacy) aveugle la prise de dcision rationnelle.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-02",level_id:3,scenario:"Les utilisateurs changent de comportement car ils savent qu'on les observe en test.",options:[{text:"Effet Hawthorne",is_correct:!0,bias_id:"hawthorne_effect"},{text:"Biais de l'Observateur",is_correct:!1,bias_id:"observer_bias"},{text:"Dsirabilit Sociale",is_correct:!1,bias_id:"social_desirability"}],explanation:"L'Effet Hawthorne : l'observation modifie le comportement naturel.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-03",level_id:3,scenario:"Analyser uniquement les feedbacks des utilisateurs actifs pour amliorer le produit.",options:[{text:"Biais du Survivant",is_correct:!0,bias_id:"survivorship_bias"},{text:"Biais de Slection",is_correct:!1,bias_id:"selection_bias"},{text:"Biais d'Activit",is_correct:!1,bias_id:"activity_bias"}],explanation:"Le Biais du Survivant : on oublie d'analyser ceux qui sont partis (le churn) et pourquoi.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-04",level_id:3,scenario:"Toute l'quipe produit est d'accord sans dbat pour viter le conflit.",options:[{text:"Pense de Groupe",is_correct:!0,bias_id:"groupthink"},{text:"Biais de Consensus",is_correct:!1,bias_id:"consensus_bias"},{text:"Harmonie",is_correct:!1,bias_id:"harmony"}],explanation:"La Pense de Groupe (Groupthink) tue l'innovation critique et ignore les risques.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-05",level_id:3,scenario:"Faire confiance aveuglment  la suggestion de l'IA sans vrifier.",options:[{text:"Biais d'Automatisation",is_correct:!0,bias_id:"automation_bias"},{text:"Biais Algorithmique",is_correct:!1,bias_id:"algorithmic_bias"},{text:"Paresse cognitive",is_correct:!1,bias_id:"cognitive_laziness"}],explanation:"Le Biais d'Automatisation : la propension  croire que la machine a raison sur l'humain.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-06",level_id:3,scenario:"Crer des frictions volontaires pour empcher une action (ex: dsinscription).",options:[{text:"Sludge",is_correct:!0,bias_id:"sludge"},{text:"Nudge",is_correct:!1,bias_id:"nudge"},{text:"Dark Pattern",is_correct:!1,bias_id:"dark_pattern"}],explanation:"Le Sludge (Boue) est l'inverse du Nudge : de la friction mauvaise pour l'utilisateur.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-07",level_id:3,scenario:'Le designer ne comprend pas que l\'utilisateur ne trouve pas le bouton "vident".',options:[{text:"Maldiction du Savoir",is_correct:!0,bias_id:"curse_of_knowledge"},{text:"Empathie Gap",is_correct:!1,bias_id:"empathy_gap"},{text:"Biais de Projection",is_correct:!1,bias_id:"projection_bias"}],explanation:"La Maldiction du Savoir : impossible d'imaginer ne pas savoir ce qu'on sait dj.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-08",level_id:3,scenario:'Penser que "tout le monde utilise son tlphone comme moi".',options:[{text:"Faux Consensus",is_correct:!0,bias_id:"false_consensus"},{text:"Biais de Projection",is_correct:!1,bias_id:"projection_bias"},{text:"Solipsisme",is_correct:!1,bias_id:"solipsism"}],explanation:"L'Effet de Faux Consensus : surestimer  quel point les autres nous ressemblent.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-09",level_id:3,scenario:"Utiliser un outil (Excel) pour tout faire, mme du design, car on le connait.",options:[{text:"Dformation Professionnelle",is_correct:!1,bias_id:"professional_deformation"},{text:"Fixit Fonctionnelle",is_correct:!1,bias_id:"functional_fixedness"},{text:"Loi de l'Instrument",is_correct:!0,bias_id:"law_of_instrument"}],explanation:"La Loi de l'Instrument (Marteau de Maslow) : \"Si j'ai un marteau, tout ressemble  un clou\".",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-10",level_id:3,scenario:"Une mesure devient un objectif (ex: temps pass), donc on dgrade l'UX pour l'augmenter.",options:[{text:"Loi de Goodhart",is_correct:!0,bias_id:"goodharts_law"},{text:"Loi de Campbell",is_correct:!1,bias_id:"campbells_law"},{text:"KPI hacking",is_correct:!1,bias_id:"kpi_hacking"}],explanation:"La Loi de Goodhart : lorsqu'une mesure devient un objectif, elle cesse d'tre une bonne mesure.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-11",level_id:3,scenario:"Prfrer supprimer totalement un petit risque plutt que rduire un grand risque.",options:[{text:"Biais de Risque Zro",is_correct:!0,bias_id:"zero_risk_bias"},{text:"Aversion au risque",is_correct:!1,bias_id:"risk_aversion"},{text:"Principe de prcaution",is_correct:!1,bias_id:"precautionary"}],explanation:"Le Biais de Risque Zro : notre cerveau prfre la certitude totale (0%)  la probabilit.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-12",level_id:3,scenario:'Aprs un lancement rat, dire "Je le savais, c\'tait vident !".',options:[{text:"Biais Rtrospectif",is_correct:!0,bias_id:"hindsight_bias"},{text:"Biais de Rsultat",is_correct:!1,bias_id:"outcome_bias"},{text:"Rationalisation",is_correct:!1,bias_id:"rationalization"}],explanation:"Le Biais Rtrospectif (Hindsight Bias) : rcrire l'histoire pour se donner raison.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-13",level_id:3,scenario:"Sous-estimer systmatiquement le temps de dv d'une feature dans la roadmap.",options:[{text:"La Fallace du Planning",is_correct:!0,bias_id:"planning_fallacy"},{text:"Loi de Hofstadter",is_correct:!1,bias_id:"hofstadters_law"},{text:"Optimisme",is_correct:!1,bias_id:"optimism"}],explanation:"La Fallace du Planning : on sous-estime toujours le temps, mme en connaissant le pass.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-14",level_id:3,scenario:'Crer des Personas bass sur des clichs ("La mnagre") plutt que de la data.',options:[{text:"Strotypage",is_correct:!0,bias_id:"stereotyping"},{text:"Biais de Reprsentativit",is_correct:!1,bias_id:"representativeness"},{text:"Paresse",is_correct:!1,bias_id:"laziness"}],explanation:"Le Strotypage rduit la complexit humaine  des traits simplistes et souvent faux.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-15",level_id:3,scenario:"Arrter un A/B test ds que la variante B passe devant, sans attendre la significativit.",options:[{text:"Peeking Bias",is_correct:!0,bias_id:"peeking_bias"},{text:"Biais de Rsultat",is_correct:!1,bias_id:"outcome_bias"},{text:"Impatience",is_correct:!1,bias_id:"impatience"}],explanation:"Le Peeking (regarder trop tt) fausse les stats et mne  de fausses conclusions positives.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-16",level_id:3,scenario:"On fait ce que dit le directeur car c'est le mieux pay, mme si c'est une mauvaise ide UX.",options:[{text:"Effet HiPPO",is_correct:!0,bias_id:"hippo_effect"},{text:"Biais d'Autorit",is_correct:!1,bias_id:"authority_bias"},{text:"Obissance",is_correct:!1,bias_id:"obedience"}],explanation:"HiPPO (Highest Paid Person's Opinion) : l'avis du chef crase la data.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-17",level_id:3,scenario:"Refuser de changer une techno obsolte par confort.",options:[{text:"Statu Quo",is_correct:!0,bias_id:"status_quo"},{text:"Rsistance au changement",is_correct:!1,bias_id:"change_resistance"},{text:"Zone de confort",is_correct:!1,bias_id:"comfort_zone"}],explanation:"Le Biais de Statu Quo s'applique aussi aux choix techniques et organisationnels.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-18",level_id:3,scenario:"L'quipe refuse de retirer une feature inutile par peur de dcevoir 3 utilisateurs.",options:[{text:"Biais d'Omission",is_correct:!1,bias_id:"omission_bias"},{text:"Aversion  la perte",is_correct:!0,bias_id:"loss_aversion"},{text:"Status Quo",is_correct:!1,bias_id:"status_quo"}],explanation:"C'est une forme d'Aversion  la Perte applique au produit (Feature Hoarding).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-19",level_id:3,scenario:"Juger un utilisateur \"stupide\" parce qu'il n'arrive pas  utiliser l'app.",options:[{text:"Erreur Fondamentale d'Attribution",is_correct:!0,bias_id:"fundamental_attribution_error"},{text:"Biais de Supriorit",is_correct:!1,bias_id:"superiority_bias"},{text:"Manque d'empathie",is_correct:!1,bias_id:"lack_empathy"}],explanation:"L'Erreur Fondamentale d'Attribution : attribuer l'chec  la personnalit (il est bte) plutt qu'au contexte (l'interface est mauvaise).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-20",level_id:3,scenario:"Simplifier un problme complexe pour qu'il rentre dans une solution simple et sduisante.",options:[{text:"Biais de Complexit (Inverse)",is_correct:!1,bias_id:"complexity_bias_inverse"},{text:"Loi de la simplicit",is_correct:!1,bias_id:"simplicity_law"},{text:"Rductionnisme",is_correct:!0,bias_id:"reductionism"}],explanation:"Le Rductionnisme : ignorer les nuances ncessaires par amour de la simplicit.",ui_interaction:"MULTIPLE_CHOICE"}],hx=[{bias_id:"halo_effect",name:"Effet de Halo",category:"Perception",definition:"Tendance  attribuer des qualits positives (comme la facilit d'utilisation)  quelque chose simplement parce qu'il est visuellement attrayant.",counter_tactic:"Testez l'usabilit indpendamment de l'esthtique. Ne laissez pas la beaut masquer les problmes fonctionnels.",level_unlocked:1},{bias_id:"confirmation_bias",name:"Biais de Confirmation",category:"Cognition",definition:"Tendance  chercher, interprter et retenir les informations qui confirment nos croyances prexistantes.",counter_tactic:"Prsentez des informations quilibres. Encouragez la confrontation avec des avis contradictoires.",level_unlocked:1},{bias_id:"anchoring",name:"Biais d'Ancrage",category:"Dcision",definition:"Le premier lment d'information reu (l'ancre) influence disproportionnellement les jugements ultrieurs.",counter_tactic:"thique : prsentez d'abord la valeur relle. Manipulation : placez un prix barr lev avant le prix actuel.",level_unlocked:1},{bias_id:"hicks_law",name:"Loi de Hick",category:"UX Law",definition:"Le temps de dcision augmente logarithmiquement avec le nombre et la complexit des choix.",counter_tactic:"Rduisez le nombre d'options visibles. Utilisez des filtres et une progressive disclosure.",level_unlocked:1},{bias_id:"serial_position",name:"Effet de Position Srie",category:"Mmoire",definition:"Tendance  mieux retenir les premiers (primaut) et derniers (rcence) lments d'une srie.",counter_tactic:"Placez vos informations cls au dbut et  la fin. Cachez le contenu moins important au milieu.",level_unlocked:1},{bias_id:"loss_aversion",name:"Aversion  la Perte",category:"Dcision",definition:"La douleur de perdre quelque chose est environ deux fois plus forte que le plaisir de gagner la mme chose.",counter_tactic:"thique : rassurez sur les garanties. Manipulation : 'Ne manquez pas...' au lieu de 'Gagnez...'",level_unlocked:1},{bias_id:"social_proof",name:"Preuve Sociale",category:"Social",definition:"Tendance  adopter les comportements et opinions que l'on peroit comme majoritaires.",counter_tactic:"Affichez les compteurs d'utilisateurs, avis clients, tmoignages. La foule rassure.",level_unlocked:1},{bias_id:"von_restorff",name:"Effet Von Restorff",category:"Perception",definition:"L'lment qui se distingue visuellement dans un groupe homogne est mieux mmoris.",counter_tactic:"Utilisez la couleur, la taille ou l'espacement pour faire ressortir les lments cls (CTA).",level_unlocked:1},{bias_id:"zeigarnik",name:"Effet Zeigarnik",category:"Mmoire",definition:"Les tches inacheves restent plus prsentes dans notre mmoire que les tches termines.",counter_tactic:"Utilisez des barres de progression incompltes pour motiver  terminer un parcours.",level_unlocked:1},{bias_id:"jakobs_law",name:"Loi de Jakob",category:"UX Law",definition:"Les utilisateurs passent la majorit de leur temps sur d'autres sites ; ils prfrent que votre site fonctionne de la mme manire.",counter_tactic:"Suivez les conventions UI tablies (menu hamburger, panier en haut  droite, etc.).",level_unlocked:1},{bias_id:"reciprocity",name:"Rciprocit",category:"Social",definition:"Recevoir quelque chose cre un sentiment d'obligation de rendre la pareille.",counter_tactic:"Offrez de la valeur gratuite (ebook, essai) avant de demander un engagement (email, achat).",level_unlocked:1},{bias_id:"scarcity_urgency",name:"Raret & Urgence",category:"Persuasion",definition:"Un bien semble plus dsirable quand sa disponibilit est limite (quantit ou temps).",counter_tactic:"Compteurs de stock, timers. Attention : l'abus dtruit la confiance.",level_unlocked:1},{bias_id:"authority_bias",name:"Biais d'Autorit",category:"Social",definition:"Tendance  attribuer plus de crdibilit aux figures perues comme autoritaires ou expertes.",counter_tactic:"Affichez les certifications, logos de partenaires, tmoignages d'experts.",level_unlocked:1},{bias_id:"framing",name:"Effet de Cadrage",category:"Cognition",definition:"La manire dont une information est prsente influence la perception et la dcision.",counter_tactic:"'90% de satisfaction' > '10% d'insatisfaits'. Reformulez positivement.",level_unlocked:1},{bias_id:"availability_bias",name:"Biais de Disponibilit",category:"Cognition",definition:"Tendance  surestimer la probabilit des vnements dont on se souvient facilement.",counter_tactic:"Fournissez des statistiques objectives pour contrebalancer les anecdotes marquantes.",level_unlocked:1},{bias_id:"dunning_kruger",name:"Effet Dunning-Kruger",category:"Mtacognition",definition:"Les personnes peu comptentes surestiment leurs capacits, tandis que les experts les sous-estiment.",counter_tactic:"En recherche utilisateur : mfiez-vous des utilisateurs trop confiants dans leur expertise.",level_unlocked:1},{bias_id:"gamblers_fallacy",name:"Erreur du Parieur",category:"Probabilit",definition:"Croyance errone que les vnements alatoires passs influencent les probabilits futures.",counter_tactic:"Ne crez pas de systmes de rcompense qui laissent croire  des patterns l o il n'y en a pas.",level_unlocked:1},{bias_id:"endowment_effect",name:"Effet de Dotation",category:"Possession",definition:"Tendance  accorder plus de valeur  un objet simplement parce qu'on le possde.",counter_tactic:"Essais gratuits, dmos personnalises : une fois 'possd', le produit devient plus prcieux.",level_unlocked:1},{bias_id:"frequency_illusion",name:"Illusion de Frquence",category:"Perception",definition:"Une information rcemment apprise semble soudain apparatre partout.",counter_tactic:"En marketing : le retargeting exploite cet effet en 'accompagnant' l'utilisateur.",level_unlocked:1},{bias_id:"decoy_effect",name:"Effet de Leurre",category:"Pricing",definition:"Une option 'leurre' moins attractive rend l'option cible plus attrayante par comparaison.",counter_tactic:"Les pages de pricing  3 colonnes utilisent souvent la colonne de droite comme leurre.",level_unlocked:2},{bias_id:"status_quo",name:"Biais du Statu Quo",category:"Dcision",definition:"Prfrence pour l'tat actuel des choses ; rsistance au changement mme bnfique.",counter_tactic:"Les options par dfaut (opt-out) sont trs puissantes. Utilisez-les thiquement.",level_unlocked:2},{bias_id:"chunking",name:"Chunking",category:"Cognition",definition:"Technique de groupement de l'information en units significatives pour faciliter le traitement.",counter_tactic:"Divisez les formulaires longs en tapes, groupez les informations lies visuellement.",level_unlocked:2},{bias_id:"variable_reward",name:"Rcompense Variable",category:"Addiction",definition:"Les rcompenses imprvisibles crent plus d'engagement que les rcompenses fixes (effet slot machine).",counter_tactic:"Utilis par les rseaux sociaux (feed infini). thiquement discutable si l'objectif est l'addiction.",level_unlocked:2},{bias_id:"endowed_progress",name:"Endowed Progress Effect",category:"Motivation",definition:"Les gens sont plus motivs  atteindre un objectif s'ils pensent avoir dj progress vers lui.",counter_tactic:"Pr-remplissez les barres de progression  10-20% pour motiver la compltion.",level_unlocked:2},{bias_id:"negativity_bias",name:"Biais de Ngativit",category:"motion",definition:"Les expriences ngatives ont un impact psychologique plus fort que les positives quivalentes.",counter_tactic:"Messages d'erreur : vitez le ton accusateur. Proposez des solutions, pas des blmes.",level_unlocked:2},{bias_id:"confirmshaming",name:"Confirmshaming",category:"Dark Pattern",definition:"Manipulation par la honte : formuler l'option de refus de manire humiliante.",counter_tactic:" DARK PATTERN -  viter. Dtruit la confiance utilisateur  long terme.",level_unlocked:2},{bias_id:"center_stage",name:"Effet Centre-Stage",category:"Perception",definition:"Dans une srie horizontale d'options, l'option centrale est perue comme le choix recommand.",counter_tactic:"Placez votre offre cible au centre. Renforcez avec un badge 'Populaire' ou 'Recommand'.",level_unlocked:2},{bias_id:"recognition_recall",name:"Reconnaissance vs Rappel",category:"Mmoire",definition:"Il est plus facile de reconnatre quelque chose que de s'en souvenir sans indice.",counter_tactic:"Privilgiez les icnes universelles, les menus visibles, l'autocompltion.",level_unlocked:2},{bias_id:"labor_illusion",name:"Illusion du Labeur",category:"Perception",definition:"Un service est peru comme plus prcieux si l'on voit l'effort investi (mme simul).",counter_tactic:"Animations de 'recherche en cours', messages de progression, mme si instantan.",level_unlocked:2},{bias_id:"ikea_effect",name:"Effet Ikea",category:"Possession",definition:"Tendance  accorder plus de valeur aux choses que l'on a contribu  crer ou assembler.",counter_tactic:"Personnalisation, configurateurs, contenus gnrs par l'utilisateur.",level_unlocked:2},{bias_id:"fitts_law",name:"Loi de Fitts",category:"UX Law",definition:"Le temps pour atteindre une cible dpend de la distance et de la taille de celle-ci.",counter_tactic:"Gros boutons, zones cliquables gnreuses, surtout sur mobile (min 44px).",level_unlocked:2},{bias_id:"reactance",name:"Ractance Psychologique",category:"Comportement",definition:"Rsistance instinctive quand on peroit une menace  sa libert de choix.",counter_tactic:"vitez les popups agressives, les CTA forcs. Laissez l'utilisateur sentir le contrle.",level_unlocked:2},{bias_id:"salience_bias",name:"Biais de Saillance",category:"Attention",definition:"Tendance  se concentrer sur les lments les plus visibles ou motionnellement frappants.",counter_tactic:"Utilisez la hirarchie visuelle pour guider l'attention. Attention aux Dark Patterns.",level_unlocked:2},{bias_id:"sunk_cost",name:"Cots Irrcuprables",category:"Dcision",definition:"Continuer un investissement (temps, argent) bas sur ce qui a dj t dpens plutt que sur les bnfices futurs.",counter_tactic:"En gestion de produit : sachez tuer vos projets zombies. Le pass n'est pas un argument.",level_unlocked:3},{bias_id:"hawthorne_effect",name:"Effet Hawthorne",category:"Recherche",definition:"Les sujets d'une tude modifient leur comportement simplement parce qu'ils se savent observs.",counter_tactic:"Tests A/B > tests utilisateurs observs. Guerilla testing. Analytics passifs.",level_unlocked:3},{bias_id:"survivorship_bias",name:"Biais du Survivant",category:"Analyse",definition:"Se concentrer sur les succs visibles en ignorant les checs silencieux.",counter_tactic:"Analysez le churn autant que les utilisateurs actifs. Les dparts sont des donnes.",level_unlocked:3},{bias_id:"groupthink",name:"Pense de Groupe",category:"Organisation",definition:"Conformit excessive au sein d'un groupe, supprimant la pense critique et les opinions dissidentes.",counter_tactic:"Encouragez le 'Red Team', l'avocat du diable. Votez anonymement avant de discuter.",level_unlocked:3},{bias_id:"automation_bias",name:"Biais d'Automatisation",category:"Technologie",definition:"Tendance  faire confiance aveuglment aux systmes automatiss plutt qu' son propre jugement.",counter_tactic:"Gardez l'humain dans la boucle (Human-in-the-loop). Vrifiez les outputs de l'IA.",level_unlocked:3},{bias_id:"sludge",name:"Sludge",category:"Dark Pattern",definition:"Friction dlibrment ajoute pour dcourager une action (dsinscription, rclamation...).",counter_tactic:" DARK PATTERN - Illgal dans certains pays (RGPD). Prfrez des parcours fluides.",level_unlocked:3},{bias_id:"curse_of_knowledge",name:"Maldiction du Savoir",category:"Communication",definition:"Difficult  imaginer ce que c'est que de ne pas savoir quelque chose qu'on sait.",counter_tactic:"Testez avec des utilisateurs novices. vitez le jargon. Simplifiez sans cesse.",level_unlocked:3},{bias_id:"false_consensus",name:"Effet de Faux Consensus",category:"Projection",definition:"Tendance  surestimer  quel point nos opinions et comportements sont partags par les autres.",counter_tactic:"Vous n'tes pas votre utilisateur. Validez par la data, pas par l'intuition.",level_unlocked:3},{bias_id:"law_of_instrument",name:"Loi de l'Instrument",category:"Mthodologie",definition:"Tendance  tout rsoudre avec les outils qu'on connat ('Si j'ai un marteau, tout ressemble  un clou').",counter_tactic:"Diversifiez votre stack. Choisissez l'outil en fonction du problme, pas l'inverse.",level_unlocked:3},{bias_id:"goodharts_law",name:"Loi de Goodhart",category:"Mtriques",definition:"Quand une mesure devient un objectif, elle cesse d'tre une bonne mesure.",counter_tactic:"Mfiez-vous des KPIs uniques. Le temps pass n'est pas l'engagement.",level_unlocked:3},{bias_id:"zero_risk_bias",name:"Biais de Risque Zro",category:"Risque",definition:"Prfrence pour liminer totalement un petit risque plutt que rduire significativement un grand.",counter_tactic:"En scurit UX : priorisez les risques par impact, pas par 'rsolvabilit'.",level_unlocked:3},{bias_id:"hindsight_bias",name:"Biais Rtrospectif",category:"Mmoire",definition:"Aprs un vnement, tendance  croire qu'on l'avait prvu ('Je le savais!').",counter_tactic:"Documentez vos hypothses AVANT les rsultats. Pre-mortems > Post-mortems.",level_unlocked:3},{bias_id:"planning_fallacy",name:"Fallace du Planning",category:"Estimation",definition:"Tendance systmatique  sous-estimer le temps, les cots et les risques des projets.",counter_tactic:"Reference class forecasting : basez-vous sur des projets similaires passs.",level_unlocked:3},{bias_id:"hippo_effect",name:"Effet HiPPO",category:"Organisation",definition:"Highest Paid Person's Opinion : l'avis de la personne la mieux paye l'emporte sur la data.",counter_tactic:"Culture data-driven. Les A/B tests ne connaissent pas les salaires.",level_unlocked:3},{bias_id:"fundamental_attribution_error",name:"Erreur Fondamentale d'Attribution",category:"Jugement",definition:"Tendance  attribuer les checs des autres  leur personnalit plutt qu'aux circonstances.",counter_tactic:"L'utilisateur n'est JAMAIS stupide. C'est votre interface qui est mal conue.",level_unlocked:3},{bias_id:"reductionism",name:"Rductionnisme",category:"Analyse",definition:"Simplifier excessivement des problmes complexes pour qu'ils rentrent dans des solutions connues.",counter_tactic:"Acceptez la complexit. Parfois 'a dpend' est la bonne rponse.",level_unlocked:3}];function hy(a){let b=[...a];for(let a=b.length-1;a>0;a--){let c=Math.floor(Math.random()*(a+1));[b[a],b[c]]=[b[c],b[a]]}return b}var hz=a.i(14875);class hA extends Error{constructor(a,b="FunctionsError",c){super(a),this.name=b,this.context=c}}class hB extends hA{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class hC extends hA{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class hD extends hA{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}(l=D||(D={})).Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2";class hE{constructor(a,{headers:b={},customFetch:c,region:d=D.Any}={}){this.url=a,this.headers=b,this.region=d,this.fetch=(a=>a?(...b)=>a(...b):(...a)=>fetch(...a))(c)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return(0,hz.__awaiter)(this,arguments,void 0,function*(a,b={}){var c;let d,e;try{let f,{headers:g,method:h,body:i,signal:j,timeout:k}=b,l={},{region:m}=b;m||(m=this.region);let n=new URL(`${this.url}/${a}`);m&&"any"!==m&&(l["x-region"]=m,n.searchParams.set("forceFunctionRegion",m)),i&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?"undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=i):"string"==typeof i?(l["Content-Type"]="text/plain",f=i):"undefined"!=typeof FormData&&i instanceof FormData?f=i:(l["Content-Type"]="application/json",f=JSON.stringify(i)):f=i;let o=j;k&&(e=new AbortController,d=setTimeout(()=>e.abort(),k),j?(o=e.signal,j.addEventListener("abort",()=>e.abort())):o=e.signal);let p=yield this.fetch(n.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),g),body:f,signal:o}).catch(a=>{throw new hB(a)}),q=p.headers.get("x-relay-error");if(q&&"true"===q)throw new hC(p);if(!p.ok)throw new hD(p);let r=(null!=(c=p.headers.get("Content-Type"))?c:"text/plain").split(";")[0].trim();return{data:"application/json"===r?yield p.json():"application/octet-stream"===r||"application/pdf"===r?yield p.blob():"text/event-stream"===r?p:"multipart/form-data"===r?yield p.formData():yield p.text(),error:null,response:p}}catch(a){return{data:null,error:a,response:a instanceof hD||a instanceof hC?a.context:void 0}}finally{d&&clearTimeout(d)}})}}var hF=a.i(56753);let{PostgrestClient:hG,PostgrestQueryBuilder:hH,PostgrestFilterBuilder:hI,PostgrestTransformBuilder:hJ,PostgrestBuilder:hK,PostgrestError:hL}=hF.default||hF,hM=class{constructor(){}static detectEnvironment(){var b;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==a.g.WebSocket)return{type:"native",constructor:a.g.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null==(b=navigator.userAgent)?void 0:b.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){let a=process.versions;if(a&&a.node){let b=parseInt(a.node.replace(/^v/,"").split(".")[0]);return b>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${b} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${b} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let a=this.detectEnvironment();if(a.constructor)return a.constructor;let b=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(b+=`

Suggested solution: ${a.workaround}`),Error(b)}static createWebSocket(a,b){return new(this.getWebSocketConstructor())(a,b)}static isWebSocketSupported(){try{let a=this.detectEnvironment();return"native"===a.type||"ws"===a.type}catch(a){return!1}}},hN="1.0.0";(m=E||(E={}))[m.connecting=0]="connecting",m[m.open=1]="open",m[m.closing=2]="closing",m[m.closed=3]="closed",(n=F||(F={})).closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",(o=G||(G={})).close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token",(H||(H={})).websocket="websocket",(p=I||(I={})).Connecting="connecting",p.Open="open",p.Closing="closing",p.Closed="closed";class hO{constructor(a){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=a?a:[]}encode(a,b){return a.event!==this.BROADCAST_EVENT||a.payload instanceof ArrayBuffer||"string"!=typeof a.payload.event?b(JSON.stringify([a.join_ref,a.ref,a.topic,a.event,a.payload])):b(this._binaryEncodeUserBroadcastPush(a))}_binaryEncodeUserBroadcastPush(a){var b;return this._isArrayBuffer(null==(b=a.payload)?void 0:b.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var b,c;let d=null!=(c=null==(b=a.payload)?void 0:b.payload)?c:new ArrayBuffer(0);return this._encodeUserBroadcastPush(a,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(a){var b,c;let d=null!=(c=null==(b=a.payload)?void 0:b.payload)?c:{},e=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(a,this.JSON_ENCODING,e)}_encodeUserBroadcastPush(a,b,c){let d=a.topic,e=null!=(n=a.ref)?n:"",f=null!=(o=a.join_ref)?o:"",g=a.payload.event,h=this.allowedMetadataKeys?this._pick(a.payload,this.allowedMetadataKeys):{},i=0===Object.keys(h).length?"":JSON.stringify(h);if(f.length>255)throw Error(`joinRef length ${f.length} exceeds maximum of 255`);if(e.length>255)throw Error(`ref length ${e.length} exceeds maximum of 255`);if(d.length>255)throw Error(`topic length ${d.length} exceeds maximum of 255`);if(g.length>255)throw Error(`userEvent length ${g.length} exceeds maximum of 255`);if(i.length>255)throw Error(`metadata length ${i.length} exceeds maximum of 255`);let j=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+e.length+d.length+g.length+i.length,k=new ArrayBuffer(this.HEADER_LENGTH+j),l=new DataView(k),m=0;l.setUint8(m++,this.KINDS.userBroadcastPush),l.setUint8(m++,f.length),l.setUint8(m++,e.length),l.setUint8(m++,d.length),l.setUint8(m++,g.length),l.setUint8(m++,i.length),l.setUint8(m++,b),Array.from(f,a=>l.setUint8(m++,a.charCodeAt(0))),Array.from(e,a=>l.setUint8(m++,a.charCodeAt(0))),Array.from(d,a=>l.setUint8(m++,a.charCodeAt(0))),Array.from(g,a=>l.setUint8(m++,a.charCodeAt(0))),Array.from(i,a=>l.setUint8(m++,a.charCodeAt(0)));var n,o,p=new Uint8Array(k.byteLength+c.byteLength);return p.set(new Uint8Array(k),0),p.set(new Uint8Array(c),k.byteLength),p.buffer}decode(a,b){if(this._isArrayBuffer(a))return b(this._binaryDecode(a));if("string"==typeof a){let[c,d,e,f,g]=JSON.parse(a);return b({join_ref:c,ref:d,topic:e,event:f,payload:g})}return b({})}_binaryDecode(a){let b=new DataView(a),c=b.getUint8(0),d=new TextDecoder;if(c===this.KINDS.userBroadcast)return this._decodeUserBroadcast(a,b,d)}_decodeUserBroadcast(a,b,c){let d=b.getUint8(1),e=b.getUint8(2),f=b.getUint8(3),g=b.getUint8(4),h=this.HEADER_LENGTH+4,i=c.decode(a.slice(h,h+d));h+=d;let j=c.decode(a.slice(h,h+e));h+=e;let k=c.decode(a.slice(h,h+f));h+=f;let l=a.slice(h,a.byteLength),m=g===this.JSON_ENCODING?JSON.parse(c.decode(l)):l,n={type:this.BROADCAST_EVENT,event:j,payload:m};return f>0&&(n.meta=JSON.parse(k)),{join_ref:null,ref:null,topic:i,event:this.BROADCAST_EVENT,payload:n}}_isArrayBuffer(a){var b;return a instanceof ArrayBuffer||(null==(b=null==a?void 0:a.constructor)?void 0:b.name)==="ArrayBuffer"}_pick(a,b){return a&&"object"==typeof a?Object.fromEntries(Object.entries(a).filter(([a])=>b.includes(a))):{}}}class hP{constructor(a,b){this.callback=a,this.timerCalc=b,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=b}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(q=J||(J={})).abstime="abstime",q.bool="bool",q.date="date",q.daterange="daterange",q.float4="float4",q.float8="float8",q.int2="int2",q.int4="int4",q.int4range="int4range",q.int8="int8",q.int8range="int8range",q.json="json",q.jsonb="jsonb",q.money="money",q.numeric="numeric",q.oid="oid",q.reltime="reltime",q.text="text",q.time="time",q.timestamp="timestamp",q.timestamptz="timestamptz",q.timetz="timetz",q.tsrange="tsrange",q.tstzrange="tstzrange";let hQ=(a,b,c={})=>{var d;let e=null!=(d=c.skipTypes)?d:[];return b?Object.keys(b).reduce((c,d)=>(c[d]=hR(d,a,b,e),c),{}):{}},hR=(a,b,c,d)=>{let e=b.find(b=>b.name===a),f=null==e?void 0:e.type,g=c[a];return f&&!d.includes(f)?hS(f,g):hT(g)},hS=(a,b)=>{if("_"===a.charAt(0))return hX(b,a.slice(1,a.length));switch(a){case J.bool:return hU(b);case J.float4:case J.float8:case J.int2:case J.int4:case J.int8:case J.numeric:case J.oid:return hV(b);case J.json:case J.jsonb:return hW(b);case J.timestamp:return hY(b);case J.abstime:case J.date:case J.daterange:case J.int4range:case J.int8range:case J.money:case J.reltime:case J.text:case J.time:case J.timestamptz:case J.timetz:case J.tsrange:case J.tstzrange:default:return hT(b)}},hT=a=>a,hU=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},hV=a=>{if("string"==typeof a){let b=parseFloat(a);if(!Number.isNaN(b))return b}return a},hW=a=>{if("string"==typeof a)try{return JSON.parse(a)}catch(a){console.log(`JSON parse error: ${a}`)}return a},hX=(a,b)=>{if("string"!=typeof a)return a;let c=a.length-1,d=a[c];if("{"===a[0]&&"}"===d){let d,e=a.slice(1,c);try{d=JSON.parse("["+e+"]")}catch(a){d=e?e.split(","):[]}return d.map(a=>hS(b,a))}return a},hY=a=>"string"==typeof a?a.replace(" ","T"):a,hZ=a=>{let b=new URL(a);return b.protocol=b.protocol.replace(/^ws/i,"http"),b.pathname=b.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===b.pathname||"/"===b.pathname?b.pathname="/api/broadcast":b.pathname=b.pathname+"/api/broadcast",b.href};class h${constructor(a,b,c={},d=1e4){this.channel=a,this.event=b,this.payload=c,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,b){var c;return this._hasReceived(a)&&b(null==(c=this.receivedResp)?void 0:c.response),this.recHooks.push({status:a,callback:b}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let a=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,b){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:b})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:b}){this.recHooks.filter(b=>b.status===a).forEach(a=>a.callback(b))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}(r=K||(K={})).SYNC="sync",r.JOIN="join",r.LEAVE="leave";class h_{constructor(a,b){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=(null==b?void 0:b.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=h_.syncState(this.state,a,b,c),this.pendingDiffs.forEach(a=>{this.state=h_.syncDiff(this.state,a,b,c)}),this.pendingDiffs=[],d()}),this.channel._on(c.diff,{},a=>{let{onJoin:b,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=h_.syncDiff(this.state,a,b,c),d())}),this.onJoin((a,b,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:b,newPresences:c})}),this.onLeave((a,b,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:b,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,b,c,d){let e=this.cloneDeep(a),f=this.transformState(b),g={},h={};return this.map(e,(a,b)=>{f[a]||(h[a]=b)}),this.map(f,(a,b)=>{let c=e[a];if(c){let d=b.map(a=>a.presence_ref),e=c.map(a=>a.presence_ref),f=b.filter(a=>0>e.indexOf(a.presence_ref)),i=c.filter(a=>0>d.indexOf(a.presence_ref));f.length>0&&(g[a]=f),i.length>0&&(h[a]=i)}else g[a]=b}),this.syncDiff(e,{joins:g,leaves:h},c,d)}static syncDiff(a,b,c,d){let{joins:e,leaves:f}={joins:this.transformState(b.joins),leaves:this.transformState(b.leaves)};return c||(c=()=>{}),d||(d=()=>{}),this.map(e,(b,d)=>{var e;let f=null!=(e=a[b])?e:[];if(a[b]=this.cloneDeep(d),f.length>0){let c=a[b].map(a=>a.presence_ref),d=f.filter(a=>0>c.indexOf(a.presence_ref));a[b].unshift(...d)}c(b,f,d)}),this.map(f,(b,c)=>{let e=a[b];if(!e)return;let f=c.map(a=>a.presence_ref);e=e.filter(a=>0>f.indexOf(a.presence_ref)),a[b]=e,d(b,e,c),0===e.length&&delete a[b]}),a}static map(a,b){return Object.getOwnPropertyNames(a).map(c=>b(c,a[c]))}static transformState(a){return Object.getOwnPropertyNames(a=this.cloneDeep(a)).reduce((b,c)=>{let d=a[c];return"metas"in d?b[c]=d.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):b[c]=d,b},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(s=L||(L={})).ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE",(t=M||(M={})).BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system",(u=N||(N={})).SUBSCRIBED="SUBSCRIBED",u.TIMED_OUT="TIMED_OUT",u.CLOSED="CLOSED",u.CHANNEL_ERROR="CHANNEL_ERROR";class h0{constructor(a,b={config:{}},c){var d,e;if(this.topic=a,this.params=b,this.socket=c,this.bindings={},this.state=F.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},b.config),this.timeout=this.socket.timeout,this.joinPush=new h$(this,G.join,this.params,this.timeout),this.rejoinTimer=new hP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=F.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=F.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=F.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=F.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=F.errored,this.rejoinTimer.scheduleTimeout())}),this._on(G.reply,{},(a,b)=>{this._trigger(this._replyEventName(b),a)}),this.presence=new h_(this),this.broadcastEndpointURL=hZ(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null==(e=null==(d=this.params.config)?void 0:d.broadcast)?void 0:e.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,b=this.timeout){var c,d,e;if(this.socket.isConnected()||this.socket.connect(),this.state==F.closed){let{config:{broadcast:f,presence:g,private:h}}=this.params,i=null!=(d=null==(c=this.bindings.postgres_changes)?void 0:c.map(a=>a.filter))?d:[],j=!!this.bindings[M.PRESENCE]&&this.bindings[M.PRESENCE].length>0||(null==(e=this.params.config.presence)?void 0:e.enabled)===!0,k={},l={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:j}),postgres_changes:i,private:h};this.socket.accessTokenValue&&(k.access_token=this.socket.accessTokenValue),this._onError(b=>null==a?void 0:a(N.CHANNEL_ERROR,b)),this._onClose(()=>null==a?void 0:a(N.CLOSED)),this.updateJoinPayload(Object.assign({config:l},k)),this.joinedOnce=!0,this._rejoin(b),this.joinPush.receive("ok",async({postgres_changes:b})=>{var c;if(this.socket.setAuth(),void 0===b){null==a||a(N.SUBSCRIBED);return}{let d=this.bindings.postgres_changes,e=null!=(c=null==d?void 0:d.length)?c:0,f=[];for(let c=0;c<e;c++){let e=d[c],{filter:{event:g,schema:h,table:i,filter:j}}=e,k=b&&b[c];if(k&&k.event===g&&k.schema===h&&k.table===i&&k.filter===j)f.push(Object.assign(Object.assign({},e),{id:k.id}));else{this.unsubscribe(),this.state=F.errored,null==a||a(N.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,a&&a(N.SUBSCRIBED);return}}).receive("error",b=>{this.state=F.errored,null==a||a(N.CHANNEL_ERROR,Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{null==a||a(N.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,b={}){return await this.send({type:"presence",event:"track",payload:a},b.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,b,c){return this.state===F.joined&&a===M.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(a,b,c)}async httpSend(a,b,c={}){var d;let e=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==b)return Promise.reject("Payload is required for httpSend()");let f={method:"POST",headers:{Authorization:e,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:b,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,null!=(d=c.timeout)?d:this.timeout);if(202===g.status)return{success:!0};let h=g.statusText;try{let a=await g.json();h=a.error||a.message||h}catch(a){}return Promise.reject(Error(h))}async send(a,b={}){var c,d;if(this._canPush()||"broadcast"!==a.type)return new Promise(c=>{var d,e,f;let g=this._push(a.type,a,b.timeout||this.timeout);"broadcast"!==a.type||(null==(f=null==(e=null==(d=this.params)?void 0:d.config)?void 0:e.broadcast)?void 0:f.ack)||c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:e,payload:f}=a,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:f,private:this.private}]})};try{let a=await this._fetchWithTimeout(this.broadcastEndpointURL,g,null!=(c=b.timeout)?c:this.timeout);return await (null==(d=a.body)?void 0:d.cancel()),a.ok?"ok":"error"}catch(a){if("AbortError"===a.name)return"timed out";return"error"}}}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=F.leaving;let b=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(G.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(d=>{(c=new h$(this,G.leave,{},a)).receive("ok",()=>{b(),d("ok")}).receive("timeout",()=>{b(),d("timed out")}).receive("error",()=>{d("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{null==c||c.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=F.closed,this.bindings={}}async _fetchWithTimeout(a,b,c){let d=new AbortController,e=setTimeout(()=>d.abort(),c),f=await this.socket.fetch(a,Object.assign(Object.assign({},b),{signal:d.signal}));return clearTimeout(e),f}_push(a,b,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new h$(this,a,b,c);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>100){let a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(a,b,c){return b}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,b,c){var d,e;let f=a.toLocaleLowerCase(),{close:g,error:h,leave:i,join:j}=G;if(c&&[g,h,i,j].indexOf(f)>=0&&c!==this._joinRef())return;let k=this._onMessage(f,b,c);if(b&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?null==(d=this.bindings.postgres_changes)||d.filter(a=>{var b,c,d;return(null==(b=a.filter)?void 0:b.event)==="*"||(null==(d=null==(c=a.filter)?void 0:c.event)?void 0:d.toLocaleLowerCase())===f}).map(a=>a.callback(k,c)):null==(e=this.bindings[f])||e.filter(a=>{var c,d,e,g,h,i;if(!["broadcast","presence","postgres_changes"].includes(f))return a.type.toLocaleLowerCase()===f;if("id"in a){let f=a.id,g=null==(c=a.filter)?void 0:c.event;return f&&(null==(d=b.ids)?void 0:d.includes(f))&&("*"===g||(null==g?void 0:g.toLocaleLowerCase())===(null==(e=b.data)?void 0:e.type.toLocaleLowerCase()))}{let c=null==(h=null==(g=null==a?void 0:a.filter)?void 0:g.event)?void 0:h.toLocaleLowerCase();return"*"===c||c===(null==(i=null==b?void 0:b.event)?void 0:i.toLocaleLowerCase())}}).map(a=>{if("object"==typeof k&&"ids"in k){let a=k.data,{schema:b,table:c,commit_timestamp:d,type:e,errors:f}=a;k=Object.assign(Object.assign({},{schema:b,table:c,commit_timestamp:d,eventType:e,new:{},old:{},errors:f}),this._getPayloadRecords(a))}a.callback(k,c)})}_isClosed(){return this.state===F.closed}_isJoined(){return this.state===F.joined}_isJoining(){return this.state===F.joining}_isLeaving(){return this.state===F.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,b,c){let d=a.toLocaleLowerCase(),e={type:d,filter:b,callback:c};return this.bindings[d]?this.bindings[d].push(e):this.bindings[d]=[e],this}_off(a,b){let c=a.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(a=>{var d;return!((null==(d=a.type)?void 0:d.toLocaleLowerCase())===c&&h0.isEqual(a.filter,b))})),this}static isEqual(a,b){if(Object.keys(a).length!==Object.keys(b).length)return!1;for(let c in a)if(a[c]!==b[c])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(G.close,{},a)}_onError(a){this._on(G.error,{},b=>a(b))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=F.joining,this.joinPush.resend(a))}_getPayloadRecords(a){let b={new:{},old:{}};return("INSERT"===a.type||"UPDATE"===a.type)&&(b.new=hQ(a.columns,a.record)),("UPDATE"===a.type||"DELETE"===a.type)&&(b.old=hQ(a.columns,a.old_record)),b}}let h1=()=>{},h2=[1e3,2e3,5e3,1e4],h3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class h4{constructor(a,b){var c;if(this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=h1,this.ref=0,this.reconnectTimer=null,this.vsn=hN,this.logger=h1,this.conn=null,this.sendBuffer=[],this.serializer=new hO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...b)=>a(...b):(...a)=>fetch(...a),!(null==(c=null==b?void 0:b.params)?void 0:c.apikey))throw Error("API key is required to connect to Realtime");this.apiKey=b.params.apikey,this.endPoint=`${a}/${H.websocket}`,this.httpEndpoint=hZ(a),this._initializeOptions(b),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==b?void 0:b.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hM.createWebSocket(this.endpointURL())}catch(b){this._setConnectionState("disconnected");let a=b.message;if(a.includes("Node.js"))throw Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`);throw Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,b){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(a?this.conn.close(a,null!=b?b:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){let b=await a.unsubscribe();return 0===this.channels.length&&this.disconnect(),b}async removeAllChannels(){let a=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,b,c){this.logger(a,b,c)}connectionState(){switch(this.conn&&this.conn.readyState){case E.connecting:return I.Connecting;case E.open:return I.Open;case E.closing:return I.Closing;default:return I.Closed}}isConnected(){return this.connectionState()===I.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(a,b={config:{}}){let c=`realtime:${a}`,d=this.getChannels().find(a=>a.topic===c);if(d)return d;{let c=new h0(`realtime:${a}`,b,this);return this.channels.push(c),c}}push(a){let{topic:b,event:c,payload:d,ref:e}=a,f=()=>{this.encode(a,a=>{var b;null==(b=this.conn)||b.send(a)})};this.log("push",`${b} ${c} (${e})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,null==(a=this.conn)||a.close(1e3,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||null==(a=this.reconnectTimer)||a.scheduleTimeout()},100);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let b=this.channels.find(b=>b.topic===a&&(b._isJoined()||b._isJoining()));b&&(this.log("transport",`leaving duplicate topic "${a}"`),b.unsubscribe())}_remove(a){this.channels=this.channels.filter(b=>b.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,a=>{if("phoenix"===a.topic&&"phx_reply"===a.event)try{this.heartbeatCallback("ok"===a.payload.status?"ok":"error")}catch(a){this.log("error","error in heartbeat callback",a)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:b,event:c,payload:d,ref:e}=a,f=e?`(${e})`:"",g=d.status||"";this.log("receive",`${g} ${b} ${c} ${f}`.trim(),d),this.channels.filter(a=>a._isMember(b)).forEach(a=>a._trigger(c,d,e)),this._triggerStateCallbacks("message",a)})}_clearTimer(a){var b;"heartbeat"===a&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===a&&(null==(b=this.reconnectTimer)||b.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a))}_teardownConnection(){if(this.conn){if(this.conn.readyState===E.open||this.conn.readyState===E.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{"keepAlive"===a.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(a){var b;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null==(b=this.reconnectTimer)||b.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(G.error))}_appendParams(a,b){if(0===Object.keys(b).length)return a;let c=a.match(/\?/)?"&":"?",d=new URLSearchParams(b);return`${a}${c}${d}`}_workerObjectUrl(a){let b;if(a)b=a;else{let a=new Blob([h3],{type:"application/javascript"});b=URL.createObjectURL(a)}return b}_setConnectionState(a,b=!1){this._connectionState=a,"connecting"===a?this._wasManualDisconnect=!1:"disconnecting"===a&&(this._wasManualDisconnect=b)}async _performAuth(a=null){let b;b=a||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=b&&(this.accessTokenValue=b,this.channels.forEach(a=>{b&&a.updateJoinPayload({access_token:b,version:"realtime-js/2.86.0"}),a.joinedOnce&&a._isJoined()&&a._push(G.access_token,{access_token:b})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this.setAuth().catch(b=>{this.log("error",`error setting auth in ${a}`,b)})}_triggerStateCallbacks(a,b){try{this.stateChangeCallbacks[a].forEach(c=>{try{c(b)}catch(b){this.log("error",`error in ${a} callback`,b)}})}catch(b){this.log("error",`error triggering ${a} callbacks`,b)}}_setupReconnectionTimer(){this.reconnectTimer=new hP(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(a){var b,c,d,e,f,g,h,i,j,k,l,m;switch(this.transport=null!=(b=null==a?void 0:a.transport)?b:null,this.timeout=null!=(c=null==a?void 0:a.timeout)?c:1e4,this.heartbeatIntervalMs=null!=(d=null==a?void 0:a.heartbeatIntervalMs)?d:25e3,this.worker=null!=(e=null==a?void 0:a.worker)&&e,this.accessToken=null!=(f=null==a?void 0:a.accessToken)?f:null,this.heartbeatCallback=null!=(g=null==a?void 0:a.heartbeatCallback)?g:h1,this.vsn=null!=(h=null==a?void 0:a.vsn)?h:hN,(null==a?void 0:a.params)&&(this.params=a.params),(null==a?void 0:a.logger)&&(this.logger=a.logger),((null==a?void 0:a.logLevel)||(null==a?void 0:a.log_level))&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!=(i=null==a?void 0:a.reconnectAfterMs)?i:a=>h2[a-1]||1e4,this.vsn){case hN:this.encode=null!=(j=null==a?void 0:a.encode)?j:(a,b)=>b(JSON.stringify(a)),this.decode=null!=(k=null==a?void 0:a.decode)?k:(a,b)=>b(JSON.parse(a));break;case"2.0.0":this.encode=null!=(l=null==a?void 0:a.encode)?l:this.serializer.encode.bind(this.serializer),this.decode=null!=(m=null==a?void 0:a.decode)?m:this.serializer.decode.bind(this.serializer);break;default:throw Error(`Unsupported serializer version: ${this.vsn}`)}this.worker&&(this.workerUrl=null==a?void 0:a.workerUrl)}}class h5 extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}}function h6(a){return"object"==typeof a&&null!==a&&"__isStorageError"in a}class h7 extends h5{constructor(a,b,c){super(a),this.name="StorageApiError",this.status=b,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class h8 extends h5{constructor(a,b){super(a),this.name="StorageUnknownError",this.originalError=b}}let h9=a=>a?(...b)=>a(...b):(...a)=>fetch(...a),ia=a=>{if(Array.isArray(a))return a.map(a=>ia(a));if("function"==typeof a||a!==Object(a))return a;let b={};return Object.entries(a).forEach(([a,c])=>{b[a.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""))]=ia(c)}),b},ib=a=>{var b;return a.msg||a.message||a.error_description||("string"==typeof a.error?a.error:null==(b=a.error)?void 0:b.message)||JSON.stringify(a)};function ic(a,b,c,d,e,f){return(0,hz.__awaiter)(this,void 0,void 0,function*(){return new Promise((g,h)=>{let i;a(c,(i={method:b,headers:(null==d?void 0:d.headers)||{}},"GET"===b||!f?i:((a=>{if("object"!=typeof a||null===a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)})(f)?(i.headers=Object.assign({"Content-Type":"application/json"},null==d?void 0:d.headers),i.body=JSON.stringify(f)):i.body=f,(null==d?void 0:d.duplex)&&(i.duplex=d.duplex),Object.assign(Object.assign({},i),e)))).then(a=>{if(!a.ok)throw a;return(null==d?void 0:d.noResolveJson)?a:a.json()}).then(a=>g(a)).catch(a=>(0,hz.__awaiter)(void 0,void 0,void 0,function*(){a instanceof(yield Response)&&!(null==d?void 0:d.noResolveJson)?a.json().then(b=>{let c=a.status||500,d=(null==b?void 0:b.statusCode)||c+"";h(new h7(ib(b),c,d))}).catch(a=>{h(new h8(ib(a),a))}):h(new h8(ib(a),a))}))})})}function id(a,b,c,d){return(0,hz.__awaiter)(this,void 0,void 0,function*(){return ic(a,"GET",b,c,d)})}function ie(a,b,c,d,e){return(0,hz.__awaiter)(this,void 0,void 0,function*(){return ic(a,"POST",b,d,e,c)})}function ig(a,b,c,d,e){return(0,hz.__awaiter)(this,void 0,void 0,function*(){return ic(a,"PUT",b,d,e,c)})}function ih(a,b,c,d,e){return(0,hz.__awaiter)(this,void 0,void 0,function*(){return ic(a,"DELETE",b,d,e,c)})}class ii{constructor(a,b){this.downloadFn=a,this.shouldThrowOnError=b}then(a,b){return this.execute().then(a,b)}execute(){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}}O=Symbol.toStringTag;let ij=class{constructor(a,b){this.downloadFn=a,this.shouldThrowOnError=b,this[O]="BlobDownloadBuilder",this.promise=null}asStream(){return new ii(this.downloadFn,this.shouldThrowOnError)}then(a,b){return this.getPromise().then(a,b)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{let a=yield this.downloadFn();return{data:yield a.blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}},ik={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},il={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class im{constructor(a,b={},c,d){this.shouldThrowOnError=!1,this.url=a,this.headers=b,this.bucketId=c,this.fetch=h9(d)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(a,b,c,d){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{let e,f=Object.assign(Object.assign({},il),d),g=Object.assign(Object.assign({},this.headers),"POST"===a&&{"x-upsert":String(f.upsert)}),h=f.metadata;"undefined"!=typeof Blob&&c instanceof Blob?((e=new FormData).append("cacheControl",f.cacheControl),h&&e.append("metadata",this.encodeMetadata(h)),e.append("",c)):"undefined"!=typeof FormData&&c instanceof FormData?((e=c).has("cacheControl")||e.append("cacheControl",f.cacheControl),h&&!e.has("metadata")&&e.append("metadata",this.encodeMetadata(h))):(e=c,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,h&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(h))),("undefined"!=typeof ReadableStream&&e instanceof ReadableStream||e&&"object"==typeof e&&"pipe"in e&&"function"==typeof e.pipe)&&!f.duplex&&(f.duplex="half")),(null==d?void 0:d.headers)&&(g=Object.assign(Object.assign({},g),d.headers));let i=this._removeEmptyFolders(b),j=this._getFinalPath(i),k=yield("PUT"==a?ig:ie)(this.fetch,`${this.url}/object/${j}`,e,Object.assign({headers:g},(null==f?void 0:f.duplex)?{duplex:f.duplex}:{}));return{data:{path:i,id:k.Id,fullPath:k.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}upload(a,b,c){return(0,hz.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",a,b,c)})}uploadToSignedUrl(a,b,c,d){return(0,hz.__awaiter)(this,void 0,void 0,function*(){let e=this._removeEmptyFolders(a),f=this._getFinalPath(e),g=new URL(this.url+`/object/upload/sign/${f}`);g.searchParams.set("token",b);try{let a,b=Object.assign({upsert:il.upsert},d),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(b.upsert)});"undefined"!=typeof Blob&&c instanceof Blob?((a=new FormData).append("cacheControl",b.cacheControl),a.append("",c)):"undefined"!=typeof FormData&&c instanceof FormData?(a=c).append("cacheControl",b.cacheControl):(a=c,f["cache-control"]=`max-age=${b.cacheControl}`,f["content-type"]=b.contentType);let h=yield ig(this.fetch,g.toString(),a,{headers:f});return{data:{path:e,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(a,b){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{let c=this._getFinalPath(a),d=Object.assign({},this.headers);(null==b?void 0:b.upsert)&&(d["x-upsert"]="true");let e=yield ie(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:d}),f=new URL(this.url+e.url),g=f.searchParams.get("token");if(!g)throw new h5("No token returned by API");return{data:{signedUrl:f.toString(),path:a,token:g},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}update(a,b,c){return(0,hz.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",a,b,c)})}move(a,b,c){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ie(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}copy(a,b,c){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield ie(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:a,destinationKey:b,destinationBucket:null==c?void 0:c.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}createSignedUrl(a,b,c){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{let d=this._getFinalPath(a),e=yield ie(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:b},(null==c?void 0:c.transform)?{transform:c.transform}:{}),{headers:this.headers}),f=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:e={signedUrl:encodeURI(`${this.url}${e.signedURL}${f}`)},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}createSignedUrls(a,b,c){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{let d=yield ie(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:b,paths:a},{headers:this.headers}),e=(null==c?void 0:c.download)?`&download=${!0===c.download?"":c.download}`:"";return{data:d.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${e}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}download(a,b){let c=void 0!==(null==b?void 0:b.transform)?"render/image/authenticated":"object",d=this.transformOptsToQueryString((null==b?void 0:b.transform)||{}),e=d?`?${d}`:"",f=this._getFinalPath(a);return new ij(()=>id(this.fetch,`${this.url}/${c}/${f}${e}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){let b=this._getFinalPath(a);try{let a=yield id(this.fetch,`${this.url}/object/info/${b}`,{headers:this.headers});return{data:ia(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}exists(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){let b=this._getFinalPath(a);try{return yield function(a,b,c,d){return(0,hz.__awaiter)(this,void 0,void 0,function*(){return ic(a,"HEAD",b,Object.assign(Object.assign({},c),{noResolveJson:!0}),void 0)})}(this.fetch,`${this.url}/object/${b}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a)&&a instanceof h8){let b=a.originalError;if([400,404].includes(null==b?void 0:b.status))return{data:!1,error:a}}throw a}})}getPublicUrl(a,b){let c=this._getFinalPath(a),d=[],e=(null==b?void 0:b.download)?`download=${!0===b.download?"":b.download}`:"";""!==e&&d.push(e);let f=void 0!==(null==b?void 0:b.transform),g=this.transformOptsToQueryString((null==b?void 0:b.transform)||{});""!==g&&d.push(g);let h=d.join("&");return""!==h&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${f?"render/image":"object"}/public/${c}${h}`)}}}remove(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:a},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}list(a,b,c){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{let d=Object.assign(Object.assign(Object.assign({},ik),b),{prefix:a||""});return{data:yield ie(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},c),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}listV2(a,b){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{let c=Object.assign({},a);return{data:yield ie(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,c,{headers:this.headers},b),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return"undefined"!=typeof Buffer?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){let b=[];return a.width&&b.push(`width=${a.width}`),a.height&&b.push(`height=${a.height}`),a.resize&&b.push(`resize=${a.resize}`),a.format&&b.push(`format=${a.format}`),a.quality&&b.push(`quality=${a.quality}`),b.join("&")}}let io="2.86.0",ip={"X-Client-Info":`storage-js/${io}`};class iq{constructor(a,b={},c,d){this.shouldThrowOnError=!1;const e=new URL(a);(null==d?void 0:d.useNewHostname)&&/supabase\.(co|in|red)$/.test(e.hostname)&&!e.hostname.includes("storage.supabase.")&&(e.hostname=e.hostname.replace("supabase.","storage.supabase.")),this.url=e.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ip),b),this.fetch=h9(c)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{let b=this.listBucketOptionsToQueryString(a);return{data:yield id(this.fetch,`${this.url}/bucket${b}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}getBucket(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield id(this.fetch,`${this.url}/bucket/${a}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}createBucket(a){return(0,hz.__awaiter)(this,arguments,void 0,function*(a,b={public:!1}){try{return{data:yield ie(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:b.type,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}updateBucket(a,b){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ig(this.fetch,`${this.url}/bucket/${a}`,{id:a,name:a,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}emptyBucket(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ie(this.fetch,`${this.url}/bucket/${a}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}deleteBucket(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}listBucketOptionsToQueryString(a){let b={};return a&&("limit"in a&&(b.limit=String(a.limit)),"offset"in a&&(b.offset=String(a.offset)),a.search&&(b.search=a.search),a.sortColumn&&(b.sortColumn=a.sortColumn),a.sortOrder&&(b.sortOrder=a.sortOrder)),Object.keys(b).length>0?"?"+new URLSearchParams(b).toString():""}}var ir=class extends Error{constructor(a,b){super(a),this.name="IcebergError",this.status=b.status,this.icebergType=b.icebergType,this.icebergCode=b.icebergCode,this.details=b.details,this.isCommitStateUnknown="CommitStateUnknownException"===b.icebergType||[500,502,504].includes(b.status)&&b.icebergType?.includes("CommitState")===!0}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};async function is(a){return a&&"none"!==a.type?"bearer"===a.type?{Authorization:`Bearer ${a.token}`}:"header"===a.type?{[a.name]:a.value}:"custom"===a.type?await a.getHeaders():{}:{}}function it(a){return a.join("\x1f")}var iu=class{constructor(a,b=""){this.client=a,this.prefix=b}async listNamespaces(a){let b=a?{parent:it(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:b})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(a,b){let c={namespace:a.namespace,properties:b?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:c})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${it(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${it(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${it(a.namespace)}`}),!0}catch(a){if(a instanceof ir&&404===a.status)return!1;throw a}}async createNamespaceIfNotExists(a,b){try{return await this.createNamespace(a,b)}catch(a){if(a instanceof ir&&409===a.status)return;throw a}}};function iv(a){return a.join("\x1f")}var iw=class{constructor(a,b="",c){this.client=a,this.prefix=b,this.accessDelegation=c}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${iv(a.namespace)}/tables`})).data.identifiers}async createTable(a,b){let c={};return this.accessDelegation&&(c["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${iv(a.namespace)}/tables`,body:b,headers:c})).data.metadata}async updateTable(a,b){let c=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${iv(a.namespace)}/tables/${a.name}`,body:b});return{"metadata-location":c.data["metadata-location"],metadata:c.data.metadata}}async dropTable(a,b){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${iv(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String(b?.purge??!1)}})}async loadTable(a){let b={};return this.accessDelegation&&(b["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${iv(a.namespace)}/tables/${a.name}`,headers:b})).data.metadata}async tableExists(a){let b={};this.accessDelegation&&(b["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${iv(a.namespace)}/tables/${a.name}`,headers:b}),!0}catch(a){if(a instanceof ir&&404===a.status)return!1;throw a}}async createTableIfNotExists(a,b){try{return await this.createTable(a,b)}catch(c){if(c instanceof ir&&409===c.status)return await this.loadTable({namespace:a.namespace,name:b.name});throw c}}},ix=class{constructor(a){let b="v1";a.catalogName&&(b+=`/${a.catalogName}`);const c=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=function(a){let b=a.fetchImpl??globalThis.fetch;return{async request({method:c,path:d,query:e,body:f,headers:g}){let h=function(a,b,c){let d=new URL(b,a);if(c)for(let[a,b]of Object.entries(c))void 0!==b&&d.searchParams.set(a,b);return d.toString()}(a.baseUrl,d,e),i=await is(a.auth),j=await b(h,{method:c,headers:{...f?{"Content-Type":"application/json"}:{},...i,...g},body:f?JSON.stringify(f):void 0}),k=await j.text(),l=(j.headers.get("content-type")||"").includes("application/json"),m=l&&k?JSON.parse(k):k;if(!j.ok){let a=l?m:void 0,b=a?.error;throw new ir(b?.message??`Request failed with status ${j.status}`,{status:j.status,icebergType:b?.type,icebergCode:b?.code,details:a})}return{status:j.status,headers:j.headers,data:m}}}}({baseUrl:c,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=a.accessDelegation?.join(","),this.namespaceOps=new iu(this.client,b),this.tableOps=new iw(this.client,b,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,b){return this.namespaceOps.createNamespace(a,b)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,b){return this.tableOps.createTable(a,b)}async updateTable(a,b){return this.tableOps.updateTable(a,b)}async dropTable(a,b){await this.tableOps.dropTable(a,b)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,b){return this.namespaceOps.createNamespaceIfNotExists(a,b)}async createTableIfNotExists(a,b){return this.tableOps.createTableIfNotExists(a,b)}};class iy{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ip),b),this.fetch=h9(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ie(this.fetch,`${this.url}/bucket`,{name:a},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}listBuckets(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{let b=new URLSearchParams;(null==a?void 0:a.limit)!==void 0&&b.set("limit",a.limit.toString()),(null==a?void 0:a.offset)!==void 0&&b.set("offset",a.offset.toString()),(null==a?void 0:a.sortColumn)&&b.set("sortColumn",a.sortColumn),(null==a?void 0:a.sortOrder)&&b.set("sortOrder",a.sortOrder),(null==a?void 0:a.search)&&b.set("search",a.search);let c=b.toString(),d=c?`${this.url}/bucket?${c}`:`${this.url}/bucket`;return{data:yield id(this.fetch,d,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}deleteBucket(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/bucket/${a}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h6(a))return{data:null,error:a};throw a}})}from(a){if(!(!(!a||"string"!=typeof a||0===a.length||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\"))&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(a)))throw new h5("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new ix({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:()=>(0,hz.__awaiter)(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}let iz={"X-Client-Info":`storage-js/${io}`,"Content-Type":"application/json"};class iA extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function iB(a){return"object"==typeof a&&null!==a&&"__isStorageVectorsError"in a}class iC extends iA{constructor(a,b,c){super(a),this.name="StorageVectorsApiError",this.status=b,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class iD extends iA{constructor(a,b){super(a),this.name="StorageVectorsUnknownError",this.originalError=b}}(v=P||(P={})).InternalError="InternalError",v.S3VectorConflictException="S3VectorConflictException",v.S3VectorNotFoundException="S3VectorNotFoundException",v.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",v.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",v.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";let iE=a=>a?(...b)=>a(...b):(...a)=>fetch(...a),iF=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a);function iG(a,b,c,d,e){return(0,hz.__awaiter)(this,void 0,void 0,function*(){return function(a,b,c,d,e,f){return(0,hz.__awaiter)(this,void 0,void 0,function*(){return new Promise((g,h)=>{let i;a(c,(i={method:b,headers:(null==d?void 0:d.headers)||{}},"GET"===b||!f?i:((a=>{if("object"!=typeof a||null===a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)})(f)?(i.headers=Object.assign({"Content-Type":"application/json"},null==d?void 0:d.headers),i.body=JSON.stringify(f)):i.body=f,Object.assign(Object.assign({},i),e)))).then(a=>{if(!a.ok)throw a;if(null==d?void 0:d.noResolveJson)return a;let b=a.headers.get("content-type");return b&&b.includes("application/json")?a.json():{}}).then(a=>g(a)).catch(a=>(0,hz.__awaiter)(void 0,void 0,void 0,function*(){if(!(a&&"object"==typeof a&&"status"in a&&"ok"in a&&"number"==typeof a.status)||(null==d?void 0:d.noResolveJson))h(new iD(iF(a),a));else{let b=a.status||500;"function"==typeof a.json?a.json().then(a=>{let c=(null==a?void 0:a.statusCode)||(null==a?void 0:a.code)||b+"";h(new iC(iF(a),b,c))}).catch(()=>{h(new iC(a.statusText||`HTTP ${b} error`,b,b+""))}):h(new iC(a.statusText||`HTTP ${b} error`,b,b+""))}}))})})}(a,"POST",b,d,e,c)})}class iH{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},iz),b),this.fetch=iE(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield iG(this.fetch,`${this.url}/CreateIndex`,a,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(iB(a))return{data:null,error:a};throw a}})}getIndex(a,b){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield iG(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:a,indexName:b},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(iB(a))return{data:null,error:a};throw a}})}listIndexes(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield iG(this.fetch,`${this.url}/ListIndexes`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(iB(a))return{data:null,error:a};throw a}})}deleteIndex(a,b){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield iG(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:a,indexName:b},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(iB(a))return{data:null,error:a};throw a}})}}class iI{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},iz),b),this.fetch=iE(c)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{if(a.vectors.length<1||a.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return{data:(yield iG(this.fetch,`${this.url}/PutVectors`,a,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(iB(a))return{data:null,error:a};throw a}})}getVectors(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield iG(this.fetch,`${this.url}/GetVectors`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(iB(a))return{data:null,error:a};throw a}})}listVectors(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==a.segmentCount){if(a.segmentCount<1||a.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==a.segmentIndex&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:yield iG(this.fetch,`${this.url}/ListVectors`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(iB(a))return{data:null,error:a};throw a}})}queryVectors(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield iG(this.fetch,`${this.url}/QueryVectors`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(iB(a))return{data:null,error:a};throw a}})}deleteVectors(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{if(a.keys.length<1||a.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return{data:(yield iG(this.fetch,`${this.url}/DeleteVectors`,a,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(iB(a))return{data:null,error:a};throw a}})}}class iJ{constructor(a,b={},c){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},iz),b),this.fetch=iE(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield iG(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(iB(a))return{data:null,error:a};throw a}})}getBucket(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield iG(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:a},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(iB(a))return{data:null,error:a};throw a}})}listBuckets(){return(0,hz.__awaiter)(this,arguments,void 0,function*(a={}){try{return{data:yield iG(this.fetch,`${this.url}/ListVectorBuckets`,a,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(iB(a))return{data:null,error:a};throw a}})}deleteBucket(a){return(0,hz.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield iG(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(iB(a))return{data:null,error:a};throw a}})}}class iK extends iJ{constructor(a,b={}){super(a,b.headers||{},b.fetch)}from(a){return new iL(this.url,this.headers,a,this.fetch)}createBucket(a){let b=Object.create(null,{createBucket:{get:()=>super.createBucket}});return(0,hz.__awaiter)(this,void 0,void 0,function*(){return b.createBucket.call(this,a)})}getBucket(a){let b=Object.create(null,{getBucket:{get:()=>super.getBucket}});return(0,hz.__awaiter)(this,void 0,void 0,function*(){return b.getBucket.call(this,a)})}listBuckets(){let a=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return(0,hz.__awaiter)(this,arguments,void 0,function*(b={}){return a.listBuckets.call(this,b)})}deleteBucket(a){let b=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return(0,hz.__awaiter)(this,void 0,void 0,function*(){return b.deleteBucket.call(this,a)})}}class iL extends iH{constructor(a,b,c,d){super(a,b,d),this.vectorBucketName=c}createIndex(a){let b=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,hz.__awaiter)(this,void 0,void 0,function*(){return b.createIndex.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let a=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,hz.__awaiter)(this,arguments,void 0,function*(b={}){return a.listIndexes.call(this,Object.assign(Object.assign({},b),{vectorBucketName:this.vectorBucketName}))})}getIndex(a){let b=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,hz.__awaiter)(this,void 0,void 0,function*(){return b.getIndex.call(this,this.vectorBucketName,a)})}deleteIndex(a){let b=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,hz.__awaiter)(this,void 0,void 0,function*(){return b.deleteIndex.call(this,this.vectorBucketName,a)})}index(a){return new iM(this.url,this.headers,this.vectorBucketName,a,this.fetch)}}class iM extends iI{constructor(a,b,c,d,e){super(a,b,e),this.vectorBucketName=c,this.indexName=d}putVectors(a){let b=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,hz.__awaiter)(this,void 0,void 0,function*(){return b.putVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(a){let b=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,hz.__awaiter)(this,void 0,void 0,function*(){return b.getVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let a=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,hz.__awaiter)(this,arguments,void 0,function*(b={}){return a.listVectors.call(this,Object.assign(Object.assign({},b),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(a){let b=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,hz.__awaiter)(this,void 0,void 0,function*(){return b.queryVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(a){let b=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,hz.__awaiter)(this,void 0,void 0,function*(){return b.deleteVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class iN extends iq{constructor(a,b={},c,d){super(a,b,c,d)}from(a){return new im(this.url,this.headers,a,this.fetch)}get vectors(){return new iK(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new iy(this.url+"/iceberg",this.headers,this.fetch)}}let iO="";iO="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let iP={headers:{"X-Client-Info":`supabase-js-${iO}/2.86.0`}},iQ={schema:"public"},iR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iS={},iT="2.86.0",iU={"X-Client-Info":`gotrue-js/${iT}`},iV="X-Supabase-Api-Version",iW={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class iY extends Error{constructor(a,b,c){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=b,this.code=c}}function iZ(a){return"object"==typeof a&&null!==a&&"__isAuthError"in a}class i$ extends iY{constructor(a,b,c){super(a,b,c),this.name="AuthApiError",this.status=b,this.code=c}}class i_ extends iY{constructor(a,b){super(a),this.name="AuthUnknownError",this.originalError=b}}class i0 extends iY{constructor(a,b,c,d){super(a,c,d),this.name=b,this.status=c}}class i1 extends i0{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class i2 extends i0{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class i3 extends i0{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class i4 extends i0{constructor(a,b=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=b}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class i5 extends i0{constructor(a,b){super(a,"AuthRetryableFetchError",b,void 0)}}function i6(a){return iZ(a)&&"AuthRetryableFetchError"===a.name}class i7 extends i0{constructor(a,b,c){super(a,"AuthWeakPasswordError",b,"weak_password"),this.reasons=c}}class i8 extends i0{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}let i9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ja=" 	\n\r=".split(""),jb=(()=>{let a=Array(128);for(let b=0;b<a.length;b+=1)a[b]=-1;for(let b=0;b<ja.length;b+=1)a[ja[b].charCodeAt(0)]=-2;for(let b=0;b<i9.length;b+=1)a[i9[b].charCodeAt(0)]=b;return a})();function jc(a,b,c){if(null!==a)for(b.queue=b.queue<<8|a,b.queuedBits+=8;b.queuedBits>=6;)c(i9[b.queue>>b.queuedBits-6&63]),b.queuedBits-=6;else if(b.queuedBits>0)for(b.queue=b.queue<<6-b.queuedBits,b.queuedBits=6;b.queuedBits>=6;)c(i9[b.queue>>b.queuedBits-6&63]),b.queuedBits-=6}function jd(a,b,c){let d=jb[a];if(d>-1)for(b.queue=b.queue<<6|d,b.queuedBits+=6;b.queuedBits>=8;)c(b.queue>>b.queuedBits-8&255),b.queuedBits-=8;else if(-2===d)return;else throw Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}function je(a){let b=[],c=a=>{b.push(String.fromCodePoint(a))},d={utf8seq:0,codepoint:0},e={queue:0,queuedBits:0},f=a=>{!function(a,b,c){if(0===b.utf8seq){if(a<=127)return c(a);for(let c=1;c<6;c+=1)if((a>>7-c&1)==0){b.utf8seq=c;break}if(2===b.utf8seq)b.codepoint=31&a;else if(3===b.utf8seq)b.codepoint=15&a;else if(4===b.utf8seq)b.codepoint=7&a;else throw Error("Invalid UTF-8 sequence");b.utf8seq-=1}else if(b.utf8seq>0){if(a<=127)throw Error("Invalid UTF-8 sequence");b.codepoint=b.codepoint<<6|63&a,b.utf8seq-=1,0===b.utf8seq&&c(b.codepoint)}}(a,d,c)};for(let b=0;b<a.length;b+=1)jd(a.charCodeAt(b),e,f);return b.join("")}function jf(a){let b=[],c={queue:0,queuedBits:0},d=a=>{b.push(a)};for(let b=0;b<a.length;b+=1)jd(a.charCodeAt(b),c,d);return new Uint8Array(b)}function jg(a){let b=[],c={queue:0,queuedBits:0},d=a=>{b.push(a)};return a.forEach(a=>jc(a,c,d)),jc(null,c,d),b.join("")}let jh=a=>a?(...b)=>a(...b):(...a)=>fetch(...a),ji=async(a,b,c)=>{await a.setItem(b,JSON.stringify(c))},jj=async(a,b)=>{let c=await a.getItem(b);if(!c)return null;try{return JSON.parse(c)}catch(a){return c}},jk=async(a,b)=>{await a.removeItem(b)};class jl{constructor(){this.promise=new jl.promiseConstructor((a,b)=>{this.resolve=a,this.reject=b})}}function jm(a){let b=a.split(".");if(3!==b.length)throw new i8("Invalid JWT structure");for(let a=0;a<b.length;a++)if(!iX.test(b[a]))throw new i8("JWT not in base64url format");return{header:JSON.parse(je(b[0])),payload:JSON.parse(je(b[1])),signature:jf(b[2]),raw:{header:b[0],payload:b[1]}}}async function jn(a){return await new Promise(b=>{setTimeout(()=>b(null),a)})}function jo(a){return("0"+a.toString(16)).substr(-2)}async function jp(a){let b=new TextEncoder().encode(a);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",b))).map(a=>String.fromCharCode(a)).join("")}async function jq(a){return"undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder?(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a):btoa(await jp(a)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jr(a,b,c=!1){let d=function(){let a=new Uint32Array(56);if("undefined"==typeof crypto){let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",b=a.length,c="";for(let d=0;d<56;d++)c+=a.charAt(Math.floor(Math.random()*b));return c}return crypto.getRandomValues(a),Array.from(a,jo).join("")}(),e=d;c&&(e+="/PASSWORD_RECOVERY"),await ji(a,`${b}-code-verifier`,e);let f=await jq(d),g=d===f?"plain":"s256";return[f,g]}jl.promiseConstructor=Promise;let js=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,jt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ju(a){if(!jt.test(a))throw Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jv(){return new Proxy({},{get:(a,b)=>{if("__isUserNotAvailableProxy"===b)return!0;if("symbol"==typeof b){let a=b.toString();if("Symbol(Symbol.toPrimitive)"===a||"Symbol(Symbol.toStringTag)"===a||"Symbol(util.inspect.custom)"===a)return}throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${b}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,b)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${b}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,b)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${b}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jw(a){return JSON.parse(JSON.stringify(a))}let jx=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),jy=[502,503,504];async function jz(a){var b;let c,d;if(!("object"==typeof a&&null!==a&&"status"in a&&"ok"in a&&"json"in a&&"function"==typeof a.json))throw new i5(jx(a),0);if(jy.includes(a.status))throw new i5(jx(a),a.status);try{c=await a.json()}catch(a){throw new i_(jx(a),a)}let e=function(a){let b=a.headers.get(iV);if(!b||!b.match(js))return null;try{return new Date(`${b}T00:00:00.0Z`)}catch(a){return null}}(a);if(e&&e.getTime()>=iW["2024-01-01"].timestamp&&"object"==typeof c&&c&&"string"==typeof c.code?d=c.code:"object"==typeof c&&c&&"string"==typeof c.error_code&&(d=c.error_code),d){if("weak_password"===d)throw new i7(jx(c),a.status,(null==(b=c.weak_password)?void 0:b.reasons)||[]);else if("session_not_found"===d)throw new i1}else if("object"==typeof c&&c&&"object"==typeof c.weak_password&&c.weak_password&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0))throw new i7(jx(c),a.status,c.weak_password.reasons);throw new i$(jx(c),a.status||500,d)}async function jA(a,b,c,d){var e;let f=Object.assign({},null==d?void 0:d.headers);f[iV]||(f[iV]=iW["2024-01-01"].name),(null==d?void 0:d.jwt)&&(f.Authorization=`Bearer ${d.jwt}`);let g=null!=(e=null==d?void 0:d.query)?e:{};(null==d?void 0:d.redirectTo)&&(g.redirect_to=d.redirectTo);let h=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",i=await jB(a,b,c+h,{headers:f,noResolveJson:null==d?void 0:d.noResolveJson},{},null==d?void 0:d.body);return(null==d?void 0:d.xform)?null==d?void 0:d.xform(i):{data:Object.assign({},i),error:null}}async function jB(a,b,c,d,e,f){let g,h,i=(h={method:b,headers:(null==d?void 0:d.headers)||{}},"GET"===b?h:(h.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==d?void 0:d.headers),h.body=JSON.stringify(f),Object.assign(Object.assign({},h),e)));try{g=await a(c,Object.assign({},i))}catch(a){throw console.error(a),new i5(jx(a),0)}if(g.ok||await jz(g),null==d?void 0:d.noResolveJson)return g;try{return await g.json()}catch(a){await jz(a)}}function jC(a){var b,c,d;let e=null;(d=a).access_token&&d.refresh_token&&d.expires_in&&(e=Object.assign({},a),a.expires_at||(e.expires_at=(c=a.expires_in,Math.round(Date.now()/1e3)+c)));return{data:{session:e,user:null!=(b=a.user)?b:a},error:null}}function jD(a){let b=jC(a);return!b.error&&a.weak_password&&"object"==typeof a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&"string"==typeof a.weak_password.message&&a.weak_password.reasons.reduce((a,b)=>a&&"string"==typeof b,!0)&&(b.data.weak_password=a.weak_password),b}function jE(a){var b;return{data:{user:null!=(b=a.user)?b:a},error:null}}function jF(a){return{data:a,error:null}}function jG(a){let{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f}=a;return{data:{properties:{action_link:b,email_otp:c,hashed_token:d,redirect_to:e,verification_type:f},user:Object.assign({},(0,hz.__rest)(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function jH(a){return a}let jI=["global","local","others"];class jJ{constructor({url:a="",headers:b={},fetch:c}){this.url=a,this.headers=b,this.fetch=jh(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,b=jI[0]){if(0>jI.indexOf(b))throw Error(`@supabase/auth-js: Parameter scope must be one of ${jI.join(", ")}`);try{return await jA(this.fetch,"POST",`${this.url}/logout?scope=${b}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(a){if(iZ(a))return{data:null,error:a};throw a}}async inviteUserByEmail(a,b={}){try{return await jA(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:b.data},headers:this.headers,redirectTo:b.redirectTo,xform:jE})}catch(a){if(iZ(a))return{data:{user:null},error:a};throw a}}async generateLink(a){try{let{options:b}=a,c=(0,hz.__rest)(a,["options"]),d=Object.assign(Object.assign({},c),b);return"newEmail"in c&&(d.new_email=null==c?void 0:c.newEmail,delete d.newEmail),await jA(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:jG,redirectTo:null==b?void 0:b.redirectTo})}catch(a){if(iZ(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(a){try{return await jA(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:jE})}catch(a){if(iZ(a))return{data:{user:null},error:a};throw a}}async listUsers(a){var b,c,d,e,f,g,h;try{let i={nextPage:null,lastPage:0,total:0},j=await jA(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(c=null==(b=null==a?void 0:a.page)?void 0:b.toString())?c:"",per_page:null!=(e=null==(d=null==a?void 0:a.perPage)?void 0:d.toString())?e:""},xform:jH});if(j.error)throw j.error;let k=await j.json(),l=null!=(f=j.headers.get("x-total-count"))?f:0,m=null!=(h=null==(g=j.headers.get("link"))?void 0:g.split(","))?h:[];return m.length>0&&(m.forEach(a=>{let b=parseInt(a.split(";")[0].split("=")[1].substring(0,1)),c=JSON.parse(a.split(";")[1].split("=")[1]);i[`${c}Page`]=b}),i.total=parseInt(l)),{data:Object.assign(Object.assign({},k),i),error:null}}catch(a){if(iZ(a))return{data:{users:[]},error:a};throw a}}async getUserById(a){ju(a);try{return await jA(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:jE})}catch(a){if(iZ(a))return{data:{user:null},error:a};throw a}}async updateUserById(a,b){ju(a);try{return await jA(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:b,headers:this.headers,xform:jE})}catch(a){if(iZ(a))return{data:{user:null},error:a};throw a}}async deleteUser(a,b=!1){ju(a);try{return await jA(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:b},xform:jE})}catch(a){if(iZ(a))return{data:{user:null},error:a};throw a}}async _listFactors(a){ju(a.userId);try{let{data:b,error:c}=await jA(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:b,error:c}}catch(a){if(iZ(a))return{data:null,error:a};throw a}}async _deleteFactor(a){ju(a.userId),ju(a.id);try{return{data:await jA(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(a){if(iZ(a))return{data:null,error:a};throw a}}async _listOAuthClients(a){var b,c,d,e,f,g,h;try{let i={nextPage:null,lastPage:0,total:0},j=await jA(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(c=null==(b=null==a?void 0:a.page)?void 0:b.toString())?c:"",per_page:null!=(e=null==(d=null==a?void 0:a.perPage)?void 0:d.toString())?e:""},xform:jH});if(j.error)throw j.error;let k=await j.json(),l=null!=(f=j.headers.get("x-total-count"))?f:0,m=null!=(h=null==(g=j.headers.get("link"))?void 0:g.split(","))?h:[];return m.length>0&&(m.forEach(a=>{let b=parseInt(a.split(";")[0].split("=")[1].substring(0,1)),c=JSON.parse(a.split(";")[1].split("=")[1]);i[`${c}Page`]=b}),i.total=parseInt(l)),{data:Object.assign(Object.assign({},k),i),error:null}}catch(a){if(iZ(a))return{data:{clients:[]},error:a};throw a}}async _createOAuthClient(a){try{return await jA(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(iZ(a))return{data:null,error:a};throw a}}async _getOAuthClient(a){try{return await jA(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(iZ(a))return{data:null,error:a};throw a}}async _updateOAuthClient(a,b){try{return await jA(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:b,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(iZ(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(a){try{return await jA(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(iZ(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(a){try{return await jA(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(iZ(a))return{data:null,error:a};throw a}}}function jK(a={}){return{getItem:b=>a[b]||null,setItem:(b,c)=>{a[b]=c},removeItem:b=>{delete a[b]}}}globalThis;class jL extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}function jM(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}class jN extends Error{constructor({message:a,code:b,cause:c,name:d}){var e;super(a,{cause:c}),this.__isWebAuthnError=!0,this.name=null!=(e=null!=d?d:c instanceof Error?c.name:void 0)?e:"Unknown Error",this.code=b}}class jO extends jN{constructor(a,b){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:b,message:a}),this.name="WebAuthnUnknownError",this.originalError=b}}let jP=new class{createNewAbortSignal(){if(this.controller){let a=Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}let a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){let a=Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}};function jQ(a){return"localhost"===a||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}async function jR(a){try{let b=await navigator.credentials.create(a);if(!b)return{data:null,error:new jO("Empty credential response",b)};if(!(b instanceof PublicKeyCredential))return{data:null,error:new jO("Browser returned unexpected credential type",b)};return{data:b,error:null}}catch(b){return{data:null,error:function({error:a,options:b}){var c,d,e;let{publicKey:f}=b;if(!f)throw Error("options was missing required publicKey property");if("AbortError"===a.name){if(b.signal instanceof AbortSignal)return new jN({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if("ConstraintError"===a.name){if((null==(c=f.authenticatorSelection)?void 0:c.requireResidentKey)===!0)return new jN({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});else if("conditional"===b.mediation&&(null==(d=f.authenticatorSelection)?void 0:d.userVerification)==="required")return new jN({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});else if((null==(e=f.authenticatorSelection)?void 0:e.userVerification)==="required")return new jN({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else if("InvalidStateError"===a.name)return new jN({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});else if("NotAllowedError"===a.name)return new jN({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});else if("NotSupportedError"===a.name)return new jN(0===f.pubKeyCredParams.filter(a=>"public-key"===a.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});else if("SecurityError"===a.name){let b=window.location.hostname;if(!jQ(b))return new jN({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a});if(f.rp.id!==b)return new jN({message:`The RP ID "${f.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else if("TypeError"===a.name){if(f.user.id.byteLength<1||f.user.id.byteLength>64)return new jN({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if("UnknownError"===a.name)return new jN({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a});return new jN({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}({error:b,options:a})}}}async function jS(a){try{let b=await navigator.credentials.get(a);if(!b)return{data:null,error:new jO("Empty credential response",b)};if(!(b instanceof PublicKeyCredential))return{data:null,error:new jO("Browser returned unexpected credential type",b)};return{data:b,error:null}}catch(b){return{data:null,error:function({error:a,options:b}){let{publicKey:c}=b;if(!c)throw Error("options was missing required publicKey property");if("AbortError"===a.name){if(b.signal instanceof AbortSignal)return new jN({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if("NotAllowedError"===a.name)return new jN({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});else if("SecurityError"===a.name){let b=window.location.hostname;if(!jQ(b))return new jN({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a});if(c.rpId!==b)return new jN({message:`The RP ID "${c.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else if("UnknownError"===a.name)return new jN({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a});return new jN({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}({error:b,options:a})}}}let jT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},jU={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function jV(...a){let b=a=>null!==a&&"object"==typeof a&&!Array.isArray(a),c=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),d={};for(let e of a)if(e)for(let a in e){let f=e[a];if(void 0!==f)if(Array.isArray(f))d[a]=f;else if(c(f))d[a]=f;else if(b(f)){let c=d[a];b(c)?d[a]=jV(c,f):d[a]=jV(f)}else d[a]=f}return d}class jW{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:b,friendlyName:c,signal:d},e){try{var f,g,h,i;let{data:j,error:k}=await this.client.mfa.challenge({factorId:a,webauthn:b});if(!j)return{data:null,error:k};let l=null!=d?d:jP.createNewAbortSignal();if("create"===j.webauthn.type){let{user:a}=j.webauthn.credential_options.publicKey;a.name||(a.name=`${a.id}:${c}`),a.displayName||(a.displayName=a.name)}switch(j.webauthn.type){case"create":{let b=(f=j.webauthn.credential_options.publicKey,g=null==e?void 0:e.create,jV(jT,f,g||{})),{data:c,error:d}=await jR({publicKey:b,signal:l});if(c)return{data:{factorId:a,challengeId:j.id,webauthn:{type:j.webauthn.type,credential_response:c}},error:null};return{data:null,error:d}}case"request":{let b=(h=j.webauthn.credential_options.publicKey,i=null==e?void 0:e.request,jV(jU,h,i||{})),{data:c,error:d}=await jS(Object.assign(Object.assign({},j.webauthn.credential_options),{publicKey:b,signal:l}));if(c)return{data:{factorId:a,challengeId:j.id,webauthn:{type:j.webauthn.type,credential_response:c}},error:null};return{data:null,error:d}}}}catch(a){if(iZ(a))return{data:null,error:a};return{data:null,error:new i_("Unexpected error in challenge",a)}}}async _verify({challengeId:a,factorId:b,webauthn:c}){return this.client.mfa.verify({factorId:b,challengeId:a,webauthn:c})}async _authenticate({factorId:a,webauthn:{rpId:b,rpOrigins:c,signal:d}={}},e){if(!b)return{data:null,error:new iY("rpId is required for WebAuthn authentication")};try{1;return{data:null,error:new i_("Browser does not support WebAuthn",null)}}catch(a){if(iZ(a))return{data:null,error:a};return{data:null,error:new i_("Unexpected error in authenticate",a)}}}async _register({friendlyName:a,webauthn:{rpId:b,rpOrigins:c,signal:d}={}},e){if(!b)return{data:null,error:new iY("rpId is required for WebAuthn registration")};try{1;return{data:null,error:new i_("Browser does not support WebAuthn",null)}}catch(a){if(iZ(a))return{data:null,error:a};return{data:null,error:new i_("Unexpected error in register",a)}}}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(a){"undefined"!=typeof self&&(self.globalThis=self)}let jX={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:iU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function jY(a,b,c){return await c()}let jZ={};class j${get jwks(){var a,b;return null!=(b=null==(a=jZ[this.storageKey])?void 0:a.jwks)?b:{keys:[]}}set jwks(a){jZ[this.storageKey]=Object.assign(Object.assign({},jZ[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,b;return null!=(b=null==(a=jZ[this.storageKey])?void 0:a.cachedAt)?b:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){jZ[this.storageKey]=Object.assign(Object.assign({},jZ[this.storageKey]),{cachedAt:a})}constructor(a){var b;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},jX),a);this.storageKey=c.storageKey,this.instanceID=null!=(b=j$.nextInstanceID[this.storageKey])?b:0,j$.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,"function"==typeof c.debug&&(this.logger=c.debug),this.instanceID,this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new jJ({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=jh(c.fetch),this.lock=c.lock||jY,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,c.lock?this.lock=c.lock:this.lock=jY,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jW(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:(this.memoryStorage={},this.storage=jK(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=jK(this.memoryStorage)),this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${iT}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){try{return await this._recoverAndRefresh(),{error:null}}catch(a){if(iZ(a))return this._returnResult({error:a});return this._returnResult({error:new i_("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var b,c,d;try{let{data:e,error:f}=await jA(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(c=null==(b=null==a?void 0:a.options)?void 0:b.data)?c:{},gotrue_meta_security:{captcha_token:null==(d=null==a?void 0:a.options)?void 0:d.captchaToken}},xform:jC});if(f||!e)return this._returnResult({data:{user:null,session:null},error:f});let g=e.session,h=e.user;return e.session&&(await this._saveSession(e.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(a){if(iZ(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(a){var b,c,d;try{let e;if("email"in a){let{email:c,password:d,options:f}=a,g=null,h=null;"pkce"===this.flowType&&([g,h]=await jr(this.storage,this.storageKey)),e=await jA(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==f?void 0:f.emailRedirectTo,body:{email:c,password:d,data:null!=(b=null==f?void 0:f.data)?b:{},gotrue_meta_security:{captcha_token:null==f?void 0:f.captchaToken},code_challenge:g,code_challenge_method:h},xform:jC})}else if("phone"in a){let{phone:b,password:f,options:g}=a;e=await jA(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:f,data:null!=(c=null==g?void 0:g.data)?c:{},channel:null!=(d=null==g?void 0:g.channel)?d:"sms",gotrue_meta_security:{captcha_token:null==g?void 0:g.captchaToken}},xform:jC})}else throw new i3("You must provide either an email or phone number and a password");let{data:f,error:g}=e;if(g||!f)return this._returnResult({data:{user:null,session:null},error:g});let h=f.session,i=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:i,session:h},error:null})}catch(a){if(iZ(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(a){try{let b;if("email"in a){let{email:c,password:d,options:e}=a;b=await jA(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:jD})}else if("phone"in a){let{phone:c,password:d,options:e}=a;b=await jA(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:jD})}else throw new i3("You must provide either an email or phone number and a password");let{data:c,error:d}=b;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){let a=new i2;return this._returnResult({data:{user:null,session:null},error:a})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:d})}catch(a){if(iZ(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(a){var b,c,d,e;return await this._handleProviderSignIn(a.provider,{redirectTo:null==(b=a.options)?void 0:b.redirectTo,scopes:null==(c=a.options)?void 0:c.scopes,queryParams:null==(d=a.options)?void 0:d.queryParams,skipBrowserRedirect:null==(e=a.options)?void 0:e.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){let{chain:b}=a;switch(b){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw Error(`@supabase/auth-js: Unsupported chain "${b}"`)}}async signInWithEthereum(a){var b,c,d,e,f,g,h,i,j,k,l,m;let n,o;if("message"in a)n=a.message,o=a.signature;else{let{chain:k,wallet:l,statement:p,options:q}=a;if("object"!=typeof l||!(null==q?void 0:q.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");let r=new URL(null!=(b=null==q?void 0:q.url)?b:window.location.href),s=await l.request({method:"eth_requestAccounts"}).then(a=>a).catch(()=>{throw Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!s||0===s.length)throw Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let t=jM(s[0]),u=null==(c=null==q?void 0:q.signInWithEthereum)?void 0:c.chainId;u||(u=parseInt(await l.request({method:"eth_chainId"}),16)),n=function(a){var b;let{chainId:c,domain:d,expirationTime:e,issuedAt:f=new Date,nonce:g,notBefore:h,requestId:i,resources:j,scheme:k,uri:l,version:m}=a;if(!Number.isInteger(c))throw Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${c}`);if(!d)throw Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(g&&g.length<8)throw Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${g}`);if(!l)throw Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==m)throw Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(null==(b=a.statement)?void 0:b.includes("\n"))throw Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`);let n=jM(a.address),o=k?`${k}://${d}`:d,p=a.statement?`${a.statement}
`:"",q=`${o} wants you to sign in with your Ethereum account:
${n}

${p}`,r=`URI: ${l}
Version: ${m}
Chain ID: ${c}${g?`
Nonce: ${g}`:""}
Issued At: ${f.toISOString()}`;if(e&&(r+=`
Expiration Time: ${e.toISOString()}`),h&&(r+=`
Not Before: ${h.toISOString()}`),i&&(r+=`
Request ID: ${i}`),j){let a="\nResources:";for(let b of j){if(!b||"string"!=typeof b)throw Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);a+=`
- ${b}`}r+=a}return`${q}
${r}`}({domain:r.host,address:t,statement:p,uri:r.href,version:"1",chainId:u,nonce:null==(d=null==q?void 0:q.signInWithEthereum)?void 0:d.nonce,issuedAt:null!=(f=null==(e=null==q?void 0:q.signInWithEthereum)?void 0:e.issuedAt)?f:new Date,expirationTime:null==(g=null==q?void 0:q.signInWithEthereum)?void 0:g.expirationTime,notBefore:null==(h=null==q?void 0:q.signInWithEthereum)?void 0:h.notBefore,requestId:null==(i=null==q?void 0:q.signInWithEthereum)?void 0:i.requestId,resources:null==(j=null==q?void 0:q.signInWithEthereum)?void 0:j.resources}),o=await l.request({method:"personal_sign",params:[(m=n,"0x"+Array.from(new TextEncoder().encode(m),a=>a.toString(16).padStart(2,"0")).join("")),t]})}try{let{data:b,error:c}=await jA(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:n,signature:o},(null==(k=a.options)?void 0:k.captchaToken)?{gotrue_meta_security:{captcha_token:null==(l=a.options)?void 0:l.captchaToken}}:null),xform:jC});if(c)throw c;if(!b||!b.session||!b.user){let a=new i2;return this._returnResult({data:{user:null,session:null},error:a})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:c})}catch(a){if(iZ(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSolana(a){var b,c,d,e,f,g,h,i,j,k,l,m;let n,o;if("message"in a)n=a.message,o=a.signature;else{let{chain:l,wallet:m,statement:p,options:q}=a;if("object"!=typeof m||!(null==q?void 0:q.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");let r=new URL(null!=(b=null==q?void 0:q.url)?b:window.location.href);if("signIn"in m&&m.signIn){let a,b=await m.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},null==q?void 0:q.signInWithSolana),{version:"1",domain:r.host,uri:r.href}),p?{statement:p}:null));if(Array.isArray(b)&&b[0]&&"object"==typeof b[0])a=b[0];else if(b&&"object"==typeof b&&"signedMessage"in b&&"signature"in b)a=b;else throw Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in a&&"signature"in a&&("string"==typeof a.signedMessage||a.signedMessage instanceof Uint8Array)&&a.signature instanceof Uint8Array)n="string"==typeof a.signedMessage?a.signedMessage:new TextDecoder().decode(a.signedMessage),o=a.signature;else throw Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in m)||"function"!=typeof m.signMessage||!("publicKey"in m)||"object"!=typeof m||!m.publicKey||!("toBase58"in m.publicKey)||"function"!=typeof m.publicKey.toBase58)throw Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");n=[`${r.host} wants you to sign in with your Solana account:`,m.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${r.href}`,`Issued At: ${null!=(d=null==(c=null==q?void 0:q.signInWithSolana)?void 0:c.issuedAt)?d:new Date().toISOString()}`,...(null==(e=null==q?void 0:q.signInWithSolana)?void 0:e.notBefore)?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...(null==(f=null==q?void 0:q.signInWithSolana)?void 0:f.expirationTime)?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...(null==(g=null==q?void 0:q.signInWithSolana)?void 0:g.chainId)?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...(null==(h=null==q?void 0:q.signInWithSolana)?void 0:h.nonce)?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...(null==(i=null==q?void 0:q.signInWithSolana)?void 0:i.requestId)?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...(null==(k=null==(j=null==q?void 0:q.signInWithSolana)?void 0:j.resources)?void 0:k.length)?["Resources",...q.signInWithSolana.resources.map(a=>`- ${a}`)]:[]].join("\n");let a=await m.signMessage(new TextEncoder().encode(n),"utf8");if(!a||!(a instanceof Uint8Array))throw Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");o=a}}try{let{data:b,error:c}=await jA(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:n,signature:jg(o)},(null==(l=a.options)?void 0:l.captchaToken)?{gotrue_meta_security:{captcha_token:null==(m=a.options)?void 0:m.captchaToken}}:null),xform:jC});if(c)throw c;if(!b||!b.session||!b.user){let a=new i2;return this._returnResult({data:{user:null,session:null},error:a})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:c})}catch(a){if(iZ(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _exchangeCodeForSession(a){let b=await jj(this.storage,`${this.storageKey}-code-verifier`),[c,d]=(null!=b?b:"").split("/");try{let{data:b,error:e}=await jA(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:c},xform:jC});if(await jk(this.storage,`${this.storageKey}-code-verifier`),e)throw e;if(!b||!b.session||!b.user){let a=new i2;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign(Object.assign({},b),{redirectType:null!=d?d:null}),error:e})}catch(a){if(iZ(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(a){try{let{options:b,provider:c,token:d,access_token:e,nonce:f}=a,{data:g,error:h}=await jA(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:d,access_token:e,nonce:f,gotrue_meta_security:{captcha_token:null==b?void 0:b.captchaToken}},xform:jC});if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!g||!g.session||!g.user){let a=new i2;return this._returnResult({data:{user:null,session:null},error:a})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:h})}catch(a){if(iZ(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(a){var b,c,d,e,f;try{if("email"in a){let{email:d,options:e}=a,f=null,g=null;"pkce"===this.flowType&&([f,g]=await jr(this.storage,this.storageKey));let{error:h}=await jA(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:null!=(b=null==e?void 0:e.data)?b:{},create_user:null==(c=null==e?void 0:e.shouldCreateUser)||c,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:null==e?void 0:e.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in a){let{phone:b,options:c}=a,{data:g,error:h}=await jA(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:b,data:null!=(d=null==c?void 0:c.data)?d:{},create_user:null==(e=null==c?void 0:c.shouldCreateUser)||e,gotrue_meta_security:{captcha_token:null==c?void 0:c.captchaToken},channel:null!=(f=null==c?void 0:c.channel)?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==g?void 0:g.message_id},error:h})}throw new i3("You must provide either an email or phone number.")}catch(a){if(iZ(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(a){var b,c;try{let d,e;"options"in a&&(d=null==(b=a.options)?void 0:b.redirectTo,e=null==(c=a.options)?void 0:c.captchaToken);let{data:f,error:g}=await jA(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:e}}),redirectTo:d,xform:jC});if(g)throw g;if(!f)throw Error("An error occurred on token verification.");let h=f.session,i=f.user;return(null==h?void 0:h.access_token)&&(await this._saveSession(h),await this._notifyAllSubscribers("recovery"==a.type?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:i,session:h},error:null})}catch(a){if(iZ(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(a){var b,c,d,e;try{let f=null,g=null;"pkce"===this.flowType&&([f,g]=await jr(this.storage,this.storageKey));let h=await jA(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:null!=(c=null==(b=a.options)?void 0:b.redirectTo)?c:void 0}),(null==(d=null==a?void 0:a.options)?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:g}),headers:this.headers,xform:jF});return null==(e=h.data)||e.url,this._returnResult(h)}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{let{data:{session:b},error:c}=a;if(c)throw c;if(!b)throw new i1;let{error:d}=await jA(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:b.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(a){if(iZ(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{let b=`${this.url}/resend`;if("email"in a){let{email:c,type:d,options:e}=a,{error:f}=await jA(this.fetch,"POST",b,{headers:this.headers,body:{email:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},redirectTo:null==e?void 0:e.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in a){let{phone:c,type:d,options:e}=a,{data:f,error:g}=await jA(this.fetch,"POST",b,{headers:this.headers,body:{phone:c,type:d,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==f?void 0:f.message_id},error:g})}throw new i3("You must provide either an email or phone number and a type")}catch(a){if(iZ(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(a,b){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){let a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await a,await b()))();return this.pendingInLock.push((async()=>{try{await c}catch(a){}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let a=b();for(this.pendingInLock.push((async()=>{try{await a}catch(a){}})()),await a;this.pendingInLock.length;){let a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{let b=await this.__loadSession();return await a(b)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let b=null,c=await jj(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",c),null!==c&&(this._isValidSession(c)?b=c:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!b)return{data:{session:null},error:null};let d=!!b.expires_at&&1e3*b.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${d?"":" not"} expired`,"expires_at",b.expires_at),!d){if(this.userStorage){let a=await jj(this.userStorage,this.storageKey+"-user");(null==a?void 0:a.user)?b.user=a.user:b.user=jv()}if(this.storage.isServer&&b.user&&!b.user.__isUserNotAvailableProxy){var a;let c={value:this.suppressGetSessionWarning};b.user=(a=b.user,new Proxy(a,{get:(a,b,d)=>{if("__isInsecureUserWarningProxy"===b)return!0;if("symbol"==typeof b){let c=b.toString();if("Symbol(Symbol.toPrimitive)"===c||"Symbol(Symbol.toStringTag)"===c||"Symbol(util.inspect.custom)"===c||"Symbol(nodejs.util.inspect.custom)"===c)return Reflect.get(a,b,d)}return c.value||"string"!=typeof b||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c.value=!0),Reflect.get(a,b,d)}})),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:b},error:null}}let{data:e,error:f}=await this._callRefreshToken(b.refresh_token);if(f)return this._returnResult({data:{session:null},error:f});return this._returnResult({data:{session:e},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){return a?await this._getUser(a):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(a){try{if(a)return await jA(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:jE});return await this._useSession(async a=>{var b,c,d;let{data:e,error:f}=a;if(f)throw f;return(null==(b=e.session)?void 0:b.access_token)||this.hasCustomAuthorizationHeader?await jA(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0,xform:jE}):{data:{user:null},error:new i1}})}catch(a){if(iZ(a))return iZ(a)&&"AuthSessionMissingError"===a.name&&(await this._removeSession(),await jk(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(a,b={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,b))}async _updateUser(a,b={}){try{return await this._useSession(async c=>{let{data:d,error:e}=c;if(e)throw e;if(!d.session)throw new i1;let f=d.session,g=null,h=null;"pkce"===this.flowType&&null!=a.email&&([g,h]=await jr(this.storage,this.storageKey));let{data:i,error:j}=await jA(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==b?void 0:b.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:g,code_challenge_method:h}),jwt:f.access_token,xform:jE});if(j)throw j;return f.user=i.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(a){if(iZ(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new i1;let b=Date.now()/1e3,c=b,d=!0,e=null,{payload:f}=jm(a.access_token);if(f.exp&&(d=(c=f.exp)<=b),d){let{data:b,error:c}=await this._callRefreshToken(a.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!b)return{data:{user:null,session:null},error:null};e=b}else{let{data:d,error:f}=await this._getUser(a.access_token);if(f)throw f;e={access_token:a.access_token,refresh_token:a.refresh_token,user:d.user,token_type:"bearer",expires_in:c-b,expires_at:c},await this._saveSession(e),await this._notifyAllSubscribers("SIGNED_IN",e)}return this._returnResult({data:{user:e.user,session:e},error:null})}catch(a){if(iZ(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async b=>{var c;if(!a){let{data:d,error:e}=b;if(e)throw e;a=null!=(c=d.session)?c:void 0}if(!(null==a?void 0:a.refresh_token))throw new i1;let{data:d,error:e}=await this._callRefreshToken(a.refresh_token);return e?this._returnResult({data:{user:null,session:null},error:e}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(iZ(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(a,b){try{throw new i4("No browser detected.")}catch(a){if(iZ(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(a){return!!(a.access_token||a.error_description)}async _isPKCECallback(a){let b=await jj(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&b)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return this._returnResult({error:e});let f=null==(c=d.session)?void 0:c.access_token;if(f){let{error:b}=await this.admin.signOut(f,a);if(b&&!(iZ(b)&&"AuthApiError"===b.name&&(404===b.status||401===b.status||403===b.status)))return this._returnResult({error:b})}return"others"!==a&&(await this._removeSession(),await jk(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){let b=Symbol("auth-callback"),c={id:b,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",b),this.stateChangeEmitters.delete(b)}};return this._debug("#onAuthStateChange()","registered callback with id",b),this.stateChangeEmitters.set(b,c),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(b)})})(),{data:{subscription:c}}}async _emitInitialSession(a){return await this._useSession(async b=>{var c,d;try{let{data:{session:d},error:e}=b;if(e)throw e;await (null==(c=this.stateChangeEmitters.get(a))?void 0:c.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",a,"session",d)}catch(b){await (null==(d=this.stateChangeEmitters.get(a))?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",b),console.error(b)}})}async resetPasswordForEmail(a,b={}){let c=null,d=null;"pkce"===this.flowType&&([c,d]=await jr(this.storage,this.storageKey,!0));try{return await jA(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:c,code_challenge_method:d,gotrue_meta_security:{captcha_token:b.captchaToken}},headers:this.headers,redirectTo:b.redirectTo})}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var a;try{let{data:b,error:c}=await this.getUser();if(c)throw c;return this._returnResult({data:{identities:null!=(a=b.user.identities)?a:[]},error:null})}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){try{let{data:b,error:c}=await this._useSession(async b=>{var c,d,e,f,g;let{data:h,error:i}=b;if(i)throw i;let j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:null==(c=a.options)?void 0:c.redirectTo,scopes:null==(d=a.options)?void 0:d.scopes,queryParams:null==(e=a.options)?void 0:e.queryParams,skipBrowserRedirect:!0});return await jA(this.fetch,"GET",j,{headers:this.headers,jwt:null!=(g=null==(f=h.session)?void 0:f.access_token)?g:void 0})});if(c)throw c;return this._returnResult({data:{provider:a.provider,url:null==b?void 0:b.url},error:null})}catch(b){if(iZ(b))return this._returnResult({data:{provider:a.provider,url:null},error:b});throw b}}async linkIdentityIdToken(a){return await this._useSession(async b=>{var c;try{let{error:d,data:{session:e}}=b;if(d)throw d;let{options:f,provider:g,token:h,access_token:i,nonce:j}=a,{data:k,error:l}=await jA(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!=(c=null==e?void 0:e.access_token)?c:void 0,body:{provider:g,id_token:h,access_token:i,nonce:j,link_identity:!0,gotrue_meta_security:{captcha_token:null==f?void 0:f.captchaToken}},xform:jC});if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!k||!k.session||!k.user)return this._returnResult({data:{user:null,session:null},error:new i2});return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),this._returnResult({data:k,error:l})}catch(a){if(iZ(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)throw f;return await jA(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:null!=(d=null==(c=e.session)?void 0:c.access_token)?d:void 0})})}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(a){let b=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(b,"begin");try{var c,d;let e=Date.now();return await (c=async c=>(c>0&&await jn(200*Math.pow(2,c-1)),this._debug(b,"refreshing attempt",c),await jA(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:jC})),d=(a,b)=>{let c=200*Math.pow(2,a);return b&&i6(b)&&Date.now()+c-e<3e4},new Promise((a,b)=>{(async()=>{for(let e=0;e<1/0;e++)try{let b=await c(e);if(!d(e,null,b))return void a(b)}catch(a){if(!d(e,a))return void b(a)}})()}))}catch(a){if(this._debug(b,"error",a),iZ(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(b,"end")}}_isValidSession(a){return"object"==typeof a&&null!==a&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,b){let c=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:b.redirectTo,scopes:b.scopes,queryParams:b.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",b,"url",c),{data:{provider:a,url:c},error:null}}async _recoverAndRefresh(){var a,b;let c="#_recoverAndRefresh()";this._debug(c,"begin");try{let d=await jj(this.storage,this.storageKey);if(d&&this.userStorage){let b=await jj(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!b&&(b={user:d.user},await ji(this.userStorage,this.storageKey+"-user",b)),d.user=null!=(a=null==b?void 0:b.user)?a:jv()}else if(d&&!d.user&&!d.user){let a=await jj(this.storage,this.storageKey+"-user");a&&(null==a?void 0:a.user)?(d.user=a.user,await jk(this.storage,this.storageKey+"-user"),await ji(this.storage,this.storageKey,d)):d.user=jv()}if(this._debug(c,"session from storage",d),!this._isValidSession(d)){this._debug(c,"session is not valid"),null!==d&&await this._removeSession();return}let e=(null!=(b=d.expires_at)?b:1/0)*1e3-Date.now()<9e4;if(this._debug(c,`session has${e?"":" not"} expired with margin of 90000s`),e){if(this.autoRefreshToken&&d.refresh_token){let{error:a}=await this._callRefreshToken(d.refresh_token);a&&(console.error(a),i6(a)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(d.user&&!0===d.user.__isUserNotAvailableProxy)try{let{data:a,error:b}=await this._getUser(d.access_token);!b&&(null==a?void 0:a.user)?(d.user=a.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(c,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(a){this._debug(c,"error",a),console.error(a);return}finally{this._debug(c,"end")}}async _callRefreshToken(a){var b,c;if(!a)throw new i1;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let d=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new jl;let{data:b,error:c}=await this._refreshAccessToken(a);if(c)throw c;if(!b.session)throw new i1;await this._saveSession(b.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",b.session);let d={data:b.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(d,"error",a),iZ(a)){let c={data:null,error:a};return i6(a)||await this._removeSession(),null==(b=this.refreshingDeferred)||b.resolve(c),c}throw null==(c=this.refreshingDeferred)||c.reject(a),a}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(a,b,c=!0){let d=`#_notifyAllSubscribers(${a})`;this._debug(d,"begin",b,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:a,session:b});let d=[],e=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(a,b)}catch(a){d.push(a)}});if(await Promise.all(e),d.length>0){for(let a=0;a<d.length;a+=1)console.error(d[a]);throw d[0]}}finally{this._debug(d,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0;let b=Object.assign({},a),c=b.user&&!0===b.user.__isUserNotAvailableProxy;if(this.userStorage){!c&&b.user&&await ji(this.userStorage,this.storageKey+"-user",{user:b.user});let a=Object.assign({},b);delete a.user;let d=jw(a);await ji(this.storage,this.storageKey,d)}else{let a=jw(b);await ji(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await jk(this.storage,this.storageKey),await jk(this.storage,this.storageKey+"-code-verifier"),await jk(this.storage,this.storageKey+"-user"),this.userStorage&&await jk(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()"),this.visibilityChangedCallback,this.visibilityChangedCallback=null}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let a=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=a,a&&"object"==typeof a&&"function"==typeof a.unref?a.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let a=Date.now();try{return await this._useSession(async b=>{let{data:{session:c}}=b;if(!c||!c.refresh_token||!c.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let d=Math.floor((1e3*c.expires_at-a)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),d<=3&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof jL)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){return this._debug("#_handleVisibilityChange()"),this.autoRefreshToken&&this.startAutoRefresh(),!1}async _onVisibilityChanged(a){let b=`#_onVisibilityChanged(${a})`;this._debug(b,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"!==document.visibilityState?this._debug(b,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,b,c){let d=[`provider=${encodeURIComponent(b)}`];if((null==c?void 0:c.redirectTo)&&d.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),(null==c?void 0:c.scopes)&&d.push(`scopes=${encodeURIComponent(c.scopes)}`),"pkce"===this.flowType){let[a,b]=await jr(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(b)}`});d.push(c.toString())}if(null==c?void 0:c.queryParams){let a=new URLSearchParams(c.queryParams);d.push(a.toString())}return(null==c?void 0:c.skipBrowserRedirect)&&d.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${a}?${d.join("&")}`}async _unenroll(a){try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;return e?this._returnResult({data:null,error:e}):await jA(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token})})}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(a){try{return await this._useSession(async b=>{var c,d;let{data:e,error:f}=b;if(f)return this._returnResult({data:null,error:f});let g=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},"phone"===a.factorType?{phone:a.phone}:"totp"===a.factorType?{issuer:a.issuer}:{}),{data:h,error:i}=await jA(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:null==(c=null==e?void 0:e.session)?void 0:c.access_token});return i?this._returnResult({data:null,error:i}):("totp"===a.factorType&&"totp"===h.type&&(null==(d=null==h?void 0:h.totp)?void 0:d.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async b=>{var c,d,e;let{data:f,error:g}=b;if(g)return this._returnResult({data:null,error:g});let h=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:"create"===a.webauthn.type?(d=a.webauthn.credential_response,"toJSON"in d&&"function"==typeof d.toJSON?d.toJSON():{id:d.id,rawId:d.id,response:{attestationObject:jg(new Uint8Array(d.response.attestationObject)),clientDataJSON:jg(new Uint8Array(d.response.clientDataJSON))},type:"public-key",clientExtensionResults:d.getClientExtensionResults(),authenticatorAttachment:null!=(e=d.authenticatorAttachment)?e:void 0}):function(a){var b;if("toJSON"in a&&"function"==typeof a.toJSON)return a.toJSON();let c=a.getClientExtensionResults(),d=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:jg(new Uint8Array(d.authenticatorData)),clientDataJSON:jg(new Uint8Array(d.clientDataJSON)),signature:jg(new Uint8Array(d.signature)),userHandle:d.userHandle?jg(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:c,authenticatorAttachment:null!=(b=a.authenticatorAttachment)?b:void 0}}(a.webauthn.credential_response)})}:{code:a.code}),{data:i,error:j}=await jA(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:h,headers:this.headers,jwt:null==(c=null==f?void 0:f.session)?void 0:c.access_token});return j?this._returnResult({data:null,error:j}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),this._returnResult({data:i,error:j}))})}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async b=>{var c;let{data:d,error:e}=b;if(e)return this._returnResult({data:null,error:e});let f=await jA(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:null==(c=null==d?void 0:d.session)?void 0:c.access_token});if(f.error)return f;let{data:g}=f;if("webauthn"!==g.type)return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:function(a){if(!a)throw Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(a);let{challenge:b,user:c,excludeCredentials:d}=a,e=(0,hz.__rest)(a,["challenge","user","excludeCredentials"]),f=jf(b).buffer,g=Object.assign(Object.assign({},c),{id:jf(c.id).buffer}),h=Object.assign(Object.assign({},e),{challenge:f,user:g});if(d&&d.length>0){h.excludeCredentials=Array(d.length);for(let a=0;a<d.length;a++){let b=d[a];h.excludeCredentials[a]=Object.assign(Object.assign({},b),{id:jf(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return h}(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:function(a){if(!a)throw Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(a);let{challenge:b,allowCredentials:c}=a,d=(0,hz.__rest)(a,["challenge","allowCredentials"]),e=jf(b).buffer,f=Object.assign(Object.assign({},d),{challenge:e});if(c&&c.length>0){f.allowCredentials=Array(c.length);for(let a=0;a<c.length;a++){let b=c[a];f.allowCredentials[a]=Object.assign(Object.assign({},b),{id:jf(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return f}(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(a){let{data:b,error:c}=await this._challenge({factorId:a.factorId});return c?this._returnResult({data:null,error:c}):await this._verify({factorId:a.factorId,challengeId:b.id,code:a.code})}async _listFactors(){var a;let{data:{user:b},error:c}=await this.getUser();if(c)return{data:null,error:c};let d={all:[],phone:[],totp:[],webauthn:[]};for(let c of null!=(a=null==b?void 0:b.factors)?a:[])d.all.push(c),"verified"===c.status&&d[c.factor_type].push(c);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var a,b;let{data:{session:c},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:e}=jm(c.access_token),f=null;e.aal&&(f=e.aal);let g=f;return(null!=(b=null==(a=c.user.factors)?void 0:a.filter(a=>"verified"===a.status))?b:[]).length>0&&(g="aal2"),{data:{currentLevel:f,nextLevel:g,currentAuthenticationMethods:e.amr||[]},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async b=>{let{data:{session:c},error:d}=b;return d?this._returnResult({data:null,error:d}):c?await jA(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:c.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new i1})})}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(a,b){try{return await this._useSession(async b=>{let{data:{session:c},error:d}=b;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new i1});let e=await jA(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return e.data&&e.data.redirect_url,e})}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(a,b){try{return await this._useSession(async b=>{let{data:{session:c},error:d}=b;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new i1});let e=await jA(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return e.data&&e.data.redirect_url,e})}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async a=>{let{data:{session:b},error:c}=a;return c?this._returnResult({data:null,error:c}):b?await jA(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:b.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new i1})})}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}}async _revokeOAuthGrant(a){try{return await this._useSession(async b=>{let{data:{session:c},error:d}=b;return d?this._returnResult({data:null,error:d}):c?(await jA(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:c.access_token,query:{client_id:a.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new i1})})}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(a,b={keys:[]}){let c=b.keys.find(b=>b.kid===a);if(c)return c;let d=Date.now();if((c=this.jwks.keys.find(b=>b.kid===a))&&this.jwks_cached_at+6e5>d)return c;let{data:e,error:f}=await jA(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return e.keys&&0!==e.keys.length&&(this.jwks=e,this.jwks_cached_at=d,c=e.keys.find(b=>b.kid===a))?c:null}async getClaims(a,b={}){try{var c;let d,e=a;if(!e){let{data:a,error:b}=await this.getSession();if(b||!a.session)return this._returnResult({data:null,error:b});e=a.session.access_token}let{header:f,payload:g,signature:h,raw:{header:i,payload:j}}=jm(e);(null==b?void 0:b.allowExpired)||function(a){if(!a)throw Error("Missing exp claim");if(a<=Math.floor(Date.now()/1e3))throw Error("JWT has expired")}(g.exp);let k=!f.alg||f.alg.startsWith("HS")||!f.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(f.kid,(null==b?void 0:b.keys)?{keys:b.keys}:null==b?void 0:b.jwks);if(!k){let{error:a}=await this.getUser(e);if(a)throw a;return{data:{claims:g,header:f,signature:h},error:null}}let l=function(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw Error("Invalid alg claim")}}(f.alg),m=await crypto.subtle.importKey("jwk",k,l,!0,["verify"]);if(!await crypto.subtle.verify(l,m,h,(c=`${i}.${j}`,d=[],!function(a,b){for(let c=0;c<a.length;c+=1){let d=a.charCodeAt(c);if(d>55295&&d<=56319){let b=(d-55296)*1024&65535;d=(a.charCodeAt(c+1)-56320&65535|b)+65536,c+=1}!function(a,b){if(a<=127)return b(a);if(a<=2047){b(192|a>>6),b(128|63&a);return}if(a<=65535){b(224|a>>12),b(128|a>>6&63),b(128|63&a);return}if(a<=1114111){b(240|a>>18),b(128|a>>12&63),b(128|a>>6&63),b(128|63&a);return}throw Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}(d,b)}}(c,a=>d.push(a)),new Uint8Array(d))))throw new i8("Invalid JWT signature");return{data:{claims:g,header:f,signature:h},error:null}}catch(a){if(iZ(a))return this._returnResult({data:null,error:a});throw a}}}j$.nextInstanceID={};let j_=j$;class j0 extends j_{constructor(a){super(a)}}class j1{constructor(a,b,c){var d,e,f;this.supabaseUrl=a,this.supabaseKey=b;const g=function(a){let b=null==a?void 0:a.trim();if(!b)throw Error("supabaseUrl is required.");if(!b.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(b.endsWith("/")?b:b+"/")}catch(a){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(a);if(!b)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const h=`sb-${g.hostname.split(".")[0]}-auth-token`,i=function(a,b){var c,d;let{db:e,auth:f,realtime:g,global:h}=a,{db:i,auth:j,realtime:k,global:l}=b,m={db:Object.assign(Object.assign({},i),e),auth:Object.assign(Object.assign({},j),f),realtime:Object.assign(Object.assign({},k),g),storage:{},global:Object.assign(Object.assign(Object.assign({},l),h),{headers:Object.assign(Object.assign({},null!=(c=null==l?void 0:l.headers)?c:{}),null!=(d=null==h?void 0:h.headers)?d:{})}),accessToken:async()=>""};return a.accessToken?m.accessToken=a.accessToken:delete m.accessToken,m}(null!=c?c:{},{db:iQ,realtime:iS,auth:Object.assign(Object.assign({},iR),{storageKey:h}),global:iP});this.storageKey=null!=(d=i.auth.storageKey)?d:"",this.headers=null!=(e=i.global.headers)?e:{},i.accessToken?(this.accessToken=i.accessToken,this.auth=new Proxy({},{get:(a,b)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(f=i.auth)?f:{},this.headers,i.global.fetch),this.fetch=((a,b,c)=>{let d=c?(...a)=>c(...a):(...a)=>fetch(...a),e=Headers;return async(c,f)=>{var g;let h=null!=(g=await b())?g:a,i=new e(null==f?void 0:f.headers);return i.has("apikey")||i.set("apikey",a),i.has("Authorization")||i.set("Authorization",`Bearer ${h}`),d(c,Object.assign(Object.assign({},f),{headers:i}))}})(b,this._getAccessToken.bind(this),i.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},i.realtime)),this.accessToken&&this.accessToken().then(a=>this.realtime.setAuth(a)).catch(a=>console.warn("Failed to set initial Realtime auth token:",a)),this.rest=new hG(new URL("rest/v1",g).href,{headers:this.headers,schema:i.db.schema,fetch:this.fetch}),this.storage=new iN(this.storageUrl.href,this.headers,this.fetch,null==c?void 0:c.storage),i.accessToken||this._listenForAuthEvents()}get functions(){return new hE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,b={},c={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,b,c)}channel(a,b={config:{}}){return this.realtime.channel(a,b)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a,b;if(this.accessToken)return await this.accessToken();let{data:c}=await this.auth.getSession();return null!=(b=null==(a=c.session)?void 0:a.access_token)?b:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,userStorage:e,storageKey:f,flowType:g,lock:h,debug:i,throwOnError:j},k,l){let m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new j0({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),k),storageKey:f,autoRefreshToken:a,persistSession:b,detectSessionInUrl:c,storage:d,userStorage:e,flowType:g,lock:h,debug:i,throwOnError:j,fetch:l,hasCustomAuthorizationHeader:Object.keys(this.headers).some(a=>"authorization"===a.toLowerCase())})}_initRealtimeClient(a){return new h4(this.realtimeUrl.href,Object.assign(Object.assign({},a),{params:Object.assign({apikey:this.supabaseKey},null==a?void 0:a.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,b)=>{this._handleTokenChanged(a,"CLIENT",null==b?void 0:b.access_token)})}_handleTokenChanged(a,b,c){("TOKEN_REFRESHED"===a||"SIGNED_IN"===a)&&this.changedAccessToken!==c?(this.changedAccessToken=c,this.realtime.setAuth(c)):"SIGNED_OUT"===a&&(this.realtime.setAuth(),"STORAGE"==b&&this.auth.signOut(),this.changedAccessToken=void 0)}}(function(){if("undefined"==typeof process)return!1;let a=process.version;if(null==a)return!1;let b=a.match(/^v(\d+)\./);return!!b&&18>=parseInt(b[1],10)})()&&console.warn(`  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217`);var j2=a.i(30695);j2.parse,j2.serialize;let j3={path:"/",sameSite:"lax",httpOnly:!1,maxAge:3456e4},j4=/^(.*)[.](0|[1-9][0-9]*)$/;function j5(a,b){if(a===b)return!0;let c=a.match(j4);return!!c&&c[1]===b}function j6(a,b,c){let d=c??3180,e=encodeURIComponent(b);if(e.length<=d)return[{name:a,value:b}];let f=[];for(;e.length>0;){let a=e.slice(0,d),b=a.lastIndexOf("%");b>d-3&&(a=a.slice(0,b));let c="";for(;a.length>0;)try{c=decodeURIComponent(a);break}catch(b){if(b instanceof URIError&&"%"===a.at(-3)&&a.length>3)a=a.slice(0,a.length-3);else throw b}f.push(c),e=e.slice(a.length)}return f.map((b,c)=>({name:`${a}.${c}`,value:b}))}async function j7(a,b){let c=await b(a);if(c)return c;let d=[];for(let c=0;;c++){let e=`${a}.${c}`,f=await b(e);if(!f)break;d.push(f)}return d.length>0?d.join(""):null}let j8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),j9=" 	\n\r=".split(""),ka=(()=>{let a=Array(128);for(let b=0;b<a.length;b+=1)a[b]=-1;for(let b=0;b<j9.length;b+=1)a[j9[b].charCodeAt(0)]=-2;for(let b=0;b<j8.length;b+=1)a[j8[b].charCodeAt(0)]=b;return a})();function kb(a){let b=[],c=0,d=0;if(function(a,b){for(let c=0;c<a.length;c+=1){let d=a.charCodeAt(c);if(d>55295&&d<=56319){let b=(d-55296)*1024&65535;d=(a.charCodeAt(c+1)-56320&65535|b)+65536,c+=1}!function(a,b){if(a<=127)return b(a);if(a<=2047){b(192|a>>6),b(128|63&a);return}if(a<=65535){b(224|a>>12),b(128|a>>6&63),b(128|63&a);return}if(a<=1114111){b(240|a>>18),b(128|a>>12&63),b(128|a>>6&63),b(128|63&a);return}throw Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}(d,b)}}(a,a=>{for(c=c<<8|a,d+=8;d>=6;){let a=c>>d-6&63;b.push(j8[a]),d-=6}}),d>0)for(c<<=6-d,d=6;d>=6;){let a=c>>d-6&63;b.push(j8[a]),d-=6}return b.join("")}function kc(a){let b=[],c=a=>{b.push(String.fromCodePoint(a))},d={utf8seq:0,codepoint:0},e=0,f=0;for(let b=0;b<a.length;b+=1){let g=ka[a.charCodeAt(b)];if(g>-1)for(e=e<<6|g,f+=6;f>=8;)(function(a,b,c){if(0===b.utf8seq){if(a<=127)return c(a);for(let c=1;c<6;c+=1)if((a>>7-c&1)==0){b.utf8seq=c;break}if(2===b.utf8seq)b.codepoint=31&a;else if(3===b.utf8seq)b.codepoint=15&a;else if(4===b.utf8seq)b.codepoint=7&a;else throw Error("Invalid UTF-8 sequence");b.utf8seq-=1}else if(b.utf8seq>0){if(a<=127)throw Error("Invalid UTF-8 sequence");b.codepoint=b.codepoint<<6|63&a,b.utf8seq-=1,0===b.utf8seq&&c(b.codepoint)}})(e>>f-8&255,d,c),f-=8;else if(-2===g)continue;else throw Error(`Invalid Base64-URL character "${a.at(b)}" at position ${b}`)}return b.join("")}let kd="base64-";async function ke({getAll:a,setAll:b,setItems:c,removedItems:d},e){let f=e.cookieEncoding,g=e.cookieOptions??null,h=await a([...c?Object.keys(c):[],...d?Object.keys(d):[]]),i=h?.map(({name:a})=>a)||[],j=Object.keys(d).flatMap(a=>i.filter(b=>j5(b,a))),k=Object.keys(c).flatMap(a=>{let b=new Set(i.filter(b=>j5(b,a))),d=c[a];"base64url"===f&&(d=kd+kb(d));let e=j6(a,d);return e.forEach(a=>{b.delete(a.name)}),j.push(...b),e}),l={...j3,...g,maxAge:0},m={...j3,...g,maxAge:j3.maxAge};delete l.name,delete m.name,await b([...j.map(a=>({name:a,value:"",options:l})),...k.map(({name:a,value:b})=>({name:a,value:b,options:m}))])}if(a.i(59439),"undefined"!=typeof process&&process.env?.npm_package_name){let a=process.env.npm_package_name;["@supabase/auth-helpers-nextjs","@supabase/auth-helpers-react","@supabase/auth-helpers-remix","@supabase/auth-helpers-sveltekit"].includes(a)&&console.warn(`

   IMPORTANT: Package Consolidation Notice                                
                                                                            
 The ${a.padEnd(35)} package name is deprecated.  
                                                                            
 You are now using @supabase/ssr - a unified solution for all frameworks.  
                                                                            
 The auth-helpers packages have been consolidated into @supabase/ssr       
 to provide better maintenance and consistent APIs across frameworks.      
                                                                            
 Please update your package.json to use @supabase/ssr directly:            
   npm uninstall ${a.padEnd(42)} 
   npm install @supabase/ssr                                               
                                                                            
 For more information, visit:                                              
 https://supabase.com/docs/guides/auth/server-side                         

    `)}async function kf(a){if(!a.userProfile)return{success:!1,error:"No user profile found"};try{let b=function(a,b,c){0;if(!a||!b)throw Error(`@supabase/ssr: Your project's URL and API key are required to create a Supabase client!

Check your Supabase project's API settings to find these values

https://supabase.com/dashboard/project/_/settings/api`);let{storage:d}=function(a,b){let c,d,e=a.cookies??null,f=a.cookieEncoding,g={},h={};if(e)if("get"in e){let a=async a=>{let b=a.flatMap(a=>[a,...Array.from({length:5}).map((b,c)=>`${a}.${c}`)]),c=[];for(let a=0;a<b.length;a+=1){let d=await e.get(b[a]);(d||"string"==typeof d)&&c.push({name:b[a],value:d})}return c};if(c=async b=>await a(b),"set"in e&&"remove"in e)d=async a=>{for(let b=0;b<a.length;b+=1){let{name:c,value:d,options:f}=a[b];d?await e.set(c,d,f):await e.remove(c,f)}};else if(b)d=async()=>{console.warn("@supabase/ssr: createServerClient was configured without set and remove cookie methods, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness. Consider switching to the getAll and setAll cookie methods instead of get, set and remove which are deprecated and can be difficult to use correctly.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring a getAll and setAll cookie method (deprecated: alternatively both get, set and remove can be used)")}else if("getAll"in e)if(c=async()=>await e.getAll(),"setAll"in e)d=e.setAll;else if(b)d=async()=>{console.warn("@supabase/ssr: createServerClient was configured without the setAll cookie method, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring both getAll and setAll cookie methods (deprecated: alternatively both get, set and remove can be used)");else throw Error(`@supabase/ssr: ${b?"createServerClient":"createBrowserClient"} requires configuring getAll and setAll cookie methods (deprecated: alternatively use get, set and remove).`);else if(b||1)if(b)throw Error("@supabase/ssr: createServerClient must be initialized with cookie options that specify getAll and setAll functions (deprecated, not recommended: alternatively use get, set and remove)");else c=()=>[],d=()=>{throw Error("@supabase/ssr: createBrowserClient in non-browser runtimes (including Next.js pre-rendering mode) was not initialized cookie options that specify getAll and setAll functions (deprecated: alternatively use get, set and remove), but they were needed")};else c=()=>{let a;return a=(0,j2.parse)(document.cookie),Object.keys(a).map(b=>({name:b,value:a[b]??""}))},d=a=>{a.forEach(({name:a,value:b,options:c})=>{document.cookie=(0,j2.serialize)(a,b,c)})};return b?{getAll:c,setAll:d,setItems:g,removedItems:h,storage:{isServer:!0,getItem:async a=>{if("string"==typeof g[a])return g[a];if(h[a])return null;let b=await c([a]),d=await j7(a,async a=>{let c=b?.find(({name:b})=>b===a)||null;return c?c.value:null});if(!d)return null;let e=d;return"string"==typeof d&&d.startsWith(kd)&&(e=kc(d.substring(kd.length))),e},setItem:async(b,e)=>{b.endsWith("-code-verifier")&&await ke({getAll:c,setAll:d,setItems:{[b]:e},removedItems:{}},{cookieOptions:a?.cookieOptions??null,cookieEncoding:f}),g[b]=e,delete h[b]},removeItem:async a=>{delete g[a],h[a]=!0}}}:{getAll:c,setAll:d,setItems:g,removedItems:h,storage:{isServer:!1,getItem:async a=>{let b=await c([a]),d=await j7(a,async a=>{let c=b?.find(({name:b})=>b===a)||null;return c?c.value:null});if(!d)return null;let e=d;return d.startsWith(kd)&&(e=kc(d.substring(kd.length))),e},setItem:async(b,e)=>{let g=await c([b]),h=new Set((g?.map(({name:a})=>a)||[]).filter(a=>j5(a,b))),i=e;"base64url"===f&&(i=kd+kb(e));let j=j6(b,i);j.forEach(({name:a})=>{h.delete(a)});let k={...j3,...a?.cookieOptions,maxAge:0},l={...j3,...a?.cookieOptions,maxAge:j3.maxAge};delete k.name,delete l.name;let m=[...[...h].map(a=>({name:a,value:"",options:k})),...j.map(({name:a,value:b})=>({name:a,value:b,options:l}))];m.length>0&&await d(m)},removeItem:async b=>{let e=await c([b]),f=(e?.map(({name:a})=>a)||[]).filter(a=>j5(a,b)),g={...j3,...a?.cookieOptions,maxAge:0};delete g.name,f.length>0&&await d(f.map(a=>({name:a,value:"",options:g})))}}}}({...void 0,cookieEncoding:(void 0)??"base64url"},!1),e=new j1(a,b,{...void 0,global:{...void 0,headers:{...void 0,"X-Client-Info":"supabase-ssr/0.8.0 createBrowserClient"}},auth:{...void 0,flowType:"pkce",autoRefreshToken:!1,detectSessionInUrl:!1,persistSession:!0,storage:d}});return e}("https://xrlvfnqnbuwckddrspav.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhybHZmbnFuYnV3Y2tkZHJzcGF2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2ODg3NjYsImV4cCI6MjA4MDI2NDc2Nn0.4V2ZfPLbUaAzkhlzYaVevqo7vsh1dGu8VcTrsfRuxEI"),c=a.answeredQuestions.filter(a=>a.isCorrect).map(a=>a.questionId),d={email:a.userProfile.email,first_name:a.userProfile.firstName,last_name:a.userProfile.lastName,job:a.userProfile.job,total_score:a.totalScore,total_questions:a.totalQuestions,level_1_score:a.levelProgress[1]?.score||0,level_2_score:a.levelProgress[2]?.score||0,level_3_score:a.levelProgress[3]?.score||0,answered_questions:c,unlocked_biases:a.unlockedBiases,all_levels_completed:a.allLevelsCompleted},{error:e}=await b.from("user_scores").upsert(d,{onConflict:"email",ignoreDuplicates:!1});if(e)return console.error("Supabase save error:",e),{success:!1,error:e.message};return{success:!0}}catch(a){return console.error("Error saving user score:",a),{success:!1,error:String(a)}}}function kg(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){if(a?.(d),!1===c||!d.defaultPrevented)return b?.(d)}}var kh=globalThis?.document?T.useLayoutEffect:()=>{},ki=T["useId".toString()]||(()=>void 0),kj=0;function kk(a){let[b,c]=T.useState(ki());return kh(()=>{a||c(a=>a??String(kj++))},[a]),a||(b?`radix-${b}`:"")}function kl(a){let b=T.useRef(a);return T.useEffect(()=>{b.current=a}),T.useMemo(()=>(...a)=>b.current?.(...a),[])}var km="dismissableLayer.update",kn=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ko=T.forwardRef((a,b)=>{let{disableOutsidePointerEvents:c=!1,onEscapeKeyDown:d,onPointerDownOutside:e,onFocusOutside:f,onInteractOutside:g,onDismiss:h,...i}=a,j=T.useContext(kn),[k,l]=T.useState(null),m=k?.ownerDocument??globalThis?.document,[,n]=T.useState({}),o=ge(b,a=>l(a)),p=Array.from(j.layers),[q]=[...j.layersWithOutsidePointerEventsDisabled].slice(-1),r=p.indexOf(q),s=k?p.indexOf(k):-1,t=j.layersWithOutsidePointerEventsDisabled.size>0,u=s>=r,v=function(a,b=globalThis?.document){let c=kl(a),d=T.useRef(!1),e=T.useRef(()=>{});return T.useEffect(()=>{let a=a=>{if(a.target&&!d.current){let d=function(){kq("dismissableLayer.pointerDownOutside",c,f,{discrete:!0})},f={originalEvent:a};"touch"===a.pointerType?(b.removeEventListener("click",e.current),e.current=d,b.addEventListener("click",e.current,{once:!0})):d()}else b.removeEventListener("click",e.current);d.current=!1},f=window.setTimeout(()=>{b.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(f),b.removeEventListener("pointerdown",a),b.removeEventListener("click",e.current)}},[b,c]),{onPointerDownCapture:()=>d.current=!0}}(a=>{let b=a.target,c=[...j.branches].some(a=>a.contains(b));u&&!c&&(e?.(a),g?.(a),a.defaultPrevented||h?.())},m),w=function(a,b=globalThis?.document){let c=kl(a),d=T.useRef(!1);return T.useEffect(()=>{let a=a=>{a.target&&!d.current&&kq("dismissableLayer.focusOutside",c,{originalEvent:a},{discrete:!1})};return b.addEventListener("focusin",a),()=>b.removeEventListener("focusin",a)},[b,c]),{onFocusCapture:()=>d.current=!0,onBlurCapture:()=>d.current=!1}}(a=>{let b=a.target;![...j.branches].some(a=>a.contains(b))&&(f?.(a),g?.(a),a.defaultPrevented||h?.())},m);return!function(a,b=globalThis?.document){let c=kl(a);T.useEffect(()=>{let a=a=>{"Escape"===a.key&&c(a)};return b.addEventListener("keydown",a,{capture:!0}),()=>b.removeEventListener("keydown",a,{capture:!0})},[c,b])}(a=>{s===j.layers.size-1&&(d?.(a),!a.defaultPrevented&&h&&(a.preventDefault(),h()))},m),T.useEffect(()=>{if(k)return c&&(0===j.layersWithOutsidePointerEventsDisabled.size&&(Q=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),j.layersWithOutsidePointerEventsDisabled.add(k)),j.layers.add(k),kp(),()=>{c&&1===j.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=Q)}},[k,m,c,j]),T.useEffect(()=>()=>{k&&(j.layers.delete(k),j.layersWithOutsidePointerEventsDisabled.delete(k),kp())},[k,j]),T.useEffect(()=>{let a=()=>n({});return document.addEventListener(km,a),()=>document.removeEventListener(km,a)},[]),(0,S.jsx)(g3.div,{...i,ref:o,style:{pointerEvents:t?u?"auto":"none":void 0,...a.style},onFocusCapture:kg(a.onFocusCapture,w.onFocusCapture),onBlurCapture:kg(a.onBlurCapture,w.onBlurCapture),onPointerDownCapture:kg(a.onPointerDownCapture,v.onPointerDownCapture)})});function kp(){let a=new CustomEvent(km);document.dispatchEvent(a)}function kq(a,b,c,{discrete:d}){let e=c.originalEvent.target,f=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:c});if(b&&e.addEventListener(a,b,{once:!0}),d)e&&g2.flushSync(()=>e.dispatchEvent(f));else e.dispatchEvent(f)}ko.displayName="DismissableLayer",T.forwardRef((a,b)=>{let c=T.useContext(kn),d=T.useRef(null),e=ge(b,d);return T.useEffect(()=>{let a=d.current;if(a)return c.branches.add(a),()=>{c.branches.delete(a)}},[c.branches]),(0,S.jsx)(g3.div,{...a,ref:e})}).displayName="DismissableLayerBranch";var kr="focusScope.autoFocusOnMount",ks="focusScope.autoFocusOnUnmount",kt={bubbles:!1,cancelable:!0},ku=T.forwardRef((a,b)=>{let{loop:c=!1,trapped:d=!1,onMountAutoFocus:e,onUnmountAutoFocus:f,...g}=a,[h,i]=T.useState(null),j=kl(e),k=kl(f),l=T.useRef(null),m=ge(b,a=>i(a)),n=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(d){let a=function(a){if(n.paused||!h)return;let b=a.target;h.contains(b)?l.current=b:kx(l.current,{select:!0})},b=function(a){if(n.paused||!h)return;let b=a.relatedTarget;null!==b&&(h.contains(b)||kx(l.current,{select:!0}))};document.addEventListener("focusin",a),document.addEventListener("focusout",b);let c=new MutationObserver(function(a){if(document.activeElement===document.body)for(let b of a)b.removedNodes.length>0&&kx(h)});return h&&c.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",a),document.removeEventListener("focusout",b),c.disconnect()}}},[d,h,n.paused]),T.useEffect(()=>{if(h){ky.add(n);let a=document.activeElement;if(!h.contains(a)){let b=new CustomEvent(kr,kt);h.addEventListener(kr,j),h.dispatchEvent(b),b.defaultPrevented||(function(a,{select:b=!1}={}){let c=document.activeElement;for(let d of a)if(kx(d,{select:b}),document.activeElement!==c)return}(kv(h).filter(a=>"A"!==a.tagName),{select:!0}),document.activeElement===a&&kx(h))}return()=>{h.removeEventListener(kr,j),setTimeout(()=>{let b=new CustomEvent(ks,kt);h.addEventListener(ks,k),h.dispatchEvent(b),b.defaultPrevented||kx(a??document.body,{select:!0}),h.removeEventListener(ks,k),ky.remove(n)},0)}}},[h,j,k,n]);let o=T.useCallback(a=>{if(!c&&!d||n.paused)return;let b="Tab"===a.key&&!a.altKey&&!a.ctrlKey&&!a.metaKey,e=document.activeElement;if(b&&e){var f;let b,d=a.currentTarget,[g,h]=[kw(b=kv(f=d),f),kw(b.reverse(),f)];g&&h?a.shiftKey||e!==h?a.shiftKey&&e===g&&(a.preventDefault(),c&&kx(h,{select:!0})):(a.preventDefault(),c&&kx(g,{select:!0})):e===d&&a.preventDefault()}},[c,d,n.paused]);return(0,S.jsx)(g3.div,{tabIndex:-1,...g,ref:m,onKeyDown:o})});function kv(a){let b=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{let b="INPUT"===a.tagName&&"hidden"===a.type;return a.disabled||a.hidden||b?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)b.push(c.currentNode);return b}function kw(a,b){for(let c of a)if(!function(a,{upTo:b}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===b||a!==b);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}(c,{upTo:b}))return c}function kx(a,{select:b=!1}={}){if(a&&a.focus){var c;let d=document.activeElement;a.focus({preventScroll:!0}),a!==d&&(c=a)instanceof HTMLInputElement&&"select"in c&&b&&a.select()}}ku.displayName="FocusScope";var ky=(j=[],{add(a){let b=j[0];a!==b&&b?.pause(),(j=kz(j,a)).unshift(a)},remove(a){j=kz(j,a),j[0]?.resume()}});function kz(a,b){let c=[...a],d=c.indexOf(b);return -1!==d&&c.splice(d,1),c}var kA=T.forwardRef((a,b)=>{let{container:c,...d}=a,[e,f]=T.useState(!1);kh(()=>f(!0),[]);let g=c||e&&globalThis?.document?.body;return g?g2.default.createPortal((0,S.jsx)(g3.div,{...d,ref:b}),g):null});kA.displayName="Portal";var kB=a=>{var b;let c,d,{present:e,children:f}=a,g=function(a){var b,c;let[d,e]=T.useState(),f=T.useRef({}),g=T.useRef(a),h=T.useRef("none"),[i,j]=(b=a?"mounted":"unmounted",c={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},T.useReducer((a,b)=>c[a][b]??a,b));return T.useEffect(()=>{let a=kC(f.current);h.current="mounted"===i?a:"none"},[i]),kh(()=>{let b=f.current,c=g.current;if(c!==a){let d=h.current,e=kC(b);a?j("MOUNT"):"none"===e||b?.display==="none"?j("UNMOUNT"):c&&d!==e?j("ANIMATION_OUT"):j("UNMOUNT"),g.current=a}},[a,j]),kh(()=>{if(d){let a,b=d.ownerDocument.defaultView??window,c=c=>{let e=kC(f.current).includes(c.animationName);if(c.target===d&&e&&(j("ANIMATION_END"),!g.current)){let c=d.style.animationFillMode;d.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===d.style.animationFillMode&&(d.style.animationFillMode=c)})}},e=a=>{a.target===d&&(h.current=kC(f.current))};return d.addEventListener("animationstart",e),d.addEventListener("animationcancel",c),d.addEventListener("animationend",c),()=>{b.clearTimeout(a),d.removeEventListener("animationstart",e),d.removeEventListener("animationcancel",c),d.removeEventListener("animationend",c)}}j("ANIMATION_END")},[d,j]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:T.useCallback(a=>{a&&(f.current=getComputedStyle(a)),e(a)},[])}}(e),h="function"==typeof f?f({present:g.isPresent}):T.Children.only(f),i=ge(g.ref,(b=h,(d=(c=Object.getOwnPropertyDescriptor(b.props,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.ref:(d=(c=Object.getOwnPropertyDescriptor(b,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.props.ref:b.props.ref||b.ref));return"function"==typeof f||g.isPresent?T.cloneElement(h,{ref:i}):null};function kC(a){return a?.animationName||"none"}kB.displayName="Presence";var kD=0;function kE(){let a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.outline="none",a.style.opacity="0",a.style.position="fixed",a.style.pointerEvents="none",a}var kF="right-scroll-bar-position",kG="width-before-scroll-bar";function kH(a,b){return"function"==typeof a?a(b):a&&(a.current=b),a}var kI=T.useEffect,kJ=new WeakMap,kK=(void 0===w&&(w={}),(void 0===x&&(x=function(a){return a}),y=[],z=!1,A={read:function(){if(z)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return y.length?y[y.length-1]:null},useMedium:function(a){var b=x(a,z);return y.push(b),function(){y=y.filter(function(a){return a!==b})}},assignSyncMedium:function(a){for(z=!0;y.length;){var b=y;y=[],b.forEach(a)}y={push:function(b){return a(b)},filter:function(){return y}}},assignMedium:function(a){z=!0;var b=[];if(y.length){var c=y;y=[],c.forEach(a),b=y}var d=function(){var c=b;b=[],c.forEach(a)},e=function(){return Promise.resolve().then(d)};e(),y={push:function(a){b.push(a),e()},filter:function(a){return b=b.filter(a),y}}}}).options=(0,hz.__assign)({async:!0,ssr:!1},w),A),kL=function(){},kM=T.forwardRef(function(a,b){var c,d,e,f,g=T.useRef(null),h=T.useState({onScrollCapture:kL,onWheelCapture:kL,onTouchMoveCapture:kL}),i=h[0],j=h[1],k=a.forwardProps,l=a.children,m=a.className,n=a.removeScrollBar,o=a.enabled,p=a.shards,q=a.sideCar,r=a.noRelative,s=a.noIsolation,t=a.inert,u=a.allowPinchZoom,v=a.as,w=a.gapMode,x=(0,hz.__rest)(a,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),y=(c=[g,b],d=function(a){return c.forEach(function(b){return kH(b,a)})},(e=(0,T.useState)(function(){return{value:null,callback:d,facade:{get current(){return e.value},set current(value){var a=e.value;a!==value&&(e.value=value,e.callback(value,a))}}}})[0]).callback=d,f=e.facade,kI(function(){var a=kJ.get(f);if(a){var b=new Set(a),d=new Set(c),e=f.current;b.forEach(function(a){d.has(a)||kH(a,null)}),d.forEach(function(a){b.has(a)||kH(a,e)})}kJ.set(f,c)},[c]),f),z=(0,hz.__assign)((0,hz.__assign)({},x),i);return T.createElement(T.Fragment,null,o&&T.createElement(q,{sideCar:kK,removeScrollBar:n,shards:p,noRelative:r,noIsolation:s,inert:t,setCallbacks:j,allowPinchZoom:!!u,lockRef:g,gapMode:w}),k?T.cloneElement(T.Children.only(l),(0,hz.__assign)((0,hz.__assign)({},z),{ref:y})):T.createElement(void 0===v?"div":v,(0,hz.__assign)({},z,{className:m,ref:y}),l))});kM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},kM.classNames={fullWidth:kG,zeroRight:kF};var kN=function(a){var b=a.sideCar,c=(0,hz.__rest)(a,["sideCar"]);if(!b)throw Error("Sidecar: please provide `sideCar` property to import the right car");var d=b.read();if(!d)throw Error("Sidecar medium not found");return T.createElement(d,(0,hz.__assign)({},c))};kN.isSideCarExport=!0;var kO=function(){var a=0,b=null;return{add:function(c){if(0==a&&(b=function(){if(!document)return null;var a=document.createElement("style");a.type="text/css";var b=R||("undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0);return b&&a.setAttribute("nonce",b),a}())){var d,e;(d=b).styleSheet?d.styleSheet.cssText=c:d.appendChild(document.createTextNode(c)),e=b,(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}a++},remove:function(){--a||!b||(b.parentNode&&b.parentNode.removeChild(b),b=null)}}},kP=function(){var a=kO();return function(b,c){T.useEffect(function(){return a.add(b),function(){a.remove()}},[b&&c])}},kQ=function(){var a=kP();return function(b){return a(b.styles,b.dynamic),null}},kR={left:0,top:0,right:0,gap:0},kS=kQ(),kT="data-scroll-locked",kU=function(a,b,c,d){var e=a.left,f=a.top,g=a.right,h=a.gap;return void 0===c&&(c="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(d,";\n   padding-right: ").concat(h,"px ").concat(d,";\n  }\n  body[").concat(kT,"] {\n    overflow: hidden ").concat(d,";\n    overscroll-behavior: contain;\n    ").concat([b&&"position: relative ".concat(d,";"),"margin"===c&&"\n    padding-left: ".concat(e,"px;\n    padding-top: ").concat(f,"px;\n    padding-right: ").concat(g,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(h,"px ").concat(d,";\n    "),"padding"===c&&"padding-right: ".concat(h,"px ").concat(d,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(kF," {\n    right: ").concat(h,"px ").concat(d,";\n  }\n  \n  .").concat(kG," {\n    margin-right: ").concat(h,"px ").concat(d,";\n  }\n  \n  .").concat(kF," .").concat(kF," {\n    right: 0 ").concat(d,";\n  }\n  \n  .").concat(kG," .").concat(kG," {\n    margin-right: 0 ").concat(d,";\n  }\n  \n  body[").concat(kT,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(h,"px;\n  }\n")},kV=function(){var a=parseInt(document.body.getAttribute(kT)||"0",10);return isFinite(a)?a:0},kW=function(){T.useEffect(function(){return document.body.setAttribute(kT,(kV()+1).toString()),function(){var a=kV()-1;a<=0?document.body.removeAttribute(kT):document.body.setAttribute(kT,a.toString())}},[])},kX=function(a){var b=a.noRelative,c=a.noImportant,d=a.gapMode,e=void 0===d?"margin":d;kW();var f=T.useMemo(function(){return void 0===e,kR},[e]);return T.createElement(kS,{styles:kU(f,!b,e,c?"":"!important")})},kY=function(a,b){if(!(a instanceof Element))return!1;var c=window.getComputedStyle(a);return"hidden"!==c[b]&&(c.overflowY!==c.overflowX||"TEXTAREA"===a.tagName||"visible"!==c[b])},kZ=function(a,b){var c=b.ownerDocument,d=b;do{if("undefined"!=typeof ShadowRoot&&d instanceof ShadowRoot&&(d=d.host),k$(a,d)){var e=k_(a,d);if(e[1]>e[2])return!0}d=d.parentNode}while(d&&d!==c.body)return!1},k$=function(a,b){return"v"===a?kY(b,"overflowY"):kY(b,"overflowX")},k_=function(a,b){return"v"===a?[b.scrollTop,b.scrollHeight,b.clientHeight]:[b.scrollLeft,b.scrollWidth,b.clientWidth]},k0=function(a,b,c,d,e){var f,g=(f=window.getComputedStyle(b).direction,"h"===a&&"rtl"===f?-1:1),h=g*d,i=c.target,j=b.contains(i),k=!1,l=h>0,m=0,n=0;do{if(!i)break;var o=k_(a,i),p=o[0],q=o[1]-o[2]-g*p;(p||q)&&k$(a,i)&&(m+=q,n+=p);var r=i.parentNode;i=r&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r.host:r}while(!j&&i!==document.body||j&&(b.contains(i)||b===i))return l&&(e&&1>Math.abs(m)||!e&&h>m)?k=!0:!l&&(e&&1>Math.abs(n)||!e&&-h>n)&&(k=!0),k},k1=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},k2=function(a){return[a.deltaX,a.deltaY]},k3=function(a){return a&&"current"in a?a.current:a},k4=0,k5=[];let k6=(B=function(a){var b=T.useRef([]),c=T.useRef([0,0]),d=T.useRef(),e=T.useState(k4++)[0],f=T.useState(kQ)[0],g=T.useRef(a);T.useEffect(function(){g.current=a},[a]),T.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(e));var b=(0,hz.__spreadArray)([a.lockRef.current],(a.shards||[]).map(k3),!0).filter(Boolean);return b.forEach(function(a){return a.classList.add("allow-interactivity-".concat(e))}),function(){document.body.classList.remove("block-interactivity-".concat(e)),b.forEach(function(a){return a.classList.remove("allow-interactivity-".concat(e))})}}},[a.inert,a.lockRef.current,a.shards]);var h=T.useCallback(function(a,b){if("touches"in a&&2===a.touches.length||"wheel"===a.type&&a.ctrlKey)return!g.current.allowPinchZoom;var e,f=k1(a),h=c.current,i="deltaX"in a?a.deltaX:h[0]-f[0],j="deltaY"in a?a.deltaY:h[1]-f[1],k=a.target,l=Math.abs(i)>Math.abs(j)?"h":"v";if("touches"in a&&"h"===l&&"range"===k.type)return!1;var m=window.getSelection(),n=m&&m.anchorNode;if(n&&(n===k||n.contains(k)))return!1;var o=kZ(l,k);if(!o)return!0;if(o?e=l:(e="v"===l?"h":"v",o=kZ(l,k)),!o)return!1;if(!d.current&&"changedTouches"in a&&(i||j)&&(d.current=e),!e)return!0;var p=d.current||e;return k0(p,b,a,"h"===p?i:j,!0)},[]),i=T.useCallback(function(a){if(k5.length&&k5[k5.length-1]===f){var c="deltaY"in a?k2(a):k1(a),d=b.current.filter(function(b){var d;return b.name===a.type&&(b.target===a.target||a.target===b.shadowParent)&&(d=b.delta,d[0]===c[0]&&d[1]===c[1])})[0];if(d&&d.should){a.cancelable&&a.preventDefault();return}if(!d){var e=(g.current.shards||[]).map(k3).filter(Boolean).filter(function(b){return b.contains(a.target)});(e.length>0?h(a,e[0]):!g.current.noIsolation)&&a.cancelable&&a.preventDefault()}}},[]),j=T.useCallback(function(a,c,d,e){var f={name:a,delta:c,target:d,should:e,shadowParent:function(a){for(var b=null;null!==a;)a instanceof ShadowRoot&&(b=a.host,a=a.host),a=a.parentNode;return b}(d)};b.current.push(f),setTimeout(function(){b.current=b.current.filter(function(a){return a!==f})},1)},[]),k=T.useCallback(function(a){c.current=k1(a),d.current=void 0},[]),l=T.useCallback(function(b){j(b.type,k2(b),b.target,h(b,a.lockRef.current))},[]),m=T.useCallback(function(b){j(b.type,k1(b),b.target,h(b,a.lockRef.current))},[]);T.useEffect(function(){return k5.push(f),a.setCallbacks({onScrollCapture:l,onWheelCapture:l,onTouchMoveCapture:m}),document.addEventListener("wheel",i,!1),document.addEventListener("touchmove",i,!1),document.addEventListener("touchstart",k,!1),function(){k5=k5.filter(function(a){return a!==f}),document.removeEventListener("wheel",i,!1),document.removeEventListener("touchmove",i,!1),document.removeEventListener("touchstart",k,!1)}},[]);var n=a.removeScrollBar,o=a.inert;return T.createElement(T.Fragment,null,o?T.createElement(f,{styles:"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")}):null,n?T.createElement(kX,{noRelative:a.noRelative,gapMode:a.gapMode}):null)},kK.useMedium(B),kN);var k7=T.forwardRef(function(a,b){return T.createElement(kM,(0,hz.__assign)({},a,{ref:b,sideCar:k6}))});k7.classNames=kM.classNames;var k8=new WeakMap,k9=new WeakMap,la={},lb=0,lc=function(a){return a&&(a.host||lc(a.parentNode))},ld=function(a,b,c,d){var e=(Array.isArray(a)?a:[a]).map(function(a){if(b.contains(a))return a;var c=lc(a);return c&&b.contains(c)?c:(console.error("aria-hidden",a,"in not contained inside",b,". Doing nothing"),null)}).filter(function(a){return!!a});la[c]||(la[c]=new WeakMap);var f=la[c],g=[],h=new Set,i=new Set(e),j=function(a){!a||h.has(a)||(h.add(a),j(a.parentNode))};e.forEach(j);var k=function(a){!a||i.has(a)||Array.prototype.forEach.call(a.children,function(a){if(h.has(a))k(a);else try{var b=a.getAttribute(d),e=null!==b&&"false"!==b,i=(k8.get(a)||0)+1,j=(f.get(a)||0)+1;k8.set(a,i),f.set(a,j),g.push(a),1===i&&e&&k9.set(a,!0),1===j&&a.setAttribute(c,"true"),e||a.setAttribute(d,"true")}catch(b){console.error("aria-hidden: cannot operate on ",a,b)}})};return k(b),h.clear(),lb++,function(){g.forEach(function(a){var b=k8.get(a)-1,e=f.get(a)-1;k8.set(a,b),f.set(a,e),b||(k9.has(a)||a.removeAttribute(d),k9.delete(a)),e||a.removeAttribute(c)}),--lb||(k8=new WeakMap,k8=new WeakMap,k9=new WeakMap,la={})}},le=function(a,b,c){void 0===c&&(c="data-aria-hidden");var d=Array.from(Array.isArray(a)?a:[a]),e=b||("undefined"==typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body);return e?(d.push.apply(d,Array.from(e.querySelectorAll("[aria-live], script"))),ld(d,e,c,"aria-hidden")):function(){return null}},lf="Dialog",[lg,lh]=g1(lf),[li,lj]=lg(lf),lk=a=>{let{__scopeDialog:b,children:c,open:d,defaultOpen:e,onOpenChange:f,modal:g=!0}=a,h=T.useRef(null),i=T.useRef(null),[j=!1,k]=function({prop:a,defaultProp:b,onChange:c=()=>{}}){let[d,e]=function({defaultProp:a,onChange:b}){let c=T.useState(a),[d]=c,e=T.useRef(d),f=kl(b);return T.useEffect(()=>{e.current!==d&&(f(d),e.current=d)},[d,e,f]),c}({defaultProp:b,onChange:c}),f=void 0!==a,g=f?a:d,h=kl(c);return[g,T.useCallback(b=>{if(f){let c="function"==typeof b?b(a):b;c!==a&&h(c)}else e(b)},[f,a,e,h])]}({prop:d,defaultProp:e,onChange:f});return(0,S.jsx)(li,{scope:b,triggerRef:h,contentRef:i,contentId:kk(),titleId:kk(),descriptionId:kk(),open:j,onOpenChange:k,onOpenToggle:T.useCallback(()=>k(a=>!a),[k]),modal:g,children:c})};lk.displayName=lf;var ll="DialogTrigger",lm=T.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=lj(ll,c),f=ge(b,e.triggerRef);return(0,S.jsx)(g3.button,{type:"button","aria-haspopup":"dialog","aria-expanded":e.open,"aria-controls":e.contentId,"data-state":lF(e.open),...d,ref:f,onClick:kg(a.onClick,e.onOpenToggle)})});lm.displayName=ll;var ln="DialogPortal",[lo,lp]=lg(ln,{forceMount:void 0}),lq=a=>{let{__scopeDialog:b,forceMount:c,children:d,container:e}=a,f=lj(ln,b);return(0,S.jsx)(lo,{scope:b,forceMount:c,children:T.Children.map(d,a=>(0,S.jsx)(kB,{present:c||f.open,children:(0,S.jsx)(kA,{asChild:!0,container:e,children:a})}))})};lq.displayName=ln;var lr="DialogOverlay",ls=T.forwardRef((a,b)=>{let c=lp(lr,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=lj(lr,a.__scopeDialog);return f.modal?(0,S.jsx)(kB,{present:d||f.open,children:(0,S.jsx)(lt,{...e,ref:b})}):null});ls.displayName=lr;var lt=T.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=lj(lr,c);return(0,S.jsx)(k7,{as:gf,allowPinchZoom:!0,shards:[e.contentRef],children:(0,S.jsx)(g3.div,{"data-state":lF(e.open),...d,ref:b,style:{pointerEvents:"auto",...d.style}})})}),lu="DialogContent",lv=T.forwardRef((a,b)=>{let c=lp(lu,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=lj(lu,a.__scopeDialog);return(0,S.jsx)(kB,{present:d||f.open,children:f.modal?(0,S.jsx)(lw,{...e,ref:b}):(0,S.jsx)(lx,{...e,ref:b})})});lv.displayName=lu;var lw=T.forwardRef((a,b)=>{let c=lj(lu,a.__scopeDialog),d=T.useRef(null),e=ge(b,c.contentRef,d);return T.useEffect(()=>{let a=d.current;if(a)return le(a)},[]),(0,S.jsx)(ly,{...a,ref:e,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:kg(a.onCloseAutoFocus,a=>{a.preventDefault(),c.triggerRef.current?.focus()}),onPointerDownOutside:kg(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:kg(a.onFocusOutside,a=>a.preventDefault())})}),lx=T.forwardRef((a,b)=>{let c=lj(lu,a.__scopeDialog),d=T.useRef(!1),e=T.useRef(!1);return(0,S.jsx)(ly,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(d.current||c.triggerRef.current?.focus(),b.preventDefault()),d.current=!1,e.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(d.current=!0,"pointerdown"===b.detail.originalEvent.type&&(e.current=!0));let f=b.target;c.triggerRef.current?.contains(f)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&e.current&&b.preventDefault()}})}),ly=T.forwardRef((a,b)=>{let{__scopeDialog:c,trapFocus:d,onOpenAutoFocus:e,onCloseAutoFocus:f,...g}=a,h=lj(lu,c),i=T.useRef(null),j=ge(b,i);return T.useEffect(()=>{let a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",a[0]??kE()),document.body.insertAdjacentElement("beforeend",a[1]??kE()),kD++,()=>{1===kD&&document.querySelectorAll("[data-radix-focus-guard]").forEach(a=>a.remove()),kD--}},[]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(ku,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:e,onUnmountAutoFocus:f,children:(0,S.jsx)(ko,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":lF(h.open),...g,ref:j,onDismiss:()=>h.onOpenChange(!1)})}),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(lJ,{titleId:h.titleId}),(0,S.jsx)(lK,{contentRef:i,descriptionId:h.descriptionId})]})]})}),lz="DialogTitle",lA=T.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=lj(lz,c);return(0,S.jsx)(g3.h2,{id:e.titleId,...d,ref:b})});lA.displayName=lz;var lB="DialogDescription",lC=T.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=lj(lB,c);return(0,S.jsx)(g3.p,{id:e.descriptionId,...d,ref:b})});lC.displayName=lB;var lD="DialogClose",lE=T.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=lj(lD,c);return(0,S.jsx)(g3.button,{type:"button",...d,ref:b,onClick:kg(a.onClick,()=>e.onOpenChange(!1))})});function lF(a){return a?"open":"closed"}lE.displayName=lD;var lG="DialogTitleWarning",[lH,lI]=(C={contentName:lu,titleName:lz,docsSlug:"dialog"},g=T.createContext(C),(h=a=>{let{children:b,...c}=a,d=T.useMemo(()=>c,Object.values(c));return(0,S.jsx)(g.Provider,{value:d,children:b})}).displayName=lG+"Provider",[h,function(a){let b=T.useContext(g);if(b)return b;if(void 0!==C)return C;throw Error(`\`${a}\` must be used within \`${lG}\``)}]),lJ=({titleId:a})=>{let b=lI(lG),c=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return T.useEffect(()=>{a&&(document.getElementById(a)||console.error(c))},[c,a]),null},lK=({contentRef:a,descriptionId:b})=>{let c=lI("DialogDescriptionWarning"),d=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${c.contentName}}.`;return T.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(d))},[d,a,b]),null},lL="AlertDialog",[lM,lN]=g1(lL,[lh]),lO=lh(),lP=a=>{let{__scopeAlertDialog:b,...c}=a,d=lO(b);return(0,S.jsx)(lk,{...d,...c,modal:!0})};lP.displayName=lL,T.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...d}=a,e=lO(c);return(0,S.jsx)(lm,{...e,...d,ref:b})}).displayName="AlertDialogTrigger";var lQ=a=>{let{__scopeAlertDialog:b,...c}=a,d=lO(b);return(0,S.jsx)(lq,{...d,...c})};lQ.displayName="AlertDialogPortal";var lR=T.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...d}=a,e=lO(c);return(0,S.jsx)(ls,{...e,...d,ref:b})});lR.displayName="AlertDialogOverlay";var lS="AlertDialogContent",[lT,lU]=lM(lS),lV=T.forwardRef((a,b)=>{let{__scopeAlertDialog:c,children:d,...e}=a,f=lO(c),g=T.useRef(null),h=ge(b,g),i=T.useRef(null);return(0,S.jsx)(lH,{contentName:lS,titleName:lW,docsSlug:"alert-dialog",children:(0,S.jsx)(lT,{scope:c,cancelRef:i,children:(0,S.jsxs)(lv,{role:"alertdialog",...f,...e,ref:h,onOpenAutoFocus:kg(e.onOpenAutoFocus,a=>{a.preventDefault(),i.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,S.jsx)(gh,{children:d}),(0,S.jsx)(l1,{contentRef:g})]})})})});lV.displayName=lS;var lW="AlertDialogTitle",lX=T.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...d}=a,e=lO(c);return(0,S.jsx)(lA,{...e,...d,ref:b})});lX.displayName=lW;var lY="AlertDialogDescription",lZ=T.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...d}=a,e=lO(c);return(0,S.jsx)(lC,{...e,...d,ref:b})});lZ.displayName=lY;var l$=T.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...d}=a,e=lO(c);return(0,S.jsx)(lE,{...e,...d,ref:b})});l$.displayName="AlertDialogAction";var l_="AlertDialogCancel",l0=T.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...d}=a,{cancelRef:e}=lU(l_,c),f=lO(c),g=ge(b,e);return(0,S.jsx)(lE,{...f,...d,ref:g})});l0.displayName=l_;var l1=({contentRef:a})=>{let b=`\`${lS}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${lS}\` by passing a \`${lY}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${lS}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return T.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null};let l2=T.forwardRef(({className:a,...b},c)=>(0,S.jsx)(lR,{className:gZ("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:c}));l2.displayName=lR.displayName;let l3=T.forwardRef(({className:a,...b},c)=>(0,S.jsxs)(lQ,{children:[(0,S.jsx)(l2,{}),(0,S.jsx)(lV,{ref:c,className:gZ("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...b})]}));l3.displayName=lV.displayName;let l4=({className:a,...b})=>(0,S.jsx)("div",{className:gZ("flex flex-col space-y-2 text-center sm:text-left",a),...b});l4.displayName="AlertDialogHeader";let l5=({className:a,...b})=>(0,S.jsx)("div",{className:gZ("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});l5.displayName="AlertDialogFooter";let l6=T.forwardRef(({className:a,...b},c)=>(0,S.jsx)(lX,{ref:c,className:gZ("text-lg font-semibold",a),...b}));l6.displayName=lX.displayName;let l7=T.forwardRef(({className:a,...b},c)=>(0,S.jsx)(lZ,{ref:c,className:gZ("text-sm text-muted-foreground",a),...b}));l7.displayName=lZ.displayName;let l8=T.forwardRef(({className:a,...b},c)=>(0,S.jsx)(l$,{ref:c,className:gZ(g$(),a),...b}));l8.displayName=l$.displayName;let l9=T.forwardRef(({className:a,...b},c)=>(0,S.jsx)(l0,{ref:c,className:gZ(g$({variant:"outline"}),"mt-2 sm:mt-0",a),...b}));function ma({initialState:a,onReset:b}){let c,d,e,f,[g,h]=(0,T.useReducer)(function a(b,c){switch(c.type){case"START_LEVEL":{let a=hw.filter(a=>a.level_id===c.payload.id),d=b.answeredQuestions.filter(a=>a.isCorrect).map(a=>a.questionId),e=hy(a.filter(a=>!d.includes(a.id))).map(a=>({...a,options:hy([...a.options])}));return{...b,gameState:"playing",currentLevelId:c.payload.id,questions:e,currentQuestionIndex:0,selectedAnswer:null,isScanning:!1,scanResult:null,showExplanation:!1}}case"SELECT_ANSWER":{if(null!==b.selectedAnswer||b.isScanning)return b;let{answerIndex:a,question:d}=c.payload,e=d.options[a].is_correct;return{...b,selectedAnswer:a,isScanning:!0,scanResult:e?"success":"error"}}case"SCAN_COMPLETE":{let a=b.questions?.[b.currentQuestionIndex];if(!a||null===b.selectedAnswer)return b;let c="success"===b.scanResult,d={...b.levelProgress},e=b.answeredQuestions.some(b=>b.questionId===a.id&&b.isCorrect),f=d[b.currentLevelId].score;c&&!e&&(f+=1),d[b.currentLevelId]={...d[b.currentLevelId],score:f};let g=a.options.find(a=>a.is_correct),h=new Set(b.unlockedBiases);g?.bias_id&&h.add(g.bias_id);let i={questionId:a.id,isCorrect:c,answeredAt:Date.now()},j=[...b.answeredQuestions.filter(b=>b.questionId!==a.id),i],k=Object.values(d).reduce((a,b)=>a+b.score,0);return{...b,isScanning:!1,showExplanation:!0,levelProgress:d,unlockedBiases:Array.from(h),answeredQuestions:j,totalScore:k}}case"NEXT_QUESTION":if(b.currentQuestionIndex<b.questions.length-1)return{...b,currentQuestionIndex:b.currentQuestionIndex+1,selectedAnswer:null,scanResult:null,showExplanation:!1};return a(b,{type:"COMPLETE_LEVEL"});case"COMPLETE_LEVEL":{let a=b.currentLevelId,c={...b.levelProgress,[a]:{...b.levelProgress[a],completed:!0}},d=hv.every(a=>c[a.id]?.completed);return{...b,gameState:"levelComplete",levelProgress:c,allLevelsCompleted:d}}case"CHANGE_GAME_STATE":return{...b,gameState:c.payload,selectedAnswer:null,showExplanation:!1,scanResult:null,isScanning:!1};case"SELECT_WIKI_BIAS":return{...b,selectedBias:c.payload};case"SHOW_CERTIFICATE":return{...b,showCertificate:c.payload};case"SHOW_RESET_DIALOG":return{...b,showResetDialog:c.payload};case"RESET":return{...b,gameState:"menu",showResetDialog:!1};default:return b}},{...a,selectedAnswer:null,isScanning:!1,scanResult:null,showExplanation:!1,selectedBias:null,showCertificate:!1,showResetDialog:!1}),{userProfile:i,gameState:j,currentLevelId:k,questions:l,currentQuestionIndex:m,selectedAnswer:n,isScanning:o,scanResult:p,showExplanation:q,levelProgress:r,unlockedBiases:s,allLevelsCompleted:t,selectedBias:u,showCertificate:v,showResetDialog:w}=g;(0,T.useEffect)(()=>{let a={userProfile:g.userProfile,gameState:g.gameState,currentLevelId:g.currentLevelId,questions:g.questions,currentQuestionIndex:g.currentQuestionIndex,levelProgress:g.levelProgress,unlockedBiases:g.unlockedBiases,completedQuestionIds:g.completedQuestionIds,answeredQuestions:g.answeredQuestions,allLevelsCompleted:g.allLevelsCompleted,totalScore:g.totalScore,totalQuestions:g.totalQuestions};hu(a),g.userProfile&&kf(a).catch(a=>{console.error("Failed to save to Supabase:",a)})},[g]);let x=hv.find(a=>a.id===k)||hv[0],y=l?.[m],z=a=>{null!==n||o||h({type:"SELECT_ANSWER",payload:{answerIndex:a,question:y}})},A=(0,T.useCallback)(()=>h({type:"SCAN_COMPLETE"}),[]),B=a=>h({type:"START_LEVEL",payload:a}),C=a=>h({type:"CHANGE_GAME_STATE",payload:a}),D=a=>h({type:"SELECT_WIKI_BIAS",payload:a}),E=a=>h({type:"SHOW_CERTIFICATE",payload:a}),F=a=>h({type:"SHOW_RESET_DIALOG",payload:a}),G=a=>{let b=r[a];return b&&0!==b.total?b.score/b.total*100:0},H=Object.values(r).reduce((a,b)=>a+b.score,0),I=Object.values(r).reduce((a,b)=>a+b.total,0);return(0,S.jsxs)("div",{className:"min-h-screen bg-gray-950 text-white relative",children:[(0,S.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,S.jsx)("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-cyan-500/5 rounded-full blur-3xl"}),(0,S.jsx)("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),(0,S.jsx)("div",{className:"absolute inset-0 opacity-[0.02]",style:{backgroundImage:"radial-gradient(circle at 1px 1px, #fff 1px, transparent 0)",backgroundSize:"40px 40px"}})]}),(0,S.jsxs)("div",{className:"relative z-10",children:["menu"===j&&(0,S.jsx)(fQ.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen p-8",children:(0,S.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,S.jsxs)("div",{className:"text-center mb-12",children:[(0,S.jsxs)(fQ.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},className:"inline-flex items-center gap-3 mb-4",children:[(0,S.jsx)(f2,{className:"w-12 h-12 text-cyan-400"}),(0,S.jsx)("h1",{className:"font-bold bg-gradient-to-r from-cyan-400 via-purple-500 to-pink-500 bg-clip-text text-transparent text-6xl py-4",children:"Cognitive Labs"})]}),(0,S.jsxs)("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto mb-0",children:["Bienvenue ",(0,S.jsx)("span",{className:"text-cyan-400 font-semibold",children:i?.firstName})," ! Entranez votre cerveau  dtecter les biais cognitifs utiliss en UX Design."]})]}),(0,S.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8 mt-0 pt-4",children:[(0,S.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[(0,S.jsxs)(g0,{className:"p-6 bg-gray-900/50 border-gray-800",children:[(0,S.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,S.jsx)(f3,{className:"w-5 h-5 text-yellow-500"}),"Votre Progression"]}),(0,S.jsx)(hi,{level1Progress:G(1),level2Progress:G(2),level3Progress:G(3),currentLevel:x.id})]}),t&&(0,S.jsx)(fQ.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,S.jsx)(g0,{className:"p-6 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border-yellow-500/30",children:(0,S.jsxs)("div",{className:"text-center",children:[(0,S.jsx)(gb,{className:"w-12 h-12 text-yellow-500 mx-auto mb-3"}),(0,S.jsx)("h3",{className:"text-lg font-bold text-white mb-2",children:"Formation Termine !"}),(0,S.jsxs)("p",{className:"text-gray-400 text-sm mb-4",children:["Flicitations ",i?.firstName," ! Rcuprez votre diplme."]}),(0,S.jsxs)(g_,{onClick:()=>E(!0),className:"w-full bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-black font-semibold",children:[(0,S.jsx)(gb,{className:"w-4 h-4 mr-2"}),"Obtenir mon diplme"]})]})})}),(0,S.jsxs)(g_,{variant:"outline",size:"sm",className:"w-full mt-6 border-gray-700 hover:border-red-500 hover:bg-red-500/10 bg-transparent",onClick:()=>F(!0),children:[(0,S.jsx)(f5,{className:"w-4 h-4 mr-2"}),"Recommencer le jeu"]})]}),(0,S.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,S.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Choisissez votre niveau"}),hv.map((a,b)=>{let c=(a=>{if(1===a.id)return!0;let b=hv.find(b=>b.id===a.id-1);return!!b&&G(b.id)>=70})(a),d=r[a.id];return(0,S.jsx)(fQ.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1*b},children:(0,S.jsx)(g0,{className:`p-6 transition-all duration-300 ${c?"bg-gray-900/50 border-gray-700 hover:border-cyan-500/50 cursor-pointer":"bg-gray-900/30 border-gray-800 opacity-50"}`,onClick:()=>c&&B(a),style:{borderLeftWidth:"4px",borderLeftColor:c?a.theme_color:"#333"},children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,S.jsx)("span",{className:"font-bold text-3xl",style:{color:a.theme_color},children:a.name_fr}),d.completed&&(0,S.jsx)(f4,{className:"w-5 h-5 text-yellow-500"})]}),(0,S.jsx)("p",{className:"text-gray-400 mb-3 text-lg",children:a.description}),c&&(0,S.jsxs)("div",{className:"flex items-center gap-4",children:[(0,S.jsx)(hh,{value:G(a.id),className:"flex-1 h-2"}),(0,S.jsxs)("span",{className:"text-gray-500 font-mono text-base",children:[d.score,"/",d.total]})]}),!c&&(0,S.jsxs)("p",{className:"text-red-400/70 flex items-center gap-2 text-lg",children:[(0,S.jsx)(f8,{className:"w-4 h-4"}),"Requiert 70% au niveau prcdent"]})]}),c&&(0,S.jsx)(f7,{className:"w-8 h-8 text-gray-600",style:{color:a.theme_color}})]})})},a.id)}),(0,S.jsxs)(g_,{variant:"outline",size:"lg",className:"w-full mt-6 border-gray-700 hover:border-purple-500 hover:bg-purple-500/10 bg-transparent text-lg py-3",onClick:()=>C("wiki"),children:[(0,S.jsx)(f6,{className:"w-5 h-5 mr-2"}),"Bibliothque des Biais (",s.length,"/",hx.length,")"]})]})]})]})}),"playing"===j&&(y?(0,S.jsxs)(fQ.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen p-4 md:p-8",children:[(0,S.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,S.jsx)(g_,{variant:"ghost",onClick:()=>C("menu"),className:"text-gray-400 hover:text-white",children:" Retour"}),(0,S.jsxs)("div",{className:"flex items-center gap-4",children:[(0,S.jsx)("span",{className:"font-bold font-mono",style:{color:x.theme_color},children:x.name_fr}),(0,S.jsxs)("span",{className:"text-gray-500 font-mono",children:[m+1,"/",l.length]})]})]}),(0,S.jsx)("div",{className:"mb-8",children:(0,S.jsx)(hh,{value:m/l.length*100,className:"h-2"})}),(0,S.jsx)(fZ,{mode:"wait",children:(0,S.jsxs)(fQ.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},children:[(0,S.jsxs)(g0,{className:"p-6 md:p-8 bg-gray-900/50 border-gray-800 mb-6",children:[(0,S.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,S.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${x.theme_color}20`,border:`2px solid ${x.theme_color}`},children:(0,S.jsx)(f2,{className:"w-5 h-5",style:{color:x.theme_color}})}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("p",{className:"text-xs text-gray-500 font-mono mb-2",children:["SITUATION #",y.id]}),(0,S.jsx)("p",{className:"text-lg md:text-xl text-white leading-relaxed",children:y.scenario})]})]}),"PRICE_GRID"===y.ui_interaction&&y.experience_data?(0,S.jsx)(hn,{options:y.experience_data.options,onSelect:a=>z(a),disabled:null!==n}):(0,S.jsx)("div",{className:"space-y-3",children:y.options.map((a,b)=>{let c=n===b,d=a.is_correct,e="border-gray-700 bg-gray-800/50 hover:border-cyan-500/50 hover:bg-cyan-500/10";return q?d?e="border-green-500 bg-green-500/20":c&&!d&&(e="border-red-500 bg-red-500/20"):c&&(e="border-cyan-500 bg-cyan-500/20"),(0,S.jsx)(fQ.button,{onClick:()=>z(b),disabled:null!==n,className:`w-full p-4 rounded-xl border-2 text-left transition-all duration-300 ${e}`,whileHover:null===n?{scale:1.02}:{},whileTap:null===n?{scale:.98}:{},children:(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${q&&d?"bg-green-500 text-black":q&&c&&!d?"bg-red-500 text-white":"bg-gray-700 text-gray-300"}`,children:String.fromCharCode(65+b)}),(0,S.jsx)("span",{className:"text-white",children:a.text})]})},b)})})]}),(0,S.jsx)(fZ,{children:q&&(0,S.jsxs)(fQ.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:[(0,S.jsx)(g0,{className:`p-6 mb-6 ${"success"===p?"bg-green-500/10 border-green-500/50":"bg-red-500/10 border-red-500/50"}`,children:(0,S.jsxs)("div",{className:"flex items-start gap-3",children:["success"===p?(0,S.jsx)(f9,{className:"w-6 h-6 text-green-500 flex-shrink-0"}):(0,S.jsx)(ga,{className:"w-6 h-6 text-red-500 flex-shrink-0"}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:`font-bold mb-2 ${"success"===p?"text-green-400":"text-red-400"}`,children:"success"===p?"Excellente analyse !":"Biais dtect dans votre raisonnement"}),(0,S.jsx)("p",{className:"text-gray-300",children:y.explanation}),(()=>{let a=y.options.find(a=>a.is_correct);if(a?.bias_id){let b=hx.find(b=>b.bias_id===a.bias_id);if(b)return(0,S.jsxs)("div",{className:"mt-4 p-3 rounded-lg bg-gray-900/50 border border-gray-700",children:[(0,S.jsx)("p",{className:"text-xs text-cyan-400 font-mono mb-1",children:" AJOUT  VOTRE BIBLIOTHQUE"}),(0,S.jsx)("p",{className:"text-white font-semibold",children:b.name}),(0,S.jsx)("p",{className:"text-gray-500 text-sm",children:b.category})]})}return null})()]})]})}),(0,S.jsxs)(g_,{onClick:()=>h({type:"NEXT_QUESTION"}),className:"w-full",size:"lg",style:{backgroundColor:x.theme_color,color:"#000"},children:[m<l.length-1?"Question Suivante":"Voir les Rsultats",(0,S.jsx)(f7,{className:"w-5 h-5 ml-2"})]})]})})]},y.id)})]}),(0,S.jsx)(hk,{isScanning:o,result:p,onComplete:A})]}):null),"levelComplete"===j&&(d=(c=r[x.id]).score/c.total*100,f=(e=hv.find(a=>a.id===x.id+1))&&d>=e.unlock_criteria,(0,S.jsx)(fQ.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen flex items-center justify-center p-8",children:(0,S.jsxs)(g0,{className:"max-w-lg w-full p-8 bg-gray-900/50 border-gray-800 text-center",children:[(0,S.jsx)(fQ.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.2},children:(0,S.jsx)(f4,{className:"w-20 h-20 mx-auto mb-6",style:{color:x.theme_color}})}),(0,S.jsxs)("h2",{className:"text-3xl font-bold text-white mb-2",children:["Bravo ",i?.firstName," !"]}),(0,S.jsxs)("p",{className:"text-gray-400 mb-4",children:["Niveau ",x.name_fr," termin"]}),(0,S.jsxs)("div",{className:"my-8",children:[(0,S.jsxs)("div",{className:"text-6xl font-bold mb-2",style:{color:d>=70?"#00FF88":d>=50?"#FFD700":"#FF4444"},children:[Math.round(d),"%"]}),(0,S.jsxs)("p",{className:"text-gray-400",children:[c.score," / ",c.total," bonnes rponses"]})]}),d>=70?(0,S.jsx)("p",{className:"text-green-400 mb-6",children:" Excellent travail ! Votre cerveau est afft !"}):d>=50?(0,S.jsx)("p",{className:"text-yellow-400 mb-6",children:" Pas mal ! Continuez  vous entraner."}):(0,S.jsx)("p",{className:"text-red-400 mb-6",children:" Courage ! La pratique fait le matre."}),f&&e&&(0,S.jsx)(fQ.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"p-4 rounded-lg bg-green-500/10 border border-green-500/50 mb-6",children:(0,S.jsxs)("p",{className:"text-green-400 font-semibold",children:[" Niveau ",e.name_fr," dbloqu !"]})}),(0,S.jsxs)("div",{className:"flex flex-col gap-3",children:[f&&e&&(0,S.jsxs)(g_,{onClick:()=>B(e),size:"lg",style:{backgroundColor:e.theme_color,color:"#000"},children:["Commencer le niveau ",e.name_fr]}),(0,S.jsxs)(g_,{variant:"outline",onClick:()=>B(x),className:"border-gray-700",children:[(0,S.jsx)(f5,{className:"w-4 h-4 mr-2"}),"Refaire ce niveau"]}),(0,S.jsx)(g_,{variant:"ghost",onClick:()=>C("menu"),children:"Retour au menu"})]})]})})),"wiki"===j&&(0,S.jsxs)(fQ.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen p-4 md:p-8",children:[(0,S.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,S.jsxs)("div",{children:[(0,S.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[(0,S.jsx)(f6,{className:"w-8 h-8 text-purple-500"}),"Bibliothque des Biais"]}),(0,S.jsxs)("p",{className:"text-gray-400 mt-2",children:[s.length," / ",hx.length," concepts dbloqus"]})]}),(0,S.jsx)(g_,{variant:"outline",onClick:()=>C("menu"),className:"border-gray-700",children:" Retour"})]}),(0,S.jsx)(hh,{value:s.length/hx.length*100,className:"h-2 mb-8"}),hv.map(a=>{let b=hx.filter(b=>b.level_unlocked===a.id);return(0,S.jsxs)("div",{className:"mb-8",children:[(0,S.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",style:{color:a.theme_color},children:[(0,S.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.theme_color}}),"Niveau ",a.name_fr]}),(0,S.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(a=>(0,S.jsx)(hq,{bias:a,isUnlocked:s.includes(a.bias_id),onClick:()=>D(a)},a.bias_id))})]},a.id)})]}),(0,S.jsx)(fZ,{children:u&&(0,S.jsx)(fQ.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>D(null),children:(0,S.jsx)(fQ.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"max-w-lg w-full",onClick:a=>a.stopPropagation(),children:(0,S.jsxs)(g0,{className:"p-6 bg-gray-900 border-gray-700",children:[(0,S.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:u.name}),(0,S.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-mono bg-cyan-500/20 text-cyan-400 border border-cyan-500/40 mb-4",children:u.category}),(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-sm font-semibold text-gray-400 mb-2",children:"DFINITION"}),(0,S.jsx)("p",{className:"text-gray-300",children:u.definition})]}),(0,S.jsxs)("div",{className:"p-4 rounded-lg bg-gray-800/50 border border-gray-700",children:[(0,S.jsxs)("h3",{className:"text-sm font-semibold text-yellow-500 mb-2 flex items-center gap-2",children:[(0,S.jsx)(ga,{className:"w-4 h-4"}),"CONTRE-TACTIQUE UX"]}),(0,S.jsx)("p",{className:"text-gray-300",children:u.counter_tactic})]})]}),(0,S.jsx)(g_,{className:"w-full mt-6",onClick:()=>D(null),children:"Fermer"})]})})})})]})]}),(0,S.jsx)(fZ,{children:v&&i&&(0,S.jsx)(ht,{user:i,score:H,totalQuestions:I,onClose:()=>E(!1),onReset:b})}),(0,S.jsx)(lP,{open:w,onOpenChange:F,children:(0,S.jsxs)(l3,{className:"bg-gray-900 border-gray-800",children:[(0,S.jsxs)(l4,{children:[(0,S.jsx)(l6,{className:"text-white",children:"Recommencer le jeu ?"}),(0,S.jsx)(l7,{className:"text-gray-400",children:"tes-vous sr de vouloir recommencer ? Toute votre progression sera perdue. Cette action est irrversible."})]}),(0,S.jsxs)(l5,{children:[(0,S.jsx)(l9,{className:"bg-gray-800 text-white border-gray-700 hover:bg-gray-700",children:"Annuler"}),(0,S.jsx)(l8,{onClick:()=>{F(!1),b()},className:"bg-red-600 hover:bg-red-700 text-white",children:"Oui, recommencer"})]})]})})]})}l9.displayName=l0.displayName;let mb=f1("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),mc=f1("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),md=f1("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),me=f1("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),mf=f1("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);function mg({className:a,type:b,...c}){return(0,S.jsx)("input",{type:b,"data-slot":"input",className:gZ("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...c})}var mh=T.forwardRef((a,b)=>(0,S.jsx)(g3.label,{...a,ref:b,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));function mi({className:a,...b}){return(0,S.jsx)(mh,{"data-slot":"label",className:gZ("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...b})}function mj({onComplete:a}){let[b,c]=(0,T.useState)({firstName:"",lastName:"",email:"",job:""}),[d,e]=(0,T.useState)({});return(0,S.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[(0,S.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-secondary to-background"}),(0,S.jsx)("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl"}),(0,S.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent/10 rounded-full blur-3xl"}),(0,S.jsxs)(fQ.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative z-10 w-full max-w-md",children:[(0,S.jsxs)("div",{className:"text-center mb-8",children:[(0,S.jsx)(fQ.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.2},className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 border border-primary/30 mb-6",children:(0,S.jsx)(f2,{className:"w-10 h-10 text-primary"})}),(0,S.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary via-accent to-destructive bg-clip-text text-transparent mb-2",children:"Bienvenue sur Cognitive Labs"}),(0,S.jsx)("p",{className:"text-muted-foreground",children:"Crez votre profil pour commencer votre parcours d'apprentissage"})]}),(0,S.jsx)(g0,{className:"p-6 bg-card/70 border-border backdrop-blur-sm",children:(0,S.jsxs)("form",{onSubmit:c=>{let d;c.preventDefault(),d={},b.firstName.trim()||(d.firstName="Requis"),b.lastName.trim()||(d.lastName="Requis"),b.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.email)||(d.email="Email invalide"):d.email="Requis",b.job.trim()||(d.job="Requis"),e(d),0===Object.keys(d).length&&a(b)},className:"space-y-5",children:[(0,S.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,S.jsxs)("div",{className:"space-y-2",children:[(0,S.jsxs)(mi,{htmlFor:"firstName",className:"text-muted-foreground flex items-center gap-2",children:[(0,S.jsx)(mb,{className:"w-4 h-4 text-primary"}),"Prnom"]}),(0,S.jsx)(mg,{id:"firstName",value:b.firstName,onChange:a=>c({...b,firstName:a.target.value}),className:"bg-secondary/50 border-border focus:border-primary text-foreground",placeholder:"Jean"}),d.firstName&&(0,S.jsx)("p",{className:"text-destructive text-xs",children:d.firstName})]}),(0,S.jsxs)("div",{className:"space-y-2",children:[(0,S.jsx)(mi,{htmlFor:"lastName",className:"text-muted-foreground",children:"Nom"}),(0,S.jsx)(mg,{id:"lastName",value:b.lastName,onChange:a=>c({...b,lastName:a.target.value}),className:"bg-secondary/50 border-border focus:border-primary text-foreground",placeholder:"Dupont"}),d.lastName&&(0,S.jsx)("p",{className:"text-destructive text-xs",children:d.lastName})]})]}),(0,S.jsxs)("div",{className:"space-y-2",children:[(0,S.jsxs)(mi,{htmlFor:"email",className:"text-muted-foreground flex items-center gap-2",children:[(0,S.jsx)(mc,{className:"w-4 h-4 text-primary"}),"Email"]}),(0,S.jsx)(mg,{id:"email",type:"email",value:b.email,onChange:a=>c({...b,email:a.target.value}),className:"bg-secondary/50 border-border focus:border-primary text-foreground",placeholder:"jean.dupont@email.com"}),d.email&&(0,S.jsx)("p",{className:"text-destructive text-xs",children:d.email})]}),(0,S.jsxs)("div",{className:"space-y-2",children:[(0,S.jsxs)(mi,{htmlFor:"job",className:"text-muted-foreground flex items-center gap-2",children:[(0,S.jsx)(md,{className:"w-4 h-4 text-primary"}),"Poste / Fonction"]}),(0,S.jsx)(mg,{id:"job",value:b.job,onChange:a=>c({...b,job:a.target.value}),className:"bg-secondary/50 border-border focus:border-primary text-foreground",placeholder:"UX Designer, Product Manager..."}),d.job&&(0,S.jsx)("p",{className:"text-destructive text-xs",children:d.job})]}),(0,S.jsxs)(g_,{type:"submit",size:"lg",className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-primary-foreground font-semibold",children:[(0,S.jsx)(mf,{className:"w-4 h-4 mr-2"}),"Commencer l'aventure",(0,S.jsx)(me,{className:"w-4 h-4 ml-2"})]})]})}),(0,S.jsx)("p",{className:"text-center text-muted-foreground text-sm mt-4",children:"Vos donnes restent prives et ne sont jamais partages."})]})]})}mh.displayName="Label";let mk=a=>({userProfile:a,gameState:"menu",currentLevelId:1,questions:[],currentQuestionIndex:0,levelProgress:hv.reduce((a,b)=>(a[b.id]={score:0,total:20,completed:!1},a),{}),unlockedBiases:[],completedQuestionIds:[],answeredQuestions:[],allLevelsCompleted:!1,totalScore:0,totalQuestions:20*hv.length});function ml(){let[a,b]=(0,T.useState)(null),[c,d]=(0,T.useState)(!1);return((0,T.useEffect)(()=>{d(!0)},[]),c)?a&&a.userProfile?(0,S.jsx)(ma,{initialState:a,onReset:()=>{if(window.confirm("tes-vous sr de vouloir recommencer ? Toute votre progression sera perdue.")&&a&&a.userProfile){let c=mk(a.userProfile);hu(c),b(c)}}}):(0,S.jsx)(mj,{onComplete:a=>{let c=mk(a);hu(c),b(c)}}):null}a.s(["default",()=>ml],60350)}];

//# sourceMappingURL=_d5cff090._.js.map