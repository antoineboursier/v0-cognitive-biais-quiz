(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,45944,e=>{"use strict";var s=e.i(1972),r=e.i(75305),l=e.i(20755);async function o(){console.log("ðŸ” Test de connexion Supabase...");let e=(0,l.createClient)();console.log("âœ… Client Supabase crÃ©Ã©"),console.log("\nðŸ“Š Test de la table user_scores...");let{data:s,error:r}=await e.from("user_scores").select("*").limit(1);if(r)return console.error("âŒ Erreur lors de l'accÃ¨s Ã  la table:",r),"42P01"===r.code?(console.error('\nâš ï¸ LA TABLE "user_scores" N\'EXISTE PAS !'),console.log("\nðŸ“ SOLUTION :"),console.log("1. Allez sur https://supabase.com/dashboard"),console.log("2. SÃ©lectionnez votre projet"),console.log('3. Allez dans "SQL Editor"'),console.log('4. Copiez le contenu de "supabase_migration.sql"'),console.log("5. Collez et exÃ©cutez le script")):"PGRST301"===r.code?(console.error("\nâš ï¸ PROBLÃˆME DE PERMISSIONS (RLS) !"),console.log("\nðŸ“ SOLUTION :"),console.log("1. VÃ©rifiez que les policies RLS sont bien configurÃ©es"),console.log("2. ExÃ©cutez le script supabase_migration.sql qui configure les permissions")):console.error("\nâš ï¸ ERREUR INCONNUE:",r.message),{success:!1,error:r};console.log("âœ… Table user_scores accessible !"),console.log("ðŸ“Š DonnÃ©es de test:",s),console.log("\nðŸ“ Test d'insertion...");let{data:o,error:t}=await e.from("user_scores").upsert({email:"test@example.com",first_name:"Test",last_name:"User",job:"Tester",total_score:0,total_questions:60,level_1_score:0,level_2_score:0,level_3_score:0,answered_questions:[],unlocked_biases:[],all_levels_completed:!1},{onConflict:"email"}).select();return t?(console.error("âŒ Erreur lors de l'insertion:",t),{success:!1,error:t}):(console.log("âœ… Test d'insertion rÃ©ussi !"),console.log("ðŸ“Š DonnÃ©es insÃ©rÃ©es:",o),console.log("\nâœ… TOUS LES TESTS SONT PASSÃ‰S !"),console.log("ðŸŽ‰ Supabase est correctement configurÃ© !"),{success:!0})}var t=e.i(67881),c=e.i(70065);function n(){let[e,l]=(0,r.useState)(""),[n,a]=(0,r.useState)(!1),i=async()=>{a(!0),l("Test en cours...\n");let e=console.log,s=console.error,r=[];console.log=(...s)=>{r.push(s.join(" ")),e(...s)},console.error=(...e)=>{r.push("âŒ "+e.join(" ")),s(...e)};try{await o()}catch(e){r.push(`
âŒ Erreur fatale: ${e}`)}console.log=e,console.error=s,l(r.join("\n")),a(!1)};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-950 text-white p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4 text-cyan-400",children:"ðŸ”§ Test de connexion Supabase"}),(0,s.jsxs)(c.Card,{className:"p-6 bg-gray-900/50 border-gray-800 mb-6",children:[(0,s.jsx)("p",{className:"text-gray-400 mb-4",children:"Cette page vous permet de tester la connexion Ã  Supabase et de vÃ©rifier que tout est correctement configurÃ©."}),(0,s.jsx)(t.Button,{onClick:i,disabled:n,className:"bg-cyan-500 hover:bg-cyan-600 text-black font-semibold",children:n?"Test en cours...":"Lancer le test"})]}),e&&(0,s.jsxs)(c.Card,{className:"p-6 bg-gray-900/50 border-gray-800",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-white",children:"RÃ©sultats :"}),(0,s.jsx)("pre",{className:"bg-black/50 p-4 rounded overflow-auto text-sm text-gray-300 whitespace-pre-wrap",children:e})]}),(0,s.jsxs)(c.Card,{className:"p-6 bg-gray-900/50 border-gray-800 mt-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-yellow-400",children:"ðŸ“ Comment crÃ©er la table user_scores"}),(0,s.jsxs)("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4 mb-4",children:[(0,s.jsx)("p",{className:"text-red-400 font-bold",children:'âš ï¸ LA TABLE "user_scores" N\'EXISTE PAS DANS VOTRE BASE DE DONNÃ‰ES !'}),(0,s.jsx)("p",{className:"text-gray-300 mt-2",children:"Suivez les Ã©tapes ci-dessous pour la crÃ©er."})]}),(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-3 text-gray-300",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-white",children:"Ouvrez le SQL Editor de Supabase"}),(0,s.jsx)("br",{}),(0,s.jsx)("a",{href:"https://supabase.com/dashboard/project/xrlvfnqnbuwckddrspav/sql/new",target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 underline hover:text-cyan-300 ml-6",children:"â†’ Cliquez ici pour ouvrir directement le SQL Editor"})]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-white",children:"Copiez le script SQL"}),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"ml-6 text-sm",children:["Ouvrez le fichier ",(0,s.jsx)("code",{className:"bg-black/50 px-2 py-1 rounded",children:"supabase_migration.sql"})," dans votre projet"]})]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-white",children:"Collez et exÃ©cutez"}),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"ml-6 text-sm",children:["Collez le script dans l'Ã©diteur SQL et cliquez sur ",(0,s.jsx)("strong",{children:'"Run"'})," (ou Cmd+Enter)"]})]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-white",children:"VÃ©rifiez"}),(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"ml-6 text-sm",children:["Vous devriez voir : ",(0,s.jsx)("span",{className:"text-green-400",children:"âœ… Success. No rows returned"})]})]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-white",children:"Retestez"}),(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"ml-6 text-sm",children:'Revenez ici et cliquez Ã  nouveau sur "Lancer le test"'})]})]}),(0,s.jsx)("div",{className:"mt-4 p-3 bg-blue-500/10 border border-blue-500/50 rounded",children:(0,s.jsxs)("p",{className:"text-blue-300 text-sm",children:["ðŸ’¡ ",(0,s.jsx)("strong",{children:"Astuce"})," : Le guide complet est disponible dans le fichier ",(0,s.jsx)("code",{className:"bg-black/50 px-2 py-1 rounded",children:"GUIDE_SUPABASE.md"})]})})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)("a",{href:"/",className:"text-cyan-400 hover:text-cyan-300 underline",children:"â† Retour Ã  l'application"})})]})})}e.s(["default",()=>n],45944)}]);