(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70606,e=>{"use strict";var t,r,i=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,s=(t=function(e){return i.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&91>e.charCodeAt(2)},r=Object.create(null),function(e){return void 0===r[e]&&(r[e]=t(e)),r[e]});e.s(["default",()=>s],70606)},24627,e=>{"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)};function r(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function s(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>t.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r}function n(e,t,r,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(n<3?s(a):n>3?s(t,r,a):s(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a}function a(e,t){return function(r,i){t(r,i,e)}}function o(e,t,r,i,s,n){function a(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,l=i.kind,u="getter"===l?"get":"setter"===l?"set":"value",c=!t&&e?i.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var m in i)f[m]="access"===m?{}:i[m];for(var m in i.access)f.access[m]=i.access[m];f.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");n.push(a(e||null))};var g=(0,r[p])("accessor"===l?{get:d.get,set:d.set}:d[u],f);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw TypeError("Object expected");(o=a(g.get))&&(d.get=o),(o=a(g.set))&&(d.set=o),(o=a(g.init))&&s.unshift(o)}else(o=a(g))&&("field"===l?s.unshift(o):d[u]=o)}c&&Object.defineProperty(c,i.name,d),h=!0}function l(e,t,r){for(var i=arguments.length>2,s=0;s<t.length;s++)r=i?t[s].call(e,r):t[s].call(e);return i?r:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function c(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,r,i){return new(r||(r=Promise))(function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function o(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})}function p(e,t){var r,i,s,n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){var u=[o,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(s=2&u[0]?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(!(s=(s=n.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){n=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(6===u[0]&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(e){u=[6,e],i=0}finally{r=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}var f=Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]};function m(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||f(t,e,r)}function g(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,s,n=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(e){s={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function b(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),s=0,t=0;t<r;t++)for(var n=arguments[t],a=0,o=n.length;a<o;a++,s++)i[s]=n[a];return i}function w(e,t,r){if(r||2==arguments.length)for(var i,s=0,n=t.length;s<n;s++)!i&&s in t||(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function x(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,s=r.apply(e,t||[]),n=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(e,t){s[e]&&(i[e]=function(t){return new Promise(function(r,i){n.push([e,t,r,i])>1||o(e,t)})},t&&(i[e]=t(i[e])))}function o(e,t){try{var r;(r=s[e](t)).value instanceof _?Promise.resolve(r.value.v).then(l,u):c(n[0][2],r)}catch(e){c(n[0][3],e)}}function l(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),n.shift(),n.length&&o(n[0][0],n[0][1])}}function k(e){var t,r;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,s){t[i]=e[i]?function(t){return(r=!r)?{value:_(e[i](t)),done:!1}:s?s(t):t}:s}}function E(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=g(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,s){var n,a,o;n=i,a=s,o=(t=e[r](t)).done,Promise.resolve(t.value).then(function(e){n({value:e,done:o})},a)})}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var T=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},j=function(e){return(j=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)};function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=j(e),i=0;i<r.length;i++)"default"!==r[i]&&f(t,e,r[i]);return T(t,e),t}function P(e){return e&&e.__esModule?e:{default:e}}function A(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)}function O(e,t,r,i,s){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?s.call(e,r):s?s.value=r:t.set(e,r),r}function R(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function N(e,t,r){if(null!=t){var i,s;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(s=i)}if("function"!=typeof i)throw TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var I="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function L(e){function t(t){e.error=e.hasError?new I(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,i=0;return function s(){for(;r=e.stack.pop();)try{if(!r.async&&1===i)return i=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var n=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(n).then(s,function(e){return t(e),s()})}else i|=1}catch(e){t(e)}if(1===i)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function M(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,i,s,n){return r?t?".jsx":".js":!i||s&&n?i+s+"."+n.toLowerCase()+"js":e}):e}let D={__extends:r,__assign:i,__rest:s,__decorate:n,__param:a,__esDecorate:o,__runInitializers:l,__propKey:u,__setFunctionName:c,__metadata:d,__awaiter:h,__generator:p,__createBinding:f,__exportStar:m,__values:g,__read:y,__spread:v,__spreadArrays:b,__spreadArray:w,__await:_,__asyncGenerator:x,__asyncDelegator:k,__asyncValues:E,__makeTemplateObject:S,__importStar:C,__importDefault:P,__classPrivateFieldGet:A,__classPrivateFieldSet:O,__classPrivateFieldIn:R,__addDisposableResource:N,__disposeResources:L,__rewriteRelativeImportExtension:M};e.s(["__addDisposableResource",()=>N,"__assign",()=>i,"__asyncDelegator",()=>k,"__asyncGenerator",()=>x,"__asyncValues",()=>E,"__await",()=>_,"__awaiter",()=>h,"__classPrivateFieldGet",()=>A,"__classPrivateFieldIn",()=>R,"__classPrivateFieldSet",()=>O,"__createBinding",()=>f,"__decorate",()=>n,"__disposeResources",()=>L,"__esDecorate",()=>o,"__exportStar",()=>m,"__extends",()=>r,"__generator",()=>p,"__importDefault",()=>P,"__importStar",()=>C,"__makeTemplateObject",()=>S,"__metadata",()=>d,"__param",()=>a,"__propKey",()=>u,"__read",()=>y,"__rest",()=>s,"__rewriteRelativeImportExtension",()=>M,"__runInitializers",()=>l,"__setFunctionName",()=>c,"__spread",()=>v,"__spreadArray",()=>w,"__spreadArrays",()=>b,"__values",()=>g,"default",0,D])},89922,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}},34423,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(24627).__importDefault(e.r(89922));r.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!=(t=e.shouldThrowOnError)&&t,this.signal=e.signal,this.isMaybeSingle=null!=(r=e.isMaybeSingle)&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,s,n;let a=null,o=null,l=null,u=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){let r=await e.text();""===r||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null==(t=this.headers.get("Accept"))?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}let i=null==(r=this.headers.get("Prefer"))?void 0:r.match(/count=(exact|planned|estimated)/),n=null==(s=e.headers.get("content-range"))?void 0:s.split("/");i&&n&&n.length>1&&(l=parseInt(n[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,u=406,c="Not Acceptable"):o=1===o.length?o[0]:null)}else{let t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(o=[],a=null,u=200,c="OK")}catch(r){404===e.status&&""===t?(u=204,c="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null==(n=null==a?void 0:a.details)?void 0:n.includes("0 rows"))&&(a=null,u=200,c="OK"),a&&this.shouldThrowOnError)throw new i.default(a)}return{error:a,data:o,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,i,s,n,a;let o="",l=null==e?void 0:e.cause;if(l){let n=null!=(t=null==l?void 0:l.message)?t:"",a=null!=(r=null==l?void 0:l.code)?r:"";o=`${null!=(i=null==e?void 0:e.name)?i:"FetchError"}: ${null==e?void 0:e.message}

Caused by: ${null!=(s=null==l?void 0:l.name)?s:"Error"}: ${n}`,a&&(o+=` (${a})`),(null==l?void 0:l.stack)&&(o+=`
${l.stack}`)}else o=null!=(n=null==e?void 0:e.stack)?n:"";return{error:{message:`${null!=(a=null==e?void 0:e.name)?a:"FetchError"}: ${null==e?void 0:e.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},28431,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(24627).__importDefault(e.r(34423));class s extends i.default{select(e){let t=!1,r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){let n=s?`${s}.order`:"order",a=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let i=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){let s=void 0===i?"offset":`${i}.offset`,n=void 0===i?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(n,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:n="text"}={}){var a;let o=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!=(a=this.headers.get("Accept"))?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}r.default=s},62182,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(24627).__importDefault(e.r(28431)),s=RegExp("[,()]");class n extends i.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&s.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";"plain"===i?s="pl":"phrase"===i?s="ph":"websearch"===i&&(s="w");let n=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}r.default=n},85150,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(24627).__importDefault(e.r(62182));r.default=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(e,t){let{head:r=!1,count:s}=null!=t?t:{},n=!1,a=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new i.default({method:r?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(s=this.fetch)?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){var a;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(a=this.fetch)?a:fetch})}update(e,{count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(r=this.fetch)?r:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!=(t=this.fetch)?t:fetch})}}},27170,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(24627),s=i.__importDefault(e.r(85150)),n=i.__importDefault(e.r(62182));class a{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){if(!e||"string"!=typeof e||""===e.trim())throw Error("Invalid relation name: relation must be a non-empty string.");let t=new URL(`${this.url}/${e}`);return new s.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){var a;let o,l,u=new URL(`${this.url}/rpc/${e}`);r||i?(o=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{u.searchParams.append(e,t)})):(o="POST",l=t);let c=new Headers(this.headers);return s&&c.set("Prefer",`count=${s}`),new n.default({method:o,url:u,headers:c,schema:this.schemaName,body:l,fetch:null!=(a=this.fetch)?a:fetch})}}r.default=a},24674,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PostgrestError=r.PostgrestBuilder=r.PostgrestTransformBuilder=r.PostgrestFilterBuilder=r.PostgrestQueryBuilder=r.PostgrestClient=void 0;let i=e.r(24627),s=i.__importDefault(e.r(27170));r.PostgrestClient=s.default;let n=i.__importDefault(e.r(85150));r.PostgrestQueryBuilder=n.default;let a=i.__importDefault(e.r(62182));r.PostgrestFilterBuilder=a.default;let o=i.__importDefault(e.r(28431));r.PostgrestTransformBuilder=o.default;let l=i.__importDefault(e.r(34423));r.PostgrestBuilder=l.default;let u=i.__importDefault(e.r(89922));r.PostgrestError=u.default,r.default={PostgrestClient:s.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default}},32122,(e,t,r)=>{var i={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],i=t[1];return(r+i)*3/4-i},t.toByteArray=function(e){var t,r,n=l(e),a=n[0],o=n[1],u=new s((a+o)*3/4-o),c=0,d=o>0?a-4:a;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===o&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===o&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,i=e.length,s=i%3,n=[],a=0,o=i-s;a<o;a+=16383)n.push(function(e,t,i){for(var s,n=[],a=t;a<i;a+=3)s=(e[a]<<16&0xff0000)+(e[a+1]<<8&65280)+(255&e[a+2]),n.push(r[s>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return n.join("")}(e,a,a+16383>o?o:a+16383));return 1===s?n.push(r[(t=e[i-1])>>2]+r[t<<4&63]+"=="):2===s&&n.push(r[(t=(e[i-2]<<8)+e[i-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),n.join("")};for(var r=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=n.length;a<o;++a)r[a]=n[a],i[n.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var i=r===t?0:4-r%4;return[r,i]}i[45]=62,i[95]=63},72:function(e,t,r){"use strict";var i=r(675),s=r(783),n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var i=e,s=t;if(("string"!=typeof s||""===s)&&(s="utf8"),!o.isEncoding(s))throw TypeError("Unknown encoding: "+s);var n=0|p(i,s),l=a(n),u=l.write(i,s);return u!==n&&(l=l.slice(0,u)),l}if(ArrayBuffer.isView(e))return d(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(P(e,ArrayBuffer)||e&&P(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(P(e,SharedArrayBuffer)||e&&P(e.buffer,SharedArrayBuffer)))return function(e,t,r){var i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),i}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var c=e.valueOf&&e.valueOf();if(null!=c&&c!==e)return o.from(c,t,r);var f=function(e){if(o.isBuffer(e)){var t=0|h(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(f)return f;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),a(e<0?0:0|h(e))}function d(e){for(var t=e.length<0?0:0|h(e.length),r=a(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return(u(e),e<=0)?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},o.allocUnsafe=function(e){return c(e)},o.allocUnsafeSlow=function(e){return c(e)};function h(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||P(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return S(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(s)return i?-1:S(e).length;t=(""+t).toLowerCase(),s=!0}}function f(e,t,r){var s,n,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var s="",n=t;n<r;++n)s+=A[e[n]];return s}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var s=t;s<r;++s)i+=String.fromCharCode(127&e[s]);return i}(this,t,r);case"latin1":case"binary":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var s=t;s<r;++s)i+=String.fromCharCode(e[s]);return i}(this,t,r);case"base64":return s=this,n=t,a=r,0===n&&a===s.length?i.fromByteArray(s):i.fromByteArray(s.slice(n,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var i=e.slice(t,r),s="",n=0;n<i.length;n+=2)s+=String.fromCharCode(i[n]+256*i[n+1]);return s}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function m(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function g(e,t,r,i,s){var n;if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(n=r*=1)!=n&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(s)return -1;else r=e.length-1;else if(r<0)if(!s)return -1;else r=0;if("string"==typeof t&&(t=o.from(t,i)),o.isBuffer(t))return 0===t.length?-1:y(e,t,r,i,s);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(s)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return y(e,[t],r,i,s)}throw TypeError("val must be string, number or Buffer")}function y(e,t,r,i,s){var n,a=1,o=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;a=2,o/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(s){var c=-1;for(n=r;n<o;n++)if(u(e,n)===u(t,-1===c?0:n-c)){if(-1===c&&(c=n),n-c+1===l)return c*a}else -1!==c&&(n-=n-c),c=-1}else for(r+l>o&&(r=o-l),n=r;n>=0;n--){for(var d=!0,h=0;h<l;h++)if(u(e,n+h)!==u(t,h)){d=!1;break}if(d)return n}return -1}o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(P(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),P(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,s=0,n=Math.min(r,i);s<n;++s)if(e[s]!==t[s]){r=e[s],i=t[s];break}return r<i?-1:+(i<r)},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,i=o.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var n=e[r];if(P(n,Uint8Array)&&(n=o.from(n)),!o.isBuffer(n))throw TypeError('"list" argument must be an Array of Buffers');n.copy(i,s),s+=n.length}return i},o.byteLength=p,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):f.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(e,t,r,i,s){if(P(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),t<0||r>e.length||i<0||s>this.length)throw RangeError("out of range index");if(i>=s&&t>=r)return 0;if(i>=s)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var n=s-i,a=r-t,l=Math.min(n,a),u=this.slice(i,s),c=e.slice(t,r),d=0;d<l;++d)if(u[d]!==c[d]){n=u[d],a=c[d];break}return n<a?-1:+(a<n)},o.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)};function v(e,t,r){r=Math.min(e.length,r);for(var i=[],s=t;s<r;){var n,a,o,l,u=e[s],c=null,d=u>239?4:u>223?3:u>191?2:1;if(s+d<=r)switch(d){case 1:u<128&&(c=u);break;case 2:(192&(n=e[s+1]))==128&&(l=(31&u)<<6|63&n)>127&&(c=l);break;case 3:n=e[s+1],a=e[s+2],(192&n)==128&&(192&a)==128&&(l=(15&u)<<12|(63&n)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:n=e[s+1],a=e[s+2],o=e[s+3],(192&n)==128&&(192&a)==128&&(192&o)==128&&(l=(15&u)<<18|(63&n)<<12|(63&a)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),s+=d}var h=i,p=h.length;if(p<=4096)return String.fromCharCode.apply(String,h);for(var f="",m=0;m<p;)f+=String.fromCharCode.apply(String,h.slice(m,m+=4096));return f}function b(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function w(e,t,r,i,s,n){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<n)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function _(e,t,r,i,s,n){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function x(e,t,r,i,n){return t*=1,r>>>=0,n||_(e,t,r,4,34028234663852886e22,-34028234663852886e22),s.write(e,t,r,i,23,4),r+4}function k(e,t,r,i,n){return t*=1,r>>>=0,n||_(e,t,r,8,17976931348623157e292,-17976931348623157e292),s.write(e,t,r,i,52,8),r+8}o.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s,n,a,o,l,u,c,d,h=this.length-t;if((void 0===r||r>h)&&(r=h),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var p=!1;;)switch(i){case"hex":return function(e,t,r,i){r=Number(r)||0;var s=e.length-r;i?(i=Number(i))>s&&(i=s):i=s;var n=t.length;i>n/2&&(i=n/2);for(var a=0;a<i;++a){var o,l=parseInt(t.substr(2*a,2),16);if((o=l)!=o)break;e[r+a]=l}return a}(this,e,t,r);case"utf8":case"utf-8":return s=t,n=r,C(S(e,this.length-s),this,s,n);case"ascii":return a=t,o=r,C(T(e),this,a,o);case"latin1":case"binary":return function(e,t,r,i){return C(T(t),e,r,i)}(this,e,t,r);case"base64":return l=t,u=r,C(j(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,d=r,C(function(e,t){for(var r,i,s=[],n=0;n<e.length&&!((t-=2)<0);++n)i=(r=e.charCodeAt(n))>>8,s.push(r%256),s.push(i);return s}(e,this.length-c),this,c,d);default:if(p)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),p=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,o.prototype),i},o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var i=this[e],s=1,n=0;++n<t&&(s*=256);)i+=this[e+n]*s;return i},o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var i=this[e+--t],s=1;t>0&&(s*=256);)i+=this[e+--t]*s;return i},o.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var i=this[e],s=1,n=0;++n<t&&(s*=256);)i+=this[e+n]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*t)),i},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var i=t,s=1,n=this[e+--i];i>0&&(s*=256);)n+=this[e+--i]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readInt8=function(e,t){return(e>>>=0,t||b(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),s.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),s.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),s.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),s.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){var s=Math.pow(2,8*r)-1;w(this,e,t,r,s,0)}var n=1,a=0;for(this[t]=255&e;++a<r&&(n*=256);)this[t+a]=e/n&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){var s=Math.pow(2,8*r)-1;w(this,e,t,r,s,0)}var n=r-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,i){if(e*=1,t>>>=0,!i){var s=Math.pow(2,8*r-1);w(this,e,t,r,s-1,-s)}var n=0,a=1,o=0;for(this[t]=255&e;++n<r&&(a*=256);)e<0&&0===o&&0!==this[t+n-1]&&(o=1),this[t+n]=(e/a|0)-o&255;return t+r},o.prototype.writeIntBE=function(e,t,r,i){if(e*=1,t>>>=0,!i){var s=Math.pow(2,8*r-1);w(this,e,t,r,s-1,-s)}var n=r-1,a=1,o=0;for(this[t+n]=255&e;--n>=0&&(a*=256);)e<0&&0===o&&0!==this[t+n+1]&&(o=1),this[t+n]=(e/a|0)-o&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,i){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var s=i-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,i);else if(this===e&&r<t&&t<i)for(var n=s-1;n>=0;--n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),t);return s},o.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){var s,n=e.charCodeAt(0);("utf8"===i&&n<128||"latin1"===i)&&(e=n)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=o.isBuffer(e)?e:o.from(e,i),l=a.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=a[s%l]}return this};var E=/[^+/0-9A-Za-z-_]/g;function S(e,t){t=t||1/0;for(var r,i=e.length,s=null,n=[],a=0;a<i;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!s){if(r>56319||a+1===i){(t-=3)>-1&&n.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&n.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(t-=3)>-1&&n.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;n.push(r)}else if(r<2048){if((t-=2)<0)break;n.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;n.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;n.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return n}function T(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function j(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function C(e,t,r,i){for(var s=0;s<i&&!(s+r>=t.length)&&!(s>=e.length);++s)t[s+r]=e[s];return s}function P(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var A=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var i=16*r,s=0;s<16;++s)t[i+s]=e[r]+e[s];return t}()},783:function(e,t){t.read=function(e,t,r,i,s){var n,a,o=8*s-i-1,l=(1<<o)-1,u=l>>1,c=-7,d=r?s-1:0,h=r?-1:1,p=e[t+d];for(d+=h,n=p&(1<<-c)-1,p>>=-c,c+=o;c>0;n=256*n+e[t+d],d+=h,c-=8);for(a=n&(1<<-c)-1,n>>=-c,c+=i;c>0;a=256*a+e[t+d],d+=h,c-=8);if(0===n)n=1-u;else{if(n===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),n-=u}return(p?-1:1)*a*Math.pow(2,n-i)},t.write=function(e,t,r,i,s,n){var a,o,l,u=8*n-s-1,c=(1<<u)-1,d=c>>1,h=5960464477539062e-23*(23===s),p=i?0:n-1,f=i?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+d>=1?t+=h/l:t+=h*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=c?(o=0,a=c):a+d>=1?(o=(t*l-1)*Math.pow(2,s),a+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,s),a=0));s>=8;e[r+p]=255&o,p+=f,o/=256,s-=8);for(a=a<<s|o,u+=s;u>0;e[r+p]=255&a,p+=f,a/=256,u-=8);e[r+p-f]|=128*m}}},s={};function n(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}},a=!0;try{i[e](r,r.exports,n),a=!1}finally{a&&delete s[e]}return r.exports}n.ab="/ROOT/node_modules/.pnpm/next@16.0.3_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/compiled/buffer/",t.exports=n(72)},22792,(e,t,r)=>{"use strict";let i;Object.defineProperty(r,"__esModule",{value:!0}),r.parseCookie=d,r.parse=d,r.stringifyCookie=function(e,t){let r=t?.encode||encodeURIComponent,i=[];for(let t of Object.keys(e)){let a=e[t];if(void 0===a)continue;if(!s.test(t))throw TypeError(`cookie name is invalid: ${t}`);let o=r(a);if(!n.test(o))throw TypeError(`cookie val is invalid: ${a}`);i.push(`${t}=${o}`)}return i.join("; ")},r.stringifySetCookie=h,r.serialize=h,r.parseSetCookie=function(e,t){let r=t?.decode||g,i=e.length,s=p(e,0,i),n=f(e,0,s),a=-1===n?{name:"",value:r(m(e,0,s))}:{name:m(e,0,n),value:r(m(e,n+1,s))},o=s+1;for(;o<i;){let t=p(e,o,i),r=f(e,o,t),s=-1===r?m(e,o,t):m(e,o,r),n=-1===r?void 0:m(e,r+1,t);switch(s.toLowerCase()){case"httponly":a.httpOnly=!0;break;case"secure":a.secure=!0;break;case"partitioned":a.partitioned=!0;break;case"domain":a.domain=n;break;case"path":a.path=n;break;case"max-age":n&&l.test(n)&&(a.maxAge=Number(n));break;case"expires":if(!n)break;let u=new Date(n);Number.isFinite(u.valueOf())&&(a.expires=u);break;case"priority":if(!n)break;let c=n.toLowerCase();("low"===c||"medium"===c||"high"===c)&&(a.priority=c);break;case"samesite":if(!n)break;let d=n.toLowerCase();("lax"===d||"strict"===d||"none"===d)&&(a.sameSite=d)}o=t+1}return a},r.stringifySetCookie=h,r.serialize=h;let s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,o=/^[\u0020-\u003A\u003D-\u007E]*$/,l=/^-?\d+$/,u=Object.prototype.toString,c=((i=function(){}).prototype=Object.create(null),i);function d(e,t){let r=new c,i=e.length;if(i<2)return r;let s=t?.decode||g,n=0;do{let t=f(e,n,i);if(-1===t)break;let a=p(e,n,i);if(t>a){n=e.lastIndexOf(";",t-1)+1;continue}let o=m(e,n,t);void 0===r[o]&&(r[o]=s(m(e,t+1,a))),n=a+1}while(n<i)return r}function h(e,t,r){let i="object"==typeof e?e:{...r,name:e,value:String(t)},l=("object"==typeof t?t:r)?.encode||encodeURIComponent;if(!s.test(i.name))throw TypeError(`argument name is invalid: ${i.name}`);let c=i.value?l(i.value):"";if(!n.test(c))throw TypeError(`argument val is invalid: ${i.value}`);let d=i.name+"="+c;if(void 0!==i.maxAge){if(!Number.isInteger(i.maxAge))throw TypeError(`option maxAge is invalid: ${i.maxAge}`);d+="; Max-Age="+i.maxAge}if(i.domain){if(!a.test(i.domain))throw TypeError(`option domain is invalid: ${i.domain}`);d+="; Domain="+i.domain}if(i.path){if(!o.test(i.path))throw TypeError(`option path is invalid: ${i.path}`);d+="; Path="+i.path}if(i.expires){var h;if(h=i.expires,"[object Date]"!==u.call(h)||!Number.isFinite(i.expires.valueOf()))throw TypeError(`option expires is invalid: ${i.expires}`);d+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(d+="; HttpOnly"),i.secure&&(d+="; Secure"),i.partitioned&&(d+="; Partitioned"),i.priority)switch("string"==typeof i.priority?i.priority.toLowerCase():void 0){case"low":d+="; Priority=Low";break;case"medium":d+="; Priority=Medium";break;case"high":d+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${i.priority}`)}if(i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"none":d+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${i.sameSite}`)}return d}function p(e,t,r){let i=e.indexOf(";",t);return -1===i?r:i}function f(e,t,r){let i=e.indexOf("=",t);return i<r?i:-1}function m(e,t,r){let i=t,s=r;do{let t=e.charCodeAt(i);if(32!==t&&9!==t)break}while(++i<s)for(;s>i;){let t=e.charCodeAt(s-1);if(32!==t&&9!==t)break;s--}return e.slice(i,s)}function g(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},76156,(e,t,r)=>{},31713,e=>{"use strict";let t,r,i,s,n,a,o,l,u;var c,d,h,p,f,m,g,y,v,b,w,_,x,k,E,S,T,j,C,P,A,O,R,N,I,L,M,D,$,U,B,F,q,V,z=e.i(1972),W=e.i(75305);let H=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],K=new Set(H),G=e=>180*e/Math.PI,J=e=>X(G(Math.atan2(e[1],e[0]))),Y={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:J,rotateZ:J,skewX:e=>G(Math.atan(e[1])),skewY:e=>G(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},X=e=>((e%=360)<0&&(e+=360),e),Q=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Z=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),ee={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Q,scaleY:Z,scale:e=>(Q(e)+Z(e))/2,rotateX:e=>X(G(Math.atan2(e[6],e[5]))),rotateY:e=>X(G(Math.atan2(-e[2],e[0]))),rotateZ:J,rotate:J,skewX:e=>G(Math.atan(e[4])),skewY:e=>G(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function et(e){return+!!e.includes("scale")}function er(e,t){let r,i;if(!e||"none"===e)return et(t);let s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(s)r=ee,i=s;else{let t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Y,i=t}if(!i)return et(t);let n=r[t],a=i[1].split(",").map(ei);return"function"==typeof n?n(a):a[n]}function ei(e){return parseFloat(e.trim())}let es=e=>t=>"string"==typeof t&&t.startsWith(e),en=es("--"),ea=es("var(--"),eo=e=>!!ea(e)&&el.test(e.split("/*")[0].trim()),el=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function eu({top:e,left:t,right:r,bottom:i}){return{x:{min:t,max:r},y:{min:e,max:i}}}let ec=(e,t,r)=>e+(t-e)*r;function ed(e){return void 0===e||1===e}function eh({scale:e,scaleX:t,scaleY:r}){return!ed(e)||!ed(t)||!ed(r)}function ep(e){return eh(e)||ef(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function ef(e){var t,r;return(t=e.x)&&"0%"!==t||(r=e.y)&&"0%"!==r}function em(e,t,r,i,s){return void 0!==s&&(e=i+s*(e-i)),i+r*(e-i)+t}function eg(e,t=0,r=1,i,s){e.min=em(e.min,t,r,i,s),e.max=em(e.max,t,r,i,s)}function ey(e,{x:t,y:r}){eg(e.x,t.translate,t.scale,t.originPoint),eg(e.y,r.translate,r.scale,r.originPoint)}function ev(e,t){e.min=e.min+t,e.max=e.max+t}function eb(e,t,r,i,s=.5){let n=ec(e.min,e.max,s);eg(e,t,r,n,i)}function ew(e,t){eb(e.x,t.x,t.scaleX,t.scale,t.originX),eb(e.y,t.y,t.scaleY,t.scale,t.originY)}function e_(e,t){return eu(function(e,t){if(!t)return e;let r=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}let ex=new Set(["width","height","top","left","right","bottom",...H]),ek=(e,t,r)=>r>t?t:r<e?e:r,eE={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},eS={...eE,transform:e=>ek(0,1,e)},eT={...eE,default:1},ej=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),eC=ej("deg"),eP=ej("%"),eA=ej("px"),eO=ej("vh"),eR=ej("vw"),eN={...eP,parse:e=>eP.parse(e)/100,transform:e=>eP.transform(100*e)},eI=e=>t=>t.test(e),eL=[eE,eA,eP,eC,eR,eO,{test:e=>"auto"===e,parse:e=>e}],eM=e=>eL.find(eI(e));var eD=e.i(60164);let e$=()=>{},eU=()=>{},eB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,eF=e=>e===eE||e===eA,eq=new Set(["x","y","z"]),eV=H.filter(e=>!eq.has(e)),ez={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>er(t,"x"),y:(e,{transform:t})=>er(t,"y")};ez.translateX=ez.x,ez.translateY=ez.y;let eW=e=>e,eH={},eK=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function eG(e,t){let r=!1,i=!0,s={delta:0,timestamp:0,isProcessing:!1},n=()=>r=!0,a=eK.reduce((e,r)=>(e[r]=function(e,t){let r=new Set,i=new Set,s=!1,n=!1,a=new WeakSet,o={delta:0,timestamp:0,isProcessing:!1},l=0;function u(t){a.has(t)&&(c.schedule(t),e()),l++,t(o)}let c={schedule:(e,t=!1,n=!1)=>{let o=n&&s?r:i;return t&&a.add(e),o.has(e)||o.add(e),e},cancel:e=>{i.delete(e),a.delete(e)},process:e=>{if(o=e,s){n=!0;return}s=!0,[r,i]=[i,r],r.forEach(u),t,l=0,r.clear(),s=!1,n&&(n=!1,c.process(e))}};return c}(n,t?r:void 0),e),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:h,render:p,postRender:f}=a,m=()=>{let n=eH.useManualTiming?s.timestamp:performance.now();r=!1,eH.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(n-s.timestamp,40),1)),s.timestamp=n,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),c.process(s),d.process(s),h.process(s),p.process(s),f.process(s),s.isProcessing=!1,r&&t&&(i=!1,e(m))};return{schedule:eK.reduce((t,n)=>{let o=a[n];return t[n]=(t,n=!1,a=!1)=>(!r&&(r=!0,i=!0,s.isProcessing||e(m)),o.schedule(t,n,a)),t},{}),cancel:e=>{for(let t=0;t<eK.length;t++)a[eK[t]].cancel(e)},state:s,steps:a}}let{schedule:eJ,cancel:eY,state:eX,steps:eQ}=eG("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:eW,!0),eZ=new Set,e0=!1,e1=!1,e2=!1;function e5(){if(e1){let e=Array.from(eZ).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{let t,i=(t=[],eV.forEach(r=>{let i=e.getValue(r);void 0!==i&&(t.push([r,i.get()]),i.set(+!!r.startsWith("scale")))}),t);i.length&&(r.set(e,i),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=r.get(e);t&&t.forEach(([t,r])=>{e.getValue(t)?.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}e1=!1,e0=!1,eZ.forEach(e=>e.complete(e2)),eZ.clear()}function e3(){eZ.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(e1=!0)})}class e4{constructor(e,t,r,i,s,n=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=n}scheduleResolve(){this.state="scheduled",this.isAsync?(eZ.add(this),e0||(e0=!0,eJ.read(e3),eJ.resolveKeyframes(e5))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(null===e[0]){let s=i?.get(),n=e[e.length-1];if(void 0!==s)e[0]=s;else if(r&&t){let i=r.readValue(t,n);null!=i&&(e[0]=i)}void 0===e[0]&&(e[0]=n),i&&void 0===s&&i.set(e[0])}for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),eZ.delete(this)}cancel(){"scheduled"===this.state&&(eZ.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}let e6=e=>Math.round(1e5*e)/1e5,e8=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,e9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,e7=(e,t)=>r=>!!("string"==typeof r&&e9.test(r)&&r.startsWith(e)||t&&null!=r&&Object.prototype.hasOwnProperty.call(r,t)),te=(e,t,r)=>i=>{if("string"!=typeof i)return i;let[s,n,a,o]=i.match(e8);return{[e]:parseFloat(s),[t]:parseFloat(n),[r]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},tt={...eE,transform:e=>Math.round(ek(0,255,e))},tr={test:e7("rgb","red"),parse:te("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:i=1})=>"rgba("+tt.transform(e)+", "+tt.transform(t)+", "+tt.transform(r)+", "+e6(eS.transform(i))+")"},ti={test:e7("#"),parse:function(e){let t="",r="",i="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),i=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),i=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}},transform:tr.transform},ts={test:e7("hsl","hue"),parse:te("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:i=1})=>"hsla("+Math.round(e)+", "+eP.transform(e6(t))+", "+eP.transform(e6(r))+", "+e6(eS.transform(i))+")"},tn={test:e=>tr.test(e)||ti.test(e)||ts.test(e),parse:e=>tr.test(e)?tr.parse(e):ts.test(e)?ts.parse(e):ti.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?tr.transform(e):ts.transform(e),getAnimatableNone:e=>{let t=tn.parse(e);return t.alpha=0,tn.transform(t)}},ta=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,to="number",tl="color",tu=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tc(e){let t=e.toString(),r=[],i={color:[],number:[],var:[]},s=[],n=0,a=t.replace(tu,e=>(tn.test(e)?(i.color.push(n),s.push(tl),r.push(tn.parse(e))):e.startsWith("var(")?(i.var.push(n),s.push("var"),r.push(e)):(i.number.push(n),s.push(to),r.push(parseFloat(e))),++n,"${}")).split("${}");return{values:r,split:a,indexes:i,types:s}}function td(e){return tc(e).values}function th(e){let{split:t,types:r}=tc(e),i=t.length;return e=>{let s="";for(let n=0;n<i;n++)if(s+=t[n],void 0!==e[n]){let t=r[n];t===to?s+=e6(e[n]):t===tl?s+=tn.transform(e[n]):s+=e[n]}return s}}let tp=e=>"number"==typeof e?0:tn.test(e)?tn.getAnimatableNone(e):e,tf={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(e8)?.length||0)+(e.match(ta)?.length||0)>0},parse:td,createTransformer:th,getAnimatableNone:function(e){let t=td(e);return th(e)(t.map(tp))}},tm=new Set(["brightness","contrast","saturate","opacity"]);function tg(e){let[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[i]=r.match(e8)||[];if(!i)return e;let s=r.replace(i,""),n=+!!tm.has(t);return i!==r&&(n*=100),t+"("+n+s+")"}let ty=/\b([a-z-]*)\(.*?\)/gu,tv={...tf,getAnimatableNone:e=>{let t=e.match(ty);return t?t.map(tg).join(" "):e}},tb={...eE,transform:Math.round},tw={borderWidth:eA,borderTopWidth:eA,borderRightWidth:eA,borderBottomWidth:eA,borderLeftWidth:eA,borderRadius:eA,radius:eA,borderTopLeftRadius:eA,borderTopRightRadius:eA,borderBottomRightRadius:eA,borderBottomLeftRadius:eA,width:eA,maxWidth:eA,height:eA,maxHeight:eA,top:eA,right:eA,bottom:eA,left:eA,padding:eA,paddingTop:eA,paddingRight:eA,paddingBottom:eA,paddingLeft:eA,margin:eA,marginTop:eA,marginRight:eA,marginBottom:eA,marginLeft:eA,backgroundPositionX:eA,backgroundPositionY:eA,rotate:eC,rotateX:eC,rotateY:eC,rotateZ:eC,scale:eT,scaleX:eT,scaleY:eT,scaleZ:eT,skew:eC,skewX:eC,skewY:eC,distance:eA,translateX:eA,translateY:eA,translateZ:eA,x:eA,y:eA,z:eA,perspective:eA,transformPerspective:eA,opacity:eS,originX:eN,originY:eN,originZ:eA,zIndex:tb,fillOpacity:eS,strokeOpacity:eS,numOctaves:tb},t_={...tw,color:tn,backgroundColor:tn,outlineColor:tn,fill:tn,stroke:tn,borderColor:tn,borderTopColor:tn,borderRightColor:tn,borderBottomColor:tn,borderLeftColor:tn,filter:tv,WebkitFilter:tv},tx=e=>t_[e];function tk(e,t){let r=tx(e);return r!==tv&&(r=tf),r.getAnimatableNone?r.getAnimatableNone(t):void 0}let tE=new Set(["auto","none","0"]);class tS extends e4{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let r=0;r<e.length;r++){let i=e[r];if("string"==typeof i&&eo(i=i.trim())){let s=function e(t,r,i=1){eU(i<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");let[s,n]=function(e){let t=eB.exec(e);if(!t)return[,];let[,r,i,s]=t;return[`--${r??i}`,s]}(t);if(!s)return;let a=window.getComputedStyle(r).getPropertyValue(s);if(a){let e=a.trim();return/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e)?parseFloat(e):e}return eo(n)?e(n,r,i+1):n}(i,t.current);void 0!==s&&(e[r]=s),r===e.length-1&&(this.finalKeyframe=i)}}if(this.resolveNoneKeyframes(),!ex.has(r)||2!==e.length)return;let[i,s]=e,n=eM(i),a=eM(s);if(n!==a)if(eF(n)&&eF(a))for(let t=0;t<e.length;t++){let r=e[t];"string"==typeof r&&(e[t]=parseFloat(r))}else ez[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,r=[];for(let t=0;t<e.length;t++)(null===e[t]||function(e){if("number"==typeof e)return 0===e;if(null===e)return!0;return"none"===e||"0"===e||/^0[^.\s]+$/u.test(e)}(e[t]))&&r.push(t);r.length&&function(e,t,r){let i,s=0;for(;s<e.length&&!i;){let t=e[s];"string"==typeof t&&!tE.has(t)&&tc(t).values.length&&(i=e[s]),s++}if(i&&r)for(let s of t)e[s]=tk(r,i)}(e,r,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ez[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let i=t[t.length-1];void 0!==i&&e.getValue(r,i).jump(i,!1)}measureEndState(){let{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;let i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);let s=r.length-1,n=r[s];r[s]=ez[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==n&&void 0===this.finalKeyframe&&(this.finalKeyframe=n),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,r])=>{e.getValue(t).set(r)}),this.resolveNoneKeyframes()}}let tT=e=>!!(e&&e.getVelocity);function tj(){t=void 0}let tC={now:()=>(void 0===t&&tC.set(eX.isProcessing||eH.useManualTiming?eX.timestamp:performance.now()),t),set:e=>{t=e,queueMicrotask(tj)}};function tP(e,t){-1===e.indexOf(t)&&e.push(t)}function tA(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}class tO{constructor(){this.subscriptions=[]}add(e){return tP(this.subscriptions,e),()=>tA(this.subscriptions,e)}notify(e,t,r){let i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){let i=this.subscriptions[s];i&&i(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}class tR{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{let t=tC.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let e of this.dependents)e.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=tC.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new tO);let r=this.events[e].add(t);return"change"===e?()=>{r(),eJ.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return l&&l.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=tC.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let r=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),r?1e3/r*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tN(e,t){return new tR(e,t)}let tI=[...eL,tn,tf],{schedule:tL}=eG(queueMicrotask,!1),tM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tD={};for(let e in tM)tD[e]={isEnabled:t=>tM[e].some(e=>!!t[e])};let t$=()=>({translate:0,scale:1,origin:0,originPoint:0}),tU=()=>({x:t$(),y:t$()}),tB=()=>({min:0,max:0}),tF=()=>({x:tB(),y:tB()}),tq="undefined"!=typeof window,tV={current:null},tz={current:!1},tW=new WeakMap;function tH(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function tK(e){return"string"==typeof e||Array.isArray(e)}let tG=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tJ=["initial",...tG];function tY(e){return tH(e.animate)||tJ.some(t=>tK(e[t]))}function tX(e){return!!(tY(e)||e.variants)}function tQ(e){let t=[{},{}];return e?.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function tZ(e,t,r,i){if("function"==typeof t){let[s,n]=tQ(i);t=t(void 0!==r?r:e.custom,s,n)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[s,n]=tQ(i);t=t(void 0!==r?r:e.custom,s,n)}return t}let t0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class t1{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:n},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=e4,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=tC.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,eJ.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=n;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=tY(t),this.isVariantNode=tX(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(t,{},this);for(const e in c){const t=c[e];void 0!==o[e]&&tT(t)&&t.set(o[e])}}mount(e){this.current=e,tW.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),tz.current||function(){if(tz.current=!0,tq)if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>tV.current=e.matches;e.addEventListener("change",t),t()}else tV.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||tV.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in this.projection&&this.projection.unmount(),eY(this.notifyUpdate),eY(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){let r;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let i=K.has(e);i&&this.onBindTransform&&this.onBindTransform();let s=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&eJ.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in tD){let t=tD[e];if(!t)continue;let{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tF()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<t0.length;t++){let r=t0[t];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);let i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=function(e,t,r){for(let i in t){let s=t[i],n=r[i];if(tT(s))e.addValue(i,s);else if(tT(n))e.addValue(i,tN(s,{owner:e}));else if(n!==s)if(e.hasValue(i)){let t=e.getValue(i);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{let t=e.getStaticValue(i);e.addValue(i,tN(void 0!==t?t:s,{owner:e}))}}for(let i in r)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=tN(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];if(null!=r){let i,s;if("string"==typeof r&&(i=r,/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i)||(s=r,/^0[^.\s]+$/u.test(s))))r=parseFloat(r);else{let i;i=r,!tI.find(eI(i))&&tf.test(t)&&(r=tk(e,t))}this.setBaseTarget(e,tT(r)?r.get():r)}return tT(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let t,{initial:r}=this.props;if("string"==typeof r||"object"==typeof r){let i=tZ(this.props,r,this.presenceContext?.custom);i&&(t=i[e])}if(r&&void 0!==t)return t;let i=this.getBaseTargetFromProps(this.props,e);return void 0===i||tT(i)?void 0!==this.initialValues[e]&&void 0===t?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new tO),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){tL.render(this.render)}}class t2 extends t1{constructor(){super(...arguments),this.KeyframeResolver=tS}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;tT(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}let t5=(e,t)=>t&&"number"==typeof e?t.transform(e):e,t3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},t4=H.length;function t6(e,t,r){let{style:i,vars:s,transformOrigin:n}=e,a=!1,o=!1;for(let e in t){let r=t[e];if(K.has(e)){a=!0;continue}if(en(e)){s[e]=r;continue}{let t=t5(r,tw[e]);e.startsWith("origin")?(o=!0,n[e]=t):i[e]=t}}if(!t.transform&&(a||r?i.transform=function(e,t,r){let i="",s=!0;for(let n=0;n<t4;n++){let a=H[n],o=e[a];if(void 0===o)continue;let l=!0;if(!(l="number"==typeof o?o===+!!a.startsWith("scale"):0===parseFloat(o))||r){let e=t5(o,tw[a]);if(!l){s=!1;let t=t3[a]||a;i+=`${t}(${e}) `}r&&(t[a]=e)}}return i=i.trim(),r?i=r(t,s?"":i):s&&(i="none"),i}(t,e.transform,r):i.transform&&(i.transform="none")),o){let{originX:e="50%",originY:t="50%",originZ:r=0}=n;i.transformOrigin=`${e} ${t} ${r}`}}function t8(e,{style:t,vars:r},i,s){let n,a=e.style;for(n in t)a[n]=t[n];for(n in s?.applyProjectionStyles(a,i),r)a.setProperty(n,r[n])}let t9={};function t7(e,{layout:t,layoutId:r}){return K.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!t9[e]||"opacity"===e)}function re(e,t,r){let{style:i}=e,s={};for(let n in i)(tT(i[n])||t.style&&tT(t.style[n])||t7(n,e)||r?.getValue(n)?.liveStyle!==void 0)&&(s[n]=i[n]);return s}class rt extends t2{constructor(){super(...arguments),this.type="html",this.renderInstance=t8}readValueFromInstance(e,t){if(K.has(t))return this.projection?.isProjecting?et(t):((e,t)=>{let{transform:r="none"}=getComputedStyle(e);return er(r,t)})(e,t);{let r=window.getComputedStyle(e),i=(en(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof i?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return e_(e,t)}build(e,t,r){t6(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return re(e,t,r)}}let rr=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ri={offset:"stroke-dashoffset",array:"stroke-dasharray"},rs={offset:"strokeDashoffset",array:"strokeDasharray"};function rn(e,{attrX:t,attrY:r,attrScale:i,pathLength:s,pathSpacing:n=1,pathOffset:a=0,...o},l,u,c){if(t6(e,o,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:d,style:h}=e;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=c?.transformBox??"fill-box",delete d.transformBox),void 0!==t&&(d.x=t),void 0!==r&&(d.y=r),void 0!==i&&(d.scale=i),void 0!==s&&function(e,t,r=1,i=0,s=!0){e.pathLength=1;let n=s?ri:rs;e[n.offset]=eA.transform(-i);let a=eA.transform(t),o=eA.transform(r);e[n.array]=`${a} ${o}`}(d,s,n,a,!1)}let ra=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),ro=e=>"string"==typeof e&&"svg"===e.toLowerCase();function rl(e,t,r){let i=re(e,t,r);for(let r in e)(tT(e[r])||tT(t[r]))&&(i[-1!==H.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]);return i}class ru extends t2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tF}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(K.has(t)){let e=tx(t);return e&&e.default||0}return t=ra.has(t)?t:rr(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return rl(e,t,r)}build(e,t,r){rn(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){for(let r in t8(e,t,void 0,i),t.attrs)e.setAttribute(ra.has(r)?r:rr(r),t.attrs[r])}mount(e){this.isSVGTag=ro(e.tagName),super.mount(e)}}let rc=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rd(e){if("string"!=typeof e||e.includes("-"));else if(rc.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}let rh=(0,W.createContext)({}),rp=(0,W.createContext)({strict:!1}),rf=(0,W.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),rm=(0,W.createContext)({});function rg(e){return Array.isArray(e)?e.join(" "):e}let ry=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rv(e,t,r){for(let i in t)tT(t[i])||t7(i,r)||(e[i]=t[i])}let rb=()=>({...ry(),attrs:{}}),rw=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function r_(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||rw.has(e)}let rx=e=>!r_(e);try{c=e.r(70606).default,"function"==typeof c&&(rx=e=>e.startsWith("on")?!r_(e):c(e))}catch{}let rk=(0,W.createContext)(null);function rE(e){let t=(0,W.useRef)(null);return null===t.current&&(t.current=e()),t.current}function rS(e){return tT(e)?e.get():e}let rT=e=>(t,r)=>{let i=(0,W.useContext)(rm),s=(0,W.useContext)(rk),n=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t},r,i,s){return{latestValues:function(e,t,r,i){let s={},n=i(e,{});for(let e in n)s[e]=rS(n[e]);let{initial:a,animate:o}=e,l=tY(e),u=tX(e);t&&u&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let c=!!r&&!1===r.initial,d=(c=c||!1===a)?o:a;if(d&&"boolean"!=typeof d&&!tH(d)){let t=Array.isArray(d)?d:[d];for(let r=0;r<t.length;r++){let i=tZ(e,t[r]);if(i){let{transitionEnd:e,transition:t,...r}=i;for(let e in r){let t=r[e];if(Array.isArray(t)){let e=c?t.length-1:0;t=t[e]}null!==t&&(s[e]=t)}for(let t in e)s[t]=e[t]}}}return s}(r,i,s,e),renderState:t()}})(e,t,i,s);return r?n():rE(n)},rj=rT({scrapeMotionValuesFromProps:re,createRenderState:ry}),rC=rT({scrapeMotionValuesFromProps:rl,createRenderState:rb}),rP=Symbol.for("motionComponentSymbol");function rA(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}let rO="data-"+rr("framerAppearId"),rR=(0,W.createContext)({}),rN=tq?W.useLayoutEffect:W.useEffect;function rI(e,{forwardMotionProps:t=!1}={},r,i){r&&function(e){for(let t in e)tD[t]={...tD[t],...e[t]}}(r);let s=rd(e)?rC:rj;function n(r,n){var a;let o,l={...(0,W.useContext)(rf),...r,layoutId:function({layoutId:e}){let t=(0,W.useContext)(rh).id;return t&&void 0!==e?t+"-"+e:e}(r)},{isStatic:u}=l,c=function(e){let{initial:t,animate:r}=function(e,t){if(tY(e)){let{initial:t,animate:r}=e;return{initial:!1===t||tK(t)?t:void 0,animate:tK(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,W.useContext)(rm));return(0,W.useMemo)(()=>({initial:t,animate:r}),[rg(t),rg(r)])}(r),d=s(r,u);if(!u&&tq){(0,W.useContext)(rp).strict;let t=function(e){let{drag:t,layout:r}=tD;if(!t&&!r)return{};let i={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(l);o=t.MeasureLayout,c.visualElement=function(e,t,r,i,s){let{visualElement:n}=(0,W.useContext)(rm),a=(0,W.useContext)(rp),o=(0,W.useContext)(rk),l=(0,W.useContext)(rf).reducedMotion,u=(0,W.useRef)(null);i=i||a.renderer,!u.current&&i&&(u.current=i(e,{visualState:t,parent:n,props:r,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));let c=u.current,d=(0,W.useContext)(rR);c&&!c.projection&&s&&("html"===c.type||"svg"===c.type)&&function(e,t,r,i){let{layoutId:s,layout:n,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:s,layout:n,alwaysMeasureLayout:!!a||o&&rA(o),visualElement:e,animationType:"string"==typeof n?n:"both",initialPromotionConfig:i,crossfade:c,layoutScroll:l,layoutRoot:u})}(u.current,r,s,d);let h=(0,W.useRef)(!1);(0,W.useInsertionEffect)(()=>{c&&h.current&&c.update(r,o)});let p=r[rO],f=(0,W.useRef)(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return rN(()=>{c&&(h.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),f.current&&c.animationState&&c.animationState.animateChanges())}),(0,W.useEffect)(()=>{c&&(!f.current&&c.animationState&&c.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),f.current=!1),c.enteringChildren=void 0)}),c}(e,d,l,i,t.ProjectionNode)}return(0,z.jsxs)(rm.Provider,{value:c,children:[o&&c.visualElement?(0,z.jsx)(o,{visualElement:c.visualElement,...l}):null,function(e,t,r,{latestValues:i},s,n=!1){let a=(rd(e)?function(e,t,r,i){let s=(0,W.useMemo)(()=>{let r=rb();return rn(r,t,ro(i),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){let t={};rv(t,e.style,e),s.style={...t,...s.style}}return s}:function(e,t){let r,i,s={},n=(r=e.style||{},rv(i={},r,e),Object.assign(i,function({transformTemplate:e},t){return(0,W.useMemo)(()=>{let r=ry();return t6(r,t,e),Object.assign({},r.vars,r.style)},[t])}(e,t)),i);return e.drag&&!1!==e.dragListener&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=n,s})(t,i,s,e),o=function(e,t,r){let i={};for(let s in e)("values"!==s||"object"!=typeof e.values)&&(rx(s)||!0===r&&r_(s)||!t&&!r_(s)||e.draggable&&s.startsWith("onDrag"))&&(i[s]=e[s]);return i}(t,"string"==typeof e,n),l=e!==W.Fragment?{...o,...a,ref:r}:{},{children:u}=t,c=(0,W.useMemo)(()=>tT(u)?u.get():u,[u]);return(0,W.createElement)(e,{...l,children:c})}(e,r,(a=c.visualElement,(0,W.useCallback)(e=>{e&&d.onMount&&d.onMount(e),a&&(e?a.mount(e):a.unmount()),n&&("function"==typeof n?n(e):rA(n)&&(n.current=e))},[a])),d,u,t)]})}n.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;let a=(0,W.forwardRef)(n);return a[rP]=e,a}function rL(e,t,r){let i=e.getProps();return tZ(i,t,void 0!==r?r:i.custom,e)}function rM(e,t){return e?.[t]??e?.default??e}let rD=e=>Array.isArray(e);function r$(e,t){let r=e.getValue("willChange");if(tT(r)&&r.add)return r.add(t);if(!r&&eH.WillChange){let r=new eH.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function rU(e){e.duration=0,e.type="keyframes"}let rB=(e,t)=>r=>t(e(r)),rF=(...e)=>e.reduce(rB),rq=e=>1e3*e,rV={layout:0,mainThread:0,waapi:0};function rz(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function rW(e,t){return r=>r>0?t:e}let rH=(e,t,r)=>{let i=e*e,s=r*(t*t-i)+i;return s<0?0:Math.sqrt(s)},rK=[ti,tr,ts];function rG(e){let t=rK.find(t=>t.test(e));if(e$(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let r=t.parse(e);return t===ts&&(r=function({hue:e,saturation:t,lightness:r,alpha:i}){e/=360,r/=100;let s=0,n=0,a=0;if(t/=100){let i=r<.5?r*(1+t):r+t-r*t,o=2*r-i;s=rz(o,i,e+1/3),n=rz(o,i,e),a=rz(o,i,e-1/3)}else s=n=a=r;return{red:Math.round(255*s),green:Math.round(255*n),blue:Math.round(255*a),alpha:i}}(r)),r}let rJ=(e,t)=>{let r=rG(e),i=rG(t);if(!r||!i)return rW(e,t);let s={...r};return e=>(s.red=rH(r.red,i.red,e),s.green=rH(r.green,i.green,e),s.blue=rH(r.blue,i.blue,e),s.alpha=ec(r.alpha,i.alpha,e),tr.transform(s))},rY=new Set(["none","hidden"]);function rX(e,t){return r=>ec(e,t,r)}function rQ(e){return"number"==typeof e?rX:"string"==typeof e?eo(e)?rW:tn.test(e)?rJ:r1:Array.isArray(e)?rZ:"object"==typeof e?tn.test(e)?rJ:r0:rW}function rZ(e,t){let r=[...e],i=r.length,s=e.map((e,r)=>rQ(e)(e,t[r]));return e=>{for(let t=0;t<i;t++)r[t]=s[t](e);return r}}function r0(e,t){let r={...e,...t},i={};for(let s in r)void 0!==e[s]&&void 0!==t[s]&&(i[s]=rQ(e[s])(e[s],t[s]));return e=>{for(let t in i)r[t]=i[t](e);return r}}let r1=(e,t)=>{let r=tf.createTransformer(t),i=tc(e),s=tc(t);if(!(i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length))return e$(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),rW(e,t);if(rY.has(e)&&!s.values.length||rY.has(t)&&!i.values.length)return rY.has(e)?r=>r<=0?e:t:r=>r>=1?t:e;return rF(rZ(function(e,t){let r=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){let n=t.types[s],a=e.indexes[n][i[n]],o=e.values[a]??0;r[s]=o,i[n]++}return r}(i,s),s.values),r)};function r2(e,t,r){return"number"==typeof e&&"number"==typeof t&&"number"==typeof r?ec(e,t,r):rQ(e)(e,t)}let r5=e=>{let t=({timestamp:t})=>e(t);return{start:(e=!0)=>eJ.update(t,e),stop:()=>eY(t),now:()=>eX.isProcessing?eX.timestamp:tC.now()}},r3=(e,t,r=10)=>{let i="",s=Math.max(Math.round(t/r),2);for(let t=0;t<s;t++)i+=Math.round(1e4*e(t/(s-1)))/1e4+", ";return`linear(${i.substring(0,i.length-2)})`};function r4(e){let t=0,r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}function r6(e,t,r){var i,s;let n=Math.max(t-5,0);return i=r-e(n),(s=t-n)?1e3/s*i:0}let r8=.01,r9=2,r7=.005,ie=.5;function it(e,t){return e*Math.sqrt(1-t*t)}let ir=["duration","bounce"],ii=["stiffness","damping","mass"];function is(e,t){return t.some(t=>void 0!==e[t])}function ia(e=.3,t=.3){let r,i="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:s,restDelta:n}=i,a=i.keyframes[0],o=i.keyframes[i.keyframes.length-1],l={done:!1,value:a},{stiffness:u,damping:c,mass:d,duration:h,velocity:p,isResolvedFromDuration:f}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!is(e,ii)&&is(e,ir))if(e.visualDuration){let r=2*Math.PI/(1.2*e.visualDuration),i=r*r,s=2*ek(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:1,stiffness:i,damping:s}}else{let r=function({duration:e=800,bounce:t=.3,velocity:r=0,mass:i=1}){let s,n;e$(e<=rq(10),"Spring duration must be 10 seconds or less","spring-duration-limit");let a=1-t;a=ek(.05,1,a),e=ek(.01,10,e/1e3),a<1?(s=t=>{let i=t*a,s=i*e;return .001-(i-r)/it(t,a)*Math.exp(-s)},n=t=>{let i=t*a*e,n=Math.pow(a,2)*Math.pow(t,2)*e,o=Math.exp(-i),l=it(Math.pow(t,2),a);return(i*r+r-n)*o*(-s(t)+.001>0?-1:1)/l}):(s=t=>-.001+Math.exp(-t*e)*((t-r)*e+1),n=t=>e*e*(r-t)*Math.exp(-t*e));let o=function(e,t,r){let i=r;for(let r=1;r<12;r++)i-=e(i)/t(i);return i}(s,n,5/e);if(e=rq(e),isNaN(o))return{stiffness:100,damping:10,duration:e};{let t=Math.pow(o,2)*i;return{stiffness:t,damping:2*a*Math.sqrt(i*t),duration:e}}}(e);(t={...t,...r,mass:1}).isResolvedFromDuration=!0}return t}({...i,velocity:-((i.velocity||0)/1e3)}),m=p||0,g=c/(2*Math.sqrt(u*d)),y=o-a,v=Math.sqrt(u/d)/1e3,b=5>Math.abs(y);if(s||(s=b?r8:r9),n||(n=b?r7:ie),g<1){let e=it(v,g);r=t=>o-Math.exp(-g*v*t)*((m+g*v*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}else if(1===g)r=e=>o-Math.exp(-v*e)*(y+(m+v*y)*e);else{let e=v*Math.sqrt(g*g-1);r=t=>{let r=Math.exp(-g*v*t),i=Math.min(e*t,300);return o-r*((m+g*v*y)*Math.sinh(i)+e*y*Math.cosh(i))/e}}let w={calculatedDuration:f&&h||null,next:e=>{let t=r(e);if(f)l.done=e>=h;else{let i=0===e?m:0;g<1&&(i=0===e?rq(m):r6(r,e,t));let a=Math.abs(o-t)<=n;l.done=Math.abs(i)<=s&&a}return l.value=l.done?o:t,l},toString:()=>{let e=Math.min(r4(w),2e4),t=r3(t=>w.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return w}function io({keyframes:e,velocity:t=0,power:r=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:n=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){let d,h,p=e[0],f={done:!1,value:p},m=r*t,g=p+m,y=void 0===a?g:a(g);y!==g&&(m=y-p);let v=e=>-m*Math.exp(-e/i),b=e=>y+v(e),w=e=>{let t=v(e),r=b(e);f.done=Math.abs(t)<=u,f.value=f.done?y:r},_=e=>{let t;if(t=f.value,void 0!==o&&t<o||void 0!==l&&t>l){var r;d=e,h=ia({keyframes:[f.value,(r=f.value,void 0===o?l:void 0===l||Math.abs(o-r)<Math.abs(l-r)?o:l)],velocity:r6(b,e,f.value),damping:s,stiffness:n,restDelta:u,restSpeed:c})}};return _(0),{calculatedDuration:null,next:e=>{let t=!1;return(h||void 0!==d||(t=!0,w(e),_(e)),void 0!==d&&e>=d)?h.next(e-d):(t||w(e),f)}}}ia.applyToOptions=e=>{let t=function(e,t=100,r){let i=r({...e,keyframes:[0,t]}),s=Math.min(r4(i),2e4);return{type:"keyframes",ease:e=>i.next(s*e).value/t,duration:s/1e3}}(e,100,ia);return e.ease=t.ease,e.duration=rq(t.duration),e.type="keyframes",e};let il=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function iu(e,t,r,i){return e===t&&r===i?eW:s=>0===s||1===s?s:il(function(e,t,r,i,s){let n,a,o=0;do(n=il(a=t+(r-t)/2,i,s)-e)>0?r=a:t=a;while(Math.abs(n)>1e-7&&++o<12)return a}(s,0,1,e,r),t,i)}let ic=iu(.42,0,1,1),id=iu(0,0,.58,1),ih=iu(.42,0,.58,1),ip=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,im=e=>t=>1-e(1-t),ig=iu(.33,1.53,.69,.99),iy=im(ig),iv=ip(iy),ib=e=>(e*=2)<1?.5*iy(e):.5*(2-Math.pow(2,-10*(e-1))),iw=e=>1-Math.sin(Math.acos(e)),i_=im(iw),ix=ip(iw),ik=e=>Array.isArray(e)&&"number"==typeof e[0],iE={linear:eW,easeIn:ic,easeInOut:ih,easeOut:id,circIn:iw,circInOut:ix,circOut:i_,backIn:iy,backInOut:iv,backOut:ig,anticipate:ib},iS=e=>{if(ik(e)){eU(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[t,r,i,s]=e;return iu(t,r,i,s)}return"string"==typeof e?(eU(void 0!==iE[e],`Invalid easing type '${e}'`,"invalid-easing-type"),iE[e]):e},iT=(e,t,r)=>{let i=t-e;return 0===i?1:(r-e)/i};function ij({duration:e=300,keyframes:t,times:r,ease:i="easeInOut"}){var s;let n,a=Array.isArray(i)&&"number"!=typeof i[0]?i.map(iS):iS(i),o={done:!1,value:t[0]},l=function(e,t,{clamp:r=!0,ease:i,mixer:s}={}){let n=e.length;if(eU(n===t.length,"Both input and output ranges must be the same length","range-length"),1===n)return()=>t[0];if(2===n&&t[0]===t[1])return()=>t[1];let a=e[0]===e[1];e[0]>e[n-1]&&(e=[...e].reverse(),t=[...t].reverse());let o=function(e,t,r){let i=[],s=r||eH.mix||r2,n=e.length-1;for(let r=0;r<n;r++){let n=s(e[r],e[r+1]);t&&(n=rF(Array.isArray(t)?t[r]||eW:t,n)),i.push(n)}return i}(t,i,s),l=o.length,u=r=>{if(a&&r<e[0])return t[0];let i=0;if(l>1)for(;i<e.length-2&&!(r<e[i+1]);i++);let s=iT(e[i],e[i+1],r);return o[i](s)};return r?t=>u(ek(e[0],e[n-1],t)):u}((s=r&&r.length===t.length?r:(!function(e,t){let r=e[e.length-1];for(let i=1;i<=t;i++){let s=iT(0,t,i);e.push(ec(r,1,s))}}(n=[0],t.length-1),n),s.map(t=>t*e)),t,{ease:Array.isArray(a)?a:t.map(()=>a||ih).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(o.value=l(t),o.done=t>=e,o)}}let iC=e=>null!==e;function iP(e,{repeat:t,repeatType:r="loop"},i,s=1){let n=e.filter(iC),a=s<0||t&&"loop"!==r&&t%2==1?0:n.length-1;return a&&void 0!==i?i:n[a]}let iA={decay:io,inertia:io,tween:ij,keyframes:ij,spring:ia};function iO(e){"string"==typeof e.type&&(e.type=iA[e.type])}class iR{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}let iN=e=>e/100;class iI extends iR{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:e}=this.options;e&&e.updatedAt!==tC.now()&&this.tick(tC.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},rV.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){let{options:e}=this;iO(e);let{type:t=ij,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:n=0}=e,{keyframes:a}=e,o=t||ij;o!==ij&&"number"!=typeof a[0]&&(this.mixKeyframes=rF(iN,r2(a[0],a[1])),a=[0,100]);let l=o({...e,keyframes:a});"mirror"===s&&(this.mirroredGenerator=o({...e,keyframes:[...a].reverse(),velocity:-n})),null===l.calculatedDuration&&(l.calculatedDuration=r4(l));let{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=l}updateTime(e){let t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){let{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:n,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return r.next(0);let{delay:l=0,keyframes:u,repeat:c,repeatType:d,repeatDelay:h,type:p,onUpdate:f,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);let g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=i);let v=this.currentTime,b=r;if(c){let e=Math.min(this.currentTime,i)/a,t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,(t=Math.min(t,c+1))%2&&("reverse"===d?(r=1-r,h&&(r-=h/a)):"mirror"===d&&(b=n)),v=ek(0,1,r)*a}let w=y?{done:!1,value:u[0]}:b.next(v);s&&(w.value=s(w.value));let{done:_}=w;y||null===o||(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);let x=null===this.holdTime&&("finished"===this.state||"running"===this.state&&_);return x&&p!==io&&(w.value=iP(u,this.options,m,this.speed)),f&&f(w.value),x&&this.finish(),w}then(e,t){return this.finished.then(e,t)}get duration(){return this.calculatedDuration/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return this.currentTime/1e3}set time(e){e=rq(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(tC.now());let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=this.currentTime/1e3)}play(){if(this.isStopped)return;let{driver:e=r5,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();let r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(tC.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,rV.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function iL(e){let t;return()=>(void 0===t&&(t=e()),t)}let iM=iL(()=>void 0!==window.ScrollTimeline),iD={},i$=(i=iL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),()=>iD.linearEasing??i()),iU=([e,t,r,i])=>`cubic-bezier(${e}, ${t}, ${r}, ${i})`,iB={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:iU([0,.65,.55,1]),circOut:iU([.55,0,1,.45]),backIn:iU([.31,.01,.66,-.59]),backOut:iU([.33,1.53,.69,.99])};function iF(e){return"function"==typeof e&&"applyToOptions"in e}class iq extends iR{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:s,allowFlatten:n=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=!!s,this.allowFlatten=n,this.options=e,eU("string"!=typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const l=function({type:e,...t}){return iF(e)&&i$()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=function(e,t,r,{delay:i=0,duration:s=300,repeat:n=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u){let c={[t]:r};l&&(c.offset=l);let d=function e(t,r){if(t)return"function"==typeof t?i$()?r3(t,r):"ease-out":ik(t)?iU(t):Array.isArray(t)?t.map(t=>e(t,r)||iB.easeOut):iB[t]}(o,s);Array.isArray(d)&&(c.easing=d);let h={delay:i,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:n+1,direction:"reverse"===a?"alternate":"normal"};u&&(h.pseudoElement=u);let p=e.animate(c,h);return p}(t,r,i,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){let e=iP(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):r.startsWith("--")?t.style.setProperty(r,e):t.style[r]=e,this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){return Number(this.animation.effect?.getComputedTiming?.().duration||0)/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(e){this.finishedTime=null,this.animation.currentTime=rq(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&iM())?(this.animation.timeline=e,eW):t(this)}}let iV={anticipate:ib,backInOut:iv,circInOut:ix};class iz extends iq{constructor(e){!function(e){"string"==typeof e.ease&&e.ease in iV&&(e.ease=iV[e.ease])}(e),iO(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){let{motionValue:t,onUpdate:r,onComplete:i,element:s,...n}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);let a=new iI({...n,autoplay:!1}),o=rq(this.finishedTime??this.time);t.setWithVelocity(a.sample(o-10).value,a.sample(o).value,10),a.stop()}}let iW=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(tf.test(e)||"0"===e)&&!e.startsWith("url(")),iH=new Set(["opacity","clipPath","filter","transform"]),iK=iL(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class iG extends iR{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:n="loop",keyframes:a,name:o,motionValue:l,element:u,...c}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=tC.now();const d={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:n,name:o,motionValue:l,element:u,...c},h=u?.KeyframeResolver||e4;this.keyframeResolver=new h(a,(e,t,r)=>this.onKeyframesResolved(e,t,d,!r),o,l,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;let{name:s,type:n,velocity:a,delay:o,isHandoff:l,onUpdate:u}=r;this.resolvedAt=tC.now(),!function(e,t,r,i){let s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;let n=e[e.length-1],a=iW(s,t),o=iW(n,t);return e$(a===o,`You are trying to animate ${t} from "${s}" to "${n}". "${a?n:s}" is not an animatable value.`,"value-not-animatable"),!!a&&!!o&&(function(e){let t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||iF(r))&&i)}(e,s,n,a)&&((eH.instantAnimations||!o)&&u?.(iP(e,r,t)),e[0]=e[e.length-1],rU(r),r.repeat=0);let c={startTime:i?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},d=!l&&function(e){let{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:n,type:a}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:o,transformTemplate:l}=t.owner.getProps();return iK()&&r&&iH.has(r)&&("transform"!==r||!l)&&!o&&!i&&"mirror"!==s&&0!==n&&"inertia"!==a}(c)?new iz({...c,element:c.motionValue.owner.current}):new iI(c);d.finished.then(()=>this.notifyFinished()).catch(eW),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),e2=!0,e3(),e5(),e2=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let iJ=e=>null!==e,iY={type:"spring",stiffness:500,damping:25,restSpeed:10},iX={type:"keyframes",duration:.8},iQ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iZ=(e,t,r,i={},s,n)=>a=>{let o=rM(i,e)||{},l=o.delay||i.delay||0,{elapsed:u=0}=i;u-=rq(l);let c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:n?void 0:s};!function({when:e,delay:t,delayChildren:r,staggerChildren:i,staggerDirection:s,repeat:n,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}(o)&&Object.assign(c,((e,{keyframes:t})=>t.length>2?iX:K.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:iY:iQ)(e,c)),c.duration&&(c.duration=rq(c.duration)),c.repeatDelay&&(c.repeatDelay=rq(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let d=!1;if(!1!==c.type&&(0!==c.duration||c.repeatDelay)||(rU(c),0===c.delay&&(d=!0)),(eH.instantAnimations||eH.skipAnimations)&&(d=!0,rU(c),c.delay=0),c.allowFlatten=!o.type&&!o.ease,d&&!n&&void 0!==t.get()){let e=function(e,{repeat:t,repeatType:r="loop"},i){let s=e.filter(iJ),n=t&&"loop"!==r&&t%2==1?0:s.length-1;return s[n]}(c.keyframes,o);if(void 0!==e)return void eJ.update(()=>{c.onUpdate(e),c.onComplete()})}return o.isSync?new iI(c):new iG(c)};function i0(e,t,{delay:r=0,transitionOverride:i,type:s}={}){let{transition:n=e.getDefaultTransition(),transitionEnd:a,...o}=t;i&&(n=i);let l=[],u=s&&e.animationState&&e.animationState.getState()[s];for(let t in o){let i=e.getValue(t,e.latestValues[t]??null),s=o[t];if(void 0===s||u&&function({protectedKeys:e,needsAnimating:t},r){let i=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,i}(u,t))continue;let a={delay:r,...rM(n||{},t)},c=i.get();if(void 0!==c&&!i.isAnimating&&!Array.isArray(s)&&s===c&&!a.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){let r=e.props[rO];if(r){let e=window.MotionHandoffAnimation(r,t,eJ);null!==e&&(a.startTime=e,d=!0)}}r$(e,t),i.start(iZ(t,i,s,e.shouldReduceMotion&&ex.has(t)?{type:!1}:a,e,d));let h=i.animation;h&&l.push(h)}return a&&Promise.all(l).then(()=>{eJ.update(()=>{a&&function(e,t){let{transitionEnd:r={},transition:i={},...s}=rL(e,t)||{};for(let t in s={...s,...r}){var n;let r=rD(n=s[t])?n[n.length-1]||0:n;e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,tN(r))}}(e,a)})}),l}function i1(e,t,r,i=0,s=1){let n=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,o=(a-1)*i;return"function"==typeof r?r(n,a):1===s?n*i:o-n*i}function i2(e,t,r={}){let i=rL(e,t,"exit"===r.type?e.presenceContext?.custom:void 0),{transition:s=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);let n=i?()=>Promise.all(i0(e,i,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(i=0)=>{let{delayChildren:n=0,staggerChildren:a,staggerDirection:o}=s;return function(e,t,r=0,i=0,s=0,n=1,a){let o=[];for(let l of e.variantChildren)l.notify("AnimationStart",t),o.push(i2(l,t,{...a,delay:r+("function"==typeof i?0:i)+i1(e.variantChildren,l,i,s,n)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,i,n,a,o,r)}:()=>Promise.resolve(),{when:o}=s;if(!o)return Promise.all([n(),a(r.delay)]);{let[e,t]="beforeChildren"===o?[n,a]:[a,n];return e().then(()=>t())}}function i5(e,t){if(!Array.isArray(t))return!1;let r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}let i3=tJ.length,i4=[...tG].reverse(),i6=tG.length;function i8(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function i9(){return{animate:i8(!0),whileInView:i8(),whileHover:i8(),whileTap:i8(),whileDrag:i8(),whileFocus:i8(),exit:i8()}}class i7{constructor(e){this.isMounted=!1,this.node=e}update(){}}let se=0,st={x:!1,y:!1};function sr(e,t,r,i={passive:!0}){return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r)}let si=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function ss(e){return{point:{x:e.pageX,y:e.pageY}}}function sn(e,t,r,i){return sr(e,t,e=>si(e)&&r(e,ss(e)),i)}function sa(e){return e.max-e.min}function so(e,t,r,i=.5){e.origin=i,e.originPoint=ec(t.min,t.max,e.origin),e.scale=sa(r)/sa(t),e.translate=ec(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function sl(e,t,r,i){so(e.x,t.x,r.x,i?i.originX:void 0),so(e.y,t.y,r.y,i?i.originY:void 0)}function su(e,t,r){e.min=r.min+t.min,e.max=e.min+sa(t)}function sc(e,t,r){e.min=t.min-r.min,e.max=e.min+sa(t)}function sd(e,t,r){sc(e.x,t.x,r.x),sc(e.y,t.y,r.y)}function sh(e){return[e("x"),e("y")]}let sp=({current:e})=>e?e.ownerDocument.defaultView:null,sf=(e,t)=>Math.abs(e-t);class sm{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:n=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{var e,t;if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let r=sv(this.lastMoveEventInfo,this.history),i=null!==this.startEvent,s=(e=r.offset,t={x:0,y:0},Math.sqrt(sf(e.x,t.x)**2+sf(e.y,t.y)**2)>=this.distanceThreshold);if(!i&&!s)return;let{point:n}=r,{timestamp:a}=eX;this.history.push({...n,timestamp:a});let{onStart:o,onMove:l}=this.handlers;i||(o&&o(this.lastMoveEvent,r),this.startEvent=this.lastMoveEvent),l&&l(this.lastMoveEvent,r)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=sg(t,this.transformPagePoint),eJ.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:r,onSessionEnd:i,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let n=sv("pointercancel"===e.type?this.lastMoveEventInfo:sg(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,n),i&&i(e,n)},!si(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=n,this.contextWindow=i||window;const a=sg(ss(e),this.transformPagePoint),{point:o}=a,{timestamp:l}=eX;this.history=[{...o,timestamp:l}];const{onSessionStart:u}=t;u&&u(e,sv(a,this.history)),this.removeListeners=rF(sn(this.contextWindow,"pointermove",this.handlePointerMove),sn(this.contextWindow,"pointerup",this.handlePointerUp),sn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),eY(this.updatePoint)}}function sg(e,t){return t?{point:t(e.point)}:e}function sy(e,t){return{x:e.x-t.x,y:e.y-t.y}}function sv({point:e},t){return{point:e,delta:sy(e,sb(t)),offset:sy(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,i=null,s=sb(e);for(;r>=0&&(i=e[r],!(s.timestamp-i.timestamp>rq(.1)));)r--;if(!i)return{x:0,y:0};let n=(s.timestamp-i.timestamp)/1e3;if(0===n)return{x:0,y:0};let a={x:(s.x-i.x)/n,y:(s.y-i.y)/n};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,.1)}}function sb(e){return e[e.length-1]}function sw(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function s_(e,t){let r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,i]=[i,r]),{min:r,max:i}}function sx(e,t,r){return{min:sk(e,t),max:sk(e,r)}}function sk(e,t){return"number"==typeof e?e:e[t]||0}let sE=new WeakMap;class sS{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tF(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){let{presenceContext:i}=this.visualElement;if(i&&!1===i.isPresent)return;let s=e=>{let{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ss(e).point)},n=(e,t)=>{let{drag:r,dragPropagation:i,onDragStart:s}=this.getProps();if(r&&!i&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(e){if("x"===e||"y"===e)if(st[e])return null;else return st[e]=!0,()=>{st[e]=!1};return st.x||st.y?null:(st.x=st.y=!0,()=>{st.x=st.y=!1})}(r),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sh(e=>{let t=this.getAxisMotionValue(e).get()||0;if(eP.test(t)){let{projection:r}=this.visualElement;if(r&&r.layout){let i=r.layout.layoutBox[e];i&&(t=sa(i)*(parseFloat(t)/100))}}this.originPoint[e]=t}),s&&eJ.postRender(()=>s(e,t)),r$(this.visualElement,"transform");let{animationState:n}=this.visualElement;n&&n.setActive("whileDrag",!0)},a=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:r,dragDirectionLock:i,onDirectionLock:s,onDrag:n}=this.getProps();if(!r&&!this.openDragLock)return;let{offset:a}=t;if(i&&null===this.currentDirection){this.currentDirection=function(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}(a),null!==this.currentDirection&&s&&s(this.currentDirection);return}this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),n&&n(e,t)},o=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>sh(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new sm(e,{onSessionStart:s,onStart:n,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:sp(this.visualElement)})}stop(e,t){let r=e||this.latestPointerEvent,i=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;let{velocity:n}=i;this.startAnimation(n);let{onDragEnd:a}=this.getProps();a&&eJ.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){let{drag:i}=this.getProps();if(!r||!sT(e,i,this.currentDirection))return;let s=this.getAxisMotionValue(e),n=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(n=function(e,{min:t,max:r},i){return void 0!==t&&e<t?e=i?ec(t,e,i.min):Math.max(e,t):void 0!==r&&e>r&&(e=i?ec(r,e,i.max):Math.min(e,r)),e}(n,this.constraints[e],this.elastic[e])),s.set(n)}resolveConstraints(){let{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&rA(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=function(e,{top:t,left:r,bottom:i,right:s}){return{x:sw(e.x,r,s),y:sw(e.y,t,i)}}(r.layoutBox,e):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:sx(e,"left","right"),y:sx(e,"top","bottom")}}(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&sh(e=>{var t,i;let s;!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=(t=r.layoutBox[e],i=this.constraints[e],s={},void 0!==i.min&&(s.min=i.min-t.min),void 0!==i.max&&(s.max=i.max-t.min),s))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!rA(t))return!1;let i=t.current;eU(null!==i,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:s}=this.visualElement;if(!s||!s.layout)return!1;let n=function(e,t,r){let i=e_(e,r),{scroll:s}=t;return s&&(ev(i.x,s.offset.x),ev(i.y,s.offset.y)),i}(i,s.root,this.visualElement.getTransformPagePoint()),a=(e=s.layout.layoutBox,{x:s_(e.x,n.x),y:s_(e.y,n.y)});if(r){let e=r(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=eu(e))}return a}startAnimation(e){let{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:n,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{};return Promise.all(sh(a=>{if(!sT(a,t,this.currentDirection))return;let l=o&&o[a]||{};n&&(l={min:0,max:0});let u={type:"inertia",velocity:r?e[a]:0,bounceStiffness:i?200:1e6,bounceDamping:i?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(a,u)})).then(a)}startAxisValueAnimation(e,t){let r=this.getAxisMotionValue(e);return r$(this.visualElement,e),r.start(iZ(e,r,0,t,this.visualElement,!1))}stopAnimation(){sh(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sh(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps();return r[t]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){sh(t=>{let{drag:r}=this.getProps();if(!sT(t,r,this.currentDirection))return;let{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){let{min:r,max:n}=i.layout.layoutBox[t];s.set(e[t]-ec(r,n,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!rA(t)||!r||!this.constraints)return;this.stopAnimation();let i={x:0,y:0};sh(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){var r,s;let n,a,o,l=t.get();i[e]=(r={min:l,max:l},s=this.constraints[e],n=.5,a=sa(r),(o=sa(s))>a?n=iT(s.min,s.max-a,r.min):a>o&&(n=iT(r.min,r.max-o,s.min)),ek(0,1,n))}});let{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sh(t=>{if(!sT(t,e,null))return;let r=this.getAxisMotionValue(t),{min:s,max:n}=this.constraints[t];r.set(ec(s,n,i[t]))})}addListeners(){if(!this.visualElement.current)return;sE.set(this.visualElement,this);let e=sn(this.visualElement.current,"pointerdown",e=>{let{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),t=()=>{let{dragConstraints:e}=this.getProps();rA(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),eJ.read(t);let s=sr(window,"resize",()=>this.scalePositionWithinConstraints()),n=r.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(sh(t=>{let r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{s(),e(),i(),n&&n()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:n=.35,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:n,dragMomentum:a}}}function sT(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}let sj=e=>(t,r)=>{e&&eJ.postRender(()=>e(t,r))};var sC=W;function sP(e=!0){let t=(0,W.useContext)(rk);if(null===t)return[!0,null];let{isPresent:r,onExitComplete:i,register:s}=t,n=(0,W.useId)();(0,W.useEffect)(()=>{if(e)return s(n)},[e]);let a=(0,W.useCallback)(()=>e&&i&&i(n),[n,i,e]);return!r&&i?[!1,a]:[!0]}let sA={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sO(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let sR={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e)if(!eA.test(e))return e;else e=parseFloat(e);let r=sO(e,t.target.x),i=sO(e,t.target.y);return`${r}% ${i}%`}},sN=!1;class sI extends sC.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;for(let e in sM)t9[e]=sM[e],en(e)&&(t9[e].isCSSVariable=!0);s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),sN&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),sA.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,{projection:n}=r;return n&&(n.isPresent=s,sN=!0,i||e.layoutDependency!==t||void 0===t||e.isPresent!==s?n.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?n.promote():n.relegate()||eJ.postRender(()=>{let e=n.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tL.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;sN=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sL(e){let[t,r]=sP(),i=(0,sC.useContext)(rh);return(0,z.jsx)(sI,{...e,layoutGroup:i,switchLayoutGroup:(0,sC.useContext)(rR),isPresent:t,safeToRemove:r})}let sM={borderRadius:{...sR,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sR,borderTopRightRadius:sR,borderBottomLeftRadius:sR,borderBottomRightRadius:sR,boxShadow:{correct:(e,{treeScale:t,projectionDelta:r})=>{let i=tf.parse(e);if(i.length>5)return e;let s=tf.createTransformer(e),n=+("number"!=typeof i[0]),a=r.x.scale*t.x,o=r.y.scale*t.y;i[0+n]/=a,i[1+n]/=o;let l=ec(a,o,.5);return"number"==typeof i[2+n]&&(i[2+n]/=l),"number"==typeof i[3+n]&&(i[3+n]/=l),s(i)}}};function sD(e){return"object"==typeof e&&null!==e}function s$(e){return sD(e)&&"ownerSVGElement"in e}let sU=(e,t)=>e.depth-t.depth;class sB{constructor(){this.children=[],this.isDirty=!1}add(e){tP(this.children,e),this.isDirty=!0}remove(e){tA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sU),this.isDirty=!1,this.children.forEach(e)}}let sF=["TopLeft","TopRight","BottomLeft","BottomRight"],sq=sF.length,sV=e=>"string"==typeof e?parseFloat(e):e,sz=e=>"number"==typeof e||eA.test(e);function sW(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let sH=sG(0,.5,i_),sK=sG(.5,.95,eW);function sG(e,t,r){return i=>i<e?0:i>t?1:r(iT(e,t,i))}function sJ(e,t){e.min=t.min,e.max=t.max}function sY(e,t){sJ(e.x,t.x),sJ(e.y,t.y)}function sX(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function sQ(e,t,r,i,s){return e-=t,e=i+1/r*(e-i),void 0!==s&&(e=i+1/s*(e-i)),e}function sZ(e,t,[r,i,s],n,a){!function(e,t=0,r=1,i=.5,s,n=e,a=e){if(eP.test(t)&&(t=parseFloat(t),t=ec(a.min,a.max,t/100)-a.min),"number"!=typeof t)return;let o=ec(n.min,n.max,i);e===n&&(o-=t),e.min=sQ(e.min,t,r,o,s),e.max=sQ(e.max,t,r,o,s)}(e,t[r],t[i],t[s],t.scale,n,a)}let s0=["x","scaleX","originX"],s1=["y","scaleY","originY"];function s2(e,t,r,i){sZ(e.x,t,s0,r?r.x:void 0,i?i.x:void 0),sZ(e.y,t,s1,r?r.y:void 0,i?i.y:void 0)}function s5(e){return 0===e.translate&&1===e.scale}function s3(e){return s5(e.x)&&s5(e.y)}function s4(e,t){return e.min===t.min&&e.max===t.max}function s6(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function s8(e,t){return s6(e.x,t.x)&&s6(e.y,t.y)}function s9(e){return sa(e.x)/sa(e.y)}function s7(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class ne{constructor(){this.members=[]}add(e){tP(this.members,e),e.scheduleRender()}remove(e){if(tA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t,r=this.members.findIndex(t=>e===t);if(0===r)return!1;for(let e=r;e>=0;e--){let r=this.members[e];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:i}=e.options;!1===i&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let nt=["","X","Y","Z"],nr=0;function ni(e,t,r,i){let{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),i&&(i[e]=0))}function ns({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(e={},r=t?.()){this.id=nr++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(no),this.nodes.forEach(nf),this.nodes.forEach(nm),this.nodes.forEach(nl)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new sB)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new tO),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;this.isSVG=s$(t)&&!(s$(t)&&"svg"===t.tagName),this.instance=t;let{layoutId:r,layout:i,visualElement:s}=this.options;if(s&&!s.current&&s.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||r)&&(this.isLayoutDirty=!0),e){let r,i=0,s=()=>this.root.updateBlockedByResize=!1;eJ.read(()=>{i=window.innerWidth}),e(t,()=>{let e=window.innerWidth;if(e!==i){let t,n;i=e,this.root.updateBlockedByResize=!0,r&&r(),t=tC.now(),n=({timestamp:e})=>{let r=e-t;r>=250&&(eY(n),s(r-250))},eJ.setup(n,!0),r=()=>eY(n),sA.hasAnimatedSinceResize&&(sA.hasAnimatedSinceResize=!1,this.nodes.forEach(np))}})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&s&&(r||i)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:r,layout:i})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let n=this.options.transition||s.getDefaultTransition()||n_,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=s.getProps(),l=!this.targetLayout||!s8(this.targetLayout,i),u=!t&&r;if(this.options.layoutRoot||this.resumeFrom||u||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let t={...rM(n,"layout"),onPlay:a,onComplete:o};(s.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,u)}else t||np(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),eY(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ng),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:r}=t.options;if(!r)return;let i=r.props[rO];if(window.MotionHasOptimisedAnimation(i,"transform")){let{layout:e,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",eJ,!(e||r))}let{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&e(s)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;let i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nc);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(nd);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nh),this.nodes.forEach(nn),this.nodes.forEach(na)):this.nodes.forEach(nd),this.clearAllSnapshots();let e=tC.now();eX.delta=ek(0,1e3/60,e-eX.timestamp),eX.timestamp=e,eX.isProcessing=!0,eQ.update.process(eX),eQ.preRender.process(eX),eQ.render.process(eX),eX.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tL.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nu),this.sharedNodes.forEach(ny)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,eJ.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){eJ.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||sa(this.snapshot.measuredBox.x)||sa(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=tF(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!s3(this.projectionDelta),r=this.getTransformTemplate(),i=r?r(this.latestValues,""):void 0,n=i!==this.prevTransformTemplateValue;e&&this.instance&&(t||ep(this.latestValues)||n)&&(s(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let r=this.measurePageBox(),i=this.removeElementScroll(r);return e&&(i=this.removeTransform(i)),nE((t=i).x),nE(t.y),{animationId:this.root.animationId,measuredBox:r,layoutBox:i,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return tF();let t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(nT))){let{scroll:e}=this.root;e&&(ev(t.x,e.offset.x),ev(t.y,e.offset.y))}return t}removeElementScroll(e){let t=tF();if(sY(t,e),this.scroll?.wasRoot)return t;for(let r=0;r<this.path.length;r++){let i=this.path[r],{scroll:s,options:n}=i;i!==this.root&&s&&n.layoutScroll&&(s.wasRoot&&sY(t,e),ev(t.x,s.offset.x),ev(t.y,s.offset.y))}return t}applyTransform(e,t=!1){let r=tF();sY(r,e);for(let e=0;e<this.path.length;e++){let i=this.path[e];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ew(r,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),ep(i.latestValues)&&ew(r,i.latestValues)}return ep(this.latestValues)&&ew(r,this.latestValues),r}removeTransform(e){let t=tF();sY(t,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];if(!r.instance||!ep(r.latestValues))continue;eh(r.latestValues)&&r.updateSnapshot();let i=tF();sY(i,r.measurePageBox()),s2(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,i)}return ep(this.latestValues)&&s2(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==eX.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){let t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);let r=!!this.resumingFrom||this!==t;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:i,layoutId:s}=this.options;if(!this.layout||!(i||s))return;this.resolvedRelativeTargetAt=eX.timestamp;let n=this.getClosestProjectingParent();if(n&&this.linkedParentVersion!==n.layoutVersion&&!n.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(n&&n.layout?this.createRelativeTarget(n,this.layout.layoutBox,n.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta){if(this.target||(this.target=tF(),this.targetWithTransforms=tF()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var a,o,l;this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,su(a.x,o.x,l.x),su(a.y,o.y,l.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sY(this.target,this.layout.layoutBox),ey(this.target,this.targetDelta)):sY(this.target,this.layout.layoutBox);this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,n&&!!n.resumingFrom==!!this.resumingFrom&&!n.options.layoutScroll&&n.target&&1!==this.animationProgress?this.createRelativeTarget(n,this.target,n.target):this.relativeParent=this.relativeTarget=void 0)}}getClosestProjectingParent(){if(!(!this.parent||eh(this.parent.latestValues)||ef(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,r){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tF(),this.relativeTargetOrigin=tF(),sd(this.relativeTargetOrigin,t,r),sY(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let e=this.getLead(),t=!!this.resumingFrom||this!==e,r=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(r=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===eX.timestamp&&(r=!1),r)return;let{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(i||s))return;sY(this.layoutCorrected,this.layout.layoutBox);let n=this.treeScale.x,a=this.treeScale.y;!function(e,t,r,i=!1){let s,n,a=r.length;if(a){t.x=t.y=1;for(let o=0;o<a;o++){n=(s=r[o]).projectionDelta;let{visualElement:a}=s.options;(!a||!a.props.style||"contents"!==a.props.style.display)&&(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ew(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),n&&(t.x*=n.x.scale,t.y*=n.y.scale,ey(e,n)),i&&ep(s.latestValues)&&ew(e,s.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}(this.layoutCorrected,this.treeScale,this.path,t),e.layout&&!e.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(e.target=e.layout.layoutBox,e.targetWithTransforms=tF());let{target:o}=e;if(!o){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(sX(this.prevProjectionDelta.x,this.projectionDelta.x),sX(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),sl(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===n&&this.treeScale.y===a&&s7(this.projectionDelta.x,this.prevProjectionDelta.x)&&s7(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=tU(),this.projectionDelta=tU(),this.projectionDeltaWithTransform=tU()}setAnimationOrigin(e,t=!1){let r,i=this.snapshot,s=i?i.latestValues:{},n={...this.latestValues},a=tU();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=tF(),l=(i?i.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),c=!u||u.members.length<=1,d=!!(l&&!c&&!0===this.options.crossfade&&!this.path.some(nw));this.animationProgress=0,this.mixTargetDelta=t=>{let i=t/1e3;if(nv(a.x,e.x,i),nv(a.y,e.y,i),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var u,h,p,f,m,g;sd(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,f=this.relativeTargetOrigin,m=o,g=i,nb(p.x,f.x,m.x,g),nb(p.y,f.y,m.y,g),r&&(u=this.relativeTarget,h=r,s4(u.x,h.x)&&s4(u.y,h.y))&&(this.isProjectionDirty=!1),r||(r=tF()),sY(r,this.relativeTarget)}l&&(this.animationValues=n,function(e,t,r,i,s,n){s?(e.opacity=ec(0,r.opacity??1,sH(i)),e.opacityExit=ec(t.opacity??1,0,sK(i))):n&&(e.opacity=ec(t.opacity??1,r.opacity??1,i));for(let s=0;s<sq;s++){let n=`border${sF[s]}Radius`,a=sW(t,n),o=sW(r,n);(void 0!==a||void 0!==o)&&(a||(a=0),o||(o=0),0===a||0===o||sz(a)===sz(o)?(e[n]=Math.max(ec(sV(a),sV(o),i),0),(eP.test(o)||eP.test(a))&&(e[n]+="%")):e[n]=o)}(t.rotate||r.rotate)&&(e.rotate=ec(t.rotate||0,r.rotate||0,i))}(n,s,this.latestValues,i,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=i},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(eY(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=eJ.update(()=>{var t,r,i;let s;sA.hasAnimatedSinceResize=!0,rV.layout++,this.motionValue||(this.motionValue=tN(0)),this.currentAnimation=(t=this.motionValue,r=[0,1e3],i={...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{rV.layout--},onComplete:()=>{rV.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}},(s=tT(t)?t:tN(t)).start(iZ("",s,r,i)),s.animation),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:r,layout:i,latestValues:s}=e;if(t&&r&&i){if(this!==e&&this.layout&&i&&nS(this.options.animationType,this.layout.layoutBox,i.layoutBox)){r=this.target||tF();let t=sa(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;let i=sa(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+i}sY(t,r),ew(t,s),sl(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new ne),this.sharedNodes.get(e).add(t);let r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){let{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){let i=this.getStack();i&&i.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;let i={};r.z&&ni("z",e,i,this.animationValues);for(let t=0;t<nt.length;t++)ni(`rotate${nt[t]}`,e,i,this.animationValues),ni(`skew${nt[t]}`,e,i,this.animationValues);for(let t in e.render(),i)e.setStaticValue(t,i[t]),this.animationValues&&(this.animationValues[t]=i[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility="hidden";return}let r=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=rS(t?.pointerEvents)||"",e.transform=r?r(this.latestValues,""):"none";return}let i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=rS(t?.pointerEvents)||""),this.hasProjected&&!ep(this.latestValues)&&(e.transform=r?r({},""):"none",this.hasProjected=!1);return}e.visibility="";let s=i.animationValues||i.latestValues;this.applyTransformsToTarget();let n=function(e,t,r){let i="",s=e.x.translate/t.x,n=e.y.translate/t.y,a=r?.z||0;if((s||n||a)&&(i=`translate3d(${s}px, ${n}px, ${a}px) `),(1!==t.x||1!==t.y)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),r){let{transformPerspective:e,rotate:t,rotateX:s,rotateY:n,skewX:a,skewY:o}=r;e&&(i=`perspective(${e}px) ${i}`),t&&(i+=`rotate(${t}deg) `),s&&(i+=`rotateX(${s}deg) `),n&&(i+=`rotateY(${n}deg) `),a&&(i+=`skewX(${a}deg) `),o&&(i+=`skewY(${o}deg) `)}let o=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==o||1!==l)&&(i+=`scale(${o}, ${l})`),i||"none"}(this.projectionDeltaWithTransform,this.treeScale,s);r&&(n=r(s,n)),e.transform=n;let{x:a,y:o}=this.projectionDelta;for(let t in e.transformOrigin=`${100*a.origin}% ${100*o.origin}% 0`,i.animationValues?e.opacity=i===this?s.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:e.opacity=i===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0,t9){if(void 0===s[t])continue;let{correct:r,applyTo:a,isCSSVariable:o}=t9[t],l="none"===n?s[t]:r(s[t],i);if(a){let t=a.length;for(let r=0;r<t;r++)e[a[r]]=l}else o?this.options.visualElement.renderState.vars[t]=l:e[t]=l}this.options.layoutId&&(e.pointerEvents=i===this?rS(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(nc),this.root.sharedNodes.clear()}}}function nn(e){e.updateLayout()}function na(e){let t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){let{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,n=t.source!==e.layout.source;"size"===s?sh(e=>{let i=n?t.measuredBox[e]:t.layoutBox[e],s=sa(i);i.min=r[e].min,i.max=i.min+s}):nS(s,t.layoutBox,r)&&sh(i=>{let s=n?t.measuredBox[i]:t.layoutBox[i],a=sa(r[i]);s.max=s.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+a)});let a=tU();sl(a,r,t.layoutBox);let o=tU();n?sl(o,e.applyTransform(i,!0),t.measuredBox):sl(o,r,t.layoutBox);let l=!s3(a),u=!1;if(!e.resumeFrom){let i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){let{snapshot:s,layout:n}=i;if(s&&n){let a=tF();sd(a,t.layoutBox,s.layoutBox);let o=tF();sd(o,r,n.layoutBox),s8(a,o)||(u=!0),i.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function no(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function nl(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function nu(e){e.clearSnapshot()}function nc(e){e.clearMeasurements()}function nd(e){e.isLayoutDirty=!1}function nh(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function np(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function nf(e){e.resolveTargetDelta()}function nm(e){e.calcProjection()}function ng(e){e.resetSkewAndRotation()}function ny(e){e.removeLeadSnapshot()}function nv(e,t,r){e.translate=ec(t.translate,0,r),e.scale=ec(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function nb(e,t,r,i){e.min=ec(t.min,r.min,i),e.max=ec(t.max,r.max,i)}function nw(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let n_={duration:.45,ease:[.4,0,.1,1]},nx=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),nk=nx("applewebkit/")&&!nx("chrome/")?Math.round:eW;function nE(e){e.min=nk(e.min),e.max=nk(e.max)}function nS(e,t,r){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(s9(t)-s9(r)))}function nT(e){return e!==e.root&&e.scroll?.wasRoot}let nj=ns({attachResizeListener:(e,t)=>sr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nC={current:void 0},nP=ns({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!nC.current){let e=new nj({});e.mount(window),e.setOptions({layoutScroll:!0}),nC.current=e}return nC.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function nA(e,t){let r=function(e,t,r){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document,r=(void 0)??t.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}(e),i=new AbortController;return[r,{passive:!0,...t,signal:i.signal},()=>i.abort()]}function nO(e){return!("touch"===e.pointerType||st.x||st.y)}function nR(e,t,r){let{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover","Start"===r);let s=i["onHover"+r];s&&eJ.postRender(()=>s(t,ss(t)))}function nN(e){return sD(e)&&"offsetHeight"in e}let nI=(e,t)=>!!t&&(e===t||nI(e,t.parentElement)),nL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),nM=new WeakSet;function nD(e){return t=>{"Enter"===t.key&&e(t)}}function n$(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function nU(e){return si(e)&&!(st.x||st.y)}function nB(e,t,r){let{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap","Start"===r);let s=i["onTap"+("End"===r?"":r)];s&&eJ.postRender(()=>s(t,ss(t)))}let nF=new WeakMap,nq=new WeakMap,nV=e=>{let t=nF.get(e.target);t&&t(e)},nz=e=>{e.forEach(nV)},nW={some:0,all:1},nH=function(e,t){if("undefined"==typeof Proxy)return rI;let r=new Map,i=(r,i)=>rI(r,i,e,t);return new Proxy((e,t)=>i(e,t),{get:(s,n)=>"create"===n?i:(r.has(n)||r.set(n,rI(n,void 0,e,t)),r.get(n))})}({animation:{Feature:class extends i7{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:r})=>(function(e,t,r={}){let i;if(e.notify("AnimationStart",t),Array.isArray(t))i=Promise.all(t.map(t=>i2(e,t,r)));else if("string"==typeof t)i=i2(e,t,r);else{let s="function"==typeof t?rL(e,t,r.custom):t;i=Promise.all(i0(e,s,r))}return i.then(()=>{e.notify("AnimationComplete",t)})})(e,t,r))),r=i9(),i=!0,s=t=>(r,i)=>{let s=rL(e,i,"exit"===t?e.presenceContext?.custom:void 0);if(s){let{transition:e,transitionEnd:t,...i}=s;r={...r,...i,...t}}return r};function n(n){let{props:a}=e,o=function e(t){if(!t)return;if(!t.isControllingVariants){let r=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(r.initial=t.props.initial),r}let r={};for(let e=0;e<i3;e++){let i=tJ[e],s=t.props[i];(tK(s)||!1===s)&&(r[i]=s)}return r}(e.parent)||{},l=[],u=new Set,c={},d=1/0;for(let t=0;t<i6;t++){var h,p;let f=i4[t],m=r[f],g=void 0!==a[f]?a[f]:o[f],y=tK(g),v=f===n?m.isActive:null;!1===v&&(d=t);let b=g===o[f]&&g!==a[f]&&y;if(b&&i&&e.manuallyAnimateOnMount&&(b=!1),m.protectedKeys={...c},!m.isActive&&null===v||!g&&!m.prevProp||tH(g)||"boolean"==typeof g)continue;let w=(h=m.prevProp,"string"==typeof(p=g)?p!==h:!!Array.isArray(p)&&!i5(p,h)),_=w||f===n&&m.isActive&&!b&&y||t>d&&y,x=!1,k=Array.isArray(g)?g:[g],E=k.reduce(s(f),{});!1===v&&(E={});let{prevResolvedValues:S={}}=m,T={...S,...E},j=t=>{_=!0,u.has(t)&&(x=!0,u.delete(t)),m.needsAnimating[t]=!0;let r=e.getValue(t);r&&(r.liveStyle=!1)};for(let e in T){let t=E[e],r=S[e];if(!c.hasOwnProperty(e))(rD(t)&&rD(r)?i5(t,r):t===r)?void 0!==t&&u.has(e)?j(e):m.protectedKeys[e]=!0:null!=t?j(e):u.add(e)}m.prevProp=g,m.prevResolvedValues=E,m.isActive&&(c={...c,...E}),i&&e.blockInitialAnimation&&(_=!1);let C=b&&w,P=!C||x;_&&P&&l.push(...k.map(t=>{let r={type:f};if("string"==typeof t&&i&&!C&&e.manuallyAnimateOnMount&&e.parent){let{parent:i}=e,s=rL(i,t);if(i.enteringChildren&&s){let{delayChildren:t}=s.transition||{};r.delay=i1(i.enteringChildren,e,t)}}return{animation:t,options:r}}))}if(u.size){let t={};if("boolean"!=typeof a.initial){let r=rL(e,Array.isArray(a.initial)?a.initial[0]:a.initial);r&&r.transition&&(t.transition=r.transition)}u.forEach(r=>{let i=e.getBaseTarget(r),s=e.getValue(r);s&&(s.liveStyle=!0),t[r]=i??null}),l.push({animation:t})}let f=!!l.length;return i&&(!1===a.initial||a.initial===a.animate)&&!e.manuallyAnimateOnMount&&(f=!1),i=!1,f?t(l):Promise.resolve()}return{animateChanges:n,setActive:function(t,i){if(r[t].isActive===i)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,i)),r[t].isActive=i;let s=n(t);for(let e in r)r[e].protectedKeys={};return s},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=i9()}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();tH(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends i7{constructor(){super(...arguments),this.id=se++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;let i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}},inView:{Feature:class extends i7{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){var e;let t;this.unmount();let{viewport:r={}}=this.node.getProps(),{root:i,margin:s,amount:n="some",once:a}=r,o={root:i?i.current:void 0,rootMargin:s,threshold:"number"==typeof n?n:nW[n]},l=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,a&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:r,onViewportLeave:i}=this.node.getProps(),s=t?r:i;s&&s(e)};return e=this.node.current,t=function({root:e,...t}){let r=e||document;nq.has(r)||nq.set(r,{});let i=nq.get(r),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(nz,{root:e,...t})),i[s]}(o),nF.set(e,l),t.observe(e),()=>{nF.delete(e),t.unobserve(e)}}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends i7{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[i,s,n]=nA(e,r),a=e=>{let i=e.currentTarget;if(!nU(e))return;nM.add(i);let n=t(i,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),nM.has(i)&&nM.delete(i),nU(e)&&"function"==typeof n&&n(e,{success:t})},o=e=>{a(e,i===window||i===document||r.useGlobalTarget||nI(i,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",l,s)};return i.forEach(e=>{((r.useGlobalTarget?window:e).addEventListener("pointerdown",a,s),nN(e))&&(e.addEventListener("focus",e=>((e,t)=>{let r=e.currentTarget;if(!r)return;let i=nD(()=>{if(nM.has(r))return;n$(r,"down");let e=nD(()=>{n$(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>n$(r,"cancel"),t)});r.addEventListener("keydown",i,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",i),t)})(e,s)),nL.has(e.tagName)||-1!==e.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),n}(e,(e,t)=>(nB(this.node,t,"Start"),(e,{success:t})=>nB(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends i7{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rF(sr(this.node.current,"focus",()=>this.onFocus()),sr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends i7{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[i,s,n]=nA(e,r),a=e=>{if(!nO(e))return;let{target:r}=e,i=t(r,e);if("function"!=typeof i||!r)return;let n=e=>{nO(e)&&(i(e),r.removeEventListener("pointerleave",n))};r.addEventListener("pointerleave",n,s)};return i.forEach(e=>{e.addEventListener("pointerenter",a,s)}),n}(e,(e,t)=>(nR(this.node,t,"Start"),e=>nR(this.node,e,"End"))))}unmount(){}}},pan:{Feature:class extends i7{constructor(){super(...arguments),this.removePointerDownListener=eW}onPointerDown(e){this.session=new sm(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sp(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:sj(e),onStart:sj(t),onMove:r,onEnd:(e,t)=>{delete this.session,i&&eJ.postRender(()=>i(e,t))}}}mount(){this.removePointerDownListener=sn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends i7{constructor(e){super(e),this.removeGroupControls=eW,this.removeListeners=eW,this.controls=new sS(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||eW}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:nP,MeasureLayout:sL},layout:{ProjectionNode:nP,MeasureLayout:sL}},(e,t)=>rd(e)?new ru(t):new rt(t,{allowProjection:e!==W.Fragment}));var nK=W;function nG(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class nJ extends nK.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=nN(e)&&e.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=r-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function nY({children:e,isPresent:t,anchorX:r,root:i}){let s=(0,nK.useId)(),n=(0,nK.useRef)(null),a=(0,nK.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=(0,nK.useContext)(rf),l=function(...e){return W.useCallback(function(...e){return t=>{let r=!1,i=e.map(e=>{let i=nG(e,t);return r||"function"!=typeof i||(r=!0),i});if(r)return()=>{for(let t=0;t<i.length;t++){let r=i[t];"function"==typeof r?r():nG(e[t],null)}}}}(...e),e)}(n,e?.ref);return(0,nK.useInsertionEffect)(()=>{let{width:e,height:l,top:u,left:c,right:d}=a.current;if(t||!n.current||!e||!l)return;let h="left"===r?`left: ${c}`:`right: ${d}`;n.current.dataset.motionPopId=s;let p=document.createElement("style");o&&(p.nonce=o);let f=i??document.head;return f.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${l}px !important;
            ${h}px !important;
            top: ${u}px !important;
          }
        `),()=>{f.contains(p)&&f.removeChild(p)}},[t]),(0,z.jsx)(nJ,{isPresent:t,childRef:n,sizeRef:a,children:nK.cloneElement(e,{ref:l})})}let nX=({children:e,initial:t,isPresent:r,onExitComplete:i,custom:s,presenceAffectsLayout:n,mode:a,anchorX:o,root:l})=>{let u=rE(nQ),c=(0,W.useId)(),d=!0,h=(0,W.useMemo)(()=>(d=!1,{id:c,initial:t,isPresent:r,custom:s,onExitComplete:e=>{for(let t of(u.set(e,!0),u.values()))if(!t)return;i&&i()},register:e=>(u.set(e,!1),()=>u.delete(e))}),[r,u,i]);return n&&d&&(h={...h}),(0,W.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[r]),W.useEffect(()=>{r||u.size||!i||i()},[r]),"popLayout"===a&&(e=(0,z.jsx)(nY,{isPresent:r,anchorX:o,root:l,children:e})),(0,z.jsx)(rk.Provider,{value:h,children:e})};function nQ(){return new Map}let nZ=e=>e.key||"";function n0(e){let t=[];return W.Children.forEach(e,e=>{(0,W.isValidElement)(e)&&t.push(e)}),t}let n1=({children:e,custom:t,initial:r=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:n="sync",propagate:a=!1,anchorX:o="left",root:l})=>{let[u,c]=sP(a),d=(0,W.useMemo)(()=>n0(e),[e]),h=a&&!u?[]:d.map(nZ),p=(0,W.useRef)(!0),f=(0,W.useRef)(d),m=rE(()=>new Map),[g,y]=(0,W.useState)(d),[v,b]=(0,W.useState)(d);rN(()=>{p.current=!1,f.current=d;for(let e=0;e<v.length;e++){let t=nZ(v[e]);h.includes(t)?m.delete(t):!0!==m.get(t)&&m.set(t,!1)}},[v,h.length,h.join("-")]);let w=[];if(d!==g){let e=[...d];for(let t=0;t<v.length;t++){let r=v[t],i=nZ(r);h.includes(i)||(e.splice(t,0,r),w.push(r))}return"wait"===n&&w.length&&(e=w),b(n0(e)),y(d),null}let{forceRender:_}=(0,W.useContext)(rh);return(0,z.jsx)(z.Fragment,{children:v.map(e=>{let g=nZ(e),y=(!a||!!u)&&(d===v||h.includes(g));return(0,z.jsx)(nX,{isPresent:y,initial:(!p.current||!!r)&&void 0,custom:t,presenceAffectsLayout:s,mode:n,root:l,onExitComplete:y?void 0:()=>{if(!m.has(g))return;m.set(g,!0);let e=!0;m.forEach(t=>{t||(e=!1)}),e&&(_?.(),b(f.current),a&&c?.(),i&&i())},anchorX:o,children:e},g)})})},n2=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var n5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n3=(0,W.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:n,iconNode:a,...o},l)=>(0,W.createElement)("svg",{ref:l,...n5,width:t,height:t,stroke:e,strokeWidth:i?24*Number(r)/Number(t):r,className:n2("lucide",s),...o},[...a.map(([e,t])=>(0,W.createElement)(e,t)),...Array.isArray(n)?n:[n]])),n4=(e,t)=>{let r=(0,W.forwardRef)(({className:r,...i},s)=>(0,W.createElement)(n3,{ref:s,iconNode:t,className:n2(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...i}));return r.displayName=`${e}`,r},n6=n4("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),n8=n4("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),n9=n4("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),n7=n4("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ae=n4("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),at=n4("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ar=n4("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ai=n4("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),as=n4("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),an=n4("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);function aa(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function ao(...e){return t=>{let r=!1,i=e.map(e=>{let i=aa(e,t);return r||"function"!=typeof i||(r=!0),i});if(r)return()=>{for(let t=0;t<i.length;t++){let r=i[t];"function"==typeof r?r():aa(e[t],null)}}}}function al(...e){return W.useCallback(ao(...e),e)}var au=W.forwardRef((e,t)=>{let{children:r,...i}=e,s=W.Children.toArray(r),n=s.find(ah);if(n){let e=n.props.children,r=s.map(t=>t!==n?t:W.Children.count(e)>1?W.Children.only(null):W.isValidElement(e)?e.props.children:null);return(0,z.jsx)(ac,{...i,ref:t,children:W.isValidElement(e)?W.cloneElement(e,void 0,r):null})}return(0,z.jsx)(ac,{...i,ref:t,children:r})});au.displayName="Slot";var ac=W.forwardRef((e,t)=>{let{children:r,...i}=e;if(W.isValidElement(r)){var s;let e,n,a=(s=r,(n=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(n=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref);return W.cloneElement(r,{...function(e,t){let r={...t};for(let i in t){let s=e[i],n=t[i];/^on[A-Z]/.test(i)?s&&n?r[i]=(...e)=>{n(...e),s(...e)}:s&&(r[i]=s):"style"===i?r[i]={...s,...n}:"className"===i&&(r[i]=[s,n].filter(Boolean).join(" "))}return{...e,...r}}(i,r.props),ref:t?ao(t,a):a})}return W.Children.count(r)>1?W.Children.only(null):null});ac.displayName="SlotClone";var ad=({children:e})=>(0,z.jsx)(z.Fragment,{children:e});function ah(e){return W.isValidElement(e)&&e.type===ad}function ap(){for(var e,t,r=0,i="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,i,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t)if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(i=e(t[r]))&&(s&&(s+=" "),s+=i)}else for(i in t)t[i]&&(s&&(s+=" "),s+=i);return s}(e))&&(i&&(i+=" "),i+=t);return i}let af=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,am=(e,t)=>{if(0===e.length)return t.classGroupId;let r=e[0],i=t.nextPart.get(r),s=i?am(e.slice(1),i):void 0;if(s)return s;if(0===t.validators.length)return;let n=e.join("-");return t.validators.find(({validator:e})=>e(n))?.classGroupId},ag=/^\[(.+)\]$/,ay=(e,t,r,i)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:av(t,e)).classGroupId=r;return}"function"==typeof e?ab(e)?ay(e(i),t,r,i):t.validators.push({validator:e,classGroupId:r}):Object.entries(e).forEach(([e,s])=>{ay(s,av(t,e),r,i)})})},av=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},ab=e=>e.isThemeGetter,aw=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,a_=e=>{if(e.length<=1)return e;let t=[],r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},ax=/\s+/;function ak(){let e,t,r=0,i="";for(;r<arguments.length;)(e=arguments[r++])&&(t=aE(e))&&(i&&(i+=" "),i+=t);return i}let aE=e=>{let t;if("string"==typeof e)return e;let r="";for(let i=0;i<e.length;i++)e[i]&&(t=aE(e[i]))&&(r&&(r+=" "),r+=t);return r},aS=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},aT=/^\[(?:([a-z-]+):)?(.+)\]$/i,aj=/^\d+\/\d+$/,aC=new Set(["px","full","screen"]),aP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,aR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,aI=e=>aM(e)||aC.has(e)||aj.test(e),aL=e=>aJ(e,"length",aY),aM=e=>!!e&&!Number.isNaN(Number(e)),aD=e=>aJ(e,"number",aM),a$=e=>!!e&&Number.isInteger(Number(e)),aU=e=>e.endsWith("%")&&aM(e.slice(0,-1)),aB=e=>aT.test(e),aF=e=>aP.test(e),aq=new Set(["length","size","percentage"]),aV=e=>aJ(e,aq,aX),az=e=>aJ(e,"position",aX),aW=new Set(["image","url"]),aH=e=>aJ(e,aW,aZ),aK=e=>aJ(e,"",aQ),aG=()=>!0,aJ=(e,t,r)=>{let i=aT.exec(e);return!!i&&(i[1]?"string"==typeof t?i[1]===t:t.has(i[1]):r(i[2]))},aY=e=>aA.test(e)&&!aO.test(e),aX=()=>!1,aQ=e=>aR.test(e),aZ=e=>aN.test(e),a0=function(e,...t){let r,i,s,n=function(o){let l;return i=(r={cache:(e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=new Map,i=new Map,s=(s,n)=>{r.set(s,n),++t>e&&(t=0,i=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=i.get(e))?(s(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):s(e,t)}}})((l=t.reduce((e,t)=>t(e),e())).cacheSize),parseClassName:(e=>{let{separator:t,experimentalParseClassName:r}=e,i=1===t.length,s=t[0],n=t.length,a=e=>{let r,a=[],o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===s&&(i||e.slice(u,u+n)===t)){a.push(e.slice(l,u)),l=u+n;continue}if("/"===c){r=u;continue}}"["===c?o++:"]"===c&&o--}let u=0===a.length?e:e.substring(l),c=u.startsWith("!"),d=c?u.substring(1):u;return{modifiers:a,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:r&&r>l?r-l:void 0}};return r?e=>r({className:e,parseClassName:a}):a})(l),...(e=>{let t=(e=>{let{theme:t,prefix:r}=e,i={nextPart:new Map,validators:[]};return aw(Object.entries(e.classGroups),r).forEach(([e,r])=>{ay(r,i,e,t)}),i})(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:e=>{let r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),am(r,t)||(e=>{if(ag.test(e)){let t=ag.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}})(e)},getConflictingClassGroupIds:(e,t)=>{let s=r[e]||[];return t&&i[e]?[...s,...i[e]]:s}}})(l)}).cache.get,s=r.cache.set,n=a,a(o)};function a(e){let t=i(e);if(t)return t;let n=((e,t)=>{let{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:s}=t,n=[],a=e.trim().split(ax),o="";for(let e=a.length-1;e>=0;e-=1){let t=a[e],{modifiers:l,hasImportantModifier:u,baseClassName:c,maybePostfixModifierPosition:d}=r(t),h=!!d,p=i(h?c.substring(0,d):c);if(!p){if(!h||!(p=i(c))){o=t+(o.length>0?" "+o:o);continue}h=!1}let f=a_(l).join(":"),m=u?f+"!":f,g=m+p;if(n.includes(g))continue;n.push(g);let y=s(p,h);for(let e=0;e<y.length;++e){let t=y[e];n.push(m+t)}o=t+(o.length>0?" "+o:o)}return o})(e,r);return s(e,n),n}return function(){return n(ak.apply(null,arguments))}}(()=>{let e=aS("colors"),t=aS("spacing"),r=aS("blur"),i=aS("brightness"),s=aS("borderColor"),n=aS("borderRadius"),a=aS("borderSpacing"),o=aS("borderWidth"),l=aS("contrast"),u=aS("grayscale"),c=aS("hueRotate"),d=aS("invert"),h=aS("gap"),p=aS("gradientColorStops"),f=aS("gradientColorStopPositions"),m=aS("inset"),g=aS("margin"),y=aS("opacity"),v=aS("padding"),b=aS("saturate"),w=aS("scale"),_=aS("sepia"),x=aS("skew"),k=aS("space"),E=aS("translate"),S=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",aB,t],C=()=>[aB,t],P=()=>["",aI,aL],A=()=>["auto",aM,aB],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],R=()=>["solid","dashed","dotted","double","none"],N=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",aB],M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>[aM,aB];return{cacheSize:500,separator:":",theme:{colors:[aG],spacing:[aI,aL],blur:["none","",aF,aB],brightness:D(),borderColor:[e],borderRadius:["none","","full",aF,aB],borderSpacing:C(),borderWidth:P(),contrast:D(),grayscale:L(),hueRotate:D(),invert:L(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[aU,aL],inset:j(),margin:j(),opacity:D(),padding:C(),saturate:D(),scale:D(),sepia:L(),skew:D(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",aB]}],container:["container"],columns:[{columns:[aF]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),aB]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",a$,aB]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",aB]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",a$,aB]}],"grid-cols":[{"grid-cols":[aG]}],"col-start-end":[{col:["auto",{span:["full",a$,aB]},aB]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[aG]}],"row-start-end":[{row:["auto",{span:[a$,aB]},aB]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",aB]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",aB]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",aB,t]}],"min-w":[{"min-w":[aB,t,"min","max","fit"]}],"max-w":[{"max-w":[aB,t,"none","full","min","max","fit","prose",{screen:[aF]},aF]}],h:[{h:[aB,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[aB,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[aB,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[aB,t,"auto","min","max","fit"]}],"font-size":[{text:["base",aF,aL]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",aD]}],"font-family":[{font:[aG]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",aB]}],"line-clamp":[{"line-clamp":["none",aM,aD]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",aI,aB]}],"list-image":[{"list-image":["none",aB]}],"list-style-type":[{list:["none","disc","decimal",aB]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...R(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",aI,aL]}],"underline-offset":[{"underline-offset":["auto",aI,aB]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",aB]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",aB]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),az]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",aV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},aH]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[n]}],"rounded-s":[{"rounded-s":[n]}],"rounded-e":[{"rounded-e":[n]}],"rounded-t":[{"rounded-t":[n]}],"rounded-r":[{"rounded-r":[n]}],"rounded-b":[{"rounded-b":[n]}],"rounded-l":[{"rounded-l":[n]}],"rounded-ss":[{"rounded-ss":[n]}],"rounded-se":[{"rounded-se":[n]}],"rounded-ee":[{"rounded-ee":[n]}],"rounded-es":[{"rounded-es":[n]}],"rounded-tl":[{"rounded-tl":[n]}],"rounded-tr":[{"rounded-tr":[n]}],"rounded-br":[{"rounded-br":[n]}],"rounded-bl":[{"rounded-bl":[n]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...R(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:R()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...R()]}],"outline-offset":[{"outline-offset":[aI,aB]}],"outline-w":[{outline:[aI,aL]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[aI,aL]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",aF,aK]}],"shadow-color":[{shadow:[aG]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...N(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":N()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",aF,aB]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",aB]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",aB]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",aB]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[a$,aB]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",aB]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",aB]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",aB]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[aI,aL,aD]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function a1(...e){return a0(ap(e))}let a2=(s="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==n?void 0:n.variants)==null)return ap(s,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:r,defaultVariants:i}=n,a=Object.keys(r).map(t=>{let s=null==e?void 0:e[t],n=null==i?void 0:i[t];if(null===s)return null;let a=af(s)||af(n);return r[t][a]}),o=e&&Object.entries(e).reduce((e,t)=>{let[r,i]=t;return void 0===i||(e[r]=i),e},{});return ap(s,a,null==n||null==(t=n.compoundVariants)?void 0:t.reduce((e,t)=>{let{class:r,className:s,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...o}[t]):({...i,...o})[t]===r})?[...e,r,s]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)});function a5({className:e,variant:t,size:r,asChild:i=!1,...s}){let n=i?au:"button";return(0,z.jsx)(n,{"data-slot":"button",className:a1(a2({variant:t,size:r,className:e})),...s})}function a3({className:e,...t}){return(0,z.jsx)("div",{"data-slot":"card",className:a1("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function a4(e,t=[]){let r=[],i=()=>{let t=r.map(e=>W.createContext(e));return function(r){let i=r?.[e]||t;return W.useMemo(()=>({[`__scope${e}`]:{...r,[e]:i}}),[r,i])}};return i.scopeName=e,[function(t,i){let s=W.createContext(i),n=r.length;r=[...r,i];let a=t=>{let{scope:r,children:i,...a}=t,o=r?.[e]?.[n]||s,l=W.useMemo(()=>a,Object.values(a));return(0,z.jsx)(o.Provider,{value:l,children:i})};return a.displayName=t+"Provider",[a,function(r,a){let o=a?.[e]?.[n]||s,l=W.useContext(o);if(l)return l;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=r.reduce((t,{useScope:r,scopeName:i})=>{let s=r(e)[`__scope${i}`];return{...t,...s}},{});return W.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}(i,...t)]}var a6=e.i(23674),a8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=W.forwardRef((e,r)=>{let{asChild:i,...s}=e,n=i?au:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,z.jsx)(n,{...s,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),a9="Progress",[a7,oe]=a4(a9),[ot,or]=a7(a9),oi=W.forwardRef((e,t)=>{var r,i;let{__scopeProgress:s,value:n=null,max:a,getValueLabel:o=oa,...l}=e;(a||0===a)&&!ou(a)&&console.error((r=`${a}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let u=ou(a)?a:100;null===n||oc(n,u)||console.error((i=`${n}`,`Invalid prop \`value\` of value \`${i}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let c=oc(n,u)?n:null,d=ol(c)?o(c,u):void 0;return(0,z.jsx)(ot,{scope:s,value:c,max:u,children:(0,z.jsx)(a8.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":ol(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":oo(c,u),"data-value":c??void 0,"data-max":u,...l,ref:t})})});oi.displayName=a9;var os="ProgressIndicator",on=W.forwardRef((e,t)=>{let{__scopeProgress:r,...i}=e,s=or(os,r);return(0,z.jsx)(a8.div,{"data-state":oo(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...i,ref:t})});function oa(e,t){return`${Math.round(e/t*100)}%`}function oo(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function ol(e){return"number"==typeof e}function ou(e){return ol(e)&&!isNaN(e)&&e>0}function oc(e,t){return ol(e)&&!isNaN(e)&&e<=t&&e>=0}function od({className:e,value:t,...r}){return(0,z.jsx)(oi,{"data-slot":"progress",className:a1("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:(0,z.jsx)(on,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}function oh({level1Progress:e,level2Progress:t,level3Progress:r,currentLevel:i}){let s=(e,t)=>0===t?"#1a1a2e":e<i||t>=100?"#00FF88":e===i?"#00FFFF":"#1a1a2e",n=e=>e>0?`0 0 ${10+.2*e}px`:"none";return(0,z.jsxs)("div",{className:"relative w-full max-w-[200px] mx-auto",children:[(0,z.jsxs)("svg",{viewBox:"0 0 200 180",className:"w-full h-auto",children:[(0,z.jsxs)("defs",{children:[(0,z.jsxs)("filter",{id:"glow1",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,z.jsx)("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),(0,z.jsxs)("feMerge",{children:[(0,z.jsx)("feMergeNode",{in:"coloredBlur"}),(0,z.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,z.jsxs)("filter",{id:"glow2",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,z.jsx)("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),(0,z.jsxs)("feMerge",{children:[(0,z.jsx)("feMergeNode",{in:"coloredBlur"}),(0,z.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,z.jsxs)("filter",{id:"glow3",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,z.jsx)("feGaussianBlur",{stdDeviation:"5",result:"coloredBlur"}),(0,z.jsxs)("feMerge",{children:[(0,z.jsx)("feMergeNode",{in:"coloredBlur"}),(0,z.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]}),(0,z.jsx)("path",{d:"M100 20 C140 20 170 50 175 90 C180 130 160 160 120 165 C100 167 80 167 60 165 C20 160 0 130 5 90 C10 50 40 20 80 20 Z",fill:"none",stroke:"#2a2a4a",strokeWidth:"2",opacity:"0.5"}),(0,z.jsxs)(nH.g,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[(0,z.jsx)(nH.path,{d:"M40 60 Q60 30 100 35 Q85 50 75 70 Q55 80 40 60",fill:s(1,e),stroke:e>0?"#00FFFF":"#3a3a5a",strokeWidth:"2",filter:e>0?"url(#glow1)":"none",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1},style:{filter:e>0?`drop-shadow(${n(e)} ${s(1,e)})`:"none"}}),(0,z.jsx)(nH.path,{d:"M50 55 L65 50 M55 65 L70 60 M45 70 L60 72",fill:"none",stroke:e>30?"#00FFFF":"#2a2a4a",strokeWidth:"1",opacity:e/100})]}),(0,z.jsxs)(nH.g,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:[(0,z.jsx)(nH.path,{d:"M100 35 Q140 30 155 60 Q145 85 120 90 Q95 85 85 65 Q85 45 100 35",fill:s(2,t),stroke:t>0?"#FF6B35":"#3a3a5a",strokeWidth:"2",filter:t>0?"url(#glow2)":"none",style:{filter:t>0?`drop-shadow(${n(t)} ${s(2,t)})`:"none"}}),(0,z.jsx)(nH.path,{d:"M110 45 L125 50 M115 55 L130 58 M105 65 L120 70",fill:"none",stroke:t>30?"#FF6B35":"#2a2a4a",strokeWidth:"1",opacity:t/100})]}),(0,z.jsxs)(nH.g,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[(0,z.jsx)(nH.path,{d:"M35 85 Q25 110 40 140 Q60 155 100 155 Q140 155 160 140 Q175 110 165 85 Q140 100 100 100 Q60 100 35 85",fill:s(3,r),stroke:r>0?"#A855F7":"#3a3a5a",strokeWidth:"2",filter:r>0?"url(#glow3)":"none",style:{filter:r>0?`drop-shadow(${n(r)} ${s(3,r)})`:"none"}}),(0,z.jsx)(nH.path,{d:"M60 120 L80 115 M70 130 L90 125 M80 140 L100 138 M120 140 L140 135 M130 125 L145 120",fill:"none",stroke:r>30?"#A855F7":"#2a2a4a",strokeWidth:"1",opacity:r/100})]}),(0,z.jsx)("path",{d:"M95 155 Q90 170 95 180 M105 155 Q110 170 105 180",fill:"none",stroke:"#3a3a5a",strokeWidth:"2"}),e>0&&(0,z.jsx)(nH.circle,{cx:"60",cy:"55",r:"2",fill:"#00FFFF",animate:{opacity:[.3,1,.3],scale:[.8,1.2,.8]},transition:{duration:2,repeat:1/0}}),t>0&&(0,z.jsx)(nH.circle,{cx:"120",cy:"55",r:"2",fill:"#FF6B35",animate:{opacity:[.3,1,.3],scale:[.8,1.2,.8]},transition:{duration:2,repeat:1/0,delay:.5}}),r>0&&(0,z.jsx)(nH.circle,{cx:"100",cy:"130",r:"2",fill:"#A855F7",animate:{opacity:[.3,1,.3],scale:[.8,1.2,.8]},transition:{duration:2,repeat:1/0,delay:1}})]}),(0,z.jsxs)("div",{className:"mt-4 space-y-1 text-xs",children:[(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e>0?"#00FFFF":"#2a2a4a"}}),(0,z.jsxs)("span",{className:"text-gray-400 text-lg",children:["Novice: ",Math.round(e),"%"]})]}),(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t>0?"#FF6B35":"#2a2a4a"}}),(0,z.jsxs)("span",{className:"text-gray-400 text-lg",children:["Praticien: ",Math.round(t),"%"]})]}),(0,z.jsxs)("div",{className:"flex items-center gap-2",children:[(0,z.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r>0?"#A855F7":"#2a2a4a"}}),(0,z.jsxs)("span",{className:"text-gray-400 text-lg",children:["Expert: ",Math.round(r),"%"]})]})]})]})}on.displayName=os;let op=n4("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function of({isScanning:e,result:t,onComplete:r}){let[i,s]=(0,W.useState)("scanning"),[n,a]=(0,W.useState)(!1),o=(0,W.useCallback)(()=>{a(!1),s("scanning"),r()},[r]);return((0,W.useEffect)(()=>{if(e){a(!0),s("scanning");let e=setTimeout(()=>{s("result")},1500);return()=>clearTimeout(e)}},[e]),(0,W.useEffect)(()=>{if("result"===i&&n){let e=setTimeout(()=>{o()},2e3);return()=>clearTimeout(e)}},[i,n,o]),n)?(0,z.jsx)(n1,{children:(0,z.jsxs)(nH.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:o,children:[(0,z.jsx)("button",{onClick:e=>{e.stopPropagation(),o()},className:"absolute top-6 right-6 p-2 rounded-full bg-gray-800/80 border border-gray-700 hover:bg-gray-700 hover:border-gray-600 transition-colors z-10","aria-label":"Fermer",children:(0,z.jsx)(op,{className:"w-6 h-6 text-gray-400 hover:text-white"})}),(0,z.jsx)("div",{className:"relative",onClick:e=>e.stopPropagation(),children:"scanning"===i?(0,z.jsxs)("div",{className:"text-center",children:[(0,z.jsxs)("div",{className:"relative w-48 h-48 mx-auto mb-6",children:[(0,z.jsxs)("svg",{viewBox:"0 0 200 200",className:"w-full h-full",children:[(0,z.jsx)(nH.circle,{cx:"100",cy:"100",r:"80",fill:"none",stroke:"#00FFFF",strokeWidth:"2",strokeDasharray:"502",initial:{strokeDashoffset:502},animate:{strokeDashoffset:0},transition:{duration:1.5,ease:"linear"}}),(0,z.jsx)(nH.line,{x1:"20",y1:"100",x2:"180",y2:"100",stroke:"#00FFFF",strokeWidth:"2",initial:{y1:20,y2:20},animate:{y1:180,y2:180},transition:{duration:1.5,ease:"easeInOut"}}),(0,z.jsx)("path",{d:"M100 40 C130 40 155 65 155 100 C155 135 130 160 100 160 C70 160 45 135 45 100 C45 65 70 40 100 40",fill:"none",stroke:"#00FFFF",strokeWidth:"1",opacity:"0.3"}),(0,z.jsx)(nH.path,{d:"M70 80 Q100 60 130 80 M60 100 Q100 120 140 100 M70 120 Q100 140 130 120",fill:"none",stroke:"#00FFFF",strokeWidth:"2",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.5}})]}),[...Array(8)].map((e,t)=>(0,z.jsx)(nH.div,{className:"absolute w-1 h-1 bg-cyan-400 rounded-full",style:{left:"50%",top:"50%"},animate:{x:60*Math.cos(t*Math.PI*2/8),y:60*Math.sin(t*Math.PI*2/8),opacity:[0,1,0],scale:[0,1,0]},transition:{duration:1.5,repeat:1/0,delay:.1*t}},t))]}),(0,z.jsx)(nH.p,{className:"text-cyan-400 font-mono text-lg",animate:{opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0},children:"ANALYSE COGNITIVE EN COURS..."})]}):(0,z.jsx)(nH.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},className:"text-center",children:"success"===t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(nH.div,{className:"w-24 h-24 mx-auto mb-4 rounded-full border-4 border-green-500 flex items-center justify-center",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},style:{boxShadow:"0 0 30px #00FF88"},children:(0,z.jsx)(nH.svg,{className:"w-12 h-12 text-green-500",viewBox:"0 0 24 24",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.2},children:(0,z.jsx)(nH.path,{d:"M5 13l4 4L19 7",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5}})})}),(0,z.jsx)("p",{className:"text-green-400 font-mono text-xl",children:"CONCEPT MATRIS"}),(0,z.jsx)("p",{className:"text-gray-500 text-sm mt-3 font-mono",children:"Fermeture automatique..."})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(nH.div,{className:"w-24 h-24 mx-auto mb-4 rounded-full border-4 border-red-500 flex items-center justify-center",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},style:{boxShadow:"0 0 30px #FF4444"},children:(0,z.jsxs)(nH.svg,{className:"w-12 h-12 text-red-500",viewBox:"0 0 24 24",children:[(0,z.jsx)(nH.path,{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z",fill:"currentColor"}),(0,z.jsx)(nH.path,{d:"M12 8v4M12 16h.01",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,z.jsx)("p",{className:"text-red-400 font-mono text-xl",children:"BIAIS DTECT"}),(0,z.jsx)("p",{className:"text-gray-500 text-sm mt-3 font-mono",children:"Fermeture automatique..."})]})})})]})}):null}let om=n4("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),og=n4("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);function oy({options:e,onSelect:t,disabled:r}){return(0,z.jsxs)("div",{className:"w-full max-w-4xl mx-auto",children:[(0,z.jsx)("p",{className:"text-primary font-mono text-sm mb-4 text-center",children:"[ EXPRIENCE DIRECTE ] Cliquez sur l'offre que le site VEUT que vous choisissiez"}),(0,z.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:e.map((e,i)=>(0,z.jsxs)(nH.button,{onClick:()=>!r&&t(i),disabled:r,className:`relative p-6 rounded-xl border-2 transition-all duration-300 text-left ${e.highlighted?"border-primary bg-primary/10":"border-border bg-secondary/50"} ${!r?"hover:scale-105 hover:border-primary cursor-pointer":"cursor-default"}`,whileHover:r?{}:{y:-5},whileTap:r?{}:{scale:.98},children:[e.badge&&(0,z.jsxs)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-primary text-primary-foreground text-xs font-bold rounded-full flex items-center gap-1",children:[(0,z.jsx)(og,{className:"w-3 h-3"}),e.badge.replace(" ","")]}),(0,z.jsx)("h3",{className:"text-xl font-bold text-foreground mb-2",children:e.name}),(0,z.jsx)("p",{className:"text-3xl font-bold text-primary mb-4",children:e.price}),(0,z.jsx)("ul",{className:"space-y-2",children:e.features.map((e,t)=>(0,z.jsxs)("li",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[(0,z.jsx)(om,{className:"w-4 h-4 text-success"}),e]},t))}),(0,z.jsxs)("div",{className:`mt-6 py-2 px-4 rounded-lg text-center font-semibold ${e.highlighted?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:["Choisir ",e.name]})]},e.name))})]})}let ov=n4("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ob=n4("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);function ow({bias:e,isUnlocked:t,onClick:r}){let i={Perception:"var(--neon-cyan)",Cognition:"var(--neon-orange)",Dcision:"var(--neon-purple)",Mmoire:"var(--neon-yellow)",Social:"var(--accent)","UX Law":"var(--neon-green)",Persuasion:"var(--neon-red)","Dark Pattern":"var(--destructive)",Organisation:"var(--primary)",Mtacognition:"var(--info)",Probabilit:"var(--accent)",Possession:"var(--success)",Pricing:"var(--warning)",Addiction:"var(--neon-orange)",Motivation:"var(--neon-green)",motion:"var(--destructive)",Attention:"var(--neon-cyan)",Technologie:"var(--neon-purple)",Communication:"var(--neon-yellow)",Projection:"var(--warning)",Mthodologie:"var(--success)",Mtriques:"var(--primary)",Risque:"var(--destructive)",Estimation:"var(--neon-green)",Jugement:"var(--neon-purple)",Analyse:"var(--muted-foreground)",Recherche:"var(--info)",Comportement:"var(--warning)"}[e.category]||"var(--muted-foreground)";return(0,z.jsxs)(nH.div,{onClick:t?r:void 0,className:`relative p-4 rounded-xl border-2 transition-all duration-300 ${t?"border-border bg-secondary/50 hover:border-primary/50 cursor-pointer":"border-muted bg-card/50 opacity-50 cursor-not-allowed"}`,whileHover:t?{scale:1.02}:{},children:[!t&&(0,z.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-background/60 rounded-xl",children:(0,z.jsx)(ar,{className:"w-8 h-8 text-muted-foreground"})}),(0,z.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,z.jsx)("h3",{className:"font-bold text-foreground",children:e.name}),(0,z.jsx)("span",{className:"text-xs px-2 py-1 rounded-full font-mono",style:{backgroundColor:`color-mix(in oklch, ${i} 20%, transparent)`,color:i,border:`1px solid color-mix(in oklch, ${i} 40%, transparent)`},children:e.category})]}),(0,z.jsx)("p",{className:"text-muted-foreground text-sm mb-3 line-clamp-2",children:e.definition}),(0,z.jsxs)("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-card/50",children:[e.counter_tactic.startsWith("")?(0,z.jsx)(ov,{className:"w-4 h-4 text-destructive flex-shrink-0 mt-0.5"}):(0,z.jsx)(ob,{className:"w-4 h-4 text-warning flex-shrink-0 mt-0.5"}),(0,z.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.counter_tactic})]})]})}let o_=n4("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ox=n4("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function ok({user:e,score:t,totalQuestions:r,onClose:i,onReset:s}){let n=Math.round(t/r*100),a=new Date().toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),o=n>=90?{label:"Excellence",stars:5,colorClass:"text-neon-yellow"}:n>=80?{label:"Expert",stars:4,colorClass:"text-success"}:n>=70?{label:"Avanc",stars:3,colorClass:"text-primary"}:n>=60?{label:"Intermdiaire",stars:2,colorClass:"text-accent"}:{label:"Initi",stars:1,colorClass:"text-destructive"};return(0,z.jsx)(nH.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-background/80 backdrop-blur-sm",onClick:i,children:(0,z.jsxs)(nH.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200},onClick:e=>e.stopPropagation(),className:"relative w-full max-w-2xl",children:[(0,z.jsx)("button",{onClick:i,className:"absolute -top-4 -right-4 z-10 p-2 rounded-full bg-secondary text-muted-foreground hover:text-foreground hover:bg-muted transition-colors",children:(0,z.jsx)(op,{className:"w-5 h-5"})}),(0,z.jsxs)("div",{className:"relative bg-gradient-to-br from-card via-secondary to-card rounded-2xl border-2 border-primary/50 overflow-hidden",children:[(0,z.jsx)("div",{className:"absolute top-0 left-0 w-24 h-24 border-t-4 border-l-4 border-primary rounded-tl-2xl"}),(0,z.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 border-t-4 border-r-4 border-accent rounded-tr-2xl"}),(0,z.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 border-b-4 border-l-4 border-accent rounded-bl-2xl"}),(0,z.jsx)("div",{className:"absolute bottom-0 right-0 w-24 h-24 border-b-4 border-r-4 border-primary rounded-br-2xl"}),(0,z.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-primary/10 rounded-full blur-3xl"}),(0,z.jsxs)("div",{className:"relative p-8 md:p-12 text-center",children:[(0,z.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-2",children:[(0,z.jsx)(n6,{className:"w-8 h-8 text-primary"}),(0,z.jsx)("span",{className:"text-xl font-bold text-muted-foreground tracking-widest uppercase",children:"Cognitive Labs"})]}),(0,z.jsx)("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary via-accent to-destructive bg-clip-text text-transparent mb-8",children:"Certificat de Russite"}),(0,z.jsx)(nH.div,{initial:{rotateY:0},animate:{rotateY:360},transition:{duration:1,delay:.5},className:`inline-flex items-center justify-center w-24 h-24 rounded-full mb-6 bg-secondary/50 border-3 border-current ${o.colorClass}`,children:(0,z.jsx)(an,{className:"w-12 h-12"})}),(0,z.jsx)("p",{className:"text-muted-foreground mb-2",children:"Ce certificat est dcern "}),(0,z.jsxs)("h2",{className:"text-3xl md:text-4xl font-bold text-foreground mb-1",children:[e.firstName," ",e.lastName]}),(0,z.jsx)("p",{className:"text-primary mb-8",children:e.job}),(0,z.jsxs)("p",{className:"text-muted-foreground mb-4",children:["Pour avoir complt avec succs la formation",(0,z.jsx)("br",{}),(0,z.jsx)("span",{className:"text-foreground font-semibold",children:'"Matrise des Biais Cognitifs en UX Design"'})]}),(0,z.jsxs)("div",{className:"inline-block p-4 rounded-xl bg-secondary/50 border border-border mb-6",children:[(0,z.jsx)("div",{className:"flex items-center justify-center gap-1 mb-2",children:Array.from({length:5}).map((e,t)=>(0,z.jsx)(og,{className:`w-6 h-6 ${t<o.stars?o.colorClass:"text-muted"}`,fill:t<o.stars?"currentColor":"transparent"},t))}),(0,z.jsxs)("p",{className:`text-2xl font-bold ${o.colorClass}`,children:["Grade : ",o.label]}),(0,z.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Score final : ",t,"/",r," (",n,"%)"]})]}),(0,z.jsxs)("p",{className:"text-muted-foreground mb-8",children:["Dlivr le ",a]}),(0,z.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,z.jsxs)(a5,{onClick:()=>{alert("Fonctionnalit de tlchargement PDF  venir !")},className:"bg-primary hover:bg-primary/90 text-primary-foreground font-semibold",children:[(0,z.jsx)(o_,{className:"w-4 h-4 mr-2"}),"Tlcharger PDF"]}),(0,z.jsxs)(a5,{onClick:()=>{navigator.share?navigator.share({title:"Mon diplme Cognitive Labs",text:`J'ai obtenu le grade "${o.label}" sur Cognitive Labs avec ${n}% de bonnes r\xe9ponses !`,url:window.location.href}):(navigator.clipboard.writeText(`J'ai obtenu le grade "${o.label}" sur Cognitive Labs avec ${n}% de bonnes r\xe9ponses !`),alert("Lien copi dans le presse-papier !"))},variant:"outline",className:"border-accent text-accent hover:bg-accent/10 bg-transparent",children:[(0,z.jsx)(ox,{className:"w-4 h-4 mr-2"}),"Partager"]})]}),(0,z.jsx)("div",{className:"mt-4",children:(0,z.jsxs)(a5,{onClick:s,variant:"ghost",className:"text-muted-foreground hover:text-foreground",children:[(0,z.jsx)(RotateCcw,{className:"w-4 h-4 mr-2"}),"Rdmarrer le jeu"]})})]})]})]})})}let oE="cognitiveBiasQuizState",oS=e=>{try{let t=JSON.stringify(e);window.localStorage.setItem(oE,t)}catch(e){console.error("Failed to save state to localStorage:",e)}},oT=[{id:1,name:"Novice",name_fr:"Novice",unlock_criteria:0,theme_color:"#00FFFF",glow_color:"0 0 20px #00FFFF",description:"Dcouvrez les fondamentaux des biais cognitifs"},{id:2,name:"Practitioner",name_fr:"Praticien",unlock_criteria:70,theme_color:"#FF6B35",glow_color:"0 0 20px #FF6B35",description:"Appliquez vos connaissances  des cas UX rels"},{id:3,name:"Expert",name_fr:"Expert",unlock_criteria:70,theme_color:"#A855F7",glow_color:"0 0 20px #A855F7",description:"Matrisez les biais avancs et leurs implications stratgiques"}],oj=[{id:"N1-01",level_id:1,scenario:"Un utilisateur trouve une app belle, donc il pense qu'elle est facile  utiliser.",options:[{text:"Effet de Halo",is_correct:!0,bias_id:"halo_effect"},{text:"Preuve Sociale",is_correct:!1,bias_id:"social_proof"},{text:"Biais de Confirmation",is_correct:!1,bias_id:"confirmation_bias"}],explanation:"L'Effet de Halo (ou Esthtique-Usabilit) : le beau est peru comme fonctionnel.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-02",level_id:1,scenario:"Un utilisateur ne lit que les avis qui confirment son envie d'acheter ce produit.",options:[{text:"Biais de Confirmation",is_correct:!0,bias_id:"confirmation_bias"},{text:"Biais d'Ancrage",is_correct:!1,bias_id:"anchoring"},{text:"Biais de Rcence",is_correct:!1,bias_id:"recency_bias"}],explanation:"Le Biais de Confirmation privilgie les infos qui valident nos croyances.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-03",level_id:1,scenario:'Le premier prix vu est de 1000, le second  800 semble alors "pas cher".',options:[{text:"Biais d'Ancrage",is_correct:!0,bias_id:"anchoring"},{text:"Effet de Leurre",is_correct:!1,bias_id:"decoy_effect"},{text:"Aversion  la perte",is_correct:!1,bias_id:"loss_aversion"}],explanation:"Le premier chiffre sert d'Ancre mentale pour toutes les comparaisons futures.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-04",level_id:1,scenario:"Trop de choix tue le choix : l'utilisateur abandonne car c'est trop compliqu.",options:[{text:"Loi de Fitts",is_correct:!1,bias_id:"fitts_law"},{text:"Loi de Hick",is_correct:!0,bias_id:"hicks_law"},{text:"Loi de Miller",is_correct:!1,bias_id:"millers_law"}],explanation:"La Loi de Hick : le temps de dcision augmente avec le nombre d'options.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-05",level_id:1,scenario:"On retient mieux le dbut et la fin d'une liste que le milieu.",options:[{text:"Effet de Position Srie",is_correct:!0,bias_id:"serial_position"},{text:"Effet Von Restorff",is_correct:!1,bias_id:"von_restorff"},{text:"Effet Zeigarnik",is_correct:!1,bias_id:"zeigarnik"}],explanation:"C'est l'Effet de Position Srie (combinaison de Primaut et Rcence).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-06",level_id:1,scenario:"La peur de perdre 10 est plus forte que la joie d'en gagner 10.",options:[{text:"Aversion  la perte",is_correct:!0,bias_id:"loss_aversion"},{text:"Biais de Ngativit",is_correct:!1,bias_id:"negativity_bias"},{text:"Effet de Dotation",is_correct:!1,bias_id:"endowment_effect"}],explanation:"L'Aversion  la perte : la douleur de perdre est psychologiquement 2x plus forte.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-07",level_id:1,scenario:'"Dj 10 000 utilisateurs inscrits !" affich sur la home page.',options:[{text:"Preuve Sociale",is_correct:!0,bias_id:"social_proof"},{text:"Effet de Cadre",is_correct:!1,bias_id:"framing"},{text:"Biais d'Autorit",is_correct:!1,bias_id:"authority_bias"}],explanation:"La Preuve Sociale (Bandwagon) : on suit le comportement du groupe.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-08",level_id:1,scenario:"Dans une liste de texte noir, le bouton rouge attire l'attention.",options:[{text:"Effet Von Restorff",is_correct:!0,bias_id:"von_restorff"},{text:"Ccit au changement",is_correct:!1,bias_id:"change_blindness"},{text:"Effet Stroop",is_correct:!1,bias_id:"stroop_effect"}],explanation:"L'Effet Von Restorff (Isolation) : l'lment qui diffre se retient mieux.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-09",level_id:1,scenario:"Une tche inacheve (barre de progression  90%) reste en tte de l'utilisateur.",options:[{text:"Effet Zeigarnik",is_correct:!0,bias_id:"zeigarnik"},{text:"Loi de Parkinson",is_correct:!1,bias_id:"parkinsons_law"},{text:"Effet de Rcence",is_correct:!1,bias_id:"recency_effect"}],explanation:"L'Effet Zeigarnik : on se souvient mieux des tches interrompues.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-10",level_id:1,scenario:"Les utilisateurs s'attendent  ce que votre site fonctionne comme Amazon/Google.",options:[{text:"Loi de Jakob",is_correct:!0,bias_id:"jakobs_law"},{text:"Loi de Moore",is_correct:!1,bias_id:"moores_law"},{text:"Loi de Postel",is_correct:!1,bias_id:"postels_law"}],explanation:"La Loi de Jakob : les utilisateurs passent leur temps sur d'autres sites, copiez les standards.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-11",level_id:1,scenario:"Si vous offrez un ebook gratuit, l'utilisateur se sent oblig de donner son email.",options:[{text:"Rciprocit",is_correct:!0,bias_id:"reciprocity"},{text:"Engagement",is_correct:!1,bias_id:"commitment"},{text:"Cohrence",is_correct:!1,bias_id:"consistency"}],explanation:"Le principe de Rciprocit : un don appelle un contre-don.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-12",level_id:1,scenario:'"Offre valable encore 10 minutes !"',options:[{text:"Raret (Scarcity)",is_correct:!1,bias_id:"scarcity"},{text:"Urgence",is_correct:!1,bias_id:"urgency"},{text:"Les deux",is_correct:!0,bias_id:"scarcity_urgency"}],explanation:"C'est le principe de Raret coupl  l'urgence temporelle.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-13",level_id:1,scenario:"Un expert en blouse blanche recommande ce dentifrice.",options:[{text:"Biais d'Autorit",is_correct:!0,bias_id:"authority_bias"},{text:"Effet de Halo",is_correct:!1,bias_id:"halo_effect"},{text:"Biais de Cadrage",is_correct:!1,bias_id:"framing"}],explanation:"Le Biais d'Autorit : on fait confiance aux figures d'autorit perues.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-14",level_id:1,scenario:'Prsenter un yaourt comme "90% sans matire grasse" plutt que "10% de gras".',options:[{text:"Effet de Cadrage",is_correct:!0,bias_id:"framing"},{text:"Ancrage",is_correct:!1,bias_id:"anchoring"},{text:"Leurre",is_correct:!1,bias_id:"decoy_effect"}],explanation:"L'Effet de Cadrage (Framing) : la formulation change la perception positive/ngative.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-15",level_id:1,scenario:"Penser qu'une personne calme est forcment bibliothcaire plutt qu'agriculteur.",options:[{text:"Reprsentativit",is_correct:!1,bias_id:"representativeness"},{text:"Strotype",is_correct:!1,bias_id:"stereotype"},{text:"Les deux",is_correct:!0,bias_id:"representativeness_stereotype"}],explanation:"L'Heuristique de Reprsentativit se base sur des strotypes pour juger.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-16",level_id:1,scenario:"Surestimer le danger des avions car on a vu un crash aux infos hier.",options:[{text:"Biais de Disponibilit",is_correct:!0,bias_id:"availability_bias"},{text:"Biais de Survivant",is_correct:!1,bias_id:"survivorship_bias"},{text:"Biais de Normalit",is_correct:!1,bias_id:"normalcy_bias"}],explanation:"Le Biais de Disponibilit : on juge sur les infos rcentes/marquantes en mmoire.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-17",level_id:1,scenario:"Un dbutant pense tout savoir sur l'UX aprs un article Medium.",options:[{text:"Dunning-Kruger",is_correct:!0,bias_id:"dunning_kruger"},{text:"Biais d'Optimisme",is_correct:!1,bias_id:"optimism_bias"},{text:"Excs de Confiance",is_correct:!1,bias_id:"overconfidence"}],explanation:"L'Effet Dunning-Kruger : les incomptents surestiment leur comptence.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-18",level_id:1,scenario:'Aprs 5 tirages "Rouge"  la roulette, on parie "Noir" car "a doit sortir".',options:[{text:"L'erreur du Parieur",is_correct:!0,bias_id:"gamblers_fallacy"},{text:"Biais de la main chaude",is_correct:!1,bias_id:"hot_hand"},{text:"Illusion de contrle",is_correct:!1,bias_id:"illusion_control"}],explanation:"L'Erreur du Parieur (Gambler's Fallacy) : croire que le hasard s'auto-corrige.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-19",level_id:1,scenario:"Accorder plus de valeur  un objet simplement parce qu'il nous appartient.",options:[{text:"Effet de Dotation",is_correct:!0,bias_id:"endowment_effect"},{text:"Aversion  la perte",is_correct:!1,bias_id:"loss_aversion"},{text:"Cot irrcuprable",is_correct:!1,bias_id:"sunk_cost"}],explanation:"L'Effet de Dotation (Endowment Effect) : possder augmente la valeur perue.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N1-20",level_id:1,scenario:"Le fait de remarquer partout la voiture qu'on vient d'acheter.",options:[{text:"Illusion de Frquence",is_correct:!0,bias_id:"frequency_illusion"},{text:"Biais de Confirmation",is_correct:!1,bias_id:"confirmation_bias"},{text:"Biais d'Attention",is_correct:!1,bias_id:"attention_bias"}],explanation:"L'Illusion de Frquence (Baader-Meinhof) : une info apprise semble apparatre partout.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-01",level_id:2,scenario:"Pour vendre l'offre Medium, on ajoute une offre Large trs chre et peu intressante.",options:[{text:"Effet de Leurre",is_correct:!0,bias_id:"decoy_effect"},{text:"Ancrage",is_correct:!1,bias_id:"anchoring"},{text:"Contraste",is_correct:!1,bias_id:"contrast"}],explanation:"L'Effet de Leurre (Decoy Effect) pousse vers l'option cible en crant une comparaison asymtrique.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-02",level_id:2,scenario:'La case "S\'abonner  la newsletter" est coche par dfaut.',options:[{text:"Statu Quo",is_correct:!0,bias_id:"status_quo"},{text:"Opt-in",is_correct:!1,bias_id:"opt_in"},{text:"Nudge",is_correct:!1,bias_id:"nudge"}],explanation:"Le Biais de Statu Quo : l'utilisateur a tendance  ne pas changer l'tat par dfaut.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-03",level_id:2,scenario:"Grouper les champs de formulaire (Adresse, Paiement) pour rduire la fatigue.",options:[{text:"Chunking",is_correct:!0,bias_id:"chunking"},{text:"Loi de Fitts",is_correct:!1,bias_id:"fitts_law"},{text:"Loi de Miller",is_correct:!1,bias_id:"millers_law"}],explanation:"Le Chunking (li  la Loi de Miller) aide  traiter l'info par petits paquets (7  2 lments).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-04",level_id:2,scenario:"Un design pur cache des fonctionnalits complexes, frustrant l'utilisateur expert.",options:[{text:"Aesthetic-Usability",is_correct:!0,bias_id:"aesthetic_usability"},{text:"Form over Function",is_correct:!1,bias_id:"form_function"},{text:"Biais de complexit",is_correct:!1,bias_id:"complexity_bias"}],explanation:"L'Effet Esthtique-Usabilit peut masquer des problmes d'UX graves si le UI est joli.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-05",level_id:2,scenario:'Le "Pull-to-refresh" d\'Instagram qui donne une rcompense alatoire (nouveaux posts).',options:[{text:"Rcompense Variable",is_correct:!0,bias_id:"variable_reward"},{text:"Gamification",is_correct:!1,bias_id:"gamification"},{text:"Hook Model",is_correct:!1,bias_id:"hook_model"}],explanation:"Le principe de Rcompense Variable (comme au casino) cre une addiction (Dopamine).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-06",level_id:2,scenario:"Montrer une barre de progression dj remplie  10% lors du premier login.",options:[{text:"Gradient de But",is_correct:!1,bias_id:"goal_gradient"},{text:"Effet Zeigarnik",is_correct:!1,bias_id:"zeigarnik"},{text:"Endowed Progress",is_correct:!0,bias_id:"endowed_progress"}],explanation:"L'Endowed Progress Effect : on est plus motiv  finir si on pense avoir dj commenc.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-07",level_id:2,scenario:"Un message d'erreur rouge \"VOUS AVEZ FAIT UNE FAUTE\" stresse l'utilisateur.",options:[{text:"Biais de Ngativit",is_correct:!0,bias_id:"negativity_bias"},{text:"Charge Cognitive",is_correct:!1,bias_id:"cognitive_load"},{text:"Framing",is_correct:!1,bias_id:"framing"}],explanation:"Le Biais de Ngativit fait que l'utilisateur retient plus l'agression que l'aide. Utilisez un wording positif.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-08",level_id:2,scenario:"Faire culpabiliser l'utilisateur pour qu'il ne se dsabonne pas (\"Non, je n'aime pas les promos\").",options:[{text:"Confirmshaming",is_correct:!0,bias_id:"confirmshaming"},{text:"Gaslighting",is_correct:!1,bias_id:"gaslighting"},{text:"FOMO",is_correct:!1,bias_id:"fomo"}],explanation:"Le Confirmshaming est un Dark Pattern qui exploite la honte pour manipuler.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-09",level_id:2,scenario:"Cliquez sur l'offre que le site VEUT que vous choisissiez.",options:[{text:"Basic - 9/mois",is_correct:!1,bias_id:null},{text:"Pro - 19/mois  Populaire",is_correct:!0,bias_id:"center_stage"},{text:"Enterprise - 49/mois",is_correct:!1,bias_id:null}],explanation:"L'Effet Centre-Stage : prfrence pour l'option centrale dans une disposition horizontale, renforce par le badge 'Populaire'.",ui_interaction:"PRICE_GRID",experience_data:{type:"pricing",options:[{name:"Basic",price:"9/mois",features:["1 utilisateur","5 Go stockage"],highlighted:!1},{name:"Pro",price:"19/mois",features:["5 utilisateurs","50 Go stockage","Support prioritaire"],highlighted:!0,badge:" Populaire"},{name:"Enterprise",price:"49/mois",features:["Illimit","500 Go stockage","Support 24/7"],highlighted:!1}]}},{id:"N2-10",level_id:2,scenario:"Un bouton CTA isol par beaucoup d'espace blanc.",options:[{text:"Effet Von Restorff",is_correct:!0,bias_id:"von_restorff"},{text:"Loi de la Proximit",is_correct:!1,bias_id:"proximity_law"},{text:"Loi de la Clture",is_correct:!1,bias_id:"closure_law"}],explanation:"Utilise l'Effet d'Isolation pour attirer l'attention par le vide (White Space).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-11",level_id:2,scenario:'Afficher "Sophie de Paris vient d\'acheter cet article" en popup.',options:[{text:"Preuve Sociale",is_correct:!0,bias_id:"social_proof"},{text:"Urgence",is_correct:!1,bias_id:"urgency"},{text:"Notification",is_correct:!1,bias_id:"notification"}],explanation:"C'est une application directe de la Preuve Sociale pour rassurer.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-12",level_id:2,scenario:"L'utilisateur tape \"Pourquoi l'iPhone est nul\" et ne trouve que des dfauts.",options:[{text:"Biais de Confirmation",is_correct:!0,bias_id:"confirmation_bias"},{text:"Biais de Recherche",is_correct:!1,bias_id:"search_bias"},{text:"Algorithme",is_correct:!1,bias_id:"algorithm"}],explanation:"Les moteurs de recherche renforcent le Biais de Confirmation via les mots-cls saisis.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-13",level_id:2,scenario:'Utiliser une icne "Maison" pour l\'accueil plutt qu\'un texte "Accueil".',options:[{text:"Reconnaissance vs Rappel",is_correct:!0,bias_id:"recognition_recall"},{text:"Iconicit",is_correct:!1,bias_id:"iconicity"},{text:"Affordance",is_correct:!1,bias_id:"affordance"}],explanation:"Favoriser la Reconnaissance plutt que le Rappel : l'image universelle rduit la charge mentale.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-14",level_id:2,scenario:'Afficher une animation de "calcul" factice pour montrer que l\'algo travaille dur.',options:[{text:"Illusion du Labeur",is_correct:!0,bias_id:"labor_illusion"},{text:"Attente active",is_correct:!1,bias_id:"active_waiting"},{text:"Skeuomorphisme",is_correct:!1,bias_id:"skeuomorphism"}],explanation:"L'Illusion du Labeur : on valorise plus un service si on \"voit\" l'effort (mme simul).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-15",level_id:2,scenario:"Permettre  l'utilisateur de personnaliser son dashboard.",options:[{text:"Effet Ikea",is_correct:!0,bias_id:"ikea_effect"},{text:"Customization",is_correct:!1,bias_id:"customization"},{text:"Appropriation",is_correct:!1,bias_id:"appropriation"}],explanation:"L'Effet Ikea : on aime disproportionnellement ce qu'on a co-cr ou assembl.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-16",level_id:2,scenario:'Commencer par un petit "J\'aime" avant de demander un achat.',options:[{text:"Pied-dans-la-porte",is_correct:!1,bias_id:"foot_in_door"},{text:"Cohrence",is_correct:!1,bias_id:"consistency"},{text:"Les deux",is_correct:!0,bias_id:"foot_door_consistency"}],explanation:"Technique du Pied-dans-la-porte qui joue sur le besoin de Cohrence (Consistency).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-17",level_id:2,scenario:"Mettre les infos les moins importantes au milieu d'une Long Page de vente.",options:[{text:"Serial Position Effect",is_correct:!0,bias_id:"serial_position"},{text:"Hirarchie visuelle",is_correct:!1,bias_id:"visual_hierarchy"},{text:"F pattern",is_correct:!1,bias_id:"f_pattern"}],explanation:'On cache le "mou" au milieu car on sait que l\'utilisateur scannera Dbut/Fin (Serial Position).',ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-18",level_id:2,scenario:"Agrandir la zone cliquable d'un bouton sur mobile.",options:[{text:"Loi de Fitts",is_correct:!0,bias_id:"fitts_law"},{text:"Loi de Touch",is_correct:!1,bias_id:"touch_law"},{text:"Accessibilit",is_correct:!1,bias_id:"accessibility"}],explanation:"La Loi de Fitts : le temps d'accs dpend de la distance et de la taille de la cible.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-19",level_id:2,scenario:"Une popup surgit trop vite : l'utilisateur la ferme par rflexe sans lire.",options:[{text:"Ractance",is_correct:!0,bias_id:"reactance"},{text:"Ccit bannire",is_correct:!1,bias_id:"banner_blindness"},{text:"Reflexe moteur",is_correct:!1,bias_id:"motor_reflex"}],explanation:"La Ractance Psychologique : rsistance instinctive quand on sent notre libert menace (intrusion).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N2-20",level_id:2,scenario:'Utiliser du gris pour un bouton "Annuler" et du bleu pour "Valider".',options:[{text:"Affordance",is_correct:!1,bias_id:"affordance"},{text:"Hirarchie visuelle",is_correct:!1,bias_id:"visual_hierarchy"},{text:"Biais de Saillance",is_correct:!0,bias_id:"salience_bias"}],explanation:"Le Biais de Saillance guide l'il vers l'lment le plus visible (attention aux Dark Patterns ici).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-01",level_id:3,scenario:'On continue un projet rat car "on a dj dpens 50k dessus".',options:[{text:"Cots Irrcuprables",is_correct:!0,bias_id:"sunk_cost"},{text:"Aversion  la perte",is_correct:!1,bias_id:"loss_aversion"},{text:"Enttement",is_correct:!1,bias_id:"stubbornness"}],explanation:"Le biais des Cots Irrcuprables (Sunk Cost Fallacy) aveugle la prise de dcision rationnelle.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-02",level_id:3,scenario:"Les utilisateurs changent de comportement car ils savent qu'on les observe en test.",options:[{text:"Effet Hawthorne",is_correct:!0,bias_id:"hawthorne_effect"},{text:"Biais de l'Observateur",is_correct:!1,bias_id:"observer_bias"},{text:"Dsirabilit Sociale",is_correct:!1,bias_id:"social_desirability"}],explanation:"L'Effet Hawthorne : l'observation modifie le comportement naturel.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-03",level_id:3,scenario:"Analyser uniquement les feedbacks des utilisateurs actifs pour amliorer le produit.",options:[{text:"Biais du Survivant",is_correct:!0,bias_id:"survivorship_bias"},{text:"Biais de Slection",is_correct:!1,bias_id:"selection_bias"},{text:"Biais d'Activit",is_correct:!1,bias_id:"activity_bias"}],explanation:"Le Biais du Survivant : on oublie d'analyser ceux qui sont partis (le churn) et pourquoi.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-04",level_id:3,scenario:"Toute l'quipe produit est d'accord sans dbat pour viter le conflit.",options:[{text:"Pense de Groupe",is_correct:!0,bias_id:"groupthink"},{text:"Biais de Consensus",is_correct:!1,bias_id:"consensus_bias"},{text:"Harmonie",is_correct:!1,bias_id:"harmony"}],explanation:"La Pense de Groupe (Groupthink) tue l'innovation critique et ignore les risques.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-05",level_id:3,scenario:"Faire confiance aveuglment  la suggestion de l'IA sans vrifier.",options:[{text:"Biais d'Automatisation",is_correct:!0,bias_id:"automation_bias"},{text:"Biais Algorithmique",is_correct:!1,bias_id:"algorithmic_bias"},{text:"Paresse cognitive",is_correct:!1,bias_id:"cognitive_laziness"}],explanation:"Le Biais d'Automatisation : la propension  croire que la machine a raison sur l'humain.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-06",level_id:3,scenario:"Crer des frictions volontaires pour empcher une action (ex: dsinscription).",options:[{text:"Sludge",is_correct:!0,bias_id:"sludge"},{text:"Nudge",is_correct:!1,bias_id:"nudge"},{text:"Dark Pattern",is_correct:!1,bias_id:"dark_pattern"}],explanation:"Le Sludge (Boue) est l'inverse du Nudge : de la friction mauvaise pour l'utilisateur.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-07",level_id:3,scenario:'Le designer ne comprend pas que l\'utilisateur ne trouve pas le bouton "vident".',options:[{text:"Maldiction du Savoir",is_correct:!0,bias_id:"curse_of_knowledge"},{text:"Empathie Gap",is_correct:!1,bias_id:"empathy_gap"},{text:"Biais de Projection",is_correct:!1,bias_id:"projection_bias"}],explanation:"La Maldiction du Savoir : impossible d'imaginer ne pas savoir ce qu'on sait dj.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-08",level_id:3,scenario:'Penser que "tout le monde utilise son tlphone comme moi".',options:[{text:"Faux Consensus",is_correct:!0,bias_id:"false_consensus"},{text:"Biais de Projection",is_correct:!1,bias_id:"projection_bias"},{text:"Solipsisme",is_correct:!1,bias_id:"solipsism"}],explanation:"L'Effet de Faux Consensus : surestimer  quel point les autres nous ressemblent.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-09",level_id:3,scenario:"Utiliser un outil (Excel) pour tout faire, mme du design, car on le connait.",options:[{text:"Dformation Professionnelle",is_correct:!1,bias_id:"professional_deformation"},{text:"Fixit Fonctionnelle",is_correct:!1,bias_id:"functional_fixedness"},{text:"Loi de l'Instrument",is_correct:!0,bias_id:"law_of_instrument"}],explanation:"La Loi de l'Instrument (Marteau de Maslow) : \"Si j'ai un marteau, tout ressemble  un clou\".",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-10",level_id:3,scenario:"Une mesure devient un objectif (ex: temps pass), donc on dgrade l'UX pour l'augmenter.",options:[{text:"Loi de Goodhart",is_correct:!0,bias_id:"goodharts_law"},{text:"Loi de Campbell",is_correct:!1,bias_id:"campbells_law"},{text:"KPI hacking",is_correct:!1,bias_id:"kpi_hacking"}],explanation:"La Loi de Goodhart : lorsqu'une mesure devient un objectif, elle cesse d'tre une bonne mesure.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-11",level_id:3,scenario:"Prfrer supprimer totalement un petit risque plutt que rduire un grand risque.",options:[{text:"Biais de Risque Zro",is_correct:!0,bias_id:"zero_risk_bias"},{text:"Aversion au risque",is_correct:!1,bias_id:"risk_aversion"},{text:"Principe de prcaution",is_correct:!1,bias_id:"precautionary"}],explanation:"Le Biais de Risque Zro : notre cerveau prfre la certitude totale (0%)  la probabilit.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-12",level_id:3,scenario:'Aprs un lancement rat, dire "Je le savais, c\'tait vident !".',options:[{text:"Biais Rtrospectif",is_correct:!0,bias_id:"hindsight_bias"},{text:"Biais de Rsultat",is_correct:!1,bias_id:"outcome_bias"},{text:"Rationalisation",is_correct:!1,bias_id:"rationalization"}],explanation:"Le Biais Rtrospectif (Hindsight Bias) : rcrire l'histoire pour se donner raison.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-13",level_id:3,scenario:"Sous-estimer systmatiquement le temps de dv d'une feature dans la roadmap.",options:[{text:"La Fallace du Planning",is_correct:!0,bias_id:"planning_fallacy"},{text:"Loi de Hofstadter",is_correct:!1,bias_id:"hofstadters_law"},{text:"Optimisme",is_correct:!1,bias_id:"optimism"}],explanation:"La Fallace du Planning : on sous-estime toujours le temps, mme en connaissant le pass.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-14",level_id:3,scenario:'Crer des Personas bass sur des clichs ("La mnagre") plutt que de la data.',options:[{text:"Strotypage",is_correct:!0,bias_id:"stereotyping"},{text:"Biais de Reprsentativit",is_correct:!1,bias_id:"representativeness"},{text:"Paresse",is_correct:!1,bias_id:"laziness"}],explanation:"Le Strotypage rduit la complexit humaine  des traits simplistes et souvent faux.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-15",level_id:3,scenario:"Arrter un A/B test ds que la variante B passe devant, sans attendre la significativit.",options:[{text:"Peeking Bias",is_correct:!0,bias_id:"peeking_bias"},{text:"Biais de Rsultat",is_correct:!1,bias_id:"outcome_bias"},{text:"Impatience",is_correct:!1,bias_id:"impatience"}],explanation:"Le Peeking (regarder trop tt) fausse les stats et mne  de fausses conclusions positives.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-16",level_id:3,scenario:"On fait ce que dit le directeur car c'est le mieux pay, mme si c'est une mauvaise ide UX.",options:[{text:"Effet HiPPO",is_correct:!0,bias_id:"hippo_effect"},{text:"Biais d'Autorit",is_correct:!1,bias_id:"authority_bias"},{text:"Obissance",is_correct:!1,bias_id:"obedience"}],explanation:"HiPPO (Highest Paid Person's Opinion) : l'avis du chef crase la data.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-17",level_id:3,scenario:"Refuser de changer une techno obsolte par confort.",options:[{text:"Statu Quo",is_correct:!0,bias_id:"status_quo"},{text:"Rsistance au changement",is_correct:!1,bias_id:"change_resistance"},{text:"Zone de confort",is_correct:!1,bias_id:"comfort_zone"}],explanation:"Le Biais de Statu Quo s'applique aussi aux choix techniques et organisationnels.",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-18",level_id:3,scenario:"L'quipe refuse de retirer une feature inutile par peur de dcevoir 3 utilisateurs.",options:[{text:"Biais d'Omission",is_correct:!1,bias_id:"omission_bias"},{text:"Aversion  la perte",is_correct:!0,bias_id:"loss_aversion"},{text:"Status Quo",is_correct:!1,bias_id:"status_quo"}],explanation:"C'est une forme d'Aversion  la Perte applique au produit (Feature Hoarding).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-19",level_id:3,scenario:"Juger un utilisateur \"stupide\" parce qu'il n'arrive pas  utiliser l'app.",options:[{text:"Erreur Fondamentale d'Attribution",is_correct:!0,bias_id:"fundamental_attribution_error"},{text:"Biais de Supriorit",is_correct:!1,bias_id:"superiority_bias"},{text:"Manque d'empathie",is_correct:!1,bias_id:"lack_empathy"}],explanation:"L'Erreur Fondamentale d'Attribution : attribuer l'chec  la personnalit (il est bte) plutt qu'au contexte (l'interface est mauvaise).",ui_interaction:"MULTIPLE_CHOICE"},{id:"N3-20",level_id:3,scenario:"Simplifier un problme complexe pour qu'il rentre dans une solution simple et sduisante.",options:[{text:"Biais de Complexit (Inverse)",is_correct:!1,bias_id:"complexity_bias_inverse"},{text:"Loi de la simplicit",is_correct:!1,bias_id:"simplicity_law"},{text:"Rductionnisme",is_correct:!0,bias_id:"reductionism"}],explanation:"Le Rductionnisme : ignorer les nuances ncessaires par amour de la simplicit.",ui_interaction:"MULTIPLE_CHOICE"}],oC=[{bias_id:"halo_effect",name:"Effet de Halo",category:"Perception",definition:"Tendance  attribuer des qualits positives (comme la facilit d'utilisation)  quelque chose simplement parce qu'il est visuellement attrayant.",counter_tactic:"Testez l'usabilit indpendamment de l'esthtique. Ne laissez pas la beaut masquer les problmes fonctionnels.",level_unlocked:1},{bias_id:"confirmation_bias",name:"Biais de Confirmation",category:"Cognition",definition:"Tendance  chercher, interprter et retenir les informations qui confirment nos croyances prexistantes.",counter_tactic:"Prsentez des informations quilibres. Encouragez la confrontation avec des avis contradictoires.",level_unlocked:1},{bias_id:"anchoring",name:"Biais d'Ancrage",category:"Dcision",definition:"Le premier lment d'information reu (l'ancre) influence disproportionnellement les jugements ultrieurs.",counter_tactic:"thique : prsentez d'abord la valeur relle. Manipulation : placez un prix barr lev avant le prix actuel.",level_unlocked:1},{bias_id:"hicks_law",name:"Loi de Hick",category:"UX Law",definition:"Le temps de dcision augmente logarithmiquement avec le nombre et la complexit des choix.",counter_tactic:"Rduisez le nombre d'options visibles. Utilisez des filtres et une progressive disclosure.",level_unlocked:1},{bias_id:"serial_position",name:"Effet de Position Srie",category:"Mmoire",definition:"Tendance  mieux retenir les premiers (primaut) et derniers (rcence) lments d'une srie.",counter_tactic:"Placez vos informations cls au dbut et  la fin. Cachez le contenu moins important au milieu.",level_unlocked:1},{bias_id:"loss_aversion",name:"Aversion  la Perte",category:"Dcision",definition:"La douleur de perdre quelque chose est environ deux fois plus forte que le plaisir de gagner la mme chose.",counter_tactic:"thique : rassurez sur les garanties. Manipulation : 'Ne manquez pas...' au lieu de 'Gagnez...'",level_unlocked:1},{bias_id:"social_proof",name:"Preuve Sociale",category:"Social",definition:"Tendance  adopter les comportements et opinions que l'on peroit comme majoritaires.",counter_tactic:"Affichez les compteurs d'utilisateurs, avis clients, tmoignages. La foule rassure.",level_unlocked:1},{bias_id:"von_restorff",name:"Effet Von Restorff",category:"Perception",definition:"L'lment qui se distingue visuellement dans un groupe homogne est mieux mmoris.",counter_tactic:"Utilisez la couleur, la taille ou l'espacement pour faire ressortir les lments cls (CTA).",level_unlocked:1},{bias_id:"zeigarnik",name:"Effet Zeigarnik",category:"Mmoire",definition:"Les tches inacheves restent plus prsentes dans notre mmoire que les tches termines.",counter_tactic:"Utilisez des barres de progression incompltes pour motiver  terminer un parcours.",level_unlocked:1},{bias_id:"jakobs_law",name:"Loi de Jakob",category:"UX Law",definition:"Les utilisateurs passent la majorit de leur temps sur d'autres sites ; ils prfrent que votre site fonctionne de la mme manire.",counter_tactic:"Suivez les conventions UI tablies (menu hamburger, panier en haut  droite, etc.).",level_unlocked:1},{bias_id:"reciprocity",name:"Rciprocit",category:"Social",definition:"Recevoir quelque chose cre un sentiment d'obligation de rendre la pareille.",counter_tactic:"Offrez de la valeur gratuite (ebook, essai) avant de demander un engagement (email, achat).",level_unlocked:1},{bias_id:"scarcity_urgency",name:"Raret & Urgence",category:"Persuasion",definition:"Un bien semble plus dsirable quand sa disponibilit est limite (quantit ou temps).",counter_tactic:"Compteurs de stock, timers. Attention : l'abus dtruit la confiance.",level_unlocked:1},{bias_id:"authority_bias",name:"Biais d'Autorit",category:"Social",definition:"Tendance  attribuer plus de crdibilit aux figures perues comme autoritaires ou expertes.",counter_tactic:"Affichez les certifications, logos de partenaires, tmoignages d'experts.",level_unlocked:1},{bias_id:"framing",name:"Effet de Cadrage",category:"Cognition",definition:"La manire dont une information est prsente influence la perception et la dcision.",counter_tactic:"'90% de satisfaction' > '10% d'insatisfaits'. Reformulez positivement.",level_unlocked:1},{bias_id:"availability_bias",name:"Biais de Disponibilit",category:"Cognition",definition:"Tendance  surestimer la probabilit des vnements dont on se souvient facilement.",counter_tactic:"Fournissez des statistiques objectives pour contrebalancer les anecdotes marquantes.",level_unlocked:1},{bias_id:"dunning_kruger",name:"Effet Dunning-Kruger",category:"Mtacognition",definition:"Les personnes peu comptentes surestiment leurs capacits, tandis que les experts les sous-estiment.",counter_tactic:"En recherche utilisateur : mfiez-vous des utilisateurs trop confiants dans leur expertise.",level_unlocked:1},{bias_id:"gamblers_fallacy",name:"Erreur du Parieur",category:"Probabilit",definition:"Croyance errone que les vnements alatoires passs influencent les probabilits futures.",counter_tactic:"Ne crez pas de systmes de rcompense qui laissent croire  des patterns l o il n'y en a pas.",level_unlocked:1},{bias_id:"endowment_effect",name:"Effet de Dotation",category:"Possession",definition:"Tendance  accorder plus de valeur  un objet simplement parce qu'on le possde.",counter_tactic:"Essais gratuits, dmos personnalises : une fois 'possd', le produit devient plus prcieux.",level_unlocked:1},{bias_id:"frequency_illusion",name:"Illusion de Frquence",category:"Perception",definition:"Une information rcemment apprise semble soudain apparatre partout.",counter_tactic:"En marketing : le retargeting exploite cet effet en 'accompagnant' l'utilisateur.",level_unlocked:1},{bias_id:"decoy_effect",name:"Effet de Leurre",category:"Pricing",definition:"Une option 'leurre' moins attractive rend l'option cible plus attrayante par comparaison.",counter_tactic:"Les pages de pricing  3 colonnes utilisent souvent la colonne de droite comme leurre.",level_unlocked:2},{bias_id:"status_quo",name:"Biais du Statu Quo",category:"Dcision",definition:"Prfrence pour l'tat actuel des choses ; rsistance au changement mme bnfique.",counter_tactic:"Les options par dfaut (opt-out) sont trs puissantes. Utilisez-les thiquement.",level_unlocked:2},{bias_id:"chunking",name:"Chunking",category:"Cognition",definition:"Technique de groupement de l'information en units significatives pour faciliter le traitement.",counter_tactic:"Divisez les formulaires longs en tapes, groupez les informations lies visuellement.",level_unlocked:2},{bias_id:"variable_reward",name:"Rcompense Variable",category:"Addiction",definition:"Les rcompenses imprvisibles crent plus d'engagement que les rcompenses fixes (effet slot machine).",counter_tactic:"Utilis par les rseaux sociaux (feed infini). thiquement discutable si l'objectif est l'addiction.",level_unlocked:2},{bias_id:"endowed_progress",name:"Endowed Progress Effect",category:"Motivation",definition:"Les gens sont plus motivs  atteindre un objectif s'ils pensent avoir dj progress vers lui.",counter_tactic:"Pr-remplissez les barres de progression  10-20% pour motiver la compltion.",level_unlocked:2},{bias_id:"negativity_bias",name:"Biais de Ngativit",category:"motion",definition:"Les expriences ngatives ont un impact psychologique plus fort que les positives quivalentes.",counter_tactic:"Messages d'erreur : vitez le ton accusateur. Proposez des solutions, pas des blmes.",level_unlocked:2},{bias_id:"confirmshaming",name:"Confirmshaming",category:"Dark Pattern",definition:"Manipulation par la honte : formuler l'option de refus de manire humiliante.",counter_tactic:" DARK PATTERN -  viter. Dtruit la confiance utilisateur  long terme.",level_unlocked:2},{bias_id:"center_stage",name:"Effet Centre-Stage",category:"Perception",definition:"Dans une srie horizontale d'options, l'option centrale est perue comme le choix recommand.",counter_tactic:"Placez votre offre cible au centre. Renforcez avec un badge 'Populaire' ou 'Recommand'.",level_unlocked:2},{bias_id:"recognition_recall",name:"Reconnaissance vs Rappel",category:"Mmoire",definition:"Il est plus facile de reconnatre quelque chose que de s'en souvenir sans indice.",counter_tactic:"Privilgiez les icnes universelles, les menus visibles, l'autocompltion.",level_unlocked:2},{bias_id:"labor_illusion",name:"Illusion du Labeur",category:"Perception",definition:"Un service est peru comme plus prcieux si l'on voit l'effort investi (mme simul).",counter_tactic:"Animations de 'recherche en cours', messages de progression, mme si instantan.",level_unlocked:2},{bias_id:"ikea_effect",name:"Effet Ikea",category:"Possession",definition:"Tendance  accorder plus de valeur aux choses que l'on a contribu  crer ou assembler.",counter_tactic:"Personnalisation, configurateurs, contenus gnrs par l'utilisateur.",level_unlocked:2},{bias_id:"fitts_law",name:"Loi de Fitts",category:"UX Law",definition:"Le temps pour atteindre une cible dpend de la distance et de la taille de celle-ci.",counter_tactic:"Gros boutons, zones cliquables gnreuses, surtout sur mobile (min 44px).",level_unlocked:2},{bias_id:"reactance",name:"Ractance Psychologique",category:"Comportement",definition:"Rsistance instinctive quand on peroit une menace  sa libert de choix.",counter_tactic:"vitez les popups agressives, les CTA forcs. Laissez l'utilisateur sentir le contrle.",level_unlocked:2},{bias_id:"salience_bias",name:"Biais de Saillance",category:"Attention",definition:"Tendance  se concentrer sur les lments les plus visibles ou motionnellement frappants.",counter_tactic:"Utilisez la hirarchie visuelle pour guider l'attention. Attention aux Dark Patterns.",level_unlocked:2},{bias_id:"sunk_cost",name:"Cots Irrcuprables",category:"Dcision",definition:"Continuer un investissement (temps, argent) bas sur ce qui a dj t dpens plutt que sur les bnfices futurs.",counter_tactic:"En gestion de produit : sachez tuer vos projets zombies. Le pass n'est pas un argument.",level_unlocked:3},{bias_id:"hawthorne_effect",name:"Effet Hawthorne",category:"Recherche",definition:"Les sujets d'une tude modifient leur comportement simplement parce qu'ils se savent observs.",counter_tactic:"Tests A/B > tests utilisateurs observs. Guerilla testing. Analytics passifs.",level_unlocked:3},{bias_id:"survivorship_bias",name:"Biais du Survivant",category:"Analyse",definition:"Se concentrer sur les succs visibles en ignorant les checs silencieux.",counter_tactic:"Analysez le churn autant que les utilisateurs actifs. Les dparts sont des donnes.",level_unlocked:3},{bias_id:"groupthink",name:"Pense de Groupe",category:"Organisation",definition:"Conformit excessive au sein d'un groupe, supprimant la pense critique et les opinions dissidentes.",counter_tactic:"Encouragez le 'Red Team', l'avocat du diable. Votez anonymement avant de discuter.",level_unlocked:3},{bias_id:"automation_bias",name:"Biais d'Automatisation",category:"Technologie",definition:"Tendance  faire confiance aveuglment aux systmes automatiss plutt qu' son propre jugement.",counter_tactic:"Gardez l'humain dans la boucle (Human-in-the-loop). Vrifiez les outputs de l'IA.",level_unlocked:3},{bias_id:"sludge",name:"Sludge",category:"Dark Pattern",definition:"Friction dlibrment ajoute pour dcourager une action (dsinscription, rclamation...).",counter_tactic:" DARK PATTERN - Illgal dans certains pays (RGPD). Prfrez des parcours fluides.",level_unlocked:3},{bias_id:"curse_of_knowledge",name:"Maldiction du Savoir",category:"Communication",definition:"Difficult  imaginer ce que c'est que de ne pas savoir quelque chose qu'on sait.",counter_tactic:"Testez avec des utilisateurs novices. vitez le jargon. Simplifiez sans cesse.",level_unlocked:3},{bias_id:"false_consensus",name:"Effet de Faux Consensus",category:"Projection",definition:"Tendance  surestimer  quel point nos opinions et comportements sont partags par les autres.",counter_tactic:"Vous n'tes pas votre utilisateur. Validez par la data, pas par l'intuition.",level_unlocked:3},{bias_id:"law_of_instrument",name:"Loi de l'Instrument",category:"Mthodologie",definition:"Tendance  tout rsoudre avec les outils qu'on connat ('Si j'ai un marteau, tout ressemble  un clou').",counter_tactic:"Diversifiez votre stack. Choisissez l'outil en fonction du problme, pas l'inverse.",level_unlocked:3},{bias_id:"goodharts_law",name:"Loi de Goodhart",category:"Mtriques",definition:"Quand une mesure devient un objectif, elle cesse d'tre une bonne mesure.",counter_tactic:"Mfiez-vous des KPIs uniques. Le temps pass n'est pas l'engagement.",level_unlocked:3},{bias_id:"zero_risk_bias",name:"Biais de Risque Zro",category:"Risque",definition:"Prfrence pour liminer totalement un petit risque plutt que rduire significativement un grand.",counter_tactic:"En scurit UX : priorisez les risques par impact, pas par 'rsolvabilit'.",level_unlocked:3},{bias_id:"hindsight_bias",name:"Biais Rtrospectif",category:"Mmoire",definition:"Aprs un vnement, tendance  croire qu'on l'avait prvu ('Je le savais!').",counter_tactic:"Documentez vos hypothses AVANT les rsultats. Pre-mortems > Post-mortems.",level_unlocked:3},{bias_id:"planning_fallacy",name:"Fallace du Planning",category:"Estimation",definition:"Tendance systmatique  sous-estimer le temps, les cots et les risques des projets.",counter_tactic:"Reference class forecasting : basez-vous sur des projets similaires passs.",level_unlocked:3},{bias_id:"hippo_effect",name:"Effet HiPPO",category:"Organisation",definition:"Highest Paid Person's Opinion : l'avis de la personne la mieux paye l'emporte sur la data.",counter_tactic:"Culture data-driven. Les A/B tests ne connaissent pas les salaires.",level_unlocked:3},{bias_id:"fundamental_attribution_error",name:"Erreur Fondamentale d'Attribution",category:"Jugement",definition:"Tendance  attribuer les checs des autres  leur personnalit plutt qu'aux circonstances.",counter_tactic:"L'utilisateur n'est JAMAIS stupide. C'est votre interface qui est mal conue.",level_unlocked:3},{bias_id:"reductionism",name:"Rductionnisme",category:"Analyse",definition:"Simplifier excessivement des problmes complexes pour qu'ils rentrent dans des solutions connues.",counter_tactic:"Acceptez la complexit. Parfois 'a dpend' est la bonne rponse.",level_unlocked:3}];function oP(e){let t=[...e];for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}var oA=e.i(24627);class oO extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class oR extends oO{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class oN extends oO{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class oI extends oO{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}(d=P||(P={})).Any="any",d.ApNortheast1="ap-northeast-1",d.ApNortheast2="ap-northeast-2",d.ApSouth1="ap-south-1",d.ApSoutheast1="ap-southeast-1",d.ApSoutheast2="ap-southeast-2",d.CaCentral1="ca-central-1",d.EuCentral1="eu-central-1",d.EuWest1="eu-west-1",d.EuWest2="eu-west-2",d.EuWest3="eu-west-3",d.SaEast1="sa-east-1",d.UsEast1="us-east-1",d.UsWest1="us-west-1",d.UsWest2="us-west-2";class oL{constructor(e,{headers:t={},customFetch:r,region:i=P.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return(0,oA.__awaiter)(this,arguments,void 0,function*(e,t={}){var r;let i,s;try{let n,{headers:a,method:o,body:l,signal:u,timeout:c}=t,d={},{region:h}=t;h||(h=this.region);let p=new URL(`${this.url}/${e}`);h&&"any"!==h&&(d["x-region"]=h,p.searchParams.set("forceFunctionRegion",h)),l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?"undefined"!=typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",n=l):"string"==typeof l?(d["Content-Type"]="text/plain",n=l):"undefined"!=typeof FormData&&l instanceof FormData?n=l:(d["Content-Type"]="application/json",n=JSON.stringify(l)):n=l;let f=u;c&&(s=new AbortController,i=setTimeout(()=>s.abort(),c),u?(f=s.signal,u.addEventListener("abort",()=>s.abort())):f=s.signal);let m=yield this.fetch(p.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:n,signal:f}).catch(e=>{throw new oR(e)}),g=m.headers.get("x-relay-error");if(g&&"true"===g)throw new oN(m);if(!m.ok)throw new oI(m);let y=(null!=(r=m.headers.get("Content-Type"))?r:"text/plain").split(";")[0].trim();return{data:"application/json"===y?yield m.json():"application/octet-stream"===y||"application/pdf"===y?yield m.blob():"text/event-stream"===y?m:"multipart/form-data"===y?yield m.formData():yield m.text(),error:null,response:m}}catch(e){return{data:null,error:e,response:e instanceof oI||e instanceof oN?e.context:void 0}}finally{i&&clearTimeout(i)}})}}var oM=e.i(24674);let{PostgrestClient:oD,PostgrestQueryBuilder:o$,PostgrestFilterBuilder:oU,PostgrestTransformBuilder:oB,PostgrestBuilder:oF,PostgrestError:oq}=oM.default||oM,oV=class{constructor(){}static detectEnvironment(){var t;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==e.g.WebSocket)return{type:"native",constructor:e.g.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null==(t=navigator.userAgent)?void 0:t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(void 0!==eD.default){let e=eD.default.versions;if(e&&e.node){let t=parseInt(e.node.replace(/^v/,"").split(".")[0]);return t>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},oz="1.0.0";(h=A||(A={}))[h.connecting=0]="connecting",h[h.open=1]="open",h[h.closing=2]="closing",h[h.closed=3]="closed",(p=O||(O={})).closed="closed",p.errored="errored",p.joined="joined",p.joining="joining",p.leaving="leaving",(f=R||(R={})).close="phx_close",f.error="phx_error",f.join="phx_join",f.reply="phx_reply",f.leave="phx_leave",f.access_token="access_token",(N||(N={})).websocket="websocket",(m=I||(I={})).Connecting="connecting",m.Open="open",m.Closing="closing",m.Closed="closed";class oW{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=e?e:[]}encode(e,t){return e.event!==this.BROADCAST_EVENT||e.payload instanceof ArrayBuffer||"string"!=typeof e.payload.event?t(JSON.stringify([e.join_ref,e.ref,e.topic,e.event,e.payload])):t(this._binaryEncodeUserBroadcastPush(e))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null==(t=e.payload)?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;let i=null!=(r=null==(t=e.payload)?void 0:t.payload)?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var t,r;let i=null!=(r=null==(t=e.payload)?void 0:t.payload)?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(e,t,r){let i=e.topic,s=null!=(p=e.ref)?p:"",n=null!=(f=e.join_ref)?f:"",a=e.payload.event,o=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},l=0===Object.keys(o).length?"":JSON.stringify(o);if(n.length>255)throw Error(`joinRef length ${n.length} exceeds maximum of 255`);if(s.length>255)throw Error(`ref length ${s.length} exceeds maximum of 255`);if(i.length>255)throw Error(`topic length ${i.length} exceeds maximum of 255`);if(a.length>255)throw Error(`userEvent length ${a.length} exceeds maximum of 255`);if(l.length>255)throw Error(`metadata length ${l.length} exceeds maximum of 255`);let u=this.USER_BROADCAST_PUSH_META_LENGTH+n.length+s.length+i.length+a.length+l.length,c=new ArrayBuffer(this.HEADER_LENGTH+u),d=new DataView(c),h=0;d.setUint8(h++,this.KINDS.userBroadcastPush),d.setUint8(h++,n.length),d.setUint8(h++,s.length),d.setUint8(h++,i.length),d.setUint8(h++,a.length),d.setUint8(h++,l.length),d.setUint8(h++,t),Array.from(n,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(s,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(i,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(a,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(l,e=>d.setUint8(h++,e.charCodeAt(0)));var p,f,m=new Uint8Array(c.byteLength+r.byteLength);return m.set(new Uint8Array(c),0),m.set(new Uint8Array(r),c.byteLength),m.buffer}decode(e,t){if(this._isArrayBuffer(e))return t(this._binaryDecode(e));if("string"==typeof e){let[r,i,s,n,a]=JSON.parse(e);return t({join_ref:r,ref:i,topic:s,event:n,payload:a})}return t({})}_binaryDecode(e){let t=new DataView(e),r=t.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,i)}_decodeUserBroadcast(e,t,r){let i=t.getUint8(1),s=t.getUint8(2),n=t.getUint8(3),a=t.getUint8(4),o=this.HEADER_LENGTH+4,l=r.decode(e.slice(o,o+i));o+=i;let u=r.decode(e.slice(o,o+s));o+=s;let c=r.decode(e.slice(o,o+n));o+=n;let d=e.slice(o,e.byteLength),h=a===this.JSON_ENCODING?JSON.parse(r.decode(d)):d,p={type:this.BROADCAST_EVENT,event:u,payload:h};return n>0&&(p.meta=JSON.parse(c)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||(null==(t=null==e?void 0:e.constructor)?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(([e])=>t.includes(e))):{}}}class oH{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(g=L||(L={})).abstime="abstime",g.bool="bool",g.date="date",g.daterange="daterange",g.float4="float4",g.float8="float8",g.int2="int2",g.int4="int4",g.int4range="int4range",g.int8="int8",g.int8range="int8range",g.json="json",g.jsonb="jsonb",g.money="money",g.numeric="numeric",g.oid="oid",g.reltime="reltime",g.text="text",g.time="time",g.timestamp="timestamp",g.timestamptz="timestamptz",g.timetz="timetz",g.tsrange="tsrange",g.tstzrange="tstzrange";let oK=(e,t,r={})=>{var i;let s=null!=(i=r.skipTypes)?i:[];return t?Object.keys(t).reduce((r,i)=>(r[i]=oG(i,e,t,s),r),{}):{}},oG=(e,t,r,i)=>{let s=t.find(t=>t.name===e),n=null==s?void 0:s.type,a=r[e];return n&&!i.includes(n)?oJ(n,a):oY(a)},oJ=(e,t)=>{if("_"===e.charAt(0))return o0(t,e.slice(1,e.length));switch(e){case L.bool:return oX(t);case L.float4:case L.float8:case L.int2:case L.int4:case L.int8:case L.numeric:case L.oid:return oQ(t);case L.json:case L.jsonb:return oZ(t);case L.timestamp:return o1(t);case L.abstime:case L.date:case L.daterange:case L.int4range:case L.int8range:case L.money:case L.reltime:case L.text:case L.time:case L.timestamptz:case L.timetz:case L.tsrange:case L.tstzrange:default:return oY(t)}},oY=e=>e,oX=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},oQ=e=>{if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},oZ=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){console.log(`JSON parse error: ${e}`)}return e},o0=(e,t)=>{if("string"!=typeof e)return e;let r=e.length-1,i=e[r];if("{"===e[0]&&"}"===i){let i,s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch(e){i=s?s.split(","):[]}return i.map(e=>oJ(t,e))}return e},o1=e=>"string"==typeof e?e.replace(" ","T"):e,o2=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class o5{constructor(e,t,r={},i=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null==(r=this.receivedResp)?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}(y=M||(M={})).SYNC="sync",y.JOIN="join",y.LEAVE="leave";class o3{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{let{onJoin:t,onLeave:r,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=o3.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=o3.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],i()}),this.channel._on(r.diff,{},e=>{let{onJoin:t,onLeave:r,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=o3.syncDiff(this.state,e,t,r),i())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){let s=this.cloneDeep(e),n=this.transformState(t),a={},o={};return this.map(s,(e,t)=>{n[e]||(o[e]=t)}),this.map(n,(e,t)=>{let r=s[e];if(r){let i=t.map(e=>e.presence_ref),s=r.map(e=>e.presence_ref),n=t.filter(e=>0>s.indexOf(e.presence_ref)),l=r.filter(e=>0>i.indexOf(e.presence_ref));n.length>0&&(a[e]=n),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(s,{joins:a,leaves:o},r,i)}static syncDiff(e,t,r,i){let{joins:s,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(t,i)=>{var s;let n=null!=(s=e[t])?s:[];if(e[t]=this.cloneDeep(i),n.length>0){let r=e[t].map(e=>e.presence_ref),i=n.filter(e=>0>r.indexOf(e.presence_ref));e[t].unshift(...i)}r(t,n,i)}),this.map(n,(t,r)=>{let s=e[t];if(!s)return;let n=r.map(e=>e.presence_ref);s=s.filter(e=>0>n.indexOf(e.presence_ref)),e[t]=s,i(t,s,r),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,r)=>{let i=e[r];return"metas"in i?t[r]=i.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(v=D||(D={})).ALL="*",v.INSERT="INSERT",v.UPDATE="UPDATE",v.DELETE="DELETE",(b=$||($={})).BROADCAST="broadcast",b.PRESENCE="presence",b.POSTGRES_CHANGES="postgres_changes",b.SYSTEM="system",(w=U||(U={})).SUBSCRIBED="SUBSCRIBED",w.TIMED_OUT="TIMED_OUT",w.CLOSED="CLOSED",w.CHANNEL_ERROR="CHANNEL_ERROR";class o4{constructor(e,t={config:{}},r){var i,s;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=O.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new o5(this,R.join,this.params,this.timeout),this.rejoinTimer=new oH(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=O.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=O.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=O.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=O.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=O.errored,this.rejoinTimer.scheduleTimeout())}),this._on(R.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new o3(this),this.broadcastEndpointURL=o2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null==(s=null==(i=this.params.config)?void 0:i.broadcast)?void 0:s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==O.closed){let{config:{broadcast:n,presence:a,private:o}}=this.params,l=null!=(i=null==(r=this.bindings.postgres_changes)?void 0:r.map(e=>e.filter))?i:[],u=!!this.bindings[$.PRESENCE]&&this.bindings[$.PRESENCE].length>0||(null==(s=this.params.config.presence)?void 0:s.enabled)===!0,c={},d={broadcast:n,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(U.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(U.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0===t){null==e||e(U.SUBSCRIBED);return}{let i=this.bindings.postgres_changes,s=null!=(r=null==i?void 0:i.length)?r:0,n=[];for(let r=0;r<s;r++){let s=i[r],{filter:{event:a,schema:o,table:l,filter:u}}=s,c=t&&t[r];if(c&&c.event===a&&c.schema===o&&c.table===l&&c.filter===u)n.push(Object.assign(Object.assign({},s),{id:c.id}));else{this.unsubscribe(),this.state=O.errored,null==e||e(U.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=n,e&&e(U.SUBSCRIBED);return}}).receive("error",t=>{this.state=O.errored,null==e||e(U.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(U.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===O.joined&&e===$.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var i;let s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");let n={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,n,null!=(i=r.timeout)?i:this.timeout);if(202===a.status)return{success:!0};let o=a.statusText;try{let e=await a.json();o=e.error||e.message||o}catch(e){}return Promise.reject(Error(o))}async send(e,t={}){var r,i;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var i,s,n;let a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null==(n=null==(s=null==(i=this.params)?void 0:i.config)?void 0:s.broadcast)?void 0:n.ack)||r("ok"),a.receive("ok",()=>r("ok")),a.receive("error",()=>r("error")),a.receive("timeout",()=>r("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:s,payload:n}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:n,private:this.private}]})};try{let e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!=(r=t.timeout)?r:this.timeout);return await (null==(i=e.body)?void 0:i.cancel()),e.ok?"ok":"error"}catch(e){if("AbortError"===e.name)return"timed out";return"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=O.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(R.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{(r=new o5(this,R.leave,{},e)).receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=O.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){let i=new AbortController,s=setTimeout(()=>i.abort(),r),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),n}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new o5(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;let n=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:u}=R;if(r&&[a,o,l,u].indexOf(n)>=0&&r!==this._joinRef())return;let c=this._onMessage(n,t,r);if(t&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null==(i=this.bindings.postgres_changes)||i.filter(e=>{var t,r,i;return(null==(t=e.filter)?void 0:t.event)==="*"||(null==(i=null==(r=e.filter)?void 0:r.event)?void 0:i.toLocaleLowerCase())===n}).map(e=>e.callback(c,r)):null==(s=this.bindings[n])||s.filter(e=>{var r,i,s,a,o,l;if(!["broadcast","presence","postgres_changes"].includes(n))return e.type.toLocaleLowerCase()===n;if("id"in e){let n=e.id,a=null==(r=e.filter)?void 0:r.event;return n&&(null==(i=t.ids)?void 0:i.includes(n))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null==(s=t.data)?void 0:s.type.toLocaleLowerCase()))}{let r=null==(o=null==(a=null==e?void 0:e.filter)?void 0:a.event)?void 0:o.toLocaleLowerCase();return"*"===r||r===(null==(l=null==t?void 0:t.event)?void 0:l.toLocaleLowerCase())}}).map(e=>{if("object"==typeof c&&"ids"in c){let e=c.data,{schema:t,table:r,commit_timestamp:i,type:s,errors:n}=e;c=Object.assign(Object.assign({},{schema:t,table:r,commit_timestamp:i,eventType:s,new:{},old:{},errors:n}),this._getPayloadRecords(e))}e.callback(c,r)})}_isClosed(){return this.state===O.closed}_isJoined(){return this.state===O.joined}_isJoining(){return this.state===O.joining}_isLeaving(){return this.state===O.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var i;return!((null==(i=e.type)?void 0:i.toLocaleLowerCase())===r&&o4.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(R.close,{},e)}_onError(e){this._on(R.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=O.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=oK(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=oK(e.columns,e.old_record)),t}}let o6=()=>{},o8=[1e3,2e3,5e3,1e4],o9=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class o7{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=o6,this.ref=0,this.reconnectTimer=null,this.vsn=oz,this.logger=o6,this.conn=null,this.sendBuffer=[],this.serializer=new oW,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null==(r=null==t?void 0:t.params)?void 0:r.apikey))throw Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${N.websocket}`,this.httpEndpoint=o2(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=oV.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;if(e.includes("Node.js"))throw Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`);throw Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case A.connecting:return I.Connecting;case A.open:return I.Open;case A.closing:return I.Closing;default:return I.Closed}}isConnected(){return this.connectionState()===I.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){let r=`realtime:${e}`,i=this.getChannels().find(e=>e.topic===r);if(i)return i;{let r=new o4(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){let{topic:t,event:r,payload:i,ref:s}=e,n=()=>{this.encode(e,e=>{var t;null==(t=this.conn)||t.send(e)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,null==(e=this.conn)||e.close(1e3,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||null==(e=this.reconnectTimer)||e.scheduleTimeout()},100);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(e){this.log("error","error in heartbeat callback",e)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:t,event:r,payload:i,ref:s}=e,n=s?`(${s})`:"",a=i.status||"";this.log("receive",`${a} ${t} ${r} ${n}`.trim(),i),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,i,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null==(t=this.reconnectTimer)||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===A.open||this.conn.readyState===A.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null==(t=this.reconnectTimer)||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(R.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{let e=new Blob([o9],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t,version:"realtime-js/2.86.0"}),e.joinedOnce&&e._isJoined()&&e._push(R.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(t){this.log("error",`error in ${e} callback`,t)}})}catch(t){this.log("error",`error triggering ${e} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new oH(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,n,a,o,l,u,c,d,h;switch(this.transport=null!=(t=null==e?void 0:e.transport)?t:null,this.timeout=null!=(r=null==e?void 0:e.timeout)?r:1e4,this.heartbeatIntervalMs=null!=(i=null==e?void 0:e.heartbeatIntervalMs)?i:25e3,this.worker=null!=(s=null==e?void 0:e.worker)&&s,this.accessToken=null!=(n=null==e?void 0:e.accessToken)?n:null,this.heartbeatCallback=null!=(a=null==e?void 0:e.heartbeatCallback)?a:o6,this.vsn=null!=(o=null==e?void 0:e.vsn)?o:oz,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!=(l=null==e?void 0:e.reconnectAfterMs)?l:e=>o8[e-1]||1e4,this.vsn){case oz:this.encode=null!=(u=null==e?void 0:e.encode)?u:(e,t)=>t(JSON.stringify(e)),this.decode=null!=(c=null==e?void 0:e.decode)?c:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!=(d=null==e?void 0:e.encode)?d:this.serializer.encode.bind(this.serializer),this.decode=null!=(h=null==e?void 0:e.decode)?h:this.serializer.decode.bind(this.serializer);break;default:throw Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}var le=e.i(32122);class lt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function lr(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class li extends lt{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ls extends lt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}let ln=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),la=e=>{if(Array.isArray(e))return e.map(e=>la(e));if("function"==typeof e||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,r])=>{t[e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""))]=la(r)}),t},lo=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null==(t=e.error)?void 0:t.message)||JSON.stringify(e)};function ll(e,t,r,i,s,n){return(0,oA.__awaiter)(this,void 0,void 0,function*(){return new Promise((a,o)=>{let l;e(r,(l={method:t,headers:(null==i?void 0:i.headers)||{}},"GET"===t||!n?l:((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(l.headers=Object.assign({"Content-Type":"application/json"},null==i?void 0:i.headers),l.body=JSON.stringify(n)):l.body=n,(null==i?void 0:i.duplex)&&(l.duplex=i.duplex),Object.assign(Object.assign({},l),s)))).then(e=>{if(!e.ok)throw e;return(null==i?void 0:i.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>(0,oA.__awaiter)(void 0,void 0,void 0,function*(){e instanceof(yield Response)&&!(null==i?void 0:i.noResolveJson)?e.json().then(t=>{let r=e.status||500,i=(null==t?void 0:t.statusCode)||r+"";o(new li(lo(t),r,i))}).catch(e=>{o(new ls(lo(e),e))}):o(new ls(lo(e),e))}))})})}function lu(e,t,r,i){return(0,oA.__awaiter)(this,void 0,void 0,function*(){return ll(e,"GET",t,r,i)})}function lc(e,t,r,i,s){return(0,oA.__awaiter)(this,void 0,void 0,function*(){return ll(e,"POST",t,i,s,r)})}function ld(e,t,r,i,s){return(0,oA.__awaiter)(this,void 0,void 0,function*(){return ll(e,"PUT",t,i,s,r)})}function lh(e,t,r,i,s){return(0,oA.__awaiter)(this,void 0,void 0,function*(){return ll(e,"DELETE",t,i,s,r)})}class lp{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}}B=Symbol.toStringTag;let lf=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[B]="BlobDownloadBuilder",this.promise=null}asStream(){return new lp(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{let e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}},lm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ly{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=ln(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{let s,n=Object.assign(Object.assign({},lg),i),a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)}),o=n.metadata;"undefined"!=typeof Blob&&r instanceof Blob?((s=new FormData).append("cacheControl",n.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?((s=r).has("cacheControl")||s.append("cacheControl",n.cacheControl),o&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(o))):(s=r,a["cache-control"]=`max-age=${n.cacheControl}`,a["content-type"]=n.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o))),("undefined"!=typeof ReadableStream&&s instanceof ReadableStream||s&&"object"==typeof s&&"pipe"in s&&"function"==typeof s.pipe)&&!n.duplex&&(n.duplex="half")),(null==i?void 0:i.headers)&&(a=Object.assign(Object.assign({},a),i.headers));let l=this._removeEmptyFolders(t),u=this._getFinalPath(l),c=yield("PUT"==e?ld:lc)(this.fetch,`${this.url}/object/${u}`,s,Object.assign({headers:a},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:l,id:c.Id,fullPath:c.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}upload(e,t,r){return(0,oA.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return(0,oA.__awaiter)(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(e),n=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${n}`);a.searchParams.set("token",t);try{let e,t=Object.assign({upsert:lg.upsert},i),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r).append("cacheControl",t.cacheControl):(e=r,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);let o=yield ld(this.fetch,a.toString(),e,{headers:n});return{data:{path:s,fullPath:o.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}createSignedUploadUrl(e,t){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(i["x-upsert"]="true");let s=yield lc(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),n=new URL(this.url+s.url),a=n.searchParams.get("token");if(!a)throw new lt("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:a},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}update(e,t,r){return(0,oA.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield lc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}copy(e,t,r){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield lc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}createSignedUrl(e,t,r){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield lc(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers}),n=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:s={signedUrl:encodeURI(`${this.url}${s.signedURL}${n}`)},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}createSignedUrls(e,t,r){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{let i=yield lc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:i.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null})),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}download(e,t){let r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=i?`?${i}`:"",n=this._getFinalPath(e);return new lf(()=>lu(this.fetch,`${this.url}/${r}/${n}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let e=yield lu(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:la(e),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}exists(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield function(e,t,r,i){return(0,oA.__awaiter)(this,void 0,void 0,function*(){return ll(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),void 0)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e)&&e instanceof ls){let t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}})}getPublicUrl(e,t){let r=this._getFinalPath(e),i=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&i.push(s);let n=void 0!==(null==t?void 0:t.transform),a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&i.push(a);let o=i.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${n?"render/image":"object"}/public/${r}${o}`)}}}remove(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield lh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}list(e,t,r){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},lm),t),{prefix:e||""});return{data:yield lc(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}listV2(e,t){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{let r=Object.assign({},e);return{data:yield lc(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return void 0!==le.Buffer?le.Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}let lv="2.86.0",lb={"X-Client-Info":`storage-js/${lv}`};class lw{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);(null==i?void 0:i.useNewHostname)&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lb),t),this.fetch=ln(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{let t=this.listBucketOptionsToQueryString(e);return{data:yield lu(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}getBucket(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield lu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}createBucket(e){return(0,oA.__awaiter)(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield lc(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}updateBucket(e,t){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield ld(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}emptyBucket(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield lc(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}deleteBucket(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield lh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var l_=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};async function lx(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}function lk(e){return e.join("\x1f")}var lE=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:lk(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){let r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${lk(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${lk(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${lk(e.namespace)}`}),!0}catch(e){if(e instanceof l_&&404===e.status)return!1;throw e}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(e){if(e instanceof l_&&409===e.status)return;throw e}}};function lS(e){return e.join("\x1f")}var lT=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${lS(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${lS(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){let r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${lS(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${lS(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${lS(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${lS(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(e){if(e instanceof l_&&404===e.status)return!1;throw e}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof l_&&409===r.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},lj=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=function(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:i,query:s,body:n,headers:a}){let o=function(e,t,r){let i=new URL(t,e);if(r)for(let[e,t]of Object.entries(r))void 0!==t&&i.searchParams.set(e,t);return i.toString()}(e.baseUrl,i,s),l=await lx(e.auth),u=await t(o,{method:r,headers:{...n?{"Content-Type":"application/json"}:{},...l,...a},body:n?JSON.stringify(n):void 0}),c=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),h=d&&c?JSON.parse(c):c;if(!u.ok){let e=d?h:void 0,t=e?.error;throw new l_(t?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:t?.type,icebergCode:t?.code,details:e})}return{status:u.status,headers:u.headers,data:h}}}}({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new lE(this.client,t),this.tableOps=new lT(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class lC{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lb),t),this.fetch=ln(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield lc(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}listBuckets(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{let t=new URLSearchParams;(null==e?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(null==e?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield lu(this.fetch,i,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}deleteBucket(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield lh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lr(e))return{data:null,error:e};throw e}})}from(e){if(!(!(!e||"string"!=typeof e||0===e.length||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\"))&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e)))throw new lt("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new lj({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>(0,oA.__awaiter)(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}let lP={"X-Client-Info":`storage-js/${lv}`,"Content-Type":"application/json"};class lA extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function lO(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}class lR extends lA{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class lN extends lA{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}(_=F||(F={})).InternalError="InternalError",_.S3VectorConflictException="S3VectorConflictException",_.S3VectorNotFoundException="S3VectorNotFoundException",_.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",_.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",_.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";let lI=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),lL=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);function lM(e,t,r,i,s){return(0,oA.__awaiter)(this,void 0,void 0,function*(){return function(e,t,r,i,s,n){return(0,oA.__awaiter)(this,void 0,void 0,function*(){return new Promise((a,o)=>{let l;e(r,(l={method:t,headers:(null==i?void 0:i.headers)||{}},"GET"===t||!n?l:((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(l.headers=Object.assign({"Content-Type":"application/json"},null==i?void 0:i.headers),l.body=JSON.stringify(n)):l.body=n,Object.assign(Object.assign({},l),s)))).then(e=>{if(!e.ok)throw e;if(null==i?void 0:i.noResolveJson)return e;let t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>a(e)).catch(e=>(0,oA.__awaiter)(void 0,void 0,void 0,function*(){if(!(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status)||(null==i?void 0:i.noResolveJson))o(new lN(lL(e),e));else{let t=e.status||500;"function"==typeof e.json?e.json().then(e=>{let r=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||t+"";o(new lR(lL(e),t,r))}).catch(()=>{o(new lR(e.statusText||`HTTP ${t} error`,t,t+""))}):o(new lR(e.statusText||`HTTP ${t} error`,t,t+""))}}))})})}(e,"POST",t,i,s,r)})}class lD{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lP),t),this.fetch=lI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield lM(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lO(e))return{data:null,error:e};throw e}})}getIndex(e,t){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield lM(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lO(e))return{data:null,error:e};throw e}})}listIndexes(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield lM(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lO(e))return{data:null,error:e};throw e}})}deleteIndex(e,t){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield lM(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lO(e))return{data:null,error:e};throw e}})}}class l${constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lP),t),this.fetch=lI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return{data:(yield lM(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lO(e))return{data:null,error:e};throw e}})}getVectors(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield lM(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lO(e))return{data:null,error:e};throw e}})}listVectors(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield lM(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lO(e))return{data:null,error:e};throw e}})}queryVectors(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield lM(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lO(e))return{data:null,error:e};throw e}})}deleteVectors(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return{data:(yield lM(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lO(e))return{data:null,error:e};throw e}})}}class lU{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lP),t),this.fetch=lI(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield lM(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lO(e))return{data:null,error:e};throw e}})}getBucket(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield lM(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lO(e))return{data:null,error:e};throw e}})}listBuckets(){return(0,oA.__awaiter)(this,arguments,void 0,function*(e={}){try{return{data:yield lM(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lO(e))return{data:null,error:e};throw e}})}deleteBucket(e){return(0,oA.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield lM(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(lO(e))return{data:null,error:e};throw e}})}}class lB extends lU{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new lF(this.url,this.headers,e,this.fetch)}createBucket(e){let t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return(0,oA.__awaiter)(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){let t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return(0,oA.__awaiter)(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){let e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return(0,oA.__awaiter)(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){let t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return(0,oA.__awaiter)(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class lF extends lD{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){let t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,oA.__awaiter)(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,oA.__awaiter)(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){let t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,oA.__awaiter)(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){let t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,oA.__awaiter)(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new lq(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class lq extends l${constructor(e,t,r,i,s){super(e,t,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){let t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,oA.__awaiter)(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){let t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,oA.__awaiter)(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,oA.__awaiter)(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){let t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,oA.__awaiter)(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){let t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,oA.__awaiter)(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class lV extends lw{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new ly(this.url,this.headers,e,this.fetch)}get vectors(){return new lB(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new lC(this.url+"/iceberg",this.headers,this.fetch)}}let lz="";lz="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let lW={headers:{"X-Client-Info":`supabase-js-${lz}/2.86.0`}},lH={schema:"public"},lK={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lG={},lJ="2.86.0",lY={"X-Client-Info":`gotrue-js/${lJ}`},lX="X-Supabase-Api-Version",lQ={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lZ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class l0 extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function l1(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class l2 extends l0{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class l5 extends l0{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class l3 extends l0{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class l4 extends l3{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class l6 extends l3{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class l8 extends l3{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class l9 extends l3{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class l7 extends l3{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ue extends l3{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ut(e){return l1(e)&&"AuthRetryableFetchError"===e.name}class ur extends l3{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class ui extends l3{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}let us="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),un=" 	\n\r=".split(""),ua=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<un.length;t+=1)e[un[t].charCodeAt(0)]=-2;for(let t=0;t<us.length;t+=1)e[us[t].charCodeAt(0)]=t;return e})();function uo(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;)r(us[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6;else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;)r(us[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6}function ul(e,t,r){let i=ua[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else if(-2===i)return;else throw Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}function uu(e){let t=[],r=e=>{t.push(String.fromCodePoint(e))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},n=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return r(e);for(let r=1;r<6;r+=1)if((e>>7-r&1)==0){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,i,r)};for(let t=0;t<e.length;t+=1)ul(e.charCodeAt(t),s,n);return t.join("")}function uc(e){let t=[],r={queue:0,queuedBits:0},i=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)ul(e.charCodeAt(t),r,i);return new Uint8Array(t)}function ud(e){let t=[],r={queue:0,queuedBits:0},i=e=>{t.push(e)};return e.forEach(e=>uo(e,r,i)),uo(null,r,i),t.join("")}let uh=()=>"undefined"!=typeof window&&"undefined"!=typeof document,up={tested:!1,writable:!1},uf=()=>{if(!uh())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(up.tested)return up.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),up.tested=!0,up.writable=!0}catch(e){up.tested=!0,up.writable=!1}return up.writable},um=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),ug=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},uy=async(e,t)=>{let r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}},uv=async(e,t)=>{await e.removeItem(t)};class ub{constructor(){this.promise=new ub.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function uw(e){let t=e.split(".");if(3!==t.length)throw new ui("Invalid JWT structure");for(let e=0;e<t.length;e++)if(!lZ.test(t[e]))throw new ui("JWT not in base64url format");return{header:JSON.parse(uu(t[0])),payload:JSON.parse(uu(t[1])),signature:uc(t[2]),raw:{header:t[0],payload:t[1]}}}async function u_(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ux(e){return("0"+e.toString(16)).substr(-2)}async function uk(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>String.fromCharCode(e)).join("")}async function uE(e){return"undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder?(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e):btoa(await uk(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function uS(e,t,r=!1){let i=function(){let e=new Uint32Array(56);if("undefined"==typeof crypto){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,r="";for(let i=0;i<56;i++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,ux).join("")}(),s=i;r&&(s+="/PASSWORD_RECOVERY"),await ug(e,`${t}-code-verifier`,s);let n=await uE(i),a=i===n?"plain":"s256";return[n,a]}ub.promiseConstructor=Promise;let uT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,uj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function uC(e){if(!uj.test(e))throw Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function uP(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){let e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function uA(e){return JSON.parse(JSON.stringify(e))}let uO=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),uR=[502,503,504];async function uN(e){var t;let r,i;if(!("object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json))throw new ue(uO(e),0);if(uR.includes(e.status))throw new ue(uO(e),e.status);try{r=await e.json()}catch(e){throw new l5(uO(e),e)}let s=function(e){let t=e.headers.get(lX);if(!t||!t.match(uT))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(s&&s.getTime()>=lQ["2024-01-01"].timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?i=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new ur(uO(r),e.status,(null==(t=r.weak_password)?void 0:t.reasons)||[]);else if("session_not_found"===i)throw new l4}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new ur(uO(r),e.status,r.weak_password.reasons);throw new l2(uO(r),e.status||500,i)}async function uI(e,t,r,i){var s;let n=Object.assign({},null==i?void 0:i.headers);n[lX]||(n[lX]=lQ["2024-01-01"].name),(null==i?void 0:i.jwt)&&(n.Authorization=`Bearer ${i.jwt}`);let a=null!=(s=null==i?void 0:i.query)?s:{};(null==i?void 0:i.redirectTo)&&(a.redirect_to=i.redirectTo);let o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await uL(e,t,r+o,{headers:n,noResolveJson:null==i?void 0:i.noResolveJson},{},null==i?void 0:i.body);return(null==i?void 0:i.xform)?null==i?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function uL(e,t,r,i,s,n){let a,o,l=(o={method:t,headers:(null==i?void 0:i.headers)||{}},"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==i?void 0:i.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),s)));try{a=await e(r,Object.assign({},l))}catch(e){throw console.error(e),new ue(uO(e),0)}if(a.ok||await uN(a),null==i?void 0:i.noResolveJson)return a;try{return await a.json()}catch(e){await uN(e)}}function uM(e){var t,r,i;let s=null;(i=e).access_token&&i.refresh_token&&i.expires_in&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:s,user:null!=(t=e.user)?t:e},error:null}}function uD(e){let t=uM(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function u$(e){var t;return{data:{user:null!=(t=e.user)?t:e},error:null}}function uU(e){return{data:e,error:null}}function uB(e){let{action_link:t,email_otp:r,hashed_token:i,redirect_to:s,verification_type:n}=e;return{data:{properties:{action_link:t,email_otp:r,hashed_token:i,redirect_to:s,verification_type:n},user:Object.assign({},(0,oA.__rest)(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function uF(e){return e}let uq=["global","local","others"];class uV{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=um(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=uq[0]){if(0>uq.indexOf(t))throw Error(`@supabase/auth-js: Parameter scope must be one of ${uq.join(", ")}`);try{return await uI(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(l1(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await uI(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:u$})}catch(e){if(l1(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{let{options:t}=e,r=(0,oA.__rest)(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=null==r?void 0:r.newEmail,delete i.newEmail),await uI(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:uB,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(l1(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await uI(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:u$})}catch(e){if(l1(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,r,i,s,n,a,o;try{let l={nextPage:null,lastPage:0,total:0},u=await uI(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(s=null==(i=null==e?void 0:e.perPage)?void 0:i.toString())?s:""},xform:uF});if(u.error)throw u.error;let c=await u.json(),d=null!=(n=u.headers.get("x-total-count"))?n:0,h=null!=(o=null==(a=u.headers.get("link"))?void 0:a.split(","))?o:[];return h.length>0&&(h.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},c),l),error:null}}catch(e){if(l1(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){uC(e);try{return await uI(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:u$})}catch(e){if(l1(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){uC(e);try{return await uI(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:u$})}catch(e){if(l1(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){uC(e);try{return await uI(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:u$})}catch(e){if(l1(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){uC(e.userId);try{let{data:t,error:r}=await uI(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(e){if(l1(e))return{data:null,error:e};throw e}}async _deleteFactor(e){uC(e.userId),uC(e.id);try{return{data:await uI(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(l1(e))return{data:null,error:e};throw e}}async _listOAuthClients(e){var t,r,i,s,n,a,o;try{let l={nextPage:null,lastPage:0,total:0},u=await uI(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(s=null==(i=null==e?void 0:e.perPage)?void 0:i.toString())?s:""},xform:uF});if(u.error)throw u.error;let c=await u.json(),d=null!=(n=u.headers.get("x-total-count"))?n:0,h=null!=(o=null==(a=u.headers.get("link"))?void 0:a.split(","))?o:[];return h.length>0&&(h.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},c),l),error:null}}catch(e){if(l1(e))return{data:{clients:[]},error:e};throw e}}async _createOAuthClient(e){try{return await uI(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(l1(e))return{data:null,error:e};throw e}}async _getOAuthClient(e){try{return await uI(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(l1(e))return{data:null,error:e};throw e}}async _updateOAuthClient(e,t){try{return await uI(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(l1(e))return{data:null,error:e};throw e}}async _deleteOAuthClient(e){try{return await uI(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(l1(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(e){try{return await uI(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(l1(e))return{data:null,error:e};throw e}}}function uz(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}let uW={debug:!!(globalThis&&uf()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class uH extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class uK extends uH{}async function uG(e,t,r){uW.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),uW.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async i=>{if(i){uW.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{uW.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}if(0===t)throw uW.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new uK(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(uW.debug)try{let e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}))}function uJ(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}class uY extends Error{constructor({message:e,code:t,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!=(s=null!=i?i:r instanceof Error?r.name:void 0)?s:"Unknown Error",this.code=t}}class uX extends uY{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}let uQ=new class{createNewAbortSignal(){if(this.controller){let e=Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function uZ(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function u0(){var e,t;return!!(uh()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null==(e=null==navigator?void 0:navigator.credentials)?void 0:e.create)&&"function"==typeof(null==(t=null==navigator?void 0:navigator.credentials)?void 0:t.get))}async function u1(e){try{let t=await navigator.credentials.create(e);if(!t)return{data:null,error:new uX("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new uX("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function({error:e,options:t}){var r,i,s;let{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new uY({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if((null==(r=n.authenticatorSelection)?void 0:r.requireResidentKey)===!0)return new uY({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});else if("conditional"===t.mediation&&(null==(i=n.authenticatorSelection)?void 0:i.userVerification)==="required")return new uY({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});else if((null==(s=n.authenticatorSelection)?void 0:s.userVerification)==="required")return new uY({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else if("InvalidStateError"===e.name)return new uY({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});else if("NotAllowedError"===e.name)return new uY({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("NotSupportedError"===e.name)return new uY(0===n.pubKeyCredParams.filter(e=>"public-key"===e.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});else if("SecurityError"===e.name){let t=window.location.hostname;if(!uZ(t))return new uY({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rp.id!==t)return new uY({message:`The RP ID "${n.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(n.user.id.byteLength<1||n.user.id.byteLength>64)return new uY({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new uY({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return new uY({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}({error:t,options:e})}}}async function u2(e){try{let t=await navigator.credentials.get(e);if(!t)return{data:null,error:new uX("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new uX("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function({error:e,options:t}){let{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new uY({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("NotAllowedError"===e.name)return new uY({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("SecurityError"===e.name){let t=window.location.hostname;if(!uZ(t))return new uY({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new uY({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new uY({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return new uY({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}({error:t,options:e})}}}let u5={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},u3={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function u4(...e){let t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),r=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),i={};for(let s of e)if(s)for(let e in s){let n=s[e];if(void 0!==n)if(Array.isArray(n))i[e]=n;else if(r(n))i[e]=n;else if(t(n)){let r=i[e];t(r)?i[e]=u4(r,n):i[e]=u4(n)}else i[e]=n}return i}class u6{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},s){try{var n,a,o,l;let{data:u,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:c};let d=null!=i?i:uQ.createNewAbortSignal();if("create"===u.webauthn.type){let{user:e}=u.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${r}`),e.displayName||(e.displayName=e.name)}switch(u.webauthn.type){case"create":{let t=(n=u.webauthn.credential_options.publicKey,a=null==s?void 0:s.create,u4(u5,n,a||{})),{data:r,error:i}=await u1({publicKey:t,signal:d});if(r)return{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:r}},error:null};return{data:null,error:i}}case"request":{let t=(o=u.webauthn.credential_options.publicKey,l=null==s?void 0:s.request,u4(u3,o,l||{})),{data:r,error:i}=await u2(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:t,signal:d}));if(r)return{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:r}},error:null};return{data:null,error:i}}}}catch(e){if(l1(e))return{data:null,error:e};return{data:null,error:new l5("Unexpected error in challenge",e)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t="undefined"!=typeof window?window.location.hostname:void 0,rpOrigins:r="undefined"!=typeof window?[window.location.origin]:void 0,signal:i}={}},s){if(!t)return{data:null,error:new l0("rpId is required for WebAuthn authentication")};try{if(!u0())return{data:null,error:new l5("Browser does not support WebAuthn",null)};let{data:n,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:s});if(!n)return{data:null,error:a};let{webauthn:o}=n;return this._verify({factorId:e,challengeId:n.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:r,credential_response:o.credential_response}})}catch(e){if(l1(e))return{data:null,error:e};return{data:null,error:new l5("Unexpected error in authenticate",e)}}}async _register({friendlyName:e,webauthn:{rpId:t="undefined"!=typeof window?window.location.hostname:void 0,rpOrigins:r="undefined"!=typeof window?[window.location.origin]:void 0,signal:i}={}},s){if(!t)return{data:null,error:new l0("rpId is required for WebAuthn registration")};try{if(!u0())return{data:null,error:new l5("Browser does not support WebAuthn",null)};let{data:n,error:a}=await this._enroll({friendlyName:e});if(!n)return await this.client.mfa.listFactors().then(t=>{var r;return null==(r=t.data)?void 0:r.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:a};let{data:o,error:l}=await this._challenge({factorId:n.id,friendlyName:n.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:s});if(!o)return{data:null,error:l};return this._verify({factorId:n.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:r,type:o.webauthn.type,credential_response:o.webauthn.credential_response}})}catch(e){if(l1(e))return{data:null,error:e};return{data:null,error:new l5("Unexpected error in register",e)}}}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}let u8={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lY,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function u9(e,t,r){return await r()}let u7={};class ce{get jwks(){var e,t;return null!=(t=null==(e=u7[this.storageKey])?void 0:e.jwks)?t:{keys:[]}}set jwks(e){u7[this.storageKey]=Object.assign(Object.assign({},u7[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!=(t=null==(e=u7[this.storageKey])?void 0:e.cachedAt)?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){u7[this.storageKey]=Object.assign(Object.assign({},u7[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},u8),e);if(this.storageKey=s.storageKey,this.instanceID=null!=(t=ce.nextInstanceID[this.storageKey])?t:0,ce.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.instanceID>0&&uh()){const e=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new uV({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=um(s.fetch),this.lock=s.lock||u9,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:uh()&&(null==(r=null==globalThis?void 0:globalThis.navigator)?void 0:r.locks)?this.lock=uG:this.lock=u9,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new u6(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:uf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=uz(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=uz(this.memoryStorage)),uh()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null==(i=this.broadcastChannel)||i.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${lJ}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},r="none";if(uh()&&(t=function(e){let t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(e){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),uh()&&this.detectSessionInUrl&&"none"!==r){let{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),l1(s)&&"AuthImplicitGrantRedirectError"===s.name){let t=null==(e=s.details)?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}let{session:n,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",n,"redirect type",a),await this._saveSession(n),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){if(l1(e))return this._returnResult({error:e});return this._returnResult({error:new l5("Unexpected error during initialization",e)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{let{data:s,error:n}=await uI(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(r=null==(t=null==e?void 0:e.options)?void 0:t.data)?r:{},gotrue_meta_security:{captcha_token:null==(i=null==e?void 0:e.options)?void 0:i.captchaToken}},xform:uM});if(n||!s)return this._returnResult({data:{user:null,session:null},error:n});let a=s.session,o=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",a)),this._returnResult({data:{user:o,session:a},error:null})}catch(e){if(l1(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signUp(e){var t,r,i;try{let s;if("email"in e){let{email:r,password:i,options:n}=e,a=null,o=null;"pkce"===this.flowType&&([a,o]=await uS(this.storage,this.storageKey)),s=await uI(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:r,password:i,data:null!=(t=null==n?void 0:n.data)?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:o},xform:uM})}else if("phone"in e){let{phone:t,password:n,options:a}=e;s=await uI(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!=(r=null==a?void 0:a.data)?r:{},channel:null!=(i=null==a?void 0:a.channel)?i:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:uM})}else throw new l8("You must provide either an email or phone number and a password");let{data:n,error:a}=s;if(a||!n)return this._returnResult({data:{user:null,session:null},error:a});let o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(e){if(l1(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithPassword(e){try{let t;if("email"in e){let{email:r,password:i,options:s}=e;t=await uI(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:uD})}else if("phone"in e){let{phone:r,password:i,options:s}=e;t=await uI(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:uD})}else throw new l8("You must provide either an email or phone number and a password");let{data:r,error:i}=t;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){let e=new l6;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(e){if(l1(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null==(t=e.options)?void 0:t.redirectTo,scopes:null==(r=e.options)?void 0:r.scopes,queryParams:null==(i=e.options)?void 0:i.queryParams,skipBrowserRedirect:null==(s=e.options)?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,i,s,n,a,o,l,u,c,d,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{let c,{chain:d,wallet:m,statement:g,options:y}=e;if(uh())if("object"==typeof m)c=m;else{let e=window;if("ethereum"in e&&"object"==typeof e.ethereum&&"request"in e.ethereum&&"function"==typeof e.ethereum.request)c=e.ethereum;else throw Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof m||!(null==y?void 0:y.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");c=m}let v=new URL(null!=(t=null==y?void 0:y.url)?t:window.location.href),b=await c.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!b||0===b.length)throw Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let w=uJ(b[0]),_=null==(r=null==y?void 0:y.signInWithEthereum)?void 0:r.chainId;_||(_=parseInt(await c.request({method:"eth_chainId"}),16)),p=function(e){var t;let{chainId:r,domain:i,expirationTime:s,issuedAt:n=new Date,nonce:a,notBefore:o,requestId:l,resources:u,scheme:c,uri:d,version:h}=e;if(!Number.isInteger(r))throw Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null==(t=e.statement)?void 0:t.includes("\n"))throw Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);let p=uJ(e.address),f=c?`${c}://${i}`:i,m=e.statement?`${e.statement}
`:"",g=`${f} wants you to sign in with your Ethereum account:
${p}

${m}`,y=`URI: ${d}
Version: ${h}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${n.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),l&&(y+=`
Request ID: ${l}`),u){let e="\nResources:";for(let t of u){if(!t||"string"!=typeof t)throw Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`
- ${t}`}y+=e}return`${g}
${y}`}({domain:v.host,address:w,statement:g,uri:v.href,version:"1",chainId:_,nonce:null==(i=null==y?void 0:y.signInWithEthereum)?void 0:i.nonce,issuedAt:null!=(n=null==(s=null==y?void 0:y.signInWithEthereum)?void 0:s.issuedAt)?n:new Date,expirationTime:null==(a=null==y?void 0:y.signInWithEthereum)?void 0:a.expirationTime,notBefore:null==(o=null==y?void 0:y.signInWithEthereum)?void 0:o.notBefore,requestId:null==(l=null==y?void 0:y.signInWithEthereum)?void 0:l.requestId,resources:null==(u=null==y?void 0:y.signInWithEthereum)?void 0:u.resources}),f=await c.request({method:"personal_sign",params:[(h=p,"0x"+Array.from(new TextEncoder().encode(h),e=>e.toString(16).padStart(2,"0")).join("")),w]})}try{let{data:t,error:r}=await uI(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:f},(null==(c=e.options)?void 0:c.captchaToken)?{gotrue_meta_security:{captcha_token:null==(d=e.options)?void 0:d.captchaToken}}:null),xform:uM});if(r)throw r;if(!t||!t.session||!t.user){let e=new l6;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(e){if(l1(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithSolana(e){var t,r,i,s,n,a,o,l,u,c,d,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{let d,{chain:h,wallet:m,statement:g,options:y}=e;if(uh())if("object"==typeof m)d=m;else{let e=window;if("solana"in e&&"object"==typeof e.solana&&("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))d=e.solana;else throw Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof m||!(null==y?void 0:y.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");d=m}let v=new URL(null!=(t=null==y?void 0:y.url)?t:window.location.href);if("signIn"in d&&d.signIn){let e,t=await d.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},null==y?void 0:y.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),g?{statement:g}:null));if(Array.isArray(t)&&t[0]&&"object"==typeof t[0])e=t[0];else if(t&&"object"==typeof t&&"signedMessage"in t&&"signature"in t)e=t;else throw Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in e&&"signature"in e&&("string"==typeof e.signedMessage||e.signedMessage instanceof Uint8Array)&&e.signature instanceof Uint8Array)p="string"==typeof e.signedMessage?e.signedMessage:new TextDecoder().decode(e.signedMessage),f=e.signature;else throw Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in d)||"function"!=typeof d.signMessage||!("publicKey"in d)||"object"!=typeof d||!d.publicKey||!("toBase58"in d.publicKey)||"function"!=typeof d.publicKey.toBase58)throw Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${v.host} wants you to sign in with your Solana account:`,d.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!=(i=null==(r=null==y?void 0:y.signInWithSolana)?void 0:r.issuedAt)?i:new Date().toISOString()}`,...(null==(s=null==y?void 0:y.signInWithSolana)?void 0:s.notBefore)?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...(null==(n=null==y?void 0:y.signInWithSolana)?void 0:n.expirationTime)?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...(null==(a=null==y?void 0:y.signInWithSolana)?void 0:a.chainId)?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...(null==(o=null==y?void 0:y.signInWithSolana)?void 0:o.nonce)?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...(null==(l=null==y?void 0:y.signInWithSolana)?void 0:l.requestId)?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...(null==(c=null==(u=null==y?void 0:y.signInWithSolana)?void 0:u.resources)?void 0:c.length)?["Resources",...y.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");let e=await d.signMessage(new TextEncoder().encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{let{data:t,error:r}=await uI(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:ud(f)},(null==(d=e.options)?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null==(h=e.options)?void 0:h.captchaToken}}:null),xform:uM});if(r)throw r;if(!t||!t.session||!t.user){let e=new l6;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(e){if(l1(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _exchangeCodeForSession(e){let t=await uy(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(null!=t?t:"").split("/");try{let{data:t,error:s}=await uI(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:uM});if(await uv(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!t||!t.session||!t.user){let e=new l6;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=i?i:null}),error:s})}catch(e){if(l1(e))return this._returnResult({data:{user:null,session:null,redirectType:null},error:e});throw e}}async signInWithIdToken(e){try{let{options:t,provider:r,token:i,access_token:s,nonce:n}=e,{data:a,error:o}=await uI(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:uM});if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!a||!a.session||!a.user){let e=new l6;return this._returnResult({data:{user:null,session:null},error:e})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:a,error:o})}catch(e){if(l1(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOtp(e){var t,r,i,s,n;try{if("email"in e){let{email:i,options:s}=e,n=null,a=null;"pkce"===this.flowType&&([n,a]=await uS(this.storage,this.storageKey));let{error:o}=await uI(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:i,data:null!=(t=null==s?void 0:s.data)?t:{},create_user:null==(r=null==s?void 0:s.shouldCreateUser)||r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:n,code_challenge_method:a},redirectTo:null==s?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){let{phone:t,options:r}=e,{data:a,error:o}=await uI(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!=(i=null==r?void 0:r.data)?i:{},create_user:null==(s=null==r?void 0:r.shouldCreateUser)||s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!=(n=null==r?void 0:r.channel)?n:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o})}throw new l8("You must provide either an email or phone number.")}catch(e){if(l1(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=null==(t=e.options)?void 0:t.redirectTo,s=null==(r=e.options)?void 0:r.captchaToken);let{data:n,error:a}=await uI(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:uM});if(a)throw a;if(!n)throw Error("An error occurred on token verification.");let o=n.session,l=n.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(e){if(l1(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithSSO(e){var t,r,i,s,n;try{let a=null,o=null;"pkce"===this.flowType&&([a,o]=await uS(this.storage,this.storageKey));let l=await uI(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!=(r=null==(t=e.options)?void 0:t.redirectTo)?r:void 0}),(null==(i=null==e?void 0:e.options)?void 0:i.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:uU});return(null==(s=l.data)?void 0:s.url)&&uh()&&!(null==(n=e.options)?void 0:n.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new l4;let{error:i}=await uI(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(l1(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{let t=`${this.url}/resend`;if("email"in e){let{email:r,type:i,options:s}=e,{error:n}=await uI(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:n})}if("phone"in e){let{phone:r,type:i,options:s}=e,{data:n,error:a}=await uI(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:a})}throw new l8("You must provide either an email or phone number and a type")}catch(e){if(l1(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){let e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let t=null,r=await uy(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),null!==r&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};let i=!!t.expires_at&&1e3*t.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){let e=await uy(this.userStorage,this.storageKey+"-user");(null==e?void 0:e.user)?t.user=e.user:t.user=uP()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){var e;let r={value:this.suppressGetSessionWarning};t.user=(e=t.user,new Proxy(e,{get:(e,t,i)=>{if("__isInsecureUserWarningProxy"===t)return!0;if("symbol"==typeof t){let r=t.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r||"Symbol(nodejs.util.inspect.custom)"===r)return Reflect.get(e,t,i)}return r.value||"string"!=typeof t||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(e,t,i)}})),r.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}let{data:s,error:n}=await this._callRefreshToken(t.refresh_token);if(n)return this._returnResult({data:{session:null},error:n});return this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{if(e)return await uI(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:u$});return await this._useSession(async e=>{var t,r,i;let{data:s,error:n}=e;if(n)throw n;return(null==(t=s.session)?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await uI(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(i=null==(r=s.session)?void 0:r.access_token)?i:void 0,xform:u$}):{data:{user:null},error:new l4}})}catch(e){if(l1(e))return l1(e)&&"AuthSessionMissingError"===e.name&&(await this._removeSession(),await uv(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:e});throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{let{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new l4;let n=i.session,a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await uS(this.storage,this.storageKey));let{data:l,error:u}=await uI(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:n.access_token,xform:u$});if(u)throw u;return n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),this._returnResult({data:{user:n.user},error:null})})}catch(e){if(l1(e))return this._returnResult({data:{user:null},error:e});throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new l4;let t=Date.now()/1e3,r=t,i=!0,s=null,{payload:n}=uw(e.access_token);if(n.exp&&(i=(r=n.exp)<=t),i){let{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};s=t}else{let{data:i,error:n}=await this._getUser(e.access_token);if(n)throw n;s={access_token:e.access_token,refresh_token:e.refresh_token,user:i.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(e){if(l1(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){let{data:i,error:s}=t;if(s)throw s;e=null!=(r=i.session)?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new l4;let{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(e){if(l1(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _getSessionFromURL(e,t){try{if(!uh())throw new l9("No browser detected.");if(e.error||e.error_description||e.error_code)throw new l9(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new l7("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new l9("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new l7("No code detected.");let{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;let i=new URL(window.location.href);return i.searchParams.delete("code"),window.history.replaceState(window.history.state,"",i.toString()),{data:{session:t.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:n,expires_in:a,expires_at:o,token_type:l}=e;if(!s||!a||!n||!l)throw new l9("No session defined in URL");let u=Math.round(Date.now()/1e3),c=parseInt(a),d=u+c;o&&(d=parseInt(o));let h=d-u;1e3*h<=3e4&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${c}s`);let p=d-c;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,u);let{data:f,error:m}=await this._getUser(s);if(m)throw m;let g={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:c,expires_at:d,refresh_token:n,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(e){if(l1(e))return this._returnResult({data:{session:null,redirectType:null},error:e});throw e}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await uy(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;let{data:i,error:s}=t;if(s)return this._returnResult({error:s});let n=null==(r=i.session)?void 0:r.access_token;if(n){let{error:t}=await this.admin.signOut(n,e);if(t&&!(l1(t)&&"AuthApiError"===t.name&&(404===t.status||401===t.status||403===t.status)))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await uv(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){let t=Symbol("auth-callback"),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{let{data:{session:i},error:s}=t;if(s)throw s;await (null==(r=this.stateChangeEmitters.get(e))?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(t){await (null==(i=this.stateChangeEmitters.get(e))?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;"pkce"===this.flowType&&([r,i]=await uS(this.storage,this.storageKey,!0));try{return await uI(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}}async getUserIdentities(){var e;try{let{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!=(e=t.user.identities)?e:[]},error:null})}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{let{data:r,error:i}=await this._useSession(async t=>{var r,i,s,n,a;let{data:o,error:l}=t;if(l)throw l;let u=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null==(r=e.options)?void 0:r.redirectTo,scopes:null==(i=e.options)?void 0:i.scopes,queryParams:null==(s=e.options)?void 0:s.queryParams,skipBrowserRedirect:!0});return await uI(this.fetch,"GET",u,{headers:this.headers,jwt:null!=(a=null==(n=o.session)?void 0:n.access_token)?a:void 0})});if(i)throw i;return!uh()||(null==(t=e.options)?void 0:t.skipBrowserRedirect)||window.location.assign(null==r?void 0:r.url),this._returnResult({data:{provider:e.provider,url:null==r?void 0:r.url},error:null})}catch(t){if(l1(t))return this._returnResult({data:{provider:e.provider,url:null},error:t});throw t}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{let{error:i,data:{session:s}}=t;if(i)throw i;let{options:n,provider:a,token:o,access_token:l,nonce:u}=e,{data:c,error:d}=await uI(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!=(r=null==s?void 0:s.access_token)?r:void 0,body:{provider:a,id_token:o,access_token:l,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:uM});if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user)return this._returnResult({data:{user:null,session:null},error:new l6});return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("USER_UPDATED",c.session)),this._returnResult({data:c,error:d})}catch(e){if(l1(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;let{data:s,error:n}=t;if(n)throw n;return await uI(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!=(i=null==(r=s.session)?void 0:r.access_token)?i:void 0})})}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{var r,i;let s=Date.now();return await (r=async r=>(r>0&&await u_(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await uI(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:uM})),i=(e,t)=>{let r=200*Math.pow(2,e);return t&&ut(t)&&Date.now()+r-s<3e4},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{let t=await r(s);if(!i(s,null,t))return void e(t)}catch(e){if(!i(s,e))return void t(e)}})()}))}catch(e){if(this._debug(t,"error",e),l1(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}finally{this._debug(t,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),uh()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let i=await uy(this.storage,this.storageKey);if(i&&this.userStorage){let t=await uy(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!t&&(t={user:i.user},await ug(this.userStorage,this.storageKey+"-user",t)),i.user=null!=(e=null==t?void 0:t.user)?e:uP()}else if(i&&!i.user&&!i.user){let e=await uy(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(i.user=e.user,await uv(this.storage,this.storageKey+"-user"),await ug(this.storage,this.storageKey,i)):i.user=uP()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),null!==i&&await this._removeSession();return}let s=(null!=(t=i.expires_at)?t:1/0)*1e3-Date.now()<9e4;if(this._debug(r,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&i.refresh_token){let{error:e}=await this._callRefreshToken(i.refresh_token);e&&(console.error(e),ut(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{let{data:e,error:t}=await this._getUser(i.access_token);!t&&(null==e?void 0:e.user)?(i.user=e.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(e){console.error("Error getting user data:",e),this._debug(r,"error getting user data, skipping SIGNED_IN notification",e)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(e){this._debug(r,"error",e),console.error(e);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new l4;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ub;let{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new l4;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);let i={data:t.session,error:null};return this.refreshingDeferred.resolve(i),i}catch(e){if(this._debug(i,"error",e),l1(e)){let r={data:null,error:e};return ut(e)||await this._removeSession(),null==(t=this.refreshingDeferred)||t.resolve(r),r}throw null==(r=this.refreshingDeferred)||r.reject(e),e}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){let i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let i=[],s=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(e){i.push(e)}});if(await Promise.all(s),i.length>0){for(let e=0;e<i.length;e+=1)console.error(i[e]);throw i[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;let t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await ug(this.userStorage,this.storageKey+"-user",{user:t.user});let e=Object.assign({},t);delete e.user;let i=uA(e);await ug(this.storage,this.storageKey,i)}else{let e=uA(t);await ug(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await uv(this.storage,this.storageKey),await uv(this.storage,this.storageKey+"-code-verifier"),await uv(this.storage,this.storageKey+"-user"),this.userStorage&&await uv(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&uh()&&(null==window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let i=Math.floor((1e3*r.expires_at-e)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),i<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof uH)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!uh()||!(null==window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null==window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"!==document.visibilityState?this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){let i=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){let[e,t]=await uS(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});i.push(r.toString())}if(null==r?void 0:r.queryParams){let e=new URLSearchParams(r.queryParams);i.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;let{data:i,error:s}=t;return s?this._returnResult({data:null,error:s}):await uI(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null==(r=null==i?void 0:i.session)?void 0:r.access_token})})}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;let{data:s,error:n}=t;if(n)return this._returnResult({data:null,error:n});let a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await uI(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null==(r=null==s?void 0:s.session)?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null==(i=null==o?void 0:o.totp)?void 0:i.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r,i,s;let{data:n,error:a}=t;if(a)return this._returnResult({data:null,error:a});let o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?(i=e.webauthn.credential_response,"toJSON"in i&&"function"==typeof i.toJSON?i.toJSON():{id:i.id,rawId:i.id,response:{attestationObject:ud(new Uint8Array(i.response.attestationObject)),clientDataJSON:ud(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:null!=(s=i.authenticatorAttachment)?s:void 0}):function(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();let r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ud(new Uint8Array(i.authenticatorData)),clientDataJSON:ud(new Uint8Array(i.clientDataJSON)),signature:ud(new Uint8Array(i.signature)),userHandle:i.userHandle?ud(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!=(t=e.authenticatorAttachment)?t:void 0}}(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:u}=await uI(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:i,error:s}=t;if(s)return this._returnResult({data:null,error:s});let n=await uI(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null==(r=null==i?void 0:i.session)?void 0:r.access_token});if(n.error)return n;let{data:a}=n;if("webauthn"!==a.type)return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:r,excludeCredentials:i}=e,s=(0,oA.__rest)(e,["challenge","user","excludeCredentials"]),n=uc(t).buffer,a=Object.assign(Object.assign({},r),{id:uc(r.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:n,user:a});if(i&&i.length>0){o.excludeCredentials=Array(i.length);for(let e=0;e<i.length;e++){let t=i[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:uc(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:r}=e,i=(0,oA.__rest)(e,["challenge","allowCredentials"]),s=uc(t).buffer,n=Object.assign(Object.assign({},i),{challenge:s});if(r&&r.length>0){n.allowCredentials=Array(r.length);for(let e=0;e<r.length;e++){let t=r[e];n.allowCredentials[e]=Object.assign(Object.assign({},t),{id:uc(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return n}(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}})}async _challengeAndVerify(e){let{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;let{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};let i={all:[],phone:[],totp:[],webauthn:[]};for(let r of null!=(e=null==t?void 0:t.factors)?e:[])i.all.push(r),"verified"===r.status&&i[r.factor_type].push(r);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;let{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:s}=uw(r.access_token),n=null;s.aal&&(n=s.aal);let a=n;return(null!=(t=null==(e=r.user.factors)?void 0:e.filter(e=>"verified"===e.status))?t:[]).length>0&&(a="aal2"),{data:{currentLevel:n,nextLevel:a,currentAuthenticationMethods:s.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{let{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?await uI(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new l4})})}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{let{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new l4});let n=await uI(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return n.data&&n.data.redirect_url&&uh()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(n.data.redirect_url),n})}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{let{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new l4});let n=await uI(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return n.data&&n.data.redirect_url&&uh()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(n.data.redirect_url),n})}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}}async _listOAuthGrants(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await uI(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new l4})})}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{let{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?(await uI(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new l4})})}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;let i=Date.now();if((r=this.jwks.keys.find(t=>t.kid===e))&&this.jwks_cached_at+6e5>i)return r;let{data:s,error:n}=await uI(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return s.keys&&0!==s.keys.length&&(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(t=>t.kid===e))?r:null}async getClaims(e,t={}){try{var r;let i,s=e;if(!s){let{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});s=e.session.access_token}let{header:n,payload:a,signature:o,raw:{header:l,payload:u}}=uw(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw Error("JWT has expired")}(a.exp);let c=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks);if(!c){let{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:a,header:n,signature:o},error:null}}let d=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw Error("Invalid alg claim")}}(n.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,(r=`${l}.${u}`,i=[],!function(e,t){for(let r=0;r<e.length;r+=1){let i=e.charCodeAt(r);if(i>55295&&i<=56319){let t=(i-55296)*1024&65535;i=(e.charCodeAt(r+1)-56320&65535|t)+65536,r+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}(i,t)}}(r,e=>i.push(e)),new Uint8Array(i))))throw new ui("Invalid JWT signature");return{data:{claims:a,header:n,signature:o},error:null}}catch(e){if(l1(e))return this._returnResult({data:null,error:e});throw e}}}ce.nextInstanceID={};let ct=ce;class cr extends ct{constructor(e){super(e)}}class ci{constructor(e,t,r){var i,s,n;this.supabaseUrl=e,this.supabaseKey=t;const a=function(e){let t=null==e?void 0:e.trim();if(!t)throw Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t.endsWith("/")?t:t+"/")}catch(e){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!t)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o=`sb-${a.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,i;let{db:s,auth:n,realtime:a,global:o}=e,{db:l,auth:u,realtime:c,global:d}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),n),realtime:Object.assign(Object.assign({},c),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!=(r=null==d?void 0:d.headers)?r:{}),null!=(i=null==o?void 0:o.headers)?i:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=r?r:{},{db:lH,realtime:lG,auth:Object.assign(Object.assign({},lK),{storageKey:o}),global:lW});this.storageKey=null!=(i=l.auth.storageKey)?i:"",this.headers=null!=(s=l.global.headers)?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(n=l.auth)?n:{},this.headers,l.global.fetch),this.fetch=((e,t,r)=>{let i=r?(...e)=>r(...e):(...e)=>fetch(...e),s=Headers;return async(r,n)=>{var a;let o=null!=(a=await t())?a:e,l=new s(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),i(r,Object.assign(Object.assign({},n),{headers:l}))}})(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new oD(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new lV(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new oL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();let{data:r}=await this.auth.getSession();return null!=(t=null==(e=r.session)?void 0:e.access_token)?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:n,flowType:a,lock:o,debug:l,throwOnError:u},c,d){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cr({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:o,debug:l,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new o7(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}}(function(){if("undefined"!=typeof window||void 0===eD.default)return!1;let e=eD.default.version;if(null==e)return!1;let t=e.match(/^v(\d+)\./);return!!t&&18>=parseInt(t[1],10)})()&&console.warn(`  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217`);var cs=e.i(22792);function cn(){return"undefined"!=typeof window&&void 0!==window.document}cs.parse,cs.serialize;let ca={path:"/",sameSite:"lax",httpOnly:!1,maxAge:3456e4},co=/^(.*)[.](0|[1-9][0-9]*)$/;function cl(e,t){if(e===t)return!0;let r=e.match(co);return!!r&&r[1]===t}function cu(e,t,r){let i=r??3180,s=encodeURIComponent(t);if(s.length<=i)return[{name:e,value:t}];let n=[];for(;s.length>0;){let e=s.slice(0,i),t=e.lastIndexOf("%");t>i-3&&(e=e.slice(0,t));let r="";for(;e.length>0;)try{r=decodeURIComponent(e);break}catch(t){if(t instanceof URIError&&"%"===e.at(-3)&&e.length>3)e=e.slice(0,e.length-3);else throw t}n.push(r),s=s.slice(e.length)}return n.map((t,r)=>({name:`${e}.${r}`,value:t}))}async function cc(e,t){let r=await t(e);if(r)return r;let i=[];for(let r=0;;r++){let s=`${e}.${r}`,n=await t(s);if(!n)break;i.push(n)}return i.length>0?i.join(""):null}let cd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ch=" 	\n\r=".split(""),cp=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ch.length;t+=1)e[ch[t].charCodeAt(0)]=-2;for(let t=0;t<cd.length;t+=1)e[cd[t].charCodeAt(0)]=t;return e})();function cf(e){let t=[],r=0,i=0;if(function(e,t){for(let r=0;r<e.length;r+=1){let i=e.charCodeAt(r);if(i>55295&&i<=56319){let t=(i-55296)*1024&65535;i=(e.charCodeAt(r+1)-56320&65535|t)+65536,r+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}(i,t)}}(e,e=>{for(r=r<<8|e,i+=8;i>=6;){let e=r>>i-6&63;t.push(cd[e]),i-=6}}),i>0)for(r<<=6-i,i=6;i>=6;){let e=r>>i-6&63;t.push(cd[e]),i-=6}return t.join("")}function cm(e){let t=[],r=e=>{t.push(String.fromCodePoint(e))},i={utf8seq:0,codepoint:0},s=0,n=0;for(let t=0;t<e.length;t+=1){let a=cp[e.charCodeAt(t)];if(a>-1)for(s=s<<6|a,n+=6;n>=8;)(function(e,t,r){if(0===t.utf8seq){if(e<=127)return r(e);for(let r=1;r<6;r+=1)if((e>>7-r&1)==0){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}})(s>>n-8&255,i,r),n-=8;else if(-2===a)continue;else throw Error(`Invalid Base64-URL character "${e.at(t)}" at position ${t}`)}return t.join("")}let cg="base64-";async function cy({getAll:e,setAll:t,setItems:r,removedItems:i},s){let n=s.cookieEncoding,a=s.cookieOptions??null,o=await e([...r?Object.keys(r):[],...i?Object.keys(i):[]]),l=o?.map(({name:e})=>e)||[],u=Object.keys(i).flatMap(e=>l.filter(t=>cl(t,e))),c=Object.keys(r).flatMap(e=>{let t=new Set(l.filter(t=>cl(t,e))),i=r[e];"base64url"===n&&(i=cg+cf(i));let s=cu(e,i);return s.forEach(e=>{t.delete(e.name)}),u.push(...t),s}),d={...ca,...a,maxAge:0},h={...ca,...a,maxAge:ca.maxAge};delete d.name,delete h.name,await t([...u.map(e=>({name:e,value:"",options:d})),...c.map(({name:e,value:t})=>({name:e,value:t,options:h}))])}if(e.i(76156),void 0!==eD.default&&eD.default.env?.npm_package_name){let e=eD.default.env.npm_package_name;["@supabase/auth-helpers-nextjs","@supabase/auth-helpers-react","@supabase/auth-helpers-remix","@supabase/auth-helpers-sveltekit"].includes(e)&&console.warn(`

   IMPORTANT: Package Consolidation Notice                                
                                                                            
 The ${e.padEnd(35)} package name is deprecated.  
                                                                            
 You are now using @supabase/ssr - a unified solution for all frameworks.  
                                                                            
 The auth-helpers packages have been consolidated into @supabase/ssr       
 to provide better maintenance and consistent APIs across frameworks.      
                                                                            
 Please update your package.json to use @supabase/ssr directly:            
   npm uninstall ${e.padEnd(42)} 
   npm install @supabase/ssr                                               
                                                                            
 For more information, visit:                                              
 https://supabase.com/docs/guides/auth/server-side                         

    `)}async function cv(e){if(!e.userProfile)return{success:!1,error:"No user profile found"};try{let t=function(e,t,i){let s=cn();if(s&&r)return r;if(!e||!t)throw Error(`@supabase/ssr: Your project's URL and API key are required to create a Supabase client!

Check your Supabase project's API settings to find these values

https://supabase.com/dashboard/project/_/settings/api`);let{storage:n}=function(e,t){let r,i,s=e.cookies??null,n=e.cookieEncoding,a={},o={};if(s)if("get"in s){let e=async e=>{let t=e.flatMap(e=>[e,...Array.from({length:5}).map((t,r)=>`${e}.${r}`)]),r=[];for(let e=0;e<t.length;e+=1){let i=await s.get(t[e]);(i||"string"==typeof i)&&r.push({name:t[e],value:i})}return r};if(r=async t=>await e(t),"set"in s&&"remove"in s)i=async e=>{for(let t=0;t<e.length;t+=1){let{name:r,value:i,options:n}=e[t];i?await s.set(r,i,n):await s.remove(r,n)}};else if(t)i=async()=>{console.warn("@supabase/ssr: createServerClient was configured without set and remove cookie methods, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness. Consider switching to the getAll and setAll cookie methods instead of get, set and remove which are deprecated and can be difficult to use correctly.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring a getAll and setAll cookie method (deprecated: alternatively both get, set and remove can be used)")}else if("getAll"in s)if(r=async()=>await s.getAll(),"setAll"in s)i=s.setAll;else if(t)i=async()=>{console.warn("@supabase/ssr: createServerClient was configured without the setAll cookie method, but the client needs to set cookies. This can lead to issues such as random logouts, early session termination or increased token refresh requests. If in NextJS, check your middleware.ts file, route handlers and server actions for correctness.")};else throw Error("@supabase/ssr: createBrowserClient requires configuring both getAll and setAll cookie methods (deprecated: alternatively both get, set and remove can be used)");else throw Error(`@supabase/ssr: ${t?"createServerClient":"createBrowserClient"} requires configuring getAll and setAll cookie methods (deprecated: alternatively use get, set and remove).${cn()?" As this is called in a browser runtime, consider removing the cookies option object to use the document.cookie API automatically.":""}`);else if(!t&&cn())r=()=>{let e;return e=(0,cs.parse)(document.cookie),Object.keys(e).map(t=>({name:t,value:e[t]??""}))},i=e=>{e.forEach(({name:e,value:t,options:r})=>{document.cookie=(0,cs.serialize)(e,t,r)})};else if(t)throw Error("@supabase/ssr: createServerClient must be initialized with cookie options that specify getAll and setAll functions (deprecated, not recommended: alternatively use get, set and remove)");else r=()=>[],i=()=>{throw Error("@supabase/ssr: createBrowserClient in non-browser runtimes (including Next.js pre-rendering mode) was not initialized cookie options that specify getAll and setAll functions (deprecated: alternatively use get, set and remove), but they were needed")};return t?{getAll:r,setAll:i,setItems:a,removedItems:o,storage:{isServer:!0,getItem:async e=>{if("string"==typeof a[e])return a[e];if(o[e])return null;let t=await r([e]),i=await cc(e,async e=>{let r=t?.find(({name:t})=>t===e)||null;return r?r.value:null});if(!i)return null;let s=i;return"string"==typeof i&&i.startsWith(cg)&&(s=cm(i.substring(cg.length))),s},setItem:async(t,s)=>{t.endsWith("-code-verifier")&&await cy({getAll:r,setAll:i,setItems:{[t]:s},removedItems:{}},{cookieOptions:e?.cookieOptions??null,cookieEncoding:n}),a[t]=s,delete o[t]},removeItem:async e=>{delete a[e],o[e]=!0}}}:{getAll:r,setAll:i,setItems:a,removedItems:o,storage:{isServer:!1,getItem:async e=>{let t=await r([e]),i=await cc(e,async e=>{let r=t?.find(({name:t})=>t===e)||null;return r?r.value:null});if(!i)return null;let s=i;return i.startsWith(cg)&&(s=cm(i.substring(cg.length))),s},setItem:async(t,s)=>{let a=await r([t]),o=new Set((a?.map(({name:e})=>e)||[]).filter(e=>cl(e,t))),l=s;"base64url"===n&&(l=cg+cf(s));let u=cu(t,l);u.forEach(({name:e})=>{o.delete(e)});let c={...ca,...e?.cookieOptions,maxAge:0},d={...ca,...e?.cookieOptions,maxAge:ca.maxAge};delete c.name,delete d.name;let h=[...[...o].map(e=>({name:e,value:"",options:c})),...u.map(({name:e,value:t})=>({name:e,value:t,options:d}))];h.length>0&&await i(h)},removeItem:async t=>{let s=await r([t]),n=(s?.map(({name:e})=>e)||[]).filter(e=>cl(e,t)),a={...ca,...e?.cookieOptions,maxAge:0};delete a.name,n.length>0&&await i(n.map(e=>({name:e,value:"",options:a})))}}}}({...void 0,cookieEncoding:(void 0)??"base64url"},!1),a=new ci(e,t,{...void 0,global:{...void 0,headers:{...void 0,"X-Client-Info":"supabase-ssr/0.8.0 createBrowserClient"}},auth:{...void 0,...null,flowType:"pkce",autoRefreshToken:cn(),detectSessionInUrl:cn(),persistSession:!0,storage:n,...null}});return s&&(r=a),a}("https://xrlvfnqnbuwckddrspav.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhybHZmbnFuYnV3Y2tkZHJzcGF2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2ODg3NjYsImV4cCI6MjA4MDI2NDc2Nn0.4V2ZfPLbUaAzkhlzYaVevqo7vsh1dGu8VcTrsfRuxEI"),i=e.answeredQuestions.filter(e=>e.isCorrect).map(e=>e.questionId),s={email:e.userProfile.email,first_name:e.userProfile.firstName,last_name:e.userProfile.lastName,job:e.userProfile.job,total_score:e.totalScore,total_questions:e.totalQuestions,level_1_score:e.levelProgress[1]?.score||0,level_2_score:e.levelProgress[2]?.score||0,level_3_score:e.levelProgress[3]?.score||0,answered_questions:i,unlocked_biases:e.unlockedBiases,all_levels_completed:e.allLevelsCompleted},{error:n}=await t.from("user_scores").upsert(s,{onConflict:"email",ignoreDuplicates:!1});if(n)return console.error("Supabase save error:",n),{success:!1,error:n.message};return{success:!0}}catch(e){return console.error("Error saving user score:",e),{success:!1,error:String(e)}}}function cb(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e?.(i),!1===r||!i.defaultPrevented)return t?.(i)}}var cw=globalThis?.document?W.useLayoutEffect:()=>{},c_=W["useId".toString()]||(()=>void 0),cx=0;function ck(e){let[t,r]=W.useState(c_());return cw(()=>{e||r(e=>e??String(cx++))},[e]),e||(t?`radix-${t}`:"")}function cE(e){let t=W.useRef(e);return W.useEffect(()=>{t.current=e}),W.useMemo(()=>(...e)=>t.current?.(...e),[])}var cS="dismissableLayer.update",cT=W.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cj=W.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:n,onInteractOutside:a,onDismiss:o,...l}=e,u=W.useContext(cT),[c,d]=W.useState(null),h=c?.ownerDocument??globalThis?.document,[,p]=W.useState({}),f=al(t,e=>d(e)),m=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(g),v=c?m.indexOf(c):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,w=v>=y,_=function(e,t=globalThis?.document){let r=cE(e),i=W.useRef(!1),s=W.useRef(()=>{});return W.useEffect(()=>{let e=e=>{if(e.target&&!i.current){let i=function(){cP("dismissableLayer.pointerDownOutside",r,n,{discrete:!0})},n={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=i,t.addEventListener("click",s.current,{once:!0})):i()}else t.removeEventListener("click",s.current);i.current=!1},n=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(n),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>i.current=!0}}(e=>{let t=e.target,r=[...u.branches].some(e=>e.contains(t));w&&!r&&(s?.(e),a?.(e),e.defaultPrevented||o?.())},h),x=function(e,t=globalThis?.document){let r=cE(e),i=W.useRef(!1);return W.useEffect(()=>{let e=e=>{e.target&&!i.current&&cP("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}(e=>{let t=e.target;![...u.branches].some(e=>e.contains(t))&&(n?.(e),a?.(e),e.defaultPrevented||o?.())},h);return!function(e,t=globalThis?.document){let r=cE(e);W.useEffect(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{v===u.layers.size-1&&(i?.(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},h),W.useEffect(()=>{if(c)return r&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(q=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),cC(),()=>{r&&1===u.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=q)}},[c,h,r,u]),W.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),cC())},[c,u]),W.useEffect(()=>{let e=()=>p({});return document.addEventListener(cS,e),()=>document.removeEventListener(cS,e)},[]),(0,z.jsx)(a8.div,{...l,ref:f,style:{pointerEvents:b?w?"auto":"none":void 0,...e.style},onFocusCapture:cb(e.onFocusCapture,x.onFocusCapture),onBlurCapture:cb(e.onBlurCapture,x.onBlurCapture),onPointerDownCapture:cb(e.onPointerDownCapture,_.onPointerDownCapture)})});function cC(){let e=new CustomEvent(cS);document.dispatchEvent(e)}function cP(e,t,r,{discrete:i}){let s=r.originalEvent.target,n=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});if(t&&s.addEventListener(e,t,{once:!0}),i)s&&a6.flushSync(()=>s.dispatchEvent(n));else s.dispatchEvent(n)}cj.displayName="DismissableLayer",W.forwardRef((e,t)=>{let r=W.useContext(cT),i=W.useRef(null),s=al(t,i);return W.useEffect(()=>{let e=i.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,z.jsx)(a8.div,{...e,ref:s})}).displayName="DismissableLayerBranch";var cA="focusScope.autoFocusOnMount",cO="focusScope.autoFocusOnUnmount",cR={bubbles:!1,cancelable:!0},cN=W.forwardRef((e,t)=>{let{loop:r=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:n,...a}=e,[o,l]=W.useState(null),u=cE(s),c=cE(n),d=W.useRef(null),h=al(t,e=>l(e)),p=W.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;W.useEffect(()=>{if(i){let e=function(e){if(p.paused||!o)return;let t=e.target;o.contains(t)?d.current=t:cM(d.current,{select:!0})},t=function(e){if(p.paused||!o)return;let t=e.relatedTarget;null!==t&&(o.contains(t)||cM(d.current,{select:!0}))};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&cM(o)});return o&&r.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[i,o,p.paused]),W.useEffect(()=>{if(o){cD.add(p);let e=document.activeElement;if(!o.contains(e)){let t=new CustomEvent(cA,cR);o.addEventListener(cA,u),o.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let i of e)if(cM(i,{select:t}),document.activeElement!==r)return}(cI(o).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&cM(o))}return()=>{o.removeEventListener(cA,u),setTimeout(()=>{let t=new CustomEvent(cO,cR);o.addEventListener(cO,c),o.dispatchEvent(t),t.defaultPrevented||cM(e??document.body,{select:!0}),o.removeEventListener(cO,c),cD.remove(p)},0)}}},[o,u,c,p]);let f=W.useCallback(e=>{if(!r&&!i||p.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,s=document.activeElement;if(t&&s){var n;let t,i=e.currentTarget,[a,o]=[cL(t=cI(n=i),n),cL(t.reverse(),n)];a&&o?e.shiftKey||s!==o?e.shiftKey&&s===a&&(e.preventDefault(),r&&cM(o,{select:!0})):(e.preventDefault(),r&&cM(a,{select:!0})):s===i&&e.preventDefault()}},[r,i,p.paused]);return(0,z.jsx)(a8.div,{tabIndex:-1,...a,ref:h,onKeyDown:f})});function cI(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function cL(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function cM(e,{select:t=!1}={}){if(e&&e.focus){var r;let i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}cN.displayName="FocusScope";var cD=(u=[],{add(e){let t=u[0];e!==t&&t?.pause(),(u=c$(u,e)).unshift(e)},remove(e){u=c$(u,e),u[0]?.resume()}});function c$(e,t){let r=[...e],i=r.indexOf(t);return -1!==i&&r.splice(i,1),r}var cU=W.forwardRef((e,t)=>{let{container:r,...i}=e,[s,n]=W.useState(!1);cw(()=>n(!0),[]);let a=r||s&&globalThis?.document?.body;return a?a6.default.createPortal((0,z.jsx)(a8.div,{...i,ref:t}),a):null});cU.displayName="Portal";var cB=e=>{var t;let r,i,{present:s,children:n}=e,a=function(e){var t,r;let[i,s]=W.useState(),n=W.useRef({}),a=W.useRef(e),o=W.useRef("none"),[l,u]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},W.useReducer((e,t)=>r[e][t]??e,t));return W.useEffect(()=>{let e=cF(n.current);o.current="mounted"===l?e:"none"},[l]),cw(()=>{let t=n.current,r=a.current;if(r!==e){let i=o.current,s=cF(t);e?u("MOUNT"):"none"===s||t?.display==="none"?u("UNMOUNT"):r&&i!==s?u("ANIMATION_OUT"):u("UNMOUNT"),a.current=e}},[e,u]),cw(()=>{if(i){let e,t=i.ownerDocument.defaultView??window,r=r=>{let s=cF(n.current).includes(r.animationName);if(r.target===i&&s&&(u("ANIMATION_END"),!a.current)){let r=i.style.animationFillMode;i.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===i.style.animationFillMode&&(i.style.animationFillMode=r)})}},s=e=>{e.target===i&&(o.current=cF(n.current))};return i.addEventListener("animationstart",s),i.addEventListener("animationcancel",r),i.addEventListener("animationend",r),()=>{t.clearTimeout(e),i.removeEventListener("animationstart",s),i.removeEventListener("animationcancel",r),i.removeEventListener("animationend",r)}}u("ANIMATION_END")},[i,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:W.useCallback(e=>{e&&(n.current=getComputedStyle(e)),s(e)},[])}}(s),o="function"==typeof n?n({present:a.isPresent}):W.Children.only(n),l=al(a.ref,(t=o,(i=(r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.ref:(i=(r=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof n||a.isPresent?W.cloneElement(o,{ref:l}):null};function cF(e){return e?.animationName||"none"}cB.displayName="Presence";var cq=0;function cV(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var cz="right-scroll-bar-position",cW="width-before-scroll-bar";function cH(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var cK="undefined"!=typeof window?W.useLayoutEffect:W.useEffect,cG=new WeakMap,cJ=(void 0===x&&(x={}),(void 0===k&&(k=function(e){return e}),E=[],S=!1,T={read:function(){if(S)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return E.length?E[E.length-1]:null},useMedium:function(e){var t=k(e,S);return E.push(t),function(){E=E.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(S=!0;E.length;){var t=E;E=[],t.forEach(e)}E={push:function(t){return e(t)},filter:function(){return E}}},assignMedium:function(e){S=!0;var t=[];if(E.length){var r=E;E=[],r.forEach(e),t=E}var i=function(){var r=t;t=[],r.forEach(e)},s=function(){return Promise.resolve().then(i)};s(),E={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),E}}}}).options=(0,oA.__assign)({async:!0,ssr:!1},x),T),cY=function(){},cX=W.forwardRef(function(e,t){var r,i,s,n,a=W.useRef(null),o=W.useState({onScrollCapture:cY,onWheelCapture:cY,onTouchMoveCapture:cY}),l=o[0],u=o[1],c=e.forwardProps,d=e.children,h=e.className,p=e.removeScrollBar,f=e.enabled,m=e.shards,g=e.sideCar,y=e.noRelative,v=e.noIsolation,b=e.inert,w=e.allowPinchZoom,_=e.as,x=e.gapMode,k=(0,oA.__rest)(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=(r=[a,t],i=function(e){return r.forEach(function(t){return cH(t,e)})},(s=(0,W.useState)(function(){return{value:null,callback:i,facade:{get current(){return s.value},set current(value){var e=s.value;e!==value&&(s.value=value,s.callback(value,e))}}}})[0]).callback=i,n=s.facade,cK(function(){var e=cG.get(n);if(e){var t=new Set(e),i=new Set(r),s=n.current;t.forEach(function(e){i.has(e)||cH(e,null)}),i.forEach(function(e){t.has(e)||cH(e,s)})}cG.set(n,r)},[r]),n),S=(0,oA.__assign)((0,oA.__assign)({},k),l);return W.createElement(W.Fragment,null,f&&W.createElement(g,{sideCar:cJ,removeScrollBar:p,shards:m,noRelative:y,noIsolation:v,inert:b,setCallbacks:u,allowPinchZoom:!!w,lockRef:a,gapMode:x}),c?W.cloneElement(W.Children.only(d),(0,oA.__assign)((0,oA.__assign)({},S),{ref:E})):W.createElement(void 0===_?"div":_,(0,oA.__assign)({},S,{className:h,ref:E}),d))});cX.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},cX.classNames={fullWidth:cW,zeroRight:cz};var cQ=function(e){var t=e.sideCar,r=(0,oA.__rest)(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw Error("Sidecar medium not found");return W.createElement(i,(0,oA.__assign)({},r))};cQ.isSideCarExport=!0;var cZ=function(){var e=0,t=null;return{add:function(r){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=V||("undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0);return t&&e.setAttribute("nonce",t),e}())){var i,s;(i=t).styleSheet?i.styleSheet.cssText=r:i.appendChild(document.createTextNode(r)),s=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(s)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},c0=function(){var e=cZ();return function(t,r){W.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},c1=function(){var e=c0();return function(t){return e(t.styles,t.dynamic),null}},c2={left:0,top:0,right:0,gap:0},c5=function(e){return parseInt(e||"",10)||0},c3=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],i=t["padding"===e?"paddingTop":"marginTop"],s=t["padding"===e?"paddingRight":"marginRight"];return[c5(r),c5(i),c5(s)]},c4=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return c2;var t=c3(e),r=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-r+t[2]-t[0])}},c6=c1(),c8="data-scroll-locked",c9=function(e,t,r,i){var s=e.left,n=e.top,a=e.right,o=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(i,";\n   padding-right: ").concat(o,"px ").concat(i,";\n  }\n  body[").concat(c8,"] {\n    overflow: hidden ").concat(i,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(i,";"),"margin"===r&&"\n    padding-left: ".concat(s,"px;\n    padding-top: ").concat(n,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(i,";\n    "),"padding"===r&&"padding-right: ".concat(o,"px ").concat(i,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(cz," {\n    right: ").concat(o,"px ").concat(i,";\n  }\n  \n  .").concat(cW," {\n    margin-right: ").concat(o,"px ").concat(i,";\n  }\n  \n  .").concat(cz," .").concat(cz," {\n    right: 0 ").concat(i,";\n  }\n  \n  .").concat(cW," .").concat(cW," {\n    margin-right: 0 ").concat(i,";\n  }\n  \n  body[").concat(c8,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},c7=function(){var e=parseInt(document.body.getAttribute(c8)||"0",10);return isFinite(e)?e:0},de=function(){W.useEffect(function(){return document.body.setAttribute(c8,(c7()+1).toString()),function(){var e=c7()-1;e<=0?document.body.removeAttribute(c8):document.body.setAttribute(c8,e.toString())}},[])},dt=function(e){var t=e.noRelative,r=e.noImportant,i=e.gapMode,s=void 0===i?"margin":i;de();var n=W.useMemo(function(){return c4(s)},[s]);return W.createElement(c6,{styles:c9(n,!t,s,r?"":"!important")})},dr=!1;if("undefined"!=typeof window)try{var di=Object.defineProperty({},"passive",{get:function(){return dr=!0,!0}});window.addEventListener("test",di,di),window.removeEventListener("test",di,di)}catch(e){dr=!1}var ds=!!dr&&{passive:!1},dn=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&(r.overflowY!==r.overflowX||"TEXTAREA"===e.tagName||"visible"!==r[t])},da=function(e,t){var r=t.ownerDocument,i=t;do{if("undefined"!=typeof ShadowRoot&&i instanceof ShadowRoot&&(i=i.host),dl(e,i)){var s=du(e,i);if(s[1]>s[2])return!0}i=i.parentNode}while(i&&i!==r.body)return!1},dl=function(e,t){return"v"===e?dn(t,"overflowY"):dn(t,"overflowX")},du=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},dc=function(e,t,r,i,s){var n,a=(n=window.getComputedStyle(t).direction,"h"===e&&"rtl"===n?-1:1),o=a*i,l=r.target,u=t.contains(l),c=!1,d=o>0,h=0,p=0;do{if(!l)break;var f=du(e,l),m=f[0],g=f[1]-f[2]-a*m;(m||g)&&dl(e,l)&&(h+=g,p+=m);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!u&&l!==document.body||u&&(t.contains(l)||t===l))return d&&(s&&1>Math.abs(h)||!s&&o>h)?c=!0:!d&&(s&&1>Math.abs(p)||!s&&-o>p)&&(c=!0),c},dd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},dh=function(e){return[e.deltaX,e.deltaY]},dp=function(e){return e&&"current"in e?e.current:e},df=0,dm=[];let dg=(j=function(e){var t=W.useRef([]),r=W.useRef([0,0]),i=W.useRef(),s=W.useState(df++)[0],n=W.useState(c1)[0],a=W.useRef(e);W.useEffect(function(){a.current=e},[e]),W.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=(0,oA.__spreadArray)([e.lockRef.current],(e.shards||[]).map(dp),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var o=W.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!a.current.allowPinchZoom;var s,n=dd(e),o=r.current,l="deltaX"in e?e.deltaX:o[0]-n[0],u="deltaY"in e?e.deltaY:o[1]-n[1],c=e.target,d=Math.abs(l)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var h=window.getSelection(),p=h&&h.anchorNode;if(p&&(p===c||p.contains(c)))return!1;var f=da(d,c);if(!f)return!0;if(f?s=d:(s="v"===d?"h":"v",f=da(d,c)),!f)return!1;if(!i.current&&"changedTouches"in e&&(l||u)&&(i.current=s),!s)return!0;var m=i.current||s;return dc(m,t,e,"h"===m?l:u,!0)},[]),l=W.useCallback(function(e){if(dm.length&&dm[dm.length-1]===n){var r="deltaY"in e?dh(e):dd(e),i=t.current.filter(function(t){var i;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(i=t.delta,i[0]===r[0]&&i[1]===r[1])})[0];if(i&&i.should){e.cancelable&&e.preventDefault();return}if(!i){var s=(a.current.shards||[]).map(dp).filter(Boolean).filter(function(t){return t.contains(e.target)});(s.length>0?o(e,s[0]):!a.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),u=W.useCallback(function(e,r,i,s){var n={name:e,delta:r,target:i,should:s,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(i)};t.current.push(n),setTimeout(function(){t.current=t.current.filter(function(e){return e!==n})},1)},[]),c=W.useCallback(function(e){r.current=dd(e),i.current=void 0},[]),d=W.useCallback(function(t){u(t.type,dh(t),t.target,o(t,e.lockRef.current))},[]),h=W.useCallback(function(t){u(t.type,dd(t),t.target,o(t,e.lockRef.current))},[]);W.useEffect(function(){return dm.push(n),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,ds),document.addEventListener("touchmove",l,ds),document.addEventListener("touchstart",c,ds),function(){dm=dm.filter(function(e){return e!==n}),document.removeEventListener("wheel",l,ds),document.removeEventListener("touchmove",l,ds),document.removeEventListener("touchstart",c,ds)}},[]);var p=e.removeScrollBar,f=e.inert;return W.createElement(W.Fragment,null,f?W.createElement(n,{styles:"\n  .block-interactivity-".concat(s," {pointer-events: none;}\n  .allow-interactivity-").concat(s," {pointer-events: all;}\n")}):null,p?W.createElement(dt,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},cJ.useMedium(j),cQ);var dy=W.forwardRef(function(e,t){return W.createElement(cX,(0,oA.__assign)({},e,{ref:t,sideCar:dg}))});dy.classNames=cX.classNames;var dv=new WeakMap,db=new WeakMap,dw={},d_=0,dx=function(e){return e&&(e.host||dx(e.parentNode))},dk=function(e,t,r,i){var s=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var r=dx(e);return r&&t.contains(r)?r:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});dw[r]||(dw[r]=new WeakMap);var n=dw[r],a=[],o=new Set,l=new Set(s),u=function(e){!e||o.has(e)||(o.add(e),u(e.parentNode))};s.forEach(u);var c=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(o.has(e))c(e);else try{var t=e.getAttribute(i),s=null!==t&&"false"!==t,l=(dv.get(e)||0)+1,u=(n.get(e)||0)+1;dv.set(e,l),n.set(e,u),a.push(e),1===l&&s&&db.set(e,!0),1===u&&e.setAttribute(r,"true"),s||e.setAttribute(i,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return c(t),o.clear(),d_++,function(){a.forEach(function(e){var t=dv.get(e)-1,s=n.get(e)-1;dv.set(e,t),n.set(e,s),t||(db.has(e)||e.removeAttribute(i),db.delete(e)),s||e.removeAttribute(r)}),--d_||(dv=new WeakMap,dv=new WeakMap,db=new WeakMap,dw={})}},dE=function(e,t,r){void 0===r&&(r="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),s=t||("undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body);return s?(i.push.apply(i,Array.from(s.querySelectorAll("[aria-live], script"))),dk(i,s,r,"aria-hidden")):function(){return null}},dS="Dialog",[dT,dj]=a4(dS),[dC,dP]=dT(dS),dA=e=>{let{__scopeDialog:t,children:r,open:i,defaultOpen:s,onOpenChange:n,modal:a=!0}=e,o=W.useRef(null),l=W.useRef(null),[u=!1,c]=function({prop:e,defaultProp:t,onChange:r=()=>{}}){let[i,s]=function({defaultProp:e,onChange:t}){let r=W.useState(e),[i]=r,s=W.useRef(i),n=cE(t);return W.useEffect(()=>{s.current!==i&&(n(i),s.current=i)},[i,s,n]),r}({defaultProp:t,onChange:r}),n=void 0!==e,a=n?e:i,o=cE(r);return[a,W.useCallback(t=>{if(n){let r="function"==typeof t?t(e):t;r!==e&&o(r)}else s(t)},[n,e,s,o])]}({prop:i,defaultProp:s,onChange:n});return(0,z.jsx)(dC,{scope:t,triggerRef:o,contentRef:l,contentId:ck(),titleId:ck(),descriptionId:ck(),open:u,onOpenChange:c,onOpenToggle:W.useCallback(()=>c(e=>!e),[c]),modal:a,children:r})};dA.displayName=dS;var dO="DialogTrigger",dR=W.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,s=dP(dO,r),n=al(t,s.triggerRef);return(0,z.jsx)(a8.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":dX(s.open),...i,ref:n,onClick:cb(e.onClick,s.onOpenToggle)})});dR.displayName=dO;var dN="DialogPortal",[dI,dL]=dT(dN,{forceMount:void 0}),dM=e=>{let{__scopeDialog:t,forceMount:r,children:i,container:s}=e,n=dP(dN,t);return(0,z.jsx)(dI,{scope:t,forceMount:r,children:W.Children.map(i,e=>(0,z.jsx)(cB,{present:r||n.open,children:(0,z.jsx)(cU,{asChild:!0,container:s,children:e})}))})};dM.displayName=dN;var dD="DialogOverlay",d$=W.forwardRef((e,t)=>{let r=dL(dD,e.__scopeDialog),{forceMount:i=r.forceMount,...s}=e,n=dP(dD,e.__scopeDialog);return n.modal?(0,z.jsx)(cB,{present:i||n.open,children:(0,z.jsx)(dU,{...s,ref:t})}):null});d$.displayName=dD;var dU=W.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,s=dP(dD,r);return(0,z.jsx)(dy,{as:au,allowPinchZoom:!0,shards:[s.contentRef],children:(0,z.jsx)(a8.div,{"data-state":dX(s.open),...i,ref:t,style:{pointerEvents:"auto",...i.style}})})}),dB="DialogContent",dF=W.forwardRef((e,t)=>{let r=dL(dB,e.__scopeDialog),{forceMount:i=r.forceMount,...s}=e,n=dP(dB,e.__scopeDialog);return(0,z.jsx)(cB,{present:i||n.open,children:n.modal?(0,z.jsx)(dq,{...s,ref:t}):(0,z.jsx)(dV,{...s,ref:t})})});dF.displayName=dB;var dq=W.forwardRef((e,t)=>{let r=dP(dB,e.__scopeDialog),i=W.useRef(null),s=al(t,r.contentRef,i);return W.useEffect(()=>{let e=i.current;if(e)return dE(e)},[]),(0,z.jsx)(dz,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:cb(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:cb(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:cb(e.onFocusOutside,e=>e.preventDefault())})}),dV=W.forwardRef((e,t)=>{let r=dP(dB,e.__scopeDialog),i=W.useRef(!1),s=W.useRef(!1);return(0,z.jsx)(dz,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(i.current||r.triggerRef.current?.focus(),t.preventDefault()),i.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(i.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));let n=t.target;r.triggerRef.current?.contains(n)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),dz=W.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:n,...a}=e,o=dP(dB,r),l=W.useRef(null),u=al(t,l);return W.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??cV()),document.body.insertAdjacentElement("beforeend",e[1]??cV()),cq++,()=>{1===cq&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),cq--}},[]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(cN,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:n,children:(0,z.jsx)(cj,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":dX(o.open),...a,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(d1,{titleId:o.titleId}),(0,z.jsx)(d2,{contentRef:l,descriptionId:o.descriptionId})]})]})}),dW="DialogTitle",dH=W.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,s=dP(dW,r);return(0,z.jsx)(a8.h2,{id:s.titleId,...i,ref:t})});dH.displayName=dW;var dK="DialogDescription",dG=W.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,s=dP(dK,r);return(0,z.jsx)(a8.p,{id:s.descriptionId,...i,ref:t})});dG.displayName=dK;var dJ="DialogClose",dY=W.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,s=dP(dJ,r);return(0,z.jsx)(a8.button,{type:"button",...i,ref:t,onClick:cb(e.onClick,()=>s.onOpenChange(!1))})});function dX(e){return e?"open":"closed"}dY.displayName=dJ;var dQ="DialogTitleWarning",[dZ,d0]=(C={contentName:dB,titleName:dW,docsSlug:"dialog"},a=W.createContext(C),(o=e=>{let{children:t,...r}=e,i=W.useMemo(()=>r,Object.values(r));return(0,z.jsx)(a.Provider,{value:i,children:t})}).displayName=dQ+"Provider",[o,function(e){let t=W.useContext(a);if(t)return t;if(void 0!==C)return C;throw Error(`\`${e}\` must be used within \`${dQ}\``)}]),d1=({titleId:e})=>{let t=d0(dQ),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return W.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},d2=({contentRef:e,descriptionId:t})=>{let r=d0("DialogDescriptionWarning"),i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return W.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(i))},[i,e,t]),null},d5="AlertDialog",[d3,d4]=a4(d5,[dj]),d6=dj(),d8=e=>{let{__scopeAlertDialog:t,...r}=e,i=d6(t);return(0,z.jsx)(dA,{...i,...r,modal:!0})};d8.displayName=d5,W.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=d6(r);return(0,z.jsx)(dR,{...s,...i,ref:t})}).displayName="AlertDialogTrigger";var d9=e=>{let{__scopeAlertDialog:t,...r}=e,i=d6(t);return(0,z.jsx)(dM,{...i,...r})};d9.displayName="AlertDialogPortal";var d7=W.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=d6(r);return(0,z.jsx)(d$,{...s,...i,ref:t})});d7.displayName="AlertDialogOverlay";var he="AlertDialogContent",[ht,hr]=d3(he),hi=W.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:i,...s}=e,n=d6(r),a=W.useRef(null),o=al(t,a),l=W.useRef(null);return(0,z.jsx)(dZ,{contentName:he,titleName:hs,docsSlug:"alert-dialog",children:(0,z.jsx)(ht,{scope:r,cancelRef:l,children:(0,z.jsxs)(dF,{role:"alertdialog",...n,...s,ref:o,onOpenAutoFocus:cb(s.onOpenAutoFocus,e=>{e.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,z.jsx)(ad,{children:i}),(0,z.jsx)(hd,{contentRef:a})]})})})});hi.displayName=he;var hs="AlertDialogTitle",hn=W.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=d6(r);return(0,z.jsx)(dH,{...s,...i,ref:t})});hn.displayName=hs;var ha="AlertDialogDescription",ho=W.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=d6(r);return(0,z.jsx)(dG,{...s,...i,ref:t})});ho.displayName=ha;var hl=W.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,s=d6(r);return(0,z.jsx)(dY,{...s,...i,ref:t})});hl.displayName="AlertDialogAction";var hu="AlertDialogCancel",hc=W.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...i}=e,{cancelRef:s}=hr(hu,r),n=d6(r),a=al(t,s);return(0,z.jsx)(dY,{...n,...i,ref:a})});hc.displayName=hu;var hd=({contentRef:e})=>{let t=`\`${he}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${he}\` by passing a \`${ha}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${he}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return W.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null};let hh=W.forwardRef(({className:e,...t},r)=>(0,z.jsx)(d7,{className:a1("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));hh.displayName=d7.displayName;let hp=W.forwardRef(({className:e,...t},r)=>(0,z.jsxs)(d9,{children:[(0,z.jsx)(hh,{}),(0,z.jsx)(hi,{ref:r,className:a1("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));hp.displayName=hi.displayName;let hf=({className:e,...t})=>(0,z.jsx)("div",{className:a1("flex flex-col space-y-2 text-center sm:text-left",e),...t});hf.displayName="AlertDialogHeader";let hm=({className:e,...t})=>(0,z.jsx)("div",{className:a1("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});hm.displayName="AlertDialogFooter";let hg=W.forwardRef(({className:e,...t},r)=>(0,z.jsx)(hn,{ref:r,className:a1("text-lg font-semibold",e),...t}));hg.displayName=hn.displayName;let hy=W.forwardRef(({className:e,...t},r)=>(0,z.jsx)(ho,{ref:r,className:a1("text-sm text-muted-foreground",e),...t}));hy.displayName=ho.displayName;let hv=W.forwardRef(({className:e,...t},r)=>(0,z.jsx)(hl,{ref:r,className:a1(a2(),e),...t}));hv.displayName=hl.displayName;let hb=W.forwardRef(({className:e,...t},r)=>(0,z.jsx)(hc,{ref:r,className:a1(a2({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));function hw({initialState:e,onReset:t}){let r,i,s,n,[a,o]=(0,W.useReducer)(function e(t,r){switch(r.type){case"START_LEVEL":{let e=oj.filter(e=>e.level_id===r.payload.id),i=t.answeredQuestions.filter(e=>e.isCorrect).map(e=>e.questionId),s=oP(e.filter(e=>!i.includes(e.id))).map(e=>({...e,options:oP([...e.options])}));return{...t,gameState:"playing",currentLevelId:r.payload.id,questions:s,currentQuestionIndex:0,selectedAnswer:null,isScanning:!1,scanResult:null,showExplanation:!1}}case"SELECT_ANSWER":{if(null!==t.selectedAnswer||t.isScanning)return t;let{answerIndex:e,question:i}=r.payload,s=i.options[e].is_correct;return{...t,selectedAnswer:e,isScanning:!0,scanResult:s?"success":"error"}}case"SCAN_COMPLETE":{let e=t.questions?.[t.currentQuestionIndex];if(!e||null===t.selectedAnswer)return t;let r="success"===t.scanResult,i={...t.levelProgress},s=t.answeredQuestions.some(t=>t.questionId===e.id&&t.isCorrect),n=i[t.currentLevelId].score;r&&!s&&(n+=1),i[t.currentLevelId]={...i[t.currentLevelId],score:n};let a=e.options.find(e=>e.is_correct),o=new Set(t.unlockedBiases);a?.bias_id&&o.add(a.bias_id);let l={questionId:e.id,isCorrect:r,answeredAt:Date.now()},u=[...t.answeredQuestions.filter(t=>t.questionId!==e.id),l],c=Object.values(i).reduce((e,t)=>e+t.score,0);return{...t,isScanning:!1,showExplanation:!0,levelProgress:i,unlockedBiases:Array.from(o),answeredQuestions:u,totalScore:c}}case"NEXT_QUESTION":if(t.currentQuestionIndex<t.questions.length-1)return{...t,currentQuestionIndex:t.currentQuestionIndex+1,selectedAnswer:null,scanResult:null,showExplanation:!1};return e(t,{type:"COMPLETE_LEVEL"});case"COMPLETE_LEVEL":{let e=t.currentLevelId,r={...t.levelProgress,[e]:{...t.levelProgress[e],completed:!0}},i=oT.every(e=>r[e.id]?.completed);return{...t,gameState:"levelComplete",levelProgress:r,allLevelsCompleted:i}}case"CHANGE_GAME_STATE":return{...t,gameState:r.payload,selectedAnswer:null,showExplanation:!1,scanResult:null,isScanning:!1};case"SELECT_WIKI_BIAS":return{...t,selectedBias:r.payload};case"SHOW_CERTIFICATE":return{...t,showCertificate:r.payload};case"SHOW_RESET_DIALOG":return{...t,showResetDialog:r.payload};case"RESET":return{...t,gameState:"menu",showResetDialog:!1};default:return t}},{...e,selectedAnswer:null,isScanning:!1,scanResult:null,showExplanation:!1,selectedBias:null,showCertificate:!1,showResetDialog:!1}),{userProfile:l,gameState:u,currentLevelId:c,questions:d,currentQuestionIndex:h,selectedAnswer:p,isScanning:f,scanResult:m,showExplanation:g,levelProgress:y,unlockedBiases:v,allLevelsCompleted:b,selectedBias:w,showCertificate:_,showResetDialog:x}=a;(0,W.useEffect)(()=>{let e={userProfile:a.userProfile,gameState:a.gameState,currentLevelId:a.currentLevelId,questions:a.questions,currentQuestionIndex:a.currentQuestionIndex,levelProgress:a.levelProgress,unlockedBiases:a.unlockedBiases,completedQuestionIds:a.completedQuestionIds,answeredQuestions:a.answeredQuestions,allLevelsCompleted:a.allLevelsCompleted,totalScore:a.totalScore,totalQuestions:a.totalQuestions};oS(e),a.userProfile&&cv(e).catch(e=>{console.error("Failed to save to Supabase:",e)})},[a]);let k=oT.find(e=>e.id===c)||oT[0],E=d?.[h],S=e=>{null!==p||f||o({type:"SELECT_ANSWER",payload:{answerIndex:e,question:E}})},T=(0,W.useCallback)(()=>o({type:"SCAN_COMPLETE"}),[]),j=e=>o({type:"START_LEVEL",payload:e}),C=e=>o({type:"CHANGE_GAME_STATE",payload:e}),P=e=>o({type:"SELECT_WIKI_BIAS",payload:e}),A=e=>o({type:"SHOW_CERTIFICATE",payload:e}),O=e=>o({type:"SHOW_RESET_DIALOG",payload:e}),R=e=>{let t=y[e];return t&&0!==t.total?t.score/t.total*100:0},N=Object.values(y).reduce((e,t)=>e+t.score,0),I=Object.values(y).reduce((e,t)=>e+t.total,0);return(0,z.jsxs)("div",{className:"min-h-screen bg-gray-950 text-white relative",children:[(0,z.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,z.jsx)("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-cyan-500/5 rounded-full blur-3xl"}),(0,z.jsx)("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"}),(0,z.jsx)("div",{className:"absolute inset-0 opacity-[0.02]",style:{backgroundImage:"radial-gradient(circle at 1px 1px, #fff 1px, transparent 0)",backgroundSize:"40px 40px"}})]}),(0,z.jsxs)("div",{className:"relative z-10",children:["menu"===u&&(0,z.jsx)(nH.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen p-8",children:(0,z.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,z.jsxs)("div",{className:"text-center mb-12",children:[(0,z.jsxs)(nH.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},className:"inline-flex items-center gap-3 mb-4",children:[(0,z.jsx)(n6,{className:"w-12 h-12 text-cyan-400"}),(0,z.jsx)("h1",{className:"font-bold bg-gradient-to-r from-cyan-400 via-purple-500 to-pink-500 bg-clip-text text-transparent text-6xl py-4",children:"Cognitive Labs"})]}),(0,z.jsxs)("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto mb-0",children:["Bienvenue ",(0,z.jsx)("span",{className:"text-cyan-400 font-semibold",children:l?.firstName})," ! Entranez votre cerveau  dtecter les biais cognitifs utiliss en UX Design."]})]}),(0,z.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8 mt-0 pt-4",children:[(0,z.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[(0,z.jsxs)(a3,{className:"p-6 bg-gray-900/50 border-gray-800",children:[(0,z.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,z.jsx)(n8,{className:"w-5 h-5 text-yellow-500"}),"Votre Progression"]}),(0,z.jsx)(oh,{level1Progress:R(1),level2Progress:R(2),level3Progress:R(3),currentLevel:k.id})]}),b&&(0,z.jsx)(nH.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,z.jsx)(a3,{className:"p-6 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border-yellow-500/30",children:(0,z.jsxs)("div",{className:"text-center",children:[(0,z.jsx)(an,{className:"w-12 h-12 text-yellow-500 mx-auto mb-3"}),(0,z.jsx)("h3",{className:"text-lg font-bold text-white mb-2",children:"Formation Termine !"}),(0,z.jsxs)("p",{className:"text-gray-400 text-sm mb-4",children:["Flicitations ",l?.firstName," ! Rcuprez votre diplme."]}),(0,z.jsxs)(a5,{onClick:()=>A(!0),className:"w-full bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-black font-semibold",children:[(0,z.jsx)(an,{className:"w-4 h-4 mr-2"}),"Obtenir mon diplme"]})]})})}),(0,z.jsxs)(a5,{variant:"outline",size:"sm",className:"w-full mt-6 border-gray-700 hover:border-red-500 hover:bg-red-500/10 bg-transparent",onClick:()=>O(!0),children:[(0,z.jsx)(n7,{className:"w-4 h-4 mr-2"}),"Recommencer le jeu"]})]}),(0,z.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,z.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Choisissez votre niveau"}),oT.map((e,t)=>{let r=(e=>{if(1===e.id)return!0;let t=oT.find(t=>t.id===e.id-1);return!!t&&R(t.id)>=70})(e),i=y[e.id];return(0,z.jsx)(nH.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1*t},children:(0,z.jsx)(a3,{className:`p-6 transition-all duration-300 ${r?"bg-gray-900/50 border-gray-700 hover:border-cyan-500/50 cursor-pointer":"bg-gray-900/30 border-gray-800 opacity-50"}`,onClick:()=>r&&j(e),style:{borderLeftWidth:"4px",borderLeftColor:r?e.theme_color:"#333"},children:(0,z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex-1",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,z.jsx)("span",{className:"font-bold text-3xl",style:{color:e.theme_color},children:e.name_fr}),i.completed&&(0,z.jsx)(n9,{className:"w-5 h-5 text-yellow-500"})]}),(0,z.jsx)("p",{className:"text-gray-400 mb-3 text-lg",children:e.description}),r&&(0,z.jsxs)("div",{className:"flex items-center gap-4",children:[(0,z.jsx)(od,{value:R(e.id),className:"flex-1 h-2"}),(0,z.jsxs)("span",{className:"text-gray-500 font-mono text-base",children:[i.score,"/",i.total]})]}),!r&&(0,z.jsxs)("p",{className:"text-red-400/70 flex items-center gap-2 text-lg",children:[(0,z.jsx)(ar,{className:"w-4 h-4"}),"Requiert 70% au niveau prcdent"]})]}),r&&(0,z.jsx)(at,{className:"w-8 h-8 text-gray-600",style:{color:e.theme_color}})]})})},e.id)}),(0,z.jsxs)(a5,{variant:"outline",size:"lg",className:"w-full mt-6 border-gray-700 hover:border-purple-500 hover:bg-purple-500/10 bg-transparent text-lg py-3",onClick:()=>C("wiki"),children:[(0,z.jsx)(ae,{className:"w-5 h-5 mr-2"}),"Bibliothque des Biais (",v.length,"/",oC.length,")"]})]})]})]})}),"playing"===u&&(E?(0,z.jsxs)(nH.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen p-4 md:p-8",children:[(0,z.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,z.jsx)(a5,{variant:"ghost",onClick:()=>C("menu"),className:"text-gray-400 hover:text-white",children:" Retour"}),(0,z.jsxs)("div",{className:"flex items-center gap-4",children:[(0,z.jsx)("span",{className:"font-bold font-mono",style:{color:k.theme_color},children:k.name_fr}),(0,z.jsxs)("span",{className:"text-gray-500 font-mono",children:[h+1,"/",d.length]})]})]}),(0,z.jsx)("div",{className:"mb-8",children:(0,z.jsx)(od,{value:h/d.length*100,className:"h-2"})}),(0,z.jsx)(n1,{mode:"wait",children:(0,z.jsxs)(nH.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},exit:{x:-50,opacity:0},children:[(0,z.jsxs)(a3,{className:"p-6 md:p-8 bg-gray-900/50 border-gray-800 mb-6",children:[(0,z.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,z.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${k.theme_color}20`,border:`2px solid ${k.theme_color}`},children:(0,z.jsx)(n6,{className:"w-5 h-5",style:{color:k.theme_color}})}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("p",{className:"text-xs text-gray-500 font-mono mb-2",children:["SITUATION #",E.id]}),(0,z.jsx)("p",{className:"text-lg md:text-xl text-white leading-relaxed",children:E.scenario})]})]}),"PRICE_GRID"===E.ui_interaction&&E.experience_data?(0,z.jsx)(oy,{options:E.experience_data.options,onSelect:e=>S(e),disabled:null!==p}):(0,z.jsx)("div",{className:"space-y-3",children:E.options.map((e,t)=>{let r=p===t,i=e.is_correct,s="border-gray-700 bg-gray-800/50 hover:border-cyan-500/50 hover:bg-cyan-500/10";return g?i?s="border-green-500 bg-green-500/20":r&&!i&&(s="border-red-500 bg-red-500/20"):r&&(s="border-cyan-500 bg-cyan-500/20"),(0,z.jsx)(nH.button,{onClick:()=>S(t),disabled:null!==p,className:`w-full p-4 rounded-xl border-2 text-left transition-all duration-300 ${s}`,whileHover:null===p?{scale:1.02}:{},whileTap:null===p?{scale:.98}:{},children:(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${g&&i?"bg-green-500 text-black":g&&r&&!i?"bg-red-500 text-white":"bg-gray-700 text-gray-300"}`,children:String.fromCharCode(65+t)}),(0,z.jsx)("span",{className:"text-white",children:e.text})]})},t)})})]}),(0,z.jsx)(n1,{children:g&&(0,z.jsxs)(nH.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:[(0,z.jsx)(a3,{className:`p-6 mb-6 ${"success"===m?"bg-green-500/10 border-green-500/50":"bg-red-500/10 border-red-500/50"}`,children:(0,z.jsxs)("div",{className:"flex items-start gap-3",children:["success"===m?(0,z.jsx)(ai,{className:"w-6 h-6 text-green-500 flex-shrink-0"}):(0,z.jsx)(as,{className:"w-6 h-6 text-red-500 flex-shrink-0"}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:`font-bold mb-2 ${"success"===m?"text-green-400":"text-red-400"}`,children:"success"===m?"Excellente analyse !":"Biais dtect dans votre raisonnement"}),(0,z.jsx)("p",{className:"text-gray-300",children:E.explanation}),(()=>{let e=E.options.find(e=>e.is_correct);if(e?.bias_id){let t=oC.find(t=>t.bias_id===e.bias_id);if(t)return(0,z.jsxs)("div",{className:"mt-4 p-3 rounded-lg bg-gray-900/50 border border-gray-700",children:[(0,z.jsx)("p",{className:"text-xs text-cyan-400 font-mono mb-1",children:" AJOUT  VOTRE BIBLIOTHQUE"}),(0,z.jsx)("p",{className:"text-white font-semibold",children:t.name}),(0,z.jsx)("p",{className:"text-gray-500 text-sm",children:t.category})]})}return null})()]})]})}),(0,z.jsxs)(a5,{onClick:()=>o({type:"NEXT_QUESTION"}),className:"w-full",size:"lg",style:{backgroundColor:k.theme_color,color:"#000"},children:[h<d.length-1?"Question Suivante":"Voir les Rsultats",(0,z.jsx)(at,{className:"w-5 h-5 ml-2"})]})]})})]},E.id)})]}),(0,z.jsx)(of,{isScanning:f,result:m,onComplete:T})]}):null),"levelComplete"===u&&(i=(r=y[k.id]).score/r.total*100,n=(s=oT.find(e=>e.id===k.id+1))&&i>=s.unlock_criteria,(0,z.jsx)(nH.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen flex items-center justify-center p-8",children:(0,z.jsxs)(a3,{className:"max-w-lg w-full p-8 bg-gray-900/50 border-gray-800 text-center",children:[(0,z.jsx)(nH.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.2},children:(0,z.jsx)(n9,{className:"w-20 h-20 mx-auto mb-6",style:{color:k.theme_color}})}),(0,z.jsxs)("h2",{className:"text-3xl font-bold text-white mb-2",children:["Bravo ",l?.firstName," !"]}),(0,z.jsxs)("p",{className:"text-gray-400 mb-4",children:["Niveau ",k.name_fr," termin"]}),(0,z.jsxs)("div",{className:"my-8",children:[(0,z.jsxs)("div",{className:"text-6xl font-bold mb-2",style:{color:i>=70?"#00FF88":i>=50?"#FFD700":"#FF4444"},children:[Math.round(i),"%"]}),(0,z.jsxs)("p",{className:"text-gray-400",children:[r.score," / ",r.total," bonnes rponses"]})]}),i>=70?(0,z.jsx)("p",{className:"text-green-400 mb-6",children:" Excellent travail ! Votre cerveau est afft !"}):i>=50?(0,z.jsx)("p",{className:"text-yellow-400 mb-6",children:" Pas mal ! Continuez  vous entraner."}):(0,z.jsx)("p",{className:"text-red-400 mb-6",children:" Courage ! La pratique fait le matre."}),n&&s&&(0,z.jsx)(nH.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"p-4 rounded-lg bg-green-500/10 border border-green-500/50 mb-6",children:(0,z.jsxs)("p",{className:"text-green-400 font-semibold",children:[" Niveau ",s.name_fr," dbloqu !"]})}),(0,z.jsxs)("div",{className:"flex flex-col gap-3",children:[n&&s&&(0,z.jsxs)(a5,{onClick:()=>j(s),size:"lg",style:{backgroundColor:s.theme_color,color:"#000"},children:["Commencer le niveau ",s.name_fr]}),(0,z.jsxs)(a5,{variant:"outline",onClick:()=>j(k),className:"border-gray-700",children:[(0,z.jsx)(n7,{className:"w-4 h-4 mr-2"}),"Refaire ce niveau"]}),(0,z.jsx)(a5,{variant:"ghost",onClick:()=>C("menu"),children:"Retour au menu"})]})]})})),"wiki"===u&&(0,z.jsxs)(nH.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen p-4 md:p-8",children:[(0,z.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,z.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[(0,z.jsx)(ae,{className:"w-8 h-8 text-purple-500"}),"Bibliothque des Biais"]}),(0,z.jsxs)("p",{className:"text-gray-400 mt-2",children:[v.length," / ",oC.length," concepts dbloqus"]})]}),(0,z.jsx)(a5,{variant:"outline",onClick:()=>C("menu"),className:"border-gray-700",children:" Retour"})]}),(0,z.jsx)(od,{value:v.length/oC.length*100,className:"h-2 mb-8"}),oT.map(e=>{let t=oC.filter(t=>t.level_unlocked===e.id);return(0,z.jsxs)("div",{className:"mb-8",children:[(0,z.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",style:{color:e.theme_color},children:[(0,z.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.theme_color}}),"Niveau ",e.name_fr]}),(0,z.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,z.jsx)(ow,{bias:e,isUnlocked:v.includes(e.bias_id),onClick:()=>P(e)},e.bias_id))})]},e.id)})]}),(0,z.jsx)(n1,{children:w&&(0,z.jsx)(nH.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>P(null),children:(0,z.jsx)(nH.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"max-w-lg w-full",onClick:e=>e.stopPropagation(),children:(0,z.jsxs)(a3,{className:"p-6 bg-gray-900 border-gray-700",children:[(0,z.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:w.name}),(0,z.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-mono bg-cyan-500/20 text-cyan-400 border border-cyan-500/40 mb-4",children:w.category}),(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"text-sm font-semibold text-gray-400 mb-2",children:"DFINITION"}),(0,z.jsx)("p",{className:"text-gray-300",children:w.definition})]}),(0,z.jsxs)("div",{className:"p-4 rounded-lg bg-gray-800/50 border border-gray-700",children:[(0,z.jsxs)("h3",{className:"text-sm font-semibold text-yellow-500 mb-2 flex items-center gap-2",children:[(0,z.jsx)(as,{className:"w-4 h-4"}),"CONTRE-TACTIQUE UX"]}),(0,z.jsx)("p",{className:"text-gray-300",children:w.counter_tactic})]})]}),(0,z.jsx)(a5,{className:"w-full mt-6",onClick:()=>P(null),children:"Fermer"})]})})})})]})]}),(0,z.jsx)(n1,{children:_&&l&&(0,z.jsx)(ok,{user:l,score:N,totalQuestions:I,onClose:()=>A(!1),onReset:t})}),(0,z.jsx)(d8,{open:x,onOpenChange:O,children:(0,z.jsxs)(hp,{className:"bg-gray-900 border-gray-800",children:[(0,z.jsxs)(hf,{children:[(0,z.jsx)(hg,{className:"text-white",children:"Recommencer le jeu ?"}),(0,z.jsx)(hy,{className:"text-gray-400",children:"tes-vous sr de vouloir recommencer ? Toute votre progression sera perdue. Cette action est irrversible."})]}),(0,z.jsxs)(hm,{children:[(0,z.jsx)(hb,{className:"bg-gray-800 text-white border-gray-700 hover:bg-gray-700",children:"Annuler"}),(0,z.jsx)(hv,{onClick:()=>{O(!1),t()},className:"bg-red-600 hover:bg-red-700 text-white",children:"Oui, recommencer"})]})]})})]})}hb.displayName=hc.displayName;let h_=n4("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),hx=n4("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),hk=n4("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),hE=n4("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),hS=n4("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);function hT({className:e,type:t,...r}){return(0,z.jsx)("input",{type:t,"data-slot":"input",className:a1("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}var hj=W.forwardRef((e,t)=>(0,z.jsx)(a8.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function hC({className:e,...t}){return(0,z.jsx)(hj,{"data-slot":"label",className:a1("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function hP({onComplete:e}){let[t,r]=(0,W.useState)({firstName:"",lastName:"",email:"",job:""}),[i,s]=(0,W.useState)({});return(0,z.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[(0,z.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-secondary to-background"}),(0,z.jsx)("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl"}),(0,z.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent/10 rounded-full blur-3xl"}),(0,z.jsxs)(nH.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative z-10 w-full max-w-md",children:[(0,z.jsxs)("div",{className:"text-center mb-8",children:[(0,z.jsx)(nH.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.2},className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 border border-primary/30 mb-6",children:(0,z.jsx)(n6,{className:"w-10 h-10 text-primary"})}),(0,z.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary via-accent to-destructive bg-clip-text text-transparent mb-2",children:"Bienvenue sur Cognitive Labs"}),(0,z.jsx)("p",{className:"text-muted-foreground",children:"Crez votre profil pour commencer votre parcours d'apprentissage"})]}),(0,z.jsx)(a3,{className:"p-6 bg-card/70 border-border backdrop-blur-sm",children:(0,z.jsxs)("form",{onSubmit:r=>{let i;r.preventDefault(),i={},t.firstName.trim()||(i.firstName="Requis"),t.lastName.trim()||(i.lastName="Requis"),t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(i.email="Email invalide"):i.email="Requis",t.job.trim()||(i.job="Requis"),s(i),0===Object.keys(i).length&&e(t)},className:"space-y-5",children:[(0,z.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,z.jsxs)("div",{className:"space-y-2",children:[(0,z.jsxs)(hC,{htmlFor:"firstName",className:"text-muted-foreground flex items-center gap-2",children:[(0,z.jsx)(h_,{className:"w-4 h-4 text-primary"}),"Prnom"]}),(0,z.jsx)(hT,{id:"firstName",value:t.firstName,onChange:e=>r({...t,firstName:e.target.value}),className:"bg-secondary/50 border-border focus:border-primary text-foreground",placeholder:"Jean"}),i.firstName&&(0,z.jsx)("p",{className:"text-destructive text-xs",children:i.firstName})]}),(0,z.jsxs)("div",{className:"space-y-2",children:[(0,z.jsx)(hC,{htmlFor:"lastName",className:"text-muted-foreground",children:"Nom"}),(0,z.jsx)(hT,{id:"lastName",value:t.lastName,onChange:e=>r({...t,lastName:e.target.value}),className:"bg-secondary/50 border-border focus:border-primary text-foreground",placeholder:"Dupont"}),i.lastName&&(0,z.jsx)("p",{className:"text-destructive text-xs",children:i.lastName})]})]}),(0,z.jsxs)("div",{className:"space-y-2",children:[(0,z.jsxs)(hC,{htmlFor:"email",className:"text-muted-foreground flex items-center gap-2",children:[(0,z.jsx)(hx,{className:"w-4 h-4 text-primary"}),"Email"]}),(0,z.jsx)(hT,{id:"email",type:"email",value:t.email,onChange:e=>r({...t,email:e.target.value}),className:"bg-secondary/50 border-border focus:border-primary text-foreground",placeholder:"jean.dupont@email.com"}),i.email&&(0,z.jsx)("p",{className:"text-destructive text-xs",children:i.email})]}),(0,z.jsxs)("div",{className:"space-y-2",children:[(0,z.jsxs)(hC,{htmlFor:"job",className:"text-muted-foreground flex items-center gap-2",children:[(0,z.jsx)(hk,{className:"w-4 h-4 text-primary"}),"Poste / Fonction"]}),(0,z.jsx)(hT,{id:"job",value:t.job,onChange:e=>r({...t,job:e.target.value}),className:"bg-secondary/50 border-border focus:border-primary text-foreground",placeholder:"UX Designer, Product Manager..."}),i.job&&(0,z.jsx)("p",{className:"text-destructive text-xs",children:i.job})]}),(0,z.jsxs)(a5,{type:"submit",size:"lg",className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-primary-foreground font-semibold",children:[(0,z.jsx)(hS,{className:"w-4 h-4 mr-2"}),"Commencer l'aventure",(0,z.jsx)(hE,{className:"w-4 h-4 ml-2"})]})]})}),(0,z.jsx)("p",{className:"text-center text-muted-foreground text-sm mt-4",children:"Vos donnes restent prives et ne sont jamais partages."})]})]})}hj.displayName="Label";let hA=e=>({userProfile:e,gameState:"menu",currentLevelId:1,questions:[],currentQuestionIndex:0,levelProgress:oT.reduce((e,t)=>(e[t.id]={score:0,total:20,completed:!1},e),{}),unlockedBiases:[],completedQuestionIds:[],answeredQuestions:[],allLevelsCompleted:!1,totalScore:0,totalQuestions:20*oT.length});function hO(){let[e,t]=(0,W.useState)(null),[r,i]=(0,W.useState)(!1);return((0,W.useEffect)(()=>{try{let e=(()=>{try{let e=window.localStorage.getItem(oE);if(null===e)return null;return JSON.parse(e)}catch(e){return console.error("Failed to load state from localStorage:",e),window.localStorage.removeItem(oE),null}})();e&&t(e)}catch(e){console.error("Failed to load state from localStorage",e)}finally{i(!0)}},[]),r)?e&&e.userProfile?(0,z.jsx)(hw,{initialState:e,onReset:()=>{if(window.confirm("tes-vous sr de vouloir recommencer ? Toute votre progression sera perdue.")&&e&&e.userProfile){let r=hA(e.userProfile);oS(r),t(r)}}}):(0,z.jsx)(hP,{onComplete:e=>{let r=hA(e);oS(r),t(r)}}):null}e.s(["default",()=>hO],31713)}]);